


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>pytest documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/flask.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/pygments_pytest.css" />
    <link rel="stylesheet" type="text/css" href="_static/_static/css/badge_only.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="canonical" href="https://docs.pytest.org/en/7.1.x/contents.html" />
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="search" title="Search" href="search.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = './';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="#">pytest-7.1</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pytest documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="full-pytest-documentation">
<span id="toc"></span><h1>Full pytest documentation<a class="headerlink" href="#full-pytest-documentation" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://media.readthedocs.org/pdf/pytest/latest/pytest.pdf">Download latest version as PDF</a></p>
<div class="section" id="start-here">
<h2>Start here<a class="headerlink" href="#start-here" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-getting-started"></span><div class="section" id="get-started">
<span id="id1"></span><h3>Get Started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h3>
<div class="section" id="install-pytest">
<span id="installation"></span><span id="getstarted"></span><h4>Install <code class="docutils literal notranslate"><span class="pre">pytest</span></code><a class="headerlink" href="#install-pytest" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> requires: Python 3.7+ or PyPy3.</p>
<ol class="arabic simple">
<li><p>Run the following command in your command line:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U pytest
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Check that you installed the correct version:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pytest --version
pytest <span class="m">7</span>.1.3
</pre></div>
</div>
</div>
<div class="section" id="create-your-first-test">
<span id="simpletest"></span><h4>Create your first test<a class="headerlink" href="#create-your-first-test" title="Permalink to this headline">¶</a></h4>
<p>Create a new file called <code class="docutils literal notranslate"><span class="pre">test_sample.py</span></code>, containing a function, and a test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_sample.py</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">test_answer</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
<p>The test</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_sample.py <span class=" -Color -Color-Red">F</span>                                                     <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_answer ________________________________</span>

    def test_answer():
&gt;       assert func(3) == 5
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 4 == 5</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 4 = func(3)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_sample.py</span>:6: AssertionError
========================= short test summary info ==========================
FAILED test_sample.py::test_answer - assert 4 == 5
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">[100%]</span></code> refers to the overall progress of running all test cases. After it finishes, pytest then shows a failure report because <code class="docutils literal notranslate"><span class="pre">func(3)</span></code> does not return <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement to verify test expectations. pytest’s <a class="reference external" href="https://docs.python.org/3/reference/simple_stmts.html#assert" title="(in Python v3.10)"><span class="xref std std-ref">Advanced assertion introspection</span></a> will intelligently report intermediate values of the assert expression so you can avoid the many names <a class="reference external" href="https://docs.python.org/3/library/unittest.html#testcase-objects" title="(in Python v3.10)"><span class="xref std std-ref">of JUnit legacy methods</span></a>.</p>
</div>
</div>
<div class="section" id="run-multiple-tests">
<h4>Run multiple tests<a class="headerlink" href="#run-multiple-tests" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> will run all files of the form test_*.py or *_test.py in the current directory and its subdirectories. More generally, it follows <a class="reference internal" href="contents.html#test-discovery"><span class="std std-ref">standard test discovery rules</span></a>.</p>
</div>
<div class="section" id="assert-that-a-certain-exception-is-raised">
<h4>Assert that a certain exception is raised<a class="headerlink" href="#assert-that-a-certain-exception-is-raised" title="Permalink to this headline">¶</a></h4>
<p>Use the <a class="reference internal" href="contents.html#assertraises"><span class="std std-ref">raises</span></a> helper to assert that some code raises an exception:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_sysexit.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_mytest</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">SystemExit</span><span class="p">):</span>
        <span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Execute the test function with “quiet” reporting mode:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_sysexit.py
<span class=" -Color -Color-Green">.</span>                                                                    <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-q/--quiet</span></code> flag keeps the output brief in this and following examples.</p>
</div>
</div>
<div class="section" id="group-multiple-tests-in-a-class">
<h4>Group multiple tests in a class<a class="headerlink" href="#group-multiple-tests-in-a-class" title="Permalink to this headline">¶</a></h4>
<p>Once you develop multiple tests, you may want to group them into a class. pytest makes it easy to create a class containing more than one test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_class.py</span>
<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;this&quot;</span>
        <span class="k">assert</span> <span class="s2">&quot;h&quot;</span> <span class="ow">in</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">test_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;check&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> discovers all tests following its <a class="reference internal" href="contents.html#test-discovery"><span class="std std-ref">Conventions for Python test discovery</span></a>, so it finds both <code class="docutils literal notranslate"><span class="pre">test_</span></code> prefixed functions. There is no need to subclass anything, but make sure to prefix your class with <code class="docutils literal notranslate"><span class="pre">Test</span></code> otherwise the class will be skipped. We can simply run the module by passing its filename:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_class.py
<span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span>                                                                   <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________________ TestClass.test_two ____________________________</span>

self = &lt;test_class.TestClass object at 0xdeadbeef0001&gt;

    def test_two(self):
        x = &quot;hello&quot;
&gt;       assert hasattr(x, &quot;check&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert False</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where False = hasattr(&#39;hello&#39;, &#39;check&#39;)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_class.py</span>:8: AssertionError
========================= short test summary info ==========================
FAILED test_class.py::TestClass::test_two - AssertionError: assert False
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>The first test passed and the second failed. You can easily see the intermediate values in the assertion to help you understand the reason for the failure.</p>
<p>Grouping tests in classes can be beneficial for the following reasons:</p>
<blockquote>
<div><ul class="simple">
<li><p>Test organization</p></li>
<li><p>Sharing fixtures for tests only in that particular class</p></li>
<li><p>Applying marks at the class level and having them implicitly apply to all tests</p></li>
</ul>
</div></blockquote>
<p>Something to be aware of when grouping tests inside classes is that each test has a unique instance of the class.
Having each test share the same class instance would be very detrimental to test isolation and would promote poor test practices.
This is outlined below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_class_demo.py</span>
<span class="k">class</span> <span class="nc">TestClassDemoInstance</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">test_one</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">test_two</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -k TestClassDemoInstance -q
<span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span>                                                                   <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________ TestClassDemoInstance.test_two ______________________</span>

self = &lt;test_class_demo.TestClassDemoInstance object at 0xdeadbeef0002&gt;

    def test_two(self):
&gt;       assert self.value == 1
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0 == 1</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 0 = &lt;test_class_demo.TestClassDemoInstance object at 0xdeadbeef0002&gt;.value</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_class_demo.py</span>:9: AssertionError
========================= short test summary info ==========================
FAILED test_class_demo.py::TestClassDemoInstance::test_two - assert 0 == 1
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>Note that attributes added at class level are <em>class attributes</em>, so they will be shared between tests.</p>
</div>
<div class="section" id="request-a-unique-temporary-directory-for-functional-tests">
<h4>Request a unique temporary directory for functional tests<a class="headerlink" href="#request-a-unique-temporary-directory-for-functional-tests" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> provides <a class="reference internal" href="contents.html#document-builtin"><span class="doc">Builtin fixtures/function arguments</span></a> to request arbitrary resources, like a unique temporary directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_tmp_path.py</span>
<span class="k">def</span> <span class="nf">test_needsfiles</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">)</span>
    <span class="k">assert</span> <span class="mi">0</span>
</pre></div>
</div>
<p>List the name <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> in the test function signature and <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will lookup and call a fixture factory to create the resource before performing the test function call. Before the test runs, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> creates a unique-per-test-invocation temporary directory:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_tmp_path.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________________ test_needsfiles ______________________________</span>

tmp_path = PosixPath(&#39;PYTEST_TMPDIR/test_needsfiles0&#39;)

    def test_needsfiles(tmp_path):
        print(tmp_path)
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_tmp_path.py</span>:3: AssertionError
--------------------------- Captured stdout call ---------------------------
PYTEST_TMPDIR/test_needsfiles0
========================= short test summary info ==========================
FAILED test_tmp_path.py::test_needsfiles - assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>More info on temporary directory handling is available at <a class="reference internal" href="contents.html#tmp-path-handling"><span class="std std-ref">Temporary directories and files</span></a>.</p>
<p>Find out what kind of builtin <a class="reference internal" href="contents.html#fixtures"><span class="std std-ref">pytest fixtures</span></a> exist with the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --fixtures   <span class="c1"># shows builtin and custom fixtures</span>
</pre></div>
</div>
<p>Note that this command omits fixtures with leading <code class="docutils literal notranslate"><span class="pre">_</span></code> unless the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option is added.</p>
</div>
<div class="section" id="continue-reading">
<h4>Continue reading<a class="headerlink" href="#continue-reading" title="Permalink to this headline">¶</a></h4>
<p>Check out additional pytest resources to help you customize tests for your unique workflow:</p>
<ul class="simple">
<li><p>“<a class="reference internal" href="contents.html#usage"><span class="std std-ref">How to invoke pytest</span></a>” for command line invocation examples</p></li>
<li><p>“<a class="reference internal" href="contents.html#existingtestsuite"><span class="std std-ref">How to use pytest with an existing test suite</span></a>” for working with pre-existing tests</p></li>
<li><p>“<a class="reference internal" href="contents.html#mark"><span class="std std-ref">How to mark test functions with attributes</span></a>” for information on the <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> mechanism</p></li>
<li><p>“<a class="reference internal" href="contents.html#fixtures"><span class="std std-ref">Fixtures reference</span></a>” for providing a functional baseline to your tests</p></li>
<li><p>“<a class="reference internal" href="contents.html#plugins"><span class="std std-ref">Writing plugins</span></a>” for managing and writing plugins</p></li>
<li><p>“<a class="reference internal" href="contents.html#goodpractices"><span class="std std-ref">Good Integration Practices</span></a>” for virtualenv and test layouts</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-guides">
<h2>How-to guides<a class="headerlink" href="#how-to-guides" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-how-to/usage"></span><div class="section" id="how-to-invoke-pytest">
<span id="usage"></span><h3>How to invoke pytest<a class="headerlink" href="#how-to-invoke-pytest" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#command-line-flags"><span class="std std-ref">Complete pytest command-line flag reference</span></a></p>
</div>
<p>In general, pytest is invoked with the command <code class="docutils literal notranslate"><span class="pre">pytest</span></code> (see below for <a class="reference internal" href="#invoke-other"><span class="std std-ref">other ways to invoke pytest</span></a>). This will execute all tests in all files whose names follow the form <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> or <code class="docutils literal notranslate"><span class="pre">\*_test.py</span></code>
in the current directory and its subdirectories. More generally, pytest follows <a class="reference internal" href="contents.html#test-discovery"><span class="std std-ref">standard test discovery rules</span></a>.</p>
<div class="section" id="specifying-which-tests-to-run">
<span id="select-tests"></span><h4>Specifying which tests to run<a class="headerlink" href="#specifying-which-tests-to-run" title="Permalink to this headline">¶</a></h4>
<p>Pytest supports several ways to run and select tests from the command-line.</p>
<p><strong>Run tests in a module</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest test_mod.py
</pre></div>
</div>
<p><strong>Run tests in a directory</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest testing/
</pre></div>
</div>
<p><strong>Run tests by keyword expressions</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -k <span class="s2">&quot;MyClass and not method&quot;</span>
</pre></div>
</div>
<p>This will run tests which contain names that match the given <em>string expression</em> (case-insensitive),
which can include Python operators that use filenames, class names and function names as variables.
The example above will run <code class="docutils literal notranslate"><span class="pre">TestMyClass.test_something</span></code>  but not <code class="docutils literal notranslate"><span class="pre">TestMyClass.test_method_simple</span></code>.</p>
<p id="nodeids"><strong>Run tests by node ids</strong></p>
<p>Each collected test is assigned a unique <code class="docutils literal notranslate"><span class="pre">nodeid</span></code> which consist of the module filename followed
by specifiers like class names, function names and parameters from parametrization, separated by <code class="docutils literal notranslate"><span class="pre">::</span></code> characters.</p>
<p>To run a specific test within a module:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest test_mod.py::test_func
</pre></div>
</div>
<p>Another example specifying a test method in the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest test_mod.py::TestClass::test_method
</pre></div>
</div>
<p><strong>Run tests by marker expressions</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -m slow
</pre></div>
</div>
<p>Will run all tests which are decorated with the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.slow</span></code> decorator.</p>
<p>For more information see <a class="reference internal" href="contents.html#mark"><span class="std std-ref">marks</span></a>.</p>
<p><strong>Run tests from packages</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs pkg.testing
</pre></div>
</div>
<p>This will import <code class="docutils literal notranslate"><span class="pre">pkg.testing</span></code> and use its filesystem location to find and run tests from.</p>
</div>
<div class="section" id="getting-help-on-version-option-names-environment-variables">
<h4>Getting help on version, option names, environment variables<a class="headerlink" href="#getting-help-on-version-option-names-environment-variables" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --version   <span class="c1"># shows where pytest was imported from</span>
pytest --fixtures  <span class="c1"># show available builtin function arguments</span>
pytest -h <span class="p">|</span> --help <span class="c1"># show help on command line and config file options</span>
</pre></div>
</div>
</div>
<div class="section" id="profiling-test-execution-duration">
<span id="durations"></span><h4>Profiling test execution duration<a class="headerlink" href="#profiling-test-execution-duration" title="Permalink to this headline">¶</a></h4>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.0.</span></p>
</div>
<p>To get a list of the slowest 10 test durations over 1.0s long:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --durations<span class="o">=</span><span class="m">10</span> --durations-min<span class="o">=</span><span class="m">1</span>.0
</pre></div>
</div>
<p>By default, pytest will not show test durations that are too small (&lt;0.005s) unless <code class="docutils literal notranslate"><span class="pre">-vv</span></code> is passed on the command-line.</p>
</div>
<div class="section" id="managing-loading-of-plugins">
<h4>Managing loading of plugins<a class="headerlink" href="#managing-loading-of-plugins" title="Permalink to this headline">¶</a></h4>
<div class="section" id="early-loading-plugins">
<h5>Early loading plugins<a class="headerlink" href="#early-loading-plugins" title="Permalink to this headline">¶</a></h5>
<p>You can early-load plugins (internal and external) explicitly in the command-line with the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">p</span> <span class="n">mypluginmodule</span>
</pre></div>
</div>
<p>The option receives a <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter, which can be:</p>
<ul>
<li><p>A full module dotted name, for example <code class="docutils literal notranslate"><span class="pre">myproject.plugins</span></code>. This dotted name must be importable.</p></li>
<li><p>The entry-point name of a plugin. This is the name passed to <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> when the plugin is
registered. For example to early-load the <a class="reference external" href="https://pypi.org/project/pytest-cov/">pytest-cov</a> plugin you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">p</span> <span class="n">pytest_cov</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="disabling-plugins">
<h5>Disabling plugins<a class="headerlink" href="#disabling-plugins" title="Permalink to this headline">¶</a></h5>
<p>To disable loading specific plugins at invocation time, use the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option
together with the prefix <code class="docutils literal notranslate"><span class="pre">no:</span></code>.</p>
<p>Example: to disable loading the plugin <code class="docutils literal notranslate"><span class="pre">doctest</span></code>, which is responsible for
executing doctest tests from text files, invoke pytest like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -p no:doctest
</pre></div>
</div>
</div>
</div>
<div class="section" id="other-ways-of-calling-pytest">
<span id="invoke-other"></span><h4>Other ways of calling pytest<a class="headerlink" href="#other-ways-of-calling-pytest" title="Permalink to this headline">¶</a></h4>
<div class="section" id="calling-pytest-through-python-m-pytest">
<span id="invoke-python"></span><h5>Calling pytest through <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code><a class="headerlink" href="#calling-pytest-through-python-m-pytest" title="Permalink to this headline">¶</a></h5>
<p>You can invoke testing through the Python interpreter from the command line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>python -m pytest [...]
</pre></div>
</div>
<p>This is almost equivalent to invoking the command line script <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">[...]</span></code>
directly, except that calling via <code class="docutils literal notranslate"><span class="pre">python</span></code> will also add the current directory to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.</p>
</div>
<div class="section" id="calling-pytest-from-python-code">
<span id="pytest-main-usage"></span><h5>Calling pytest from Python code<a class="headerlink" href="#calling-pytest-from-python-code" title="Permalink to this headline">¶</a></h5>
<p>You can invoke <code class="docutils literal notranslate"><span class="pre">pytest</span></code> from Python code directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">retcode</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>this acts as if you would call “pytest” from the command line.
It will not raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#SystemExit" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SystemExit</span></code></a> but return the <a class="reference internal" href="contents.html#exit-codes"><span class="std std-ref">exit code</span></a> instead.
You can pass in options and arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">retcode</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-x&quot;</span><span class="p">,</span> <span class="s2">&quot;mytestdir&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can specify additional plugins to <code class="docutils literal notranslate"><span class="pre">pytest.main</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of myinvoke.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">class</span> <span class="nc">MyPlugin</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">pytest_sessionfinish</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;*** test run reporting finishing&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-qq&quot;</span><span class="p">],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">MyPlugin</span><span class="p">()]))</span>
</pre></div>
</div>
<p>Running it will show that <code class="docutils literal notranslate"><span class="pre">MyPlugin</span></code> was added and its
hook was invoked:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ python myinvoke.py
*** test run reporting finishing
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> will result in importing your tests and any modules
that they import. Due to the caching mechanism of python’s import system,
making subsequent calls to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> from the same process will not
reflect changes to those files between the calls. For this reason, making
multiple calls to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> from the same process (in order to re-run
tests, for example) is not recommended.</p>
</div>
</div>
</div>
</div>
<span id="document-how-to/assert"></span><div class="section" id="how-to-write-and-report-assertions-in-tests">
<span id="assert"></span><h3>How to write and report assertions in tests<a class="headerlink" href="#how-to-write-and-report-assertions-in-tests" title="Permalink to this headline">¶</a></h3>
<div class="section" id="asserting-with-the-assert-statement">
<span id="assert-with-the-assert-statement"></span><h4>Asserting with the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement<a class="headerlink" href="#asserting-with-the-assert-statement" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> allows you to use the standard Python <code class="docutils literal notranslate"><span class="pre">assert</span></code> for verifying
expectations and values in Python tests.  For example, you can write the
following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_assert1.py</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">3</span>


<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">f</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span>
</pre></div>
</div>
<p>to assert that your function returns a certain value. If this assertion fails
you will see the return value of the function call:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_assert1.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_assert1.py <span class=" -Color -Color-Red">F</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_function _______________________________</span>

    def test_function():
&gt;       assert f() == 4
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 3 == 4</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 3 = f()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_assert1.py</span>:6: AssertionError
========================= short test summary info ==========================
FAILED test_assert1.py::test_function - assert 3 == 4
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> has support for showing the values of the most common subexpressions
including calls, attributes, comparisons, and binary and unary
operators. (See <a class="reference internal" href="contents.html#tbreportdemo"><span class="std std-ref">Demo of Python failure reports with pytest</span></a>).  This allows you to use the
idiomatic python constructs without boilerplate code while not losing
introspection information.</p>
<p>However, if you specify a message with the assertion like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;value was odd, should be even&quot;</span>
</pre></div>
</div>
<p>then no assertion introspection takes places at all and the message
will be simply shown in the traceback.</p>
<p>See <a class="reference internal" href="#assert-details"><span class="std std-ref">Assertion introspection details</span></a> for more information on assertion introspection.</p>
</div>
<div class="section" id="assertions-about-expected-exceptions">
<span id="assertraises"></span><h4>Assertions about expected exceptions<a class="headerlink" href="#assertions-about-expected-exceptions" title="Permalink to this headline">¶</a></h4>
<p>In order to write assertions about raised exceptions, you can use
<a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> as a context manager like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_zero_division</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
        <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
</pre></div>
</div>
<p>and if you need to have access to the actual exception info you may use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_recursion_depth</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">excinfo</span><span class="p">:</span>

        <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
            <span class="n">f</span><span class="p">()</span>

        <span class="n">f</span><span class="p">()</span>
    <span class="k">assert</span> <span class="s2">&quot;maximum recursion&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">excinfo</span></code> is an <a class="reference internal" href="contents.html#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code></a> instance, which is a wrapper around
the actual exception raised.  The main attributes of interest are
<code class="docutils literal notranslate"><span class="pre">.type</span></code>, <code class="docutils literal notranslate"><span class="pre">.value</span></code> and <code class="docutils literal notranslate"><span class="pre">.traceback</span></code>.</p>
<p>You can pass a <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword parameter to the context-manager to test
that a regular expression matches on the string representation of an exception
(similar to the <code class="docutils literal notranslate"><span class="pre">TestCase.assertRaisesRegex</span></code> method from <code class="docutils literal notranslate"><span class="pre">unittest</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">myfunc</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Exception 123 raised&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_match</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;.* 123 .*&quot;</span><span class="p">):</span>
        <span class="n">myfunc</span><span class="p">()</span>
</pre></div>
</div>
<p>The regexp parameter of the <code class="docutils literal notranslate"><span class="pre">match</span></code> method is matched with the <code class="docutils literal notranslate"><span class="pre">re.search</span></code>
function, so in the above example <code class="docutils literal notranslate"><span class="pre">match='123'</span></code> would have worked as
well.</p>
<p>There’s an alternate form of the <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> function where you pass
a function that will be executed with the given <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> and
assert that the given exception is raised:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">ExpectedException</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>The reporter will provide you with helpful output in case of failures such as <em>no
exception</em> or <em>wrong exception</em>.</p>
<p>Note that it is also possible to specify a “raises” argument to
<code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code>, which checks that the test is failing in a more
specific way than just having any exception raised:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">raises</span><span class="o">=</span><span class="ne">IndexError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_f</span><span class="p">():</span>
    <span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> is likely to be better for cases where you are
testing exceptions your own code is deliberately raising, whereas using
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code> with a check function is probably better for something
like documenting unfixed bugs (where the test describes what “should” happen)
or bugs in dependencies.</p>
</div>
<div class="section" id="assertions-about-expected-warnings">
<span id="assertwarns"></span><h4>Assertions about expected warnings<a class="headerlink" href="#assertions-about-expected-warnings" title="Permalink to this headline">¶</a></h4>
<p>You can check that code raises a particular warning using
<a class="reference internal" href="contents.html#warns"><span class="std std-ref">pytest.warns</span></a>.</p>
</div>
<div class="section" id="making-use-of-context-sensitive-comparisons">
<span id="newreport"></span><h4>Making use of context-sensitive comparisons<a class="headerlink" href="#making-use-of-context-sensitive-comparisons" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> has rich support for providing context-sensitive information
when it encounters comparisons.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_assert2.py</span>
<span class="k">def</span> <span class="nf">test_set_comparison</span><span class="p">():</span>
    <span class="n">set1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;1308&quot;</span><span class="p">)</span>
    <span class="n">set2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;8035&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">set1</span> <span class="o">==</span> <span class="n">set2</span>
</pre></div>
</div>
<p>if you run this module:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_assert2.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_assert2.py <span class=" -Color -Color-Red">F</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ test_set_comparison ____________________________</span>

    def test_set_comparison():
        set1 = set(&quot;1308&quot;)
        set2 = set(&quot;8035&quot;)
&gt;       assert set1 == set2
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert {&#39;0&#39;, &#39;1&#39;, &#39;3&#39;, &#39;8&#39;} == {&#39;0&#39;, &#39;3&#39;, &#39;5&#39;, &#39;8&#39;}</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Extra items in the left set:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;1&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Extra items in the right set:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;5&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Use -v to get more diff</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_assert2.py</span>:4: AssertionError
========================= short test summary info ==========================
FAILED test_assert2.py::test_set_comparison - AssertionError: assert {&#39;0&#39;...
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>Special comparisons are done for a number of cases:</p>
<ul class="simple">
<li><p>comparing long strings: a context diff is shown</p></li>
<li><p>comparing long sequences: first failing indices</p></li>
<li><p>comparing dicts: different entries</p></li>
</ul>
<p>See the <a class="reference internal" href="contents.html#tbreportdemo"><span class="std std-ref">reporting demo</span></a> for many more examples.</p>
</div>
<div class="section" id="defining-your-own-explanation-for-failed-assertions">
<h4>Defining your own explanation for failed assertions<a class="headerlink" href="#defining-your-own-explanation-for-failed-assertions" title="Permalink to this headline">¶</a></h4>
<p>It is possible to add your own detailed explanations by implementing
the <code class="docutils literal notranslate"><span class="pre">pytest_assertrepr_compare</span></code> hook.</p>
<dl class="py function">
<dt>
<code class="sig-name descname"><span class="pre">pytest_assertrepr_compare</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_assertrepr_compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return explanation for comparisons in failing assert expressions.</p>
<p>Return None for no custom explanation, otherwise return a list
of strings. The strings will be joined by newlines but any newlines
<em>in</em> a string will be escaped. Note that all but the first line will
be indented slightly, the intention is for the first line to be a summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>op</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>left</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>right</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<p>As an example consider adding the following hook in a <a class="reference internal" href="contents.html#conftest-py"><span class="std std-ref">conftest.py</span></a>
file which provides an alternative explanation for <code class="docutils literal notranslate"><span class="pre">Foo</span></code> objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">from</span> <span class="nn">test_foocompare</span> <span class="kn">import</span> <span class="n">Foo</span>


<span class="k">def</span> <span class="nf">pytest_assertrepr_compare</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">Foo</span><span class="p">)</span> <span class="ow">and</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;==&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s2">&quot;Comparing Foo instances:&quot;</span><span class="p">,</span>
            <span class="s2">&quot;   vals: </span><span class="si">{}</span><span class="s2"> != </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">left</span><span class="o">.</span><span class="n">val</span><span class="p">,</span> <span class="n">right</span><span class="o">.</span><span class="n">val</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</div>
<p>now, given this test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_foocompare.py</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">val</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">val</span>


<span class="k">def</span> <span class="nf">test_compare</span><span class="p">():</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">f1</span> <span class="o">==</span> <span class="n">f2</span>
</pre></div>
</div>
<p>you can run the test module and get the custom output defined in
the conftest file:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_foocompare.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_compare _______________________________</span>

    def test_compare():
        f1 = Foo(1)
        f2 = Foo(2)
&gt;       assert f1 == f2
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert Comparing Foo instances:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E            vals: 1 != 2</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_foocompare.py</span>:12: AssertionError
========================= short test summary info ==========================
FAILED test_foocompare.py::test_compare - assert Comparing Foo instances:
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
</div>
<div class="section" id="assertion-introspection-details">
<span id="assert-introspection"></span><span id="assert-details"></span><h4>Assertion introspection details<a class="headerlink" href="#assertion-introspection-details" title="Permalink to this headline">¶</a></h4>
<p>Reporting details about a failing assertion is achieved by rewriting assert
statements before they are run.  Rewritten assert statements put introspection
information into the assertion failure message.  <code class="docutils literal notranslate"><span class="pre">pytest</span></code> only rewrites test
modules directly discovered by its test collection process, so <strong>asserts in
supporting modules which are not themselves test modules will not be rewritten</strong>.</p>
<p>You can manually enable assertion rewriting for an imported module by calling
<a class="reference internal" href="contents.html#assertion-rewriting"><span class="std std-ref">register_assert_rewrite</span></a>
before you import it (a good place to do that is in your root <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>).</p>
<p>For further information, Benjamin Peterson wrote up <a class="reference external" href="http://pybites.blogspot.com/2011/07/behind-scenes-of-pytests-new-assertion.html">Behind the scenes of pytest’s new assertion rewriting</a>.</p>
<div class="section" id="assertion-rewriting-caches-files-on-disk">
<h5>Assertion rewriting caches files on disk<a class="headerlink" href="#assertion-rewriting-caches-files-on-disk" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> will write back the rewritten modules to disk for caching. You can disable
this behavior (for example to avoid leaving stale <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files around in projects that
move files around a lot) by adding this to the top of your <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">dont_write_bytecode</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>Note that you still get the benefits of assertion introspection, the only change is that
the <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files won’t be cached on disk.</p>
<p>Additionally, rewriting will silently skip caching if it cannot write new <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files,
i.e. in a read-only filesystem or a zipfile.</p>
</div>
<div class="section" id="disabling-assert-rewriting">
<h5>Disabling assert rewriting<a class="headerlink" href="#disabling-assert-rewriting" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> rewrites test modules on import by using an import
hook to write new <code class="docutils literal notranslate"><span class="pre">pyc</span></code> files. Most of the time this works transparently.
However, if you are working with the import machinery yourself, the import hook may
interfere.</p>
<p>If this is the case you have two options:</p>
<ul class="simple">
<li><p>Disable rewriting for a specific module by adding the string
<code class="docutils literal notranslate"><span class="pre">PYTEST_DONT_REWRITE</span></code> to its docstring.</p></li>
<li><p>Disable rewriting for all modules by using <code class="docutils literal notranslate"><span class="pre">--assert=plain</span></code>.</p></li>
</ul>
</div>
</div>
</div>
<span id="document-how-to/fixtures"></span><div class="section" id="how-to-use-fixtures">
<span id="how-to-fixtures"></span><h3>How to use fixtures<a class="headerlink" href="#how-to-use-fixtures" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#about-fixtures"><span class="std std-ref">About fixtures</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#reference-fixtures"><span class="std std-ref">Fixtures reference</span></a></p>
</div>
<div class="section" id="requesting-fixtures">
<h4>“Requesting” fixtures<a class="headerlink" href="#requesting-fixtures" title="Permalink to this headline">¶</a></h4>
<p>At a basic level, test functions request fixtures they require by declaring
them as arguments.</p>
<p>When pytest goes to run a test, it looks at the parameters in that test
function’s signature, and then searches for fixtures that have the same names as
those parameters. Once pytest finds them, it runs those fixtures, captures what
they returned (if anything), and passes those objects into the test function as
arguments.</p>
<div class="section" id="quick-example">
<h5>Quick example<a class="headerlink" href="#quick-example" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">Fruit</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cubed</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">cube</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cubed</span> <span class="o">=</span> <span class="kc">True</span>


<span class="k">class</span> <span class="nc">FruitSalad</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fruit_bowl</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fruit</span> <span class="o">=</span> <span class="n">fruit_bowl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cube_fruit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_cube_fruit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fruit</span><span class="p">:</span>
            <span class="n">fruit</span><span class="o">.</span><span class="n">cube</span><span class="p">()</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fruit_bowl</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;apple&quot;</span><span class="p">),</span> <span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;banana&quot;</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">test_fruit_salad</span><span class="p">(</span><span class="n">fruit_bowl</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">fruit_salad</span> <span class="o">=</span> <span class="n">FruitSalad</span><span class="p">(</span><span class="o">*</span><span class="n">fruit_bowl</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">fruit</span><span class="o">.</span><span class="n">cubed</span> <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruit_salad</span><span class="o">.</span><span class="n">fruit</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">test_fruit_salad</span></code> “<strong>requests</strong>” <code class="docutils literal notranslate"><span class="pre">fruit_bowl</span></code> (i.e.
<code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_fruit_salad(fruit_bowl):</span></code>), and when pytest sees this, it will
execute the <code class="docutils literal notranslate"><span class="pre">fruit_bowl</span></code> fixture function and pass the object it returns into
<code class="docutils literal notranslate"><span class="pre">test_fruit_salad</span></code> as the <code class="docutils literal notranslate"><span class="pre">fruit_bowl</span></code> argument.</p>
<p>Here’s roughly
what’s happening if we were to do it by hand:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fruit_bowl</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;apple&quot;</span><span class="p">),</span> <span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;banana&quot;</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">test_fruit_salad</span><span class="p">(</span><span class="n">fruit_bowl</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">fruit_salad</span> <span class="o">=</span> <span class="n">FruitSalad</span><span class="p">(</span><span class="o">*</span><span class="n">fruit_bowl</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">fruit</span><span class="o">.</span><span class="n">cubed</span> <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruit_salad</span><span class="o">.</span><span class="n">fruit</span><span class="p">)</span>


<span class="c1"># Arrange</span>
<span class="n">bowl</span> <span class="o">=</span> <span class="n">fruit_bowl</span><span class="p">()</span>
<span class="n">test_fruit_salad</span><span class="p">(</span><span class="n">fruit_bowl</span><span class="o">=</span><span class="n">bowl</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fixtures-can-request-other-fixtures">
<h5>Fixtures can <strong>request</strong> other fixtures<a class="headerlink" href="#fixtures-can-request-other-fixtures" title="Permalink to this headline">¶</a></h5>
<p>One of pytest’s greatest strengths is its extremely flexible fixture system. It
allows us to boil down complex requirements for tests into more simple and
organized functions, where we only need to have each one describe the things
they are dependent on. We’ll get more into this further down, but for now,
here’s a quick example to demonstrate how fixtures can use other fixtures:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_append.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Notice that this is the same example from above, but very little changed. The
fixtures in pytest <strong>request</strong> fixtures just like tests. All the same
<strong>requesting</strong> rules apply to fixtures that do for tests. Here’s how this
example would work if we did it by hand:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>


<span class="n">entry</span> <span class="o">=</span> <span class="n">first_entry</span><span class="p">()</span>
<span class="n">the_list</span> <span class="o">=</span> <span class="n">order</span><span class="p">(</span><span class="n">first_entry</span><span class="o">=</span><span class="n">entry</span><span class="p">)</span>
<span class="n">test_string</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">the_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fixtures-are-reusable">
<h5>Fixtures are reusable<a class="headerlink" href="#fixtures-are-reusable" title="Permalink to this headline">¶</a></h5>
<p>One of the things that makes pytest’s fixture system so powerful, is that it
gives us the ability to define a generic setup step that can be reused over and
over, just like a normal function would be used. Two different tests can request
the same fixture and have pytest give each test their own result from that
fixture.</p>
<p>This is extremely useful for making sure tests aren’t affected by each other. We
can use this system to make sure each test gets its own fresh batch of data and
is starting from a clean state so it can provide consistent, repeatable results.</p>
<p>Here’s an example of how this can come in handy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_append.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_int</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>Each test here is being given its own copy of that <code class="docutils literal notranslate"><span class="pre">list</span></code> object,
which means the <code class="docutils literal notranslate"><span class="pre">order</span></code> fixture is getting executed twice (the same
is true for the <code class="docutils literal notranslate"><span class="pre">first_entry</span></code> fixture). If we were to do this by hand as
well, it would look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_int</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>


<span class="n">entry</span> <span class="o">=</span> <span class="n">first_entry</span><span class="p">()</span>
<span class="n">the_list</span> <span class="o">=</span> <span class="n">order</span><span class="p">(</span><span class="n">first_entry</span><span class="o">=</span><span class="n">entry</span><span class="p">)</span>
<span class="n">test_string</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">the_list</span><span class="p">)</span>

<span class="n">entry</span> <span class="o">=</span> <span class="n">first_entry</span><span class="p">()</span>
<span class="n">the_list</span> <span class="o">=</span> <span class="n">order</span><span class="p">(</span><span class="n">first_entry</span><span class="o">=</span><span class="n">entry</span><span class="p">)</span>
<span class="n">test_int</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">the_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="a-test-fixture-can-request-more-than-one-fixture-at-a-time">
<h5>A test/fixture can <strong>request</strong> more than one fixture at a time<a class="headerlink" href="#a-test-fixture-can-request-more-than-one-fixture-at-a-time" title="Permalink to this headline">¶</a></h5>
<p>Tests and fixtures aren’t limited to <strong>requesting</strong> a single fixture at a time.
They can request as many as they like. Here’s another quick example to
demonstrate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_append.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">second_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">2</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">,</span> <span class="n">second_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">,</span> <span class="n">second_entry</span><span class="p">]</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">expected_list</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">expected_list</span><span class="p">):</span>
    <span class="c1"># Act</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="n">expected_list</span>
</pre></div>
</div>
</div>
<div class="section" id="fixtures-can-be-requested-more-than-once-per-test-return-values-are-cached">
<h5>Fixtures can be <strong>requested</strong> more than once per test (return values are cached)<a class="headerlink" href="#fixtures-can-be-requested-more-than-once-per-test-return-values-are-cached" title="Permalink to this headline">¶</a></h5>
<p>Fixtures can also be <strong>requested</strong> more than once during the same test, and
pytest won’t execute them again for that test. This means we can <strong>request</strong>
fixtures in multiple fixtures that are dependent on them (and even again in the
test itself) without those fixtures being executed more than once.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_append.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="c1"># Arrange</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="c1"># Act</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">append_first</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first_entry</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_string_only</span><span class="p">(</span><span class="n">append_first</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">first_entry</span><span class="p">):</span>
    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>
</pre></div>
</div>
<p>If a <strong>requested</strong> fixture was executed once for every time it was <strong>requested</strong>
during a test, then this test would fail because both <code class="docutils literal notranslate"><span class="pre">append_first</span></code> and
<code class="docutils literal notranslate"><span class="pre">test_string_only</span></code> would see <code class="docutils literal notranslate"><span class="pre">order</span></code> as an empty list (i.e. <code class="docutils literal notranslate"><span class="pre">[]</span></code>), but
since the return value of <code class="docutils literal notranslate"><span class="pre">order</span></code> was cached (along with any side effects
executing it may have had) after the first time it was called, both the test and
<code class="docutils literal notranslate"><span class="pre">append_first</span></code> were referencing the same object, and the test saw the effect
<code class="docutils literal notranslate"><span class="pre">append_first</span></code> had on that object.</p>
</div>
</div>
<div class="section" id="autouse-fixtures-fixtures-you-don-t-have-to-request">
<span id="autouse-fixtures"></span><span id="autouse"></span><h4>Autouse fixtures (fixtures you don’t have to request)<a class="headerlink" href="#autouse-fixtures-fixtures-you-don-t-have-to-request" title="Permalink to this headline">¶</a></h4>
<p>Sometimes you may want to have a fixture (or even several) that you know all
your tests will depend on. “Autouse” fixtures are a convenient way to make all
tests automatically <strong>request</strong> them. This can cut out a
lot of redundant <strong>requests</strong>, and can even provide more advanced fixture usage
(more on that further down).</p>
<p>We can make a fixture an autouse fixture by passing in <code class="docutils literal notranslate"><span class="pre">autouse=True</span></code> to the
fixture’s decorator. Here’s a simple example for how they can be used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_append.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">first_entry</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;a&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">(</span><span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">append_first</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">first_entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first_entry</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_string_only</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">first_entry</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_string_and_int</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">first_entry</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="n">first_entry</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">append_first</span></code> fixture is an autouse fixture. Because it
happens automatically, both tests are affected by it, even though neither test
<strong>requested</strong> it. That doesn’t mean they <em>can’t</em> be <strong>requested</strong> though; just
that it isn’t <em>necessary</em>.</p>
</div>
<div class="section" id="scope-sharing-fixtures-across-classes-modules-packages-or-session">
<span id="smtpshared"></span><h4>Scope: sharing fixtures across classes, modules, packages or session<a class="headerlink" href="#scope-sharing-fixtures-across-classes-modules-packages-or-session" title="Permalink to this headline">¶</a></h4>
<p>Fixtures requiring network access depend on connectivity and are
usually time-expensive to create.  Extending the previous example, we
can add a <code class="docutils literal notranslate"><span class="pre">scope=&quot;module&quot;</span></code> parameter to the
<a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code></a> invocation
to cause a <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture function, responsible to create a connection to a preexisting SMTP server, to only be invoked
once per test <em>module</em> (the default is to invoke once per test <em>function</em>).
Multiple test functions in a test module will thus
each receive the same <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture instance, thus saving time.
Possible values for <code class="docutils literal notranslate"><span class="pre">scope</span></code> are: <code class="docutils literal notranslate"><span class="pre">function</span></code>, <code class="docutils literal notranslate"><span class="pre">class</span></code>, <code class="docutils literal notranslate"><span class="pre">module</span></code>, <code class="docutils literal notranslate"><span class="pre">package</span></code> or <code class="docutils literal notranslate"><span class="pre">session</span></code>.</p>
<p>The next example puts the fixture function into a separate <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file
so that tests from multiple test modules in the directory can
access the fixture function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">smtplib</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">smtp_connection</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="s2">&quot;smtp.gmail.com&quot;</span><span class="p">,</span> <span class="mi">587</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>


<span class="k">def</span> <span class="nf">test_ehlo</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">):</span>
    <span class="n">response</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">smtp_connection</span><span class="o">.</span><span class="n">ehlo</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">250</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s2">&quot;smtp.gmail.com&quot;</span> <span class="ow">in</span> <span class="n">msg</span>
    <span class="k">assert</span> <span class="mi">0</span>  <span class="c1"># for demo purposes</span>


<span class="k">def</span> <span class="nf">test_noop</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">):</span>
    <span class="n">response</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">smtp_connection</span><span class="o">.</span><span class="n">noop</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">response</span> <span class="o">==</span> <span class="mi">250</span>
    <span class="k">assert</span> <span class="mi">0</span>  <span class="c1"># for demo purposes</span>
</pre></div>
</div>
<p>Here, the <code class="docutils literal notranslate"><span class="pre">test_ehlo</span></code> needs the <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture value.  pytest
will discover and call the <a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code></a>
marked <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture function.  Running the test looks like this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_module.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Red">FF</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_ehlo _________________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0001&gt;

    def test_ehlo(smtp_connection):
        response, msg = smtp_connection.ehlo()
        assert response == 250
        assert b&quot;smtp.gmail.com&quot; in msg
&gt;       assert 0  # for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:7: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_noop _________________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0001&gt;

    def test_noop(smtp_connection):
        response, msg = smtp_connection.noop()
        assert response == 250
&gt;       assert 0  # for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:13: AssertionError
========================= short test summary info ==========================
FAILED test_module.py::test_ehlo - assert 0
FAILED test_module.py::test_noop - assert 0
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>You see the two <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">0</span></code> failing and more importantly you can also see
that the <strong>exactly same</strong> <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> object was passed into the
two test functions because pytest shows the incoming argument values in the
traceback.  As a result, the two test functions using <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> run
as quick as a single one because they reuse the same instance.</p>
<p>If you decide that you rather want to have a session-scoped <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code>
instance, you can simply declare it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">smtp_connection</span><span class="p">():</span>
    <span class="c1"># the returned fixture value will be shared for</span>
    <span class="c1"># all tests requesting it</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="section" id="fixture-scopes">
<h5>Fixture scopes<a class="headerlink" href="#fixture-scopes" title="Permalink to this headline">¶</a></h5>
<p>Fixtures are created when first requested by a test, and are destroyed based on their <code class="docutils literal notranslate"><span class="pre">scope</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: the default scope, the fixture is destroyed at the end of the test.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">class</span></code>: the fixture is destroyed during teardown of the last test in the class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">module</span></code>: the fixture is destroyed during teardown of the last test in the module.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package</span></code>: the fixture is destroyed during teardown of the last test in the package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">session</span></code>: the fixture is destroyed at the end of the test session.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pytest only caches one instance of a fixture at a time, which
means that when using a parametrized fixture, pytest may invoke a fixture more than once in
the given scope.</p>
</div>
</div>
<div class="section" id="dynamic-scope">
<span id="id1"></span><h5>Dynamic scope<a class="headerlink" href="#dynamic-scope" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.2.</span></p>
</div>
<p>In some cases, you might want to change the scope of the fixture without changing the code.
To do that, pass a callable to <code class="docutils literal notranslate"><span class="pre">scope</span></code>. The callable must return a string with a valid scope
and will be executed only once - during the fixture definition. It will be called with two
keyword arguments - <code class="docutils literal notranslate"><span class="pre">fixture_name</span></code> as a string and <code class="docutils literal notranslate"><span class="pre">config</span></code> with a configuration object.</p>
<p>This can be especially useful when dealing with fixtures that need time for setup, like spawning
a docker container. You can use the command-line argument to control the scope of the spawned
containers for different environments. See the example below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">determine_scope</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--keep-containers&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;session&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;function&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="n">determine_scope</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">docker_container</span><span class="p">():</span>
    <span class="k">yield</span> <span class="n">spawn_container</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="teardown-cleanup-aka-fixture-finalization">
<span id="finalization"></span><h4>Teardown/Cleanup (AKA Fixture finalization)<a class="headerlink" href="#teardown-cleanup-aka-fixture-finalization" title="Permalink to this headline">¶</a></h4>
<p>When we run our tests, we’ll want to make sure they clean up after themselves so
they don’t mess with any other tests (and also so that we don’t leave behind a
mountain of test data to bloat the system). Fixtures in pytest offer a very
useful teardown system, which allows us to define the specific steps necessary
for each fixture to clean up after itself.</p>
<p>This system can be leveraged in two ways.</p>
<div class="section" id="yield-fixtures-recommended">
<span id="yield-fixtures"></span><h5>1. <code class="docutils literal notranslate"><span class="pre">yield</span></code> fixtures (recommended)<a class="headerlink" href="#yield-fixtures-recommended" title="Permalink to this headline">¶</a></h5>
<p>“Yield” fixtures <code class="docutils literal notranslate"><span class="pre">yield</span></code> instead of <code class="docutils literal notranslate"><span class="pre">return</span></code>. With these
fixtures, we can run some code and pass an object back to the requesting
fixture/test, just like with the other fixtures. The only differences are:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">return</span></code> is swapped out for <code class="docutils literal notranslate"><span class="pre">yield</span></code>.</p></li>
<li><p>Any teardown code for that fixture is placed <em>after</em> the <code class="docutils literal notranslate"><span class="pre">yield</span></code>.</p></li>
</ol>
<p>Once pytest figures out a linear order for the fixtures, it will run each one up
until it returns or yields, and then move on to the next fixture in the list to
do the same thing.</p>
<p>Once the test is finished, pytest will go back down the list of fixtures, but in
the <em>reverse order</em>, taking each one that yielded, and running the code inside
it that was <em>after</em> the <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement.</p>
<p>As a simple example, consider this basic email module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of emaillib.py</span>
<span class="k">class</span> <span class="nc">MailAdminClient</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MailUser</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="c1"># do some cleanup</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">MailUser</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inbox</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">other</span><span class="o">.</span><span class="n">inbox</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">clear_mailbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inbox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">Email</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">body</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
</pre></div>
</div>
<p>Let’s say we want to test sending email from one user to another. We’ll have to
first make each user, then send the email from one user to the other, and
finally assert that the other user received that message in their inbox. If we
want to clean up after the test runs, we’ll likely have to make sure the other
user’s mailbox is emptied before deleting that user, otherwise the system may
complain.</p>
<p>Here’s what that might look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_emaillib.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">emaillib</span> <span class="kn">import</span> <span class="n">Email</span><span class="p">,</span> <span class="n">MailAdminClient</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mail_admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">MailAdminClient</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">sending_user</span><span class="p">(</span><span class="n">mail_admin</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">user</span>
    <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">receiving_user</span><span class="p">(</span><span class="n">mail_admin</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">user</span>
    <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_email_received</span><span class="p">(</span><span class="n">sending_user</span><span class="p">,</span> <span class="n">receiving_user</span><span class="p">):</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Email</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Hey!&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;How&#39;s it going?&quot;</span><span class="p">)</span>
    <span class="n">sending_user</span><span class="o">.</span><span class="n">send_email</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">receiving_user</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">receiving_user</span><span class="o">.</span><span class="n">inbox</span>
</pre></div>
</div>
<p>Because <code class="docutils literal notranslate"><span class="pre">receiving_user</span></code> is the last fixture to run during setup, it’s the first to run
during teardown.</p>
<p>There is a risk that even having the order right on the teardown side of things
doesn’t guarantee a safe cleanup. That’s covered in a bit more detail in
<a class="reference internal" href="#safe-teardowns"><span class="std std-ref">Safe teardowns</span></a>.</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_emaillib.py
<span class=" -Color -Color-Green">.</span>                                                                    <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<div class="section" id="handling-errors-for-yield-fixture">
<h6>Handling errors for yield fixture<a class="headerlink" href="#handling-errors-for-yield-fixture" title="Permalink to this headline">¶</a></h6>
<p>If a yield fixture raises an exception before yielding, pytest won’t try to run
the teardown code after that yield fixture’s <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement. But, for every
fixture that has already run successfully for that test, pytest will still
attempt to tear them down as it normally would.</p>
</div>
</div>
<div class="section" id="adding-finalizers-directly">
<h5>2. Adding finalizers directly<a class="headerlink" href="#adding-finalizers-directly" title="Permalink to this headline">¶</a></h5>
<p>While yield fixtures are considered to be the cleaner and more straightforward
option, there is another choice, and that is to add “finalizer” functions
directly to the test’s <a class="reference internal" href="#request-context">request-context</a> object. It brings a similar result as
yield fixtures, but requires a bit more verbosity.</p>
<p>In order to use this approach, we have to request the <a class="reference internal" href="#request-context">request-context</a> object
(just like we would request another fixture) in the fixture we need to add
teardown code for, and then pass a callable, containing that teardown code, to
its <code class="docutils literal notranslate"><span class="pre">addfinalizer</span></code> method.</p>
<p>We have to be careful though, because pytest will run that finalizer once it’s
been added, even if that fixture raises an exception after adding the finalizer.
So to make sure we don’t run the finalizer code when we wouldn’t need to, we
would only add the finalizer once the fixture would have done something that
we’d need to teardown.</p>
<p>Here’s how the previous example would look using the <code class="docutils literal notranslate"><span class="pre">addfinalizer</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_emaillib.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">emaillib</span> <span class="kn">import</span> <span class="n">Email</span><span class="p">,</span> <span class="n">MailAdminClient</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mail_admin</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">MailAdminClient</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">sending_user</span><span class="p">(</span><span class="n">mail_admin</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">user</span>
    <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">receiving_user</span><span class="p">(</span><span class="n">mail_admin</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_user</span><span class="p">():</span>
        <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="n">request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">delete_user</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">user</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="n">sending_user</span><span class="p">,</span> <span class="n">receiving_user</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="n">_email</span> <span class="o">=</span> <span class="n">Email</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Hey!&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;How&#39;s it going?&quot;</span><span class="p">)</span>
    <span class="n">sending_user</span><span class="o">.</span><span class="n">send_email</span><span class="p">(</span><span class="n">_email</span><span class="p">,</span> <span class="n">receiving_user</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">empty_mailbox</span><span class="p">():</span>
        <span class="n">receiving_user</span><span class="o">.</span><span class="n">clear_mailbox</span><span class="p">()</span>

    <span class="n">request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">empty_mailbox</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_email</span>


<span class="k">def</span> <span class="nf">test_email_received</span><span class="p">(</span><span class="n">receiving_user</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">receiving_user</span><span class="o">.</span><span class="n">inbox</span>
</pre></div>
</div>
<p>It’s a bit longer than yield fixtures and a bit more complex, but it
does offer some nuances for when you’re in a pinch.</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_emaillib.py
<span class=" -Color -Color-Green">.</span>                                                                    <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<div class="section" id="note-on-finalizer-order">
<h6>Note on finalizer order<a class="headerlink" href="#note-on-finalizer-order" title="Permalink to this headline">¶</a></h6>
<p>Finalizers are executed in a first-in-last-out order.
For yield fixtures, the first teardown code to run is from the right-most fixture, i.e. the last test parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_finalizers.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">fix_w_yield1</span><span class="p">,</span> <span class="n">fix_w_yield2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test_bar&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fix_w_yield1</span><span class="p">():</span>
    <span class="k">yield</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;after_yield_1&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fix_w_yield2</span><span class="p">():</span>
    <span class="k">yield</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;after_yield_2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -s test_finalizers.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_finalizers.py test_bar
.after_yield_2
after_yield_1


<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>For finalizers, the first fixture to run is last call to <code class="docutils literal notranslate"><span class="pre">request.addfinalizer</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_finalizers.py</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fix_w_finalizers</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="s2">&quot;finalizer_2&quot;</span><span class="p">))</span>
    <span class="n">request</span><span class="o">.</span><span class="n">addfinalizer</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="s2">&quot;finalizer_1&quot;</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">fix_w_finalizers</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test_bar&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -s test_finalizers.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_finalizers.py test_bar
.finalizer_1
finalizer_2


<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>This is so because yield fixtures use <code class="docutils literal notranslate"><span class="pre">addfinalizer</span></code> behind the scenes: when the fixture executes, <code class="docutils literal notranslate"><span class="pre">addfinalizer</span></code> registers a function that resumes the generator, which in turn calls the teardown code.</p>
</div>
</div>
</div>
<div class="section" id="safe-teardowns">
<span id="id2"></span><h4>Safe teardowns<a class="headerlink" href="#safe-teardowns" title="Permalink to this headline">¶</a></h4>
<p>The fixture system of pytest is <em>very</em> powerful, but it’s still being run by a
computer, so it isn’t able to figure out how to safely teardown everything we
throw at it. If we aren’t careful, an error in the wrong spot might leave stuff
from our tests behind, and that can cause further issues pretty quickly.</p>
<p>For example, consider the following tests (based off of the mail example from
above):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_emaillib.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">emaillib</span> <span class="kn">import</span> <span class="n">Email</span><span class="p">,</span> <span class="n">MailAdminClient</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">setup</span><span class="p">():</span>
    <span class="n">mail_admin</span> <span class="o">=</span> <span class="n">MailAdminClient</span><span class="p">()</span>
    <span class="n">sending_user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
    <span class="n">receiving_user</span> <span class="o">=</span> <span class="n">mail_admin</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Email</span><span class="p">(</span><span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Hey!&quot;</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="s2">&quot;How&#39;s it going?&quot;</span><span class="p">)</span>
    <span class="n">sending_user</span><span class="o">.</span><span class="n">send_email</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">receiving_user</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">receiving_user</span><span class="p">,</span> <span class="n">email</span>
    <span class="n">receiving_user</span><span class="o">.</span><span class="n">clear_mailbox</span><span class="p">()</span>
    <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">sending_user</span><span class="p">)</span>
    <span class="n">mail_admin</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">receiving_user</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_email_received</span><span class="p">(</span><span class="n">setup</span><span class="p">):</span>
    <span class="n">receiving_user</span><span class="p">,</span> <span class="n">email</span> <span class="o">=</span> <span class="n">setup</span>
    <span class="k">assert</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">receiving_user</span><span class="o">.</span><span class="n">inbox</span>
</pre></div>
</div>
<p>This version is a lot more compact, but it’s also harder to read, doesn’t have a
very descriptive fixture name, and none of the fixtures can be reused easily.</p>
<p>There’s also a more serious issue, which is that if any of those steps in the
setup raise an exception, none of the teardown code will run.</p>
<p>One option might be to go with the <code class="docutils literal notranslate"><span class="pre">addfinalizer</span></code> method instead of yield
fixtures, but that might get pretty complex and difficult to maintain (and it
wouldn’t be compact anymore).</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_emaillib.py
<span class=" -Color -Color-Green">.</span>                                                                    <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<div class="section" id="safe-fixture-structure">
<span id="id3"></span><h5>Safe fixture structure<a class="headerlink" href="#safe-fixture-structure" title="Permalink to this headline">¶</a></h5>
<p>The safest and simplest fixture structure requires limiting fixtures to only
making one state-changing action each, and then bundling them together with
their teardown code, as <a class="reference internal" href="#yield-fixtures"><span class="std std-ref">the email examples above</span></a> showed.</p>
<p>The chance that a state-changing operation can fail but still modify state is
negligible, as most of these operations tend to be <a class="reference external" href="https://en.wikipedia.org/wiki/Transaction_processing">transaction</a>-based (at least at the
level of testing where state could be left behind). So if we make sure that any
successful state-changing action gets torn down by moving it to a separate
fixture function and separating it from other, potentially failing
state-changing actions, then our tests will stand the best chance at leaving
the test environment the way they found it.</p>
<p>For an example, let’s say we have a website with a login page, and we have
access to an admin API where we can generate users. For our test, we want to:</p>
<ol class="arabic simple">
<li><p>Create a user through that admin API</p></li>
<li><p>Launch a browser using Selenium</p></li>
<li><p>Go to the login page of our site</p></li>
<li><p>Log in as the user we created</p></li>
<li><p>Assert that their name is in the header of the landing page</p></li>
</ol>
<p>We wouldn’t want to leave that user in the system, nor would we want to leave
that browser session running, so we’ll want to make sure the fixtures that
create those things clean up after themselves.</p>
<p>Here’s what that might look like:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this example, certain fixtures (i.e. <code class="docutils literal notranslate"><span class="pre">base_url</span></code> and
<code class="docutils literal notranslate"><span class="pre">admin_credentials</span></code>) are implied to exist elsewhere. So for now, let’s
assume they exist, and we’re just not looking at them.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">Chrome</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">src.utils.pages</span> <span class="kn">import</span> <span class="n">LoginPage</span><span class="p">,</span> <span class="n">LandingPage</span>
<span class="kn">from</span> <span class="nn">src.utils</span> <span class="kn">import</span> <span class="n">AdminApiClient</span>
<span class="kn">from</span> <span class="nn">src.utils.data_types</span> <span class="kn">import</span> <span class="n">User</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">admin_client</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="n">admin_credentials</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">AdminApiClient</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="o">**</span><span class="n">admin_credentials</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="n">admin_client</span><span class="p">):</span>
    <span class="n">_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Susan&quot;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;testuser-</span><span class="si">{</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;P4$$word&quot;</span><span class="p">)</span>
    <span class="n">admin_client</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">_user</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">_user</span>
    <span class="n">admin_client</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">_user</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">driver</span><span class="p">():</span>
    <span class="n">_driver</span> <span class="o">=</span> <span class="n">Chrome</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">_driver</span>
    <span class="n">_driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;/login&quot;</span><span class="p">))</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">LoginPage</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
    <span class="n">page</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">landing_page</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">login</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">LandingPage</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_name_on_landing_page_after_login</span><span class="p">(</span><span class="n">landing_page</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">landing_page</span><span class="o">.</span><span class="n">header</span> <span class="o">==</span> <span class="sa">f</span><span class="s2">&quot;Welcome, </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>
</pre></div>
</div>
<p>The way the dependencies are laid out means it’s unclear if the <code class="docutils literal notranslate"><span class="pre">user</span></code>
fixture would execute before the <code class="docutils literal notranslate"><span class="pre">driver</span></code> fixture. But that’s ok, because
those are atomic operations, and so it doesn’t matter which one runs first
because the sequence of events for the test is still <a class="reference external" href="https://en.wikipedia.org/wiki/Linearizability">linearizable</a>. But what <em>does</em> matter is
that, no matter which one runs first, if the one raises an exception while the
other would not have, neither will have left anything behind. If <code class="docutils literal notranslate"><span class="pre">driver</span></code>
executes before <code class="docutils literal notranslate"><span class="pre">user</span></code>, and <code class="docutils literal notranslate"><span class="pre">user</span></code> raises an exception, the driver will
still quit, and the user was never made. And if <code class="docutils literal notranslate"><span class="pre">driver</span></code> was the one to raise
the exception, then the driver would never have been started and the user would
never have been made.</p>
</div>
</div>
<div class="section" id="running-multiple-assert-statements-safely">
<h4>Running multiple <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements safely<a class="headerlink" href="#running-multiple-assert-statements-safely" title="Permalink to this headline">¶</a></h4>
<p>Sometimes you may want to run multiple asserts after doing all that setup, which
makes sense as, in more complex systems, a single action can kick off multiple
behaviors. pytest has a convenient way of handling this and it combines a bunch
of what we’ve gone over so far.</p>
<p>All that’s needed is stepping up to a larger scope, then having the <strong>act</strong>
step defined as an autouse fixture, and finally, making sure all the fixtures
are targeting that higher level scope.</p>
<p>Let’s pull <a class="reference internal" href="#safe-fixture-structure"><span class="std std-ref">an example from above</span></a>, and tweak it a
bit. Let’s say that in addition to checking for a welcome message in the header,
we also want to check for a sign out button, and a link to the user’s profile.</p>
<p>Let’s take a look at how we can structure that so we can run multiple asserts
without having to repeat all those steps again.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this example, certain fixtures (i.e. <code class="docutils literal notranslate"><span class="pre">base_url</span></code> and
<code class="docutils literal notranslate"><span class="pre">admin_credentials</span></code>) are implied to exist elsewhere. So for now, let’s
assume they exist, and we’re just not looking at them.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of tests/end_to_end/test_login.py</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">Chrome</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">src.utils.pages</span> <span class="kn">import</span> <span class="n">LoginPage</span><span class="p">,</span> <span class="n">LandingPage</span>
<span class="kn">from</span> <span class="nn">src.utils</span> <span class="kn">import</span> <span class="n">AdminApiClient</span>
<span class="kn">from</span> <span class="nn">src.utils.data_types</span> <span class="kn">import</span> <span class="n">User</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">admin_client</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="n">admin_credentials</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">AdminApiClient</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="o">**</span><span class="n">admin_credentials</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">user</span><span class="p">(</span><span class="n">admin_client</span><span class="p">):</span>
    <span class="n">_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Susan&quot;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;testuser-</span><span class="si">{</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;P4$$word&quot;</span><span class="p">)</span>
    <span class="n">admin_client</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="n">_user</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">_user</span>
    <span class="n">admin_client</span><span class="o">.</span><span class="n">delete_user</span><span class="p">(</span><span class="n">_user</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">driver</span><span class="p">():</span>
    <span class="n">_driver</span> <span class="o">=</span> <span class="n">Chrome</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">_driver</span>
    <span class="n">_driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">landing_page</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="n">login</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">LandingPage</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestLandingPageSuccess</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driver</span><span class="p">,</span> <span class="n">base_url</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="s2">&quot;/login&quot;</span><span class="p">))</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">LoginPage</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
        <span class="n">page</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_name_in_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">landing_page</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">landing_page</span><span class="o">.</span><span class="n">header</span> <span class="o">==</span> <span class="sa">f</span><span class="s2">&quot;Welcome, </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>

    <span class="k">def</span> <span class="nf">test_sign_out_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">landing_page</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">landing_page</span><span class="o">.</span><span class="n">sign_out_button</span><span class="o">.</span><span class="n">is_displayed</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_profile_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">landing_page</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">profile_href</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">base_url</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;/profile?id=</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">profile_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">landing_page</span><span class="o">.</span><span class="n">profile_link</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">profile_href</span>
</pre></div>
</div>
<p>Notice that the methods are only referencing <code class="docutils literal notranslate"><span class="pre">self</span></code> in the signature as a
formality. No state is tied to the actual test class as it might be in the
<code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> framework. Everything is managed by the pytest fixture
system.</p>
<p>Each method only has to request the fixtures that it actually needs without
worrying about order. This is because the <strong>act</strong> fixture is an autouse fixture,
and it made sure all the other fixtures executed before it. There’s no more
changes of state that need to take place, so the tests are free to make as many
non-state-changing queries as they want without risking stepping on the toes of
the other tests.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">login</span></code> fixture is defined inside the class as well, because not every one
of the other tests in the module will be expecting a successful login, and the <strong>act</strong> may need to
be handled a little differently for another test class. For example, if we
wanted to write another test scenario around submitting bad credentials, we
could handle it by adding something like this to the test file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TestLandingPageBadCredentials</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">faux_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">_user</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="n">_user</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;badpass&quot;</span>
        <span class="k">return</span> <span class="n">_user</span>

    <span class="k">def</span> <span class="nf">test_raises_bad_credentials_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">login_page</span><span class="p">,</span> <span class="n">faux_user</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">BadCredentialsException</span><span class="p">):</span>
            <span class="n">login_page</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">faux_user</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fixtures-can-introspect-the-requesting-test-context">
<span id="request-context"></span><h4>Fixtures can introspect the requesting test context<a class="headerlink" href="#fixtures-can-introspect-the-requesting-test-context" title="Permalink to this headline">¶</a></h4>
<p>Fixture functions can accept the <code class="xref py py-class docutils literal notranslate"><span class="pre">request</span></code> object
to introspect the “requesting” test function, class or module context.
Further extending the previous <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture example, let’s
read an optional server URL from the test module which uses our fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">smtplib</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">smtp_connection</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">server</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="s2">&quot;smtpserver&quot;</span><span class="p">,</span> <span class="s2">&quot;smtp.gmail.com&quot;</span><span class="p">)</span>
    <span class="n">smtp_connection</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="mi">587</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">smtp_connection</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;finalizing </span><span class="si">{}</span><span class="s2"> (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">,</span> <span class="n">server</span><span class="p">))</span>
    <span class="n">smtp_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>We use the <code class="docutils literal notranslate"><span class="pre">request.module</span></code> attribute to optionally obtain an
<code class="docutils literal notranslate"><span class="pre">smtpserver</span></code> attribute from the test module.  If we just execute
again, nothing much has changed:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -s -q --tb=no test_module.py
FFfinalizing &lt;smtplib.SMTP object at 0xdeadbeef0002&gt; (smtp.gmail.com)

========================= short test summary info ==========================
FAILED test_module.py::test_ehlo - assert 0
FAILED test_module.py::test_noop - assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>Let’s quickly create another test module that actually sets the
server URL in its module namespace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_anothersmtp.py</span>

<span class="n">smtpserver</span> <span class="o">=</span> <span class="s2">&quot;mail.python.org&quot;</span>  <span class="c1"># will be read by smtp fixture</span>


<span class="k">def</span> <span class="nf">test_showhelo</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="n">smtp_connection</span><span class="o">.</span><span class="n">helo</span><span class="p">()</span>
</pre></div>
</div>
<p>Running it:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -qq --tb=short test_anothersmtp.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_showhelo _______________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_anothersmtp.py</span>:6: in test_showhelo
    assert 0, smtp_connection.helo()
<span class=" -Color -Color-Bold -Color-Bold-Red">E   AssertionError: (250, b&#39;mail.python.org&#39;)</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
------------------------- Captured stdout teardown -------------------------
finalizing &lt;smtplib.SMTP object at 0xdeadbeef0003&gt; (mail.python.org)
========================= short test summary info ==========================
FAILED test_anothersmtp.py::test_showhelo - AssertionError: (250, b&#39;mail....
</pre></div>
</div>
<p>voila! The <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture function picked up our mail server name
from the module namespace.</p>
</div>
<div class="section" id="using-markers-to-pass-data-to-fixtures">
<span id="using-markers"></span><h4>Using markers to pass data to fixtures<a class="headerlink" href="#using-markers-to-pass-data-to-fixtures" title="Permalink to this headline">¶</a></h4>
<p>Using the <code class="xref py py-class docutils literal notranslate"><span class="pre">request</span></code> object, a fixture can also access
markers which are applied to a test function. This can be useful to pass data
into a fixture from a test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fixt</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">marker</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">get_closest_marker</span><span class="p">(</span><span class="s2">&quot;fixt_data&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Handle missing marker in some way...</span>
        <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">marker</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Do something with the data</span>
    <span class="k">return</span> <span class="n">data</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">fixt_data</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_fixt</span><span class="p">(</span><span class="n">fixt</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">fixt</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
</div>
<div class="section" id="factories-as-fixtures">
<span id="fixture-factory"></span><h4>Factories as fixtures<a class="headerlink" href="#factories-as-fixtures" title="Permalink to this headline">¶</a></h4>
<p>The “factory as fixture” pattern can help in situations where the result
of a fixture is needed multiple times in a single test. Instead of returning
data directly, the fixture instead returns a function which generates the data.
This function can then be called multiple times in the test.</p>
<p>Factories can have parameters as needed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">make_customer_record</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">_make_customer_record</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;orders&quot;</span><span class="p">:</span> <span class="p">[]}</span>

    <span class="k">return</span> <span class="n">_make_customer_record</span>


<span class="k">def</span> <span class="nf">test_customer_records</span><span class="p">(</span><span class="n">make_customer_record</span><span class="p">):</span>
    <span class="n">customer_1</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Lisa&quot;</span><span class="p">)</span>
    <span class="n">customer_2</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Mike&quot;</span><span class="p">)</span>
    <span class="n">customer_3</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Meredith&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the data created by the factory requires managing, the fixture can take care of that:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">make_customer_record</span><span class="p">():</span>

    <span class="n">created_records</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">_make_customer_record</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Customer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">orders</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">created_records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">yield</span> <span class="n">_make_customer_record</span>

    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">created_records</span><span class="p">:</span>
        <span class="n">record</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_customer_records</span><span class="p">(</span><span class="n">make_customer_record</span><span class="p">):</span>
    <span class="n">customer_1</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Lisa&quot;</span><span class="p">)</span>
    <span class="n">customer_2</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Mike&quot;</span><span class="p">)</span>
    <span class="n">customer_3</span> <span class="o">=</span> <span class="n">make_customer_record</span><span class="p">(</span><span class="s2">&quot;Meredith&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="parametrizing-fixtures">
<span id="fixture-parametrize"></span><h4>Parametrizing fixtures<a class="headerlink" href="#parametrizing-fixtures" title="Permalink to this headline">¶</a></h4>
<p>Fixture functions can be parametrized in which case they will be called
multiple times, each time executing the set of dependent tests, i.e. the
tests that depend on this fixture.  Test functions usually do not need
to be aware of their re-running.  Fixture parametrization helps to
write exhaustive functional tests for components which themselves can be
configured in multiple ways.</p>
<p>Extending the previous example, we can flag the fixture to create two
<code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture instances which will cause all tests using the fixture
to run twice.  The fixture function gets access to each parameter
through the special <code class="xref py py-class docutils literal notranslate"><span class="pre">request</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">smtplib</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;smtp.gmail.com&quot;</span><span class="p">,</span> <span class="s2">&quot;mail.python.org&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">smtp_connection</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">smtp_connection</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">param</span><span class="p">,</span> <span class="mi">587</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">smtp_connection</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;finalizing </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">))</span>
    <span class="n">smtp_connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The main change is the declaration of <code class="docutils literal notranslate"><span class="pre">params</span></code> with
<a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code></a>, a list of values
for each of which the fixture function will execute and can access
a value via <code class="docutils literal notranslate"><span class="pre">request.param</span></code>.  No test function code needs to change.
So let’s just do another run:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_module.py
<span class=" -Color -Color-Red">FFFF</span>                                                                 <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ test_ehlo[smtp.gmail.com] _________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0004&gt;

    def test_ehlo(smtp_connection):
        response, msg = smtp_connection.ehlo()
        assert response == 250
        assert b&quot;smtp.gmail.com&quot; in msg
&gt;       assert 0  # for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:7: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ test_noop[smtp.gmail.com] _________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0004&gt;

    def test_noop(smtp_connection):
        response, msg = smtp_connection.noop()
        assert response == 250
&gt;       assert 0  # for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:13: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ test_ehlo[mail.python.org] ________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0005&gt;

    def test_ehlo(smtp_connection):
        response, msg = smtp_connection.ehlo()
        assert response == 250
&gt;       assert b&quot;smtp.gmail.com&quot; in msg
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert b&#39;smtp.gmail.com&#39; in b&#39;mail.python.org\nPIPELINING\nSIZE 51200000\nETRN\nSTARTTLS\nAUTH DIGEST-MD5 NTLM CRAM-MD5\nENHANCEDSTATUSCODES\n8BITMIME\nDSN\nSMTPUTF8\nCHUNKING&#39;</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:6: AssertionError
-------------------------- Captured stdout setup ---------------------------
finalizing &lt;smtplib.SMTP object at 0xdeadbeef0004&gt;
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ test_noop[mail.python.org] ________________________</span>

smtp_connection = &lt;smtplib.SMTP object at 0xdeadbeef0005&gt;

    def test_noop(smtp_connection):
        response, msg = smtp_connection.noop()
        assert response == 250
&gt;       assert 0  # for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:13: AssertionError
------------------------- Captured stdout teardown -------------------------
finalizing &lt;smtplib.SMTP object at 0xdeadbeef0005&gt;
========================= short test summary info ==========================
FAILED test_module.py::test_ehlo[smtp.gmail.com] - assert 0
FAILED test_module.py::test_noop[smtp.gmail.com] - assert 0
FAILED test_module.py::test_ehlo[mail.python.org] - AssertionError: asser...
FAILED test_module.py::test_noop[mail.python.org] - assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">4 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>We see that our two test functions each ran twice, against the different
<code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> instances.  Note also, that with the <code class="docutils literal notranslate"><span class="pre">mail.python.org</span></code>
connection the second test fails in <code class="docutils literal notranslate"><span class="pre">test_ehlo</span></code> because a
different server string is expected than what arrived.</p>
<p>pytest will build a string that is the test ID for each fixture value
in a parametrized fixture, e.g. <code class="docutils literal notranslate"><span class="pre">test_ehlo[smtp.gmail.com]</span></code> and
<code class="docutils literal notranslate"><span class="pre">test_ehlo[mail.python.org]</span></code> in the above examples.  These IDs can
be used with <code class="docutils literal notranslate"><span class="pre">-k</span></code> to select specific cases to run, and they will
also identify the specific case when one is failing.  Running pytest
with <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code> will show the generated IDs.</p>
<p>Numbers, strings, booleans and <code class="docutils literal notranslate"><span class="pre">None</span></code> will have their usual string
representation used in the test ID. For other objects, pytest will
make a string based on the argument name.  It is possible to customise
the string used in a test ID for a certain fixture value by using the
<code class="docutils literal notranslate"><span class="pre">ids</span></code> keyword argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_ids.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;spam&quot;</span><span class="p">,</span> <span class="s2">&quot;ham&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>


<span class="k">def</span> <span class="nf">test_a</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">idfn</span><span class="p">(</span><span class="n">fixture_value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">fixture_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;eggs&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">ids</span><span class="o">=</span><span class="n">idfn</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>


<span class="k">def</span> <span class="nf">test_b</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The above shows how <code class="docutils literal notranslate"><span class="pre">ids</span></code> can be either a list of strings to use or
a function which will be called with the fixture value and then
has to return a string to use.  In the latter case if the function
returns <code class="docutils literal notranslate"><span class="pre">None</span></code> then pytest’s auto-generated ID will be used.</p>
<p>Running the above tests results in the following test IDs being used:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 12 items

&lt;Module test_anothersmtp.py&gt;
  &lt;Function test_showhelo[smtp.gmail.com]&gt;
  &lt;Function test_showhelo[mail.python.org]&gt;
&lt;Module test_emaillib.py&gt;
  &lt;Function test_email_received&gt;
&lt;Module test_finalizers.py&gt;
  &lt;Function test_bar&gt;
&lt;Module test_ids.py&gt;
  &lt;Function test_a[spam]&gt;
  &lt;Function test_a[ham]&gt;
  &lt;Function test_b[eggs]&gt;
  &lt;Function test_b[1]&gt;
&lt;Module test_module.py&gt;
  &lt;Function test_ehlo[smtp.gmail.com]&gt;
  &lt;Function test_noop[smtp.gmail.com]&gt;
  &lt;Function test_ehlo[mail.python.org]&gt;
  &lt;Function test_noop[mail.python.org]&gt;

======================= 12 tests collected in 0.12s ========================
</pre></div>
</div>
</div>
<div class="section" id="using-marks-with-parametrized-fixtures">
<span id="fixture-parametrize-marks"></span><h4>Using marks with parametrized fixtures<a class="headerlink" href="#using-marks-with-parametrized-fixtures" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="contents.html#pytest.param" title="pytest.param"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.param()</span></code></a> can be used to apply marks in values sets of parametrized fixtures in the same way
that they can be used with <a class="reference internal" href="contents.html#pytest-mark-parametrize"><span class="std std-ref">&#64;pytest.mark.parametrize</span></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_fixture_marks.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skip</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">data_set</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>


<span class="k">def</span> <span class="nf">test_data</span><span class="p">(</span><span class="n">data_set</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Running this test will <em>skip</em> the invocation of <code class="docutils literal notranslate"><span class="pre">data_set</span></code> with value <code class="docutils literal notranslate"><span class="pre">2</span></code>:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_fixture_marks.py -v
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 3 items

test_fixture_marks.py::test_data[0] <span class=" -Color -Color-Green">PASSED</span>                           <span class=" -Color -Color-Green">[ 33%]</span>
test_fixture_marks.py::test_data[1] <span class=" -Color -Color-Green">PASSED</span>                           <span class=" -Color -Color-Green">[ 66%]</span>
test_fixture_marks.py::test_data[2] <span class=" -Color -Color-Yellow">SKIPPED</span> (unconditional skip)     <span class=" -Color -Color-Yellow">[100%]</span>

<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
</div>
<div class="section" id="modularity-using-fixtures-from-a-fixture-function">
<span id="interdependent-fixtures"></span><h4>Modularity: using fixtures from a fixture function<a class="headerlink" href="#modularity-using-fixtures-from-a-fixture-function" title="Permalink to this headline">¶</a></h4>
<p>In addition to using fixtures in test functions, fixture functions
can use other fixtures themselves.  This contributes to a modular design
of your fixtures and allows re-use of framework-specific fixtures across
many projects.  As a simple example, we can extend the previous example
and instantiate an object <code class="docutils literal notranslate"><span class="pre">app</span></code> where we stick the already defined
<code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> resource into it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_appsetup.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smtp_connection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smtp_connection</span> <span class="o">=</span> <span class="n">smtp_connection</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">App</span><span class="p">(</span><span class="n">smtp_connection</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_smtp_connection_exists</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">app</span><span class="o">.</span><span class="n">smtp_connection</span>
</pre></div>
</div>
<p>Here we declare an <code class="docutils literal notranslate"><span class="pre">app</span></code> fixture which receives the previously defined
<code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture and instantiates an <code class="docutils literal notranslate"><span class="pre">App</span></code> object with it.  Let’s run it:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v test_appsetup.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 2 items

test_appsetup.py::test_smtp_connection_exists[smtp.gmail.com] <span class=" -Color -Color-Green">PASSED</span> <span class=" -Color -Color-Green">[ 50%]</span>
test_appsetup.py::test_smtp_connection_exists[mail.python.org] <span class=" -Color -Color-Green">PASSED</span> <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>Due to the parametrization of <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code>, the test will run twice with two
different <code class="docutils literal notranslate"><span class="pre">App</span></code> instances and respective smtp servers.  There is no
need for the <code class="docutils literal notranslate"><span class="pre">app</span></code> fixture to be aware of the <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code>
parametrization because pytest will fully analyse the fixture dependency graph.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">app</span></code> fixture has a scope of <code class="docutils literal notranslate"><span class="pre">module</span></code> and uses a
module-scoped <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> fixture.  The example would still work if
<code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> was cached on a <code class="docutils literal notranslate"><span class="pre">session</span></code> scope: it is fine for fixtures to use
“broader” scoped fixtures but not the other way round:
A session-scoped fixture could not use a module-scoped one in a
meaningful way.</p>
</div>
<div class="section" id="automatic-grouping-of-tests-by-fixture-instances">
<span id="automatic-per-resource-grouping"></span><h4>Automatic grouping of tests by fixture instances<a class="headerlink" href="#automatic-grouping-of-tests-by-fixture-instances" title="Permalink to this headline">¶</a></h4>
<p>pytest minimizes the number of active fixtures during test runs.
If you have a parametrized fixture, then all the tests using it will
first execute with one instance and then finalizers are called
before the next fixture instance is created.  Among other things,
this eases testing of applications which create and use global state.</p>
<p>The following example uses two parametrized fixtures, one of which is
scoped on a per-module basis, and all the functions perform <code class="docutils literal notranslate"><span class="pre">print</span></code> calls
to show the setup/teardown flow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mod1&quot;</span><span class="p">,</span> <span class="s2">&quot;mod2&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">modarg</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">param</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  SETUP modarg&quot;</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">param</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  TEARDOWN modarg&quot;</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">otherarg</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">param</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  SETUP otherarg&quot;</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">param</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  TEARDOWN otherarg&quot;</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_0</span><span class="p">(</span><span class="n">otherarg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  RUN test0 with otherarg&quot;</span><span class="p">,</span> <span class="n">otherarg</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_1</span><span class="p">(</span><span class="n">modarg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  RUN test1 with modarg&quot;</span><span class="p">,</span> <span class="n">modarg</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_2</span><span class="p">(</span><span class="n">otherarg</span><span class="p">,</span> <span class="n">modarg</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  RUN test2 with otherarg </span><span class="si">{}</span><span class="s2"> and modarg </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">otherarg</span><span class="p">,</span> <span class="n">modarg</span><span class="p">))</span>
</pre></div>
</div>
<p>Let’s run the tests in verbose mode and with looking at the print-output:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v -s test_module.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 8 items

test_module.py::test_0[1]   SETUP otherarg 1
  RUN test0 with otherarg 1
PASSED  TEARDOWN otherarg 1

test_module.py::test_0[2]   SETUP otherarg 2
  RUN test0 with otherarg 2
PASSED  TEARDOWN otherarg 2

test_module.py::test_1[mod1]   SETUP modarg mod1
  RUN test1 with modarg mod1
PASSED
test_module.py::test_2[mod1-1]   SETUP otherarg 1
  RUN test2 with otherarg 1 and modarg mod1
PASSED  TEARDOWN otherarg 1

test_module.py::test_2[mod1-2]   SETUP otherarg 2
  RUN test2 with otherarg 2 and modarg mod1
PASSED  TEARDOWN otherarg 2

test_module.py::test_1[mod2]   TEARDOWN modarg mod1
  SETUP modarg mod2
  RUN test1 with modarg mod2
PASSED
test_module.py::test_2[mod2-1]   SETUP otherarg 1
  RUN test2 with otherarg 1 and modarg mod2
PASSED  TEARDOWN otherarg 1

test_module.py::test_2[mod2-2]   SETUP otherarg 2
  RUN test2 with otherarg 2 and modarg mod2
PASSED  TEARDOWN otherarg 2
  TEARDOWN modarg mod2


<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">8 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>You can see that the parametrized module-scoped <code class="docutils literal notranslate"><span class="pre">modarg</span></code> resource caused an
ordering of test execution that lead to the fewest possible “active” resources.
The finalizer for the <code class="docutils literal notranslate"><span class="pre">mod1</span></code> parametrized resource was executed before the
<code class="docutils literal notranslate"><span class="pre">mod2</span></code> resource was setup.</p>
<p>In particular notice that test_0 is completely independent and finishes first.
Then test_1 is executed with <code class="docutils literal notranslate"><span class="pre">mod1</span></code>, then test_2 with <code class="docutils literal notranslate"><span class="pre">mod1</span></code>, then test_1
with <code class="docutils literal notranslate"><span class="pre">mod2</span></code> and finally test_2 with <code class="docutils literal notranslate"><span class="pre">mod2</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">otherarg</span></code> parametrized resource (having function scope) was set up before
and teared down after every test that used it.</p>
</div>
<div class="section" id="use-fixtures-in-classes-and-modules-with-usefixtures">
<span id="usefixtures"></span><h4>Use fixtures in classes and modules with <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code><a class="headerlink" href="#use-fixtures-in-classes-and-modules-with-usefixtures" title="Permalink to this headline">¶</a></h4>
<p>Sometimes test functions do not directly need access to a fixture object.
For example, tests may require to operate with an empty directory as the
current working directory but otherwise do not care for the concrete
directory.  Here is how you can use the standard <a class="reference external" href="https://docs.python.org/3/library/tempfile.html#module-tempfile" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tempfile</span></code></a>
and pytest fixtures to
achieve it.  We separate the creation of the fixture into a <code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code>
file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">cleandir</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">newpath</span><span class="p">:</span>
        <span class="n">old_cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">newpath</span><span class="p">)</span>
        <span class="k">yield</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">old_cwd</span><span class="p">)</span>
</pre></div>
</div>
<p>and declare its use in a test module via a <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> marker:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_setenv.py</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">usefixtures</span><span class="p">(</span><span class="s2">&quot;cleandir&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestDirectoryInit</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_cwd_starts_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span> <span class="o">==</span> <span class="p">[]</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;myfile&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_cwd_again_starts_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span> <span class="o">==</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Due to the <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> marker, the <code class="docutils literal notranslate"><span class="pre">cleandir</span></code> fixture
will be required for the execution of each test method, just as if
you specified a “cleandir” function argument to each of them.  Let’s run it
to verify our fixture is activated and the tests pass:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q
<span class=" -Color -Color-Green">..</span>                                                                   <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<p>You can specify multiple fixtures like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">usefixtures</span><span class="p">(</span><span class="s2">&quot;cleandir&quot;</span><span class="p">,</span> <span class="s2">&quot;anotherfixture&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>and you may specify fixture usage at the test module level using <a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">usefixtures</span><span class="p">(</span><span class="s2">&quot;cleandir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to put fixtures required by all tests in your project
into an ini-file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">usefixtures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cleandir</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note this mark has no effect in <strong>fixture functions</strong>. For example,
this <strong>will not work as expected</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">usefixtures</span><span class="p">(</span><span class="s2">&quot;my_other_fixture&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">my_fixture_that_sadly_wont_use_my_other_fixture</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Currently this will not generate any error or warning, but this is intended
to be handled by <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3664">issue #3664</a>.</p>
</div>
</div>
<div class="section" id="overriding-fixtures-on-various-levels">
<span id="override-fixtures"></span><h4>Overriding fixtures on various levels<a class="headerlink" href="#overriding-fixtures-on-various-levels" title="Permalink to this headline">¶</a></h4>
<p>In relatively large test suite, you most likely need to <code class="docutils literal notranslate"><span class="pre">override</span></code> a <code class="docutils literal notranslate"><span class="pre">global</span></code> or <code class="docutils literal notranslate"><span class="pre">root</span></code> fixture with a <code class="docutils literal notranslate"><span class="pre">locally</span></code>
defined one, keeping the test code readable and maintainable.</p>
<div class="section" id="override-a-fixture-on-a-folder-conftest-level">
<h5>Override a fixture on a folder (conftest) level<a class="headerlink" href="#override-a-fixture-on-a-folder-conftest-level" title="Permalink to this headline">¶</a></h5>
<p>Given the tests file structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">username</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;username&#39;</span>

    <span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something.py</span>
        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;username&#39;</span>

    <span class="n">subfolder</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

        <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subfolder/conftest.py</span>
            <span class="kn">import</span> <span class="nn">pytest</span>

            <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
            <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;overridden-&#39;</span> <span class="o">+</span> <span class="n">username</span>

        <span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subfolder/test_something.py</span>
            <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
                <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;overridden-username&#39;</span>
</pre></div>
</div>
<p>As you can see, a fixture with the same name can be overridden for certain test folder level.
Note that the <code class="docutils literal notranslate"><span class="pre">base</span></code> or <code class="docutils literal notranslate"><span class="pre">super</span></code> fixture can be accessed from the <code class="docutils literal notranslate"><span class="pre">overriding</span></code>
fixture easily - used in the example above.</p>
</div>
<div class="section" id="override-a-fixture-on-a-test-module-level">
<h5>Override a fixture on a test module level<a class="headerlink" href="#override-a-fixture-on-a-test-module-level" title="Permalink to this headline">¶</a></h5>
<p>Given the tests file structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">username</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;username&#39;</span>

    <span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;overridden-&#39;</span> <span class="o">+</span> <span class="n">username</span>

        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;overridden-username&#39;</span>

    <span class="n">test_something_else</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something_else.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;overridden-else-&#39;</span> <span class="o">+</span> <span class="n">username</span>

        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;overridden-else-username&#39;</span>
</pre></div>
</div>
<p>In the example above, a fixture with the same name can be overridden for certain test module.</p>
</div>
<div class="section" id="override-a-fixture-with-direct-test-parametrization">
<h5>Override a fixture with direct test parametrization<a class="headerlink" href="#override-a-fixture-with-direct-test-parametrization" title="Permalink to this headline">¶</a></h5>
<p>Given the tests file structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">username</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;username&#39;</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">other_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;other-&#39;</span> <span class="o">+</span> <span class="n">username</span>

    <span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;directly-overridden-username&#39;</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">username</span> <span class="o">==</span> <span class="s1">&#39;directly-overridden-username&#39;</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;directly-overridden-username-other&#39;</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">test_username_other</span><span class="p">(</span><span class="n">other_username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">other_username</span> <span class="o">==</span> <span class="s1">&#39;other-directly-overridden-username-other&#39;</span>
</pre></div>
</div>
<p>In the example above, a fixture value is overridden by the test parameter value. Note that the value of the fixture
can be overridden this way even if the test doesn’t use it directly (doesn’t mention it in the function prototype).</p>
</div>
<div class="section" id="override-a-parametrized-fixture-with-non-parametrized-one-and-vice-versa">
<h5>Override a parametrized fixture with non-parametrized one and vice versa<a class="headerlink" href="#override-a-parametrized-fixture-with-non-parametrized-one-and-vice-versa" title="Permalink to this headline">¶</a></h5>
<p>Given the tests file structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">parametrized_username</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">non_parametrized_username</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;username&#39;</span>

    <span class="n">test_something</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">parametrized_username</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;overridden-username&#39;</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">])</span>
        <span class="k">def</span> <span class="nf">non_parametrized_username</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>

        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">parametrized_username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">parametrized_username</span> <span class="o">==</span> <span class="s1">&#39;overridden-username&#39;</span>

        <span class="k">def</span> <span class="nf">test_parametrized_username</span><span class="p">(</span><span class="n">non_parametrized_username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">non_parametrized_username</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">]</span>

    <span class="n">test_something_else</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_something_else.py</span>
        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">parametrized_username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">parametrized_username</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">test_username</span><span class="p">(</span><span class="n">non_parametrized_username</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">non_parametrized_username</span> <span class="o">==</span> <span class="s1">&#39;username&#39;</span>
</pre></div>
</div>
<p>In the example above, a parametrized fixture is overridden with a non-parametrized version, and
a non-parametrized fixture is overridden with a parametrized version for certain test module.
The same applies for the test folder level obviously.</p>
</div>
</div>
<div class="section" id="using-fixtures-from-other-projects">
<h4>Using fixtures from other projects<a class="headerlink" href="#using-fixtures-from-other-projects" title="Permalink to this headline">¶</a></h4>
<p>Usually projects that provide pytest support will use <a class="reference internal" href="contents.html#setuptools-entry-points"><span class="std std-ref">entry points</span></a>,
so just installing those projects into an environment will make those fixtures available for use.</p>
<p>In case you want to use fixtures from a project that does not use entry points, you can
define <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> in your top <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file to register that module
as a plugin.</p>
<p>Suppose you have some fixtures in <code class="docutils literal notranslate"><span class="pre">mylibrary.fixtures</span></code> and you want to reuse them into your
<code class="docutils literal notranslate"><span class="pre">app/tests</span></code> directory.</p>
<p>All you need to do is to define <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> in <code class="docutils literal notranslate"><span class="pre">app/tests/conftest.py</span></code>
pointing to that module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;mylibrary.fixtures&quot;</span>
</pre></div>
</div>
<p>This effectively registers <code class="docutils literal notranslate"><span class="pre">mylibrary.fixtures</span></code> as a plugin, making all its fixtures and
hooks available to tests in <code class="docutils literal notranslate"><span class="pre">app/tests</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes users will <em>import</em> fixtures from other projects for use, however this is not
recommended: importing fixtures into a module will register them in pytest
as <em>defined</em> in that module.</p>
<p>This has minor consequences, such as appearing multiple times in <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code>,
but it is not <strong>recommended</strong> because this behavior might change/stop working
in future versions.</p>
</div>
</div>
</div>
<span id="document-how-to/mark"></span><div class="section" id="how-to-mark-test-functions-with-attributes">
<span id="mark"></span><h3>How to mark test functions with attributes<a class="headerlink" href="#how-to-mark-test-functions-with-attributes" title="Permalink to this headline">¶</a></h3>
<p>By using the <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> helper you can easily set
metadata on your test functions. You can find the full list of builtin markers
in the <a class="reference internal" href="contents.html#marks-ref"><span class="std std-ref">API Reference</span></a>. Or you can list all the markers, including
builtin and custom, using the CLI - <code class="code docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--markers</span></code>.</p>
<p>Here are some of the builtin markers:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#usefixtures"><span class="std std-ref">usefixtures</span></a> - use fixtures on a test function or class</p></li>
<li><p><a class="reference internal" href="contents.html#filterwarnings"><span class="std std-ref">filterwarnings</span></a> - filter certain warnings of a test function</p></li>
<li><p><a class="reference internal" href="contents.html#skip"><span class="std std-ref">skip</span></a> - always skip a test function</p></li>
<li><p><a class="reference internal" href="contents.html#skipif"><span class="std std-ref">skipif</span></a> - skip a test function if a certain condition is met</p></li>
<li><p><a class="reference internal" href="contents.html#xfail"><span class="std std-ref">xfail</span></a> - produce an “expected failure” outcome if a certain
condition is met</p></li>
<li><p><a class="reference internal" href="contents.html#parametrizemark"><span class="std std-ref">parametrize</span></a> - perform multiple calls
to the same test function.</p></li>
</ul>
<p>It’s easy to create custom markers or to apply markers
to whole test classes or modules. Those markers can be used by plugins, and also
are commonly used to <a class="reference internal" href="contents.html#mark-run"><span class="std std-ref">select tests</span></a> on the command-line with the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option.</p>
<p>See <a class="reference internal" href="contents.html#mark-examples"><span class="std std-ref">Working with custom markers</span></a> for examples which also serve as documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Marks can only be applied to tests, having no effect on
<a class="reference internal" href="contents.html#fixtures"><span class="std std-ref">fixtures</span></a>.</p>
</div>
<div class="section" id="registering-marks">
<h4>Registering marks<a class="headerlink" href="#registering-marks" title="Permalink to this headline">¶</a></h4>
<p>You can register custom marks in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">slow: marks tests as slow (deselect with &#39;-m &quot;not slow&quot;&#39;)</span><span class="w"></span>
<span class="w">    </span><span class="na">serial</span><span class="w"></span>
</pre></div>
</div>
<p>or in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.pytest.ini_options]</span><span class="w"></span>
<span class="n">markers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;slow: marks tests as slow (deselect with &#39;-m \&quot;not slow\&quot;&#39;)&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;serial&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>Note that everything past the <code class="docutils literal notranslate"><span class="pre">:</span></code> after the mark name is an optional description.</p>
<p>Alternatively, you can register new markers programmatically in a
<a class="reference internal" href="contents.html#initialization-hooks"><span class="std std-ref">pytest_configure</span></a> hook:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span> <span class="s2">&quot;env(name): mark test to run only on named environment&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Registered marks appear in pytest’s help text and do not emit warnings (see the next section). It
is recommended that third-party plugins always <a class="reference internal" href="contents.html#registering-markers"><span class="std std-ref">register their markers</span></a>.</p>
</div>
<div class="section" id="raising-errors-on-unknown-marks">
<span id="unknown-marks"></span><h4>Raising errors on unknown marks<a class="headerlink" href="#raising-errors-on-unknown-marks" title="Permalink to this headline">¶</a></h4>
<p>Unregistered marks applied with the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.name_of_the_mark</span></code> decorator
will always emit a warning in order to avoid silently doing something
surprising due to mistyped names. As described in the previous section, you can disable
the warning for custom marks by registering them in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file or
using a custom <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> hook.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> command-line flag is passed, any unknown marks applied
with the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.name_of_the_mark</span></code> decorator will trigger an error. You can
enforce this validation in your project by adding <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> to <code class="docutils literal notranslate"><span class="pre">addopts</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--strict-markers</span><span class="w"></span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">slow: marks tests as slow (deselect with &#39;-m &quot;not slow&quot;&#39;)</span><span class="w"></span>
<span class="w">    </span><span class="na">serial</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<span id="document-how-to/parametrize"></span><div class="section" id="how-to-parametrize-fixtures-and-test-functions">
<span id="parametrize-basics"></span><span id="parametrize"></span><span id="parametrized-test-functions"></span><span id="parametrizing-tests"></span><span id="test-generators"></span><h3>How to parametrize fixtures and test functions<a class="headerlink" href="#how-to-parametrize-fixtures-and-test-functions" title="Permalink to this headline">¶</a></h3>
<p>pytest enables test parametrization at several levels:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fixture()</span></code></a> allows one to <a class="reference internal" href="contents.html#fixture-parametrize"><span class="std std-ref">parametrize fixture
functions</span></a>.</p></li>
</ul>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest-mark-parametrize">&#64;pytest.mark.parametrize</a> allows one to define multiple sets of
arguments and fixtures at the test function or class.</p></li>
<li><p><a class="reference internal" href="#pytest-generate-tests">pytest_generate_tests</a> allows one to define custom parametrization
schemes or extensions.</p></li>
</ul>
<div class="section" id="pytest-mark-parametrize-parametrizing-test-functions">
<span id="pytest-mark-parametrize"></span><span id="parametrizemark"></span><h4><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>: parametrizing test functions<a class="headerlink" href="#pytest-mark-parametrize-parametrizing-test-functions" title="Permalink to this headline">¶</a></h4>
<p>The builtin <a class="reference internal" href="contents.html#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a> decorator enables
parametrization of arguments for a test function.  Here is a typical example
of a test function that implements checking that a certain input leads
to an expected output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_expectation.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2+4&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>Here, the <code class="docutils literal notranslate"><span class="pre">&#64;parametrize</span></code> decorator defines three different <code class="docutils literal notranslate"><span class="pre">(test_input,expected)</span></code>
tuples so that the <code class="docutils literal notranslate"><span class="pre">test_eval</span></code> function will run three times using
them in turn:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 3 items

test_expectation.py <span class=" -Color -Color-Green">..</span><span class=" -Color -Color-Red">F</span>                                              <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________________ test_eval[6*9-42] _____________________________</span>

test_input = &#39;6*9&#39;, expected = 42

    @pytest.mark.parametrize(&quot;test_input,expected&quot;, [(&quot;3+5&quot;, 8), (&quot;2+4&quot;, 6), (&quot;6*9&quot;, 42)])
    def test_eval(test_input, expected):
&gt;       assert eval(test_input) == expected
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert 54 == 42</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 54 = eval(&#39;6*9&#39;)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_expectation.py</span>:6: AssertionError
========================= short test summary info ==========================
FAILED test_expectation.py::test_eval[6*9-42] - AssertionError: assert 54...
<span class=" -Color -Color-Red">======================= </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">2 passed</span><span class=" -Color -Color-Red"> in 0.12s ========================</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Parameter values are passed as-is to tests (no copy whatsoever).</p>
<p>For example, if you pass a list or a dict as a parameter value, and
the test case code mutates it, the mutations will be reflected in subsequent
test case calls.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>pytest by default escapes any non-ascii characters used in unicode strings
for the parametrization because it has several downsides.
If however you would like to use unicode strings in parametrization
and see them in the terminal as is (non-escaped), use this option
in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span><span class="w"></span>
</pre></div>
</div>
<p>Keep in mind however that this might cause unwanted side effects and
even bugs depending on the OS used and plugins currently installed,
so use it at your own risk.</p>
</div>
<p>As designed in this example, only one pair of input/output values fails
the simple test function.  And as usual with test function arguments,
you can see the <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> values in the traceback.</p>
<p>Note that you could also use the parametrize marker on a class or a module
(see <a class="reference internal" href="contents.html#mark"><span class="std std-ref">How to mark test functions with attributes</span></a>) which would invoke several functions with the argument sets,
for instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;n,expected&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_simple_case</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>

    <span class="k">def</span> <span class="nf">test_weird_simple_case</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>To parametrize all tests in a module, you can assign to the <a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a> global variable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;n,expected&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>


<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_simple_case</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>

    <span class="k">def</span> <span class="nf">test_weird_simple_case</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>It is also possible to mark individual test instances within parametrize,
for example with the builtin <code class="docutils literal notranslate"><span class="pre">mark.xfail</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_expectation.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span>
    <span class="p">[(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2+4&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">)],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>Let’s run this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 3 items

test_expectation.py <span class=" -Color -Color-Green">..</span><span class=" -Color -Color-Yellow">x</span>                                              <span class=" -Color -Color-Yellow">[100%]</span>

<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 xfailed</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
<p>The one parameter set which caused a failure previously now
shows up as an “xfailed” (expected to fail) test.</p>
<p>In case the values provided to <code class="docutils literal notranslate"><span class="pre">parametrize</span></code> result in an empty list - for
example, if they’re dynamically generated by some function - the behaviour of
pytest is defined by the <a class="reference internal" href="contents.html#confval-empty_parameter_set_mark"><code class="xref std std-confval docutils literal notranslate"><span class="pre">empty_parameter_set_mark</span></code></a> option.</p>
<p>To get all combinations of multiple parametrized arguments you can stack
<code class="docutils literal notranslate"><span class="pre">parametrize</span></code> decorators:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This will run the test with the arguments set to <code class="docutils literal notranslate"><span class="pre">x=0/y=2</span></code>, <code class="docutils literal notranslate"><span class="pre">x=1/y=2</span></code>,
<code class="docutils literal notranslate"><span class="pre">x=0/y=3</span></code>, and <code class="docutils literal notranslate"><span class="pre">x=1/y=3</span></code> exhausting parameters in the order of the decorators.</p>
</div>
<div class="section" id="basic-pytest-generate-tests-example">
<span id="pytest-generate-tests"></span><h4>Basic <code class="docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code> example<a class="headerlink" href="#basic-pytest-generate-tests-example" title="Permalink to this headline">¶</a></h4>
<p>Sometimes you may want to implement your own parametrization scheme
or implement some dynamism for determining the parameters or scope
of a fixture.   For this, you can use the <code class="docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code> hook
which is called when collecting a test function.  Through the passed in
<code class="docutils literal notranslate"><span class="pre">metafunc</span></code> object you can inspect the requesting test context and, most
importantly, you can call <code class="docutils literal notranslate"><span class="pre">metafunc.parametrize()</span></code> to cause
parametrization.</p>
<p>For example, let’s say we want to run a test taking string inputs which
we want to set via a new <code class="docutils literal notranslate"><span class="pre">pytest</span></code> command line option.  Let’s first write
a simple test accepting a <code class="docutils literal notranslate"><span class="pre">stringinput</span></code> fixture function argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_strings.py</span>


<span class="k">def</span> <span class="nf">test_valid_string</span><span class="p">(</span><span class="n">stringinput</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">stringinput</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span>
</pre></div>
</div>
<p>Now we add a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file containing the addition of a
command line option and the parametrization of our test function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--stringinput&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;append&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;list of stringinputs to pass to test functions&quot;</span><span class="p">,</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;stringinput&quot;</span> <span class="ow">in</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
        <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;stringinput&quot;</span><span class="p">,</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;stringinput&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>If we now pass two stringinput values, our test will run twice:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q --stringinput=&quot;hello&quot; --stringinput=&quot;world&quot; test_strings.py
<span class=" -Color -Color-Green">..</span>                                                                   <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<p>Let’s also run with a stringinput that will lead to a failing test:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q --stringinput=&quot;!&quot; test_strings.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ test_valid_string[!] ___________________________</span>

stringinput = &#39;!&#39;

    def test_valid_string(stringinput):
&gt;       assert stringinput.isalpha()
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert False</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where False = &lt;built-in method isalpha of str object at 0xdeadbeef0001&gt;()</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;built-in method isalpha of str object at 0xdeadbeef0001&gt; = &#39;!&#39;.isalpha</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_strings.py</span>:4: AssertionError
========================= short test summary info ==========================
FAILED test_strings.py::test_valid_string[!] - AssertionError: assert False
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>As expected our test function fails.</p>
<p>If you don’t specify a stringinput it will be skipped because
<code class="docutils literal notranslate"><span class="pre">metafunc.parametrize()</span></code> will be called with an empty parameter
list:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q -rs test_strings.py
<span class=" -Color -Color-Yellow">s</span>                                                                    <span class=" -Color -Color-Yellow">[100%]</span>
========================= short test summary info ==========================
SKIPPED [1] test_strings.py: got empty parameter set [&#39;stringinput&#39;], function test_valid_string at /home/sweet/project/test_strings.py:2
<span class=" -Color -Color-Bold -Color-Bold-Yellow">1 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s</span>
</pre></div>
</div>
<p>Note that when calling <code class="docutils literal notranslate"><span class="pre">metafunc.parametrize</span></code> multiple times with different parameter sets, all parameter names across
those sets cannot be duplicated, otherwise an error will be raised.</p>
</div>
<div class="section" id="more-examples">
<h4>More examples<a class="headerlink" href="#more-examples" title="Permalink to this headline">¶</a></h4>
<p>For further examples, you might want to look at <a class="reference internal" href="contents.html#paramexamples"><span class="std std-ref">more
parametrization examples</span></a>.</p>
</div>
</div>
<span id="document-how-to/tmp_path"></span><div class="section" id="how-to-use-temporary-directories-and-files-in-tests">
<span id="tmp-path"></span><span id="tmp-path-handling"></span><h3>How to use temporary directories and files in tests<a class="headerlink" href="#how-to-use-temporary-directories-and-files-in-tests" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-tmp-path-fixture">
<h4>The <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixture<a class="headerlink" href="#the-tmp-path-fixture" title="Permalink to this headline">¶</a></h4>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixture which will
provide a temporary directory unique to the test invocation,
created in the <a class="reference internal" href="#base-temporary-directory">base temporary directory</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> is a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> object. Here is an example test usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_tmp_path.py</span>
<span class="n">CONTENT</span> <span class="o">=</span> <span class="s2">&quot;content&quot;</span>


<span class="k">def</span> <span class="nf">test_create_file</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">tmp_path</span> <span class="o">/</span> <span class="s2">&quot;sub&quot;</span>
    <span class="n">d</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">d</span> <span class="o">/</span> <span class="s2">&quot;hello.txt&quot;</span>
    <span class="n">p</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">CONTENT</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span> <span class="o">==</span> <span class="n">CONTENT</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tmp_path</span><span class="o">.</span><span class="n">iterdir</span><span class="p">()))</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Running this would result in a passed test except for the last
<code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">0</span></code> line which we use to look at values:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_tmp_path.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_tmp_path.py <span class=" -Color -Color-Red">F</span>                                                   <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________________ test_create_file _____________________________</span>

tmp_path = PosixPath(&#39;PYTEST_TMPDIR/test_create_file0&#39;)

    def test_create_file(tmp_path):
        d = tmp_path / &quot;sub&quot;
        d.mkdir()
        p = d / &quot;hello.txt&quot;
        p.write_text(CONTENT)
        assert p.read_text() == CONTENT
        assert len(list(tmp_path.iterdir())) == 1
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_tmp_path.py</span>:11: AssertionError
========================= short test summary info ==========================
FAILED test_tmp_path.py::test_create_file - assert 0
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
</div>
<div class="section" id="the-tmp-path-factory-fixture">
<span id="tmp-path-factory-example"></span><h4>The <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> fixture<a class="headerlink" href="#the-tmp-path-factory-fixture" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> is a session-scoped fixture which can be used
to create arbitrary temporary directories from any other fixture or test.</p>
<p>For example, suppose your test suite needs a large image on disk, which is
generated procedurally. Instead of computing the same image for each test
that uses it into its own <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>, you can generate it once per-session
to save time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">image_file</span><span class="p">(</span><span class="n">tmp_path_factory</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">compute_expensive_image</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">tmp_path_factory</span><span class="o">.</span><span class="n">mktemp</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;img.png&quot;</span>
    <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fn</span>


<span class="c1"># contents of test_image.py</span>
<span class="k">def</span> <span class="nf">test_histogram</span><span class="p">(</span><span class="n">image_file</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">load_image</span><span class="p">(</span><span class="n">image_file</span><span class="p">)</span>
    <span class="c1"># compute and test histogram</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="contents.html#tmp-path-factory-factory-api"><span class="std std-ref">tmp_path_factory API</span></a> for details.</p>
</div>
<div class="section" id="the-tmpdir-and-tmpdir-factory-fixtures">
<span id="tmpdir"></span><span id="tmpdir-and-tmpdir-factory"></span><h4>The <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> and <code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> fixtures<a class="headerlink" href="#the-tmpdir-and-tmpdir-factory-fixtures" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> and <code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> fixtures are similar to <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>
and <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code>, but use/return legacy <a class="reference external" href="https://py.readthedocs.io/en/latest/path.html">py.path.local</a> objects
rather than standard <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> and <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code>.</p>
</div>
<p>See <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a> <a class="reference internal" href="contents.html#std-fixture-tmpdir_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir_factory</span></code></a>
API for details.</p>
</div>
<div class="section" id="the-default-base-temporary-directory">
<span id="base-temporary-directory"></span><h4>The default base temporary directory<a class="headerlink" href="#the-default-base-temporary-directory" title="Permalink to this headline">¶</a></h4>
<p>Temporary directories are by default created as sub-directories of
the system temporary directory.  The base name will be <code class="docutils literal notranslate"><span class="pre">pytest-NUM</span></code> where
<code class="docutils literal notranslate"><span class="pre">NUM</span></code> will be incremented with each test run.  Moreover, entries older
than 3 temporary directories will be removed.</p>
<p>The number of entries currently cannot be changed, but using the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code>
option will remove the directory before every run, effectively meaning the temporary directories
of only the most recent run will be kept.</p>
<p>You can override the default temporary directory setting like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --basetemp<span class="o">=</span>mydir
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">mydir</span></code> will be completely removed, so make sure to use a directory
for that purpose only.</p>
</div>
<p>When distributing tests on the local machine using <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>, care is taken to
automatically configure a basetemp directory for the sub processes such that all temporary
data lands below a single per-test run basetemp directory.</p>
</div>
</div>
<span id="document-how-to/monkeypatch"></span><div class="section" id="how-to-monkeypatch-mock-modules-and-environments">
<span id="monkeypatching"></span><h3>How to monkeypatch/mock modules and environments<a class="headerlink" href="#how-to-monkeypatch-mock-modules-and-environments" title="Permalink to this headline">¶</a></h3>
<p>Sometimes tests need to invoke functionality which depends
on global settings or which invokes code which cannot be easily
tested such as network access.  The <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture
helps you to safely set/delete an attribute, dictionary item or
environment variable, or to modify <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> for importing.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture provides these helper methods for safely patching and mocking
functionality in tests:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr(obj,</span> <span class="pre">name,</span> <span class="pre">value,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.delattr" title="pytest.MonkeyPatch.delattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delattr(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.setitem" title="pytest.MonkeyPatch.setitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setitem(mapping,</span> <span class="pre">name,</span> <span class="pre">value)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.delitem" title="pytest.MonkeyPatch.delitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delitem(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.setenv" title="pytest.MonkeyPatch.setenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setenv(name,</span> <span class="pre">value,</span> <span class="pre">prepend=None)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.delenv" title="pytest.MonkeyPatch.delenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delenv(name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.syspath_prepend" title="pytest.MonkeyPatch.syspath_prepend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.chdir" title="pytest.MonkeyPatch.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.chdir(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.context()</span></code></a></p></li>
</ul>
<p>All modifications will be undone after the requesting
test function or fixture has finished. The <code class="docutils literal notranslate"><span class="pre">raising</span></code>
parameter determines if a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> or <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>
will be raised if the target of the set/deletion operation does not exist.</p>
<p>Consider the following scenarios:</p>
<p>1. Modifying the behavior of a function or the property of a class for a test e.g.
there is an API call or database connection you will not make for a test but you know
what the expected output should be. Use <a class="reference internal" href="contents.html#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code></a> to patch the
function or property with your desired testing behavior. This can include your own functions.
Use <a class="reference internal" href="contents.html#pytest.MonkeyPatch.delattr" title="pytest.MonkeyPatch.delattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delattr</span></code></a> to remove the function or property for the test.</p>
<p>2. Modifying the values of dictionaries e.g. you have a global configuration that
you want to modify for certain test cases. Use <a class="reference internal" href="contents.html#pytest.MonkeyPatch.setitem" title="pytest.MonkeyPatch.setitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setitem</span></code></a> to patch the
dictionary for the test. <a class="reference internal" href="contents.html#pytest.MonkeyPatch.delitem" title="pytest.MonkeyPatch.delitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delitem</span></code></a> can be used to remove items.</p>
<p>3. Modifying environment variables for a test e.g. to test program behavior if an
environment variable is missing, or to set multiple values to a known variable.
<a class="reference internal" href="contents.html#pytest.MonkeyPatch.setenv" title="pytest.MonkeyPatch.setenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setenv</span></code></a> and <a class="reference internal" href="contents.html#pytest.MonkeyPatch.delenv" title="pytest.MonkeyPatch.delenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delenv</span></code></a> can be used for
these patches.</p>
<p>4. Use <code class="docutils literal notranslate"><span class="pre">monkeypatch.setenv(&quot;PATH&quot;,</span> <span class="pre">value,</span> <span class="pre">prepend=os.pathsep)</span></code> to modify <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>, and
<a class="reference internal" href="contents.html#pytest.MonkeyPatch.chdir" title="pytest.MonkeyPatch.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.chdir</span></code></a> to change the context of the current working directory
during a test.</p>
<p>5. Use <a class="reference internal" href="contents.html#pytest.MonkeyPatch.syspath_prepend" title="pytest.MonkeyPatch.syspath_prepend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend</span></code></a> to modify <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> which will also
call <code class="docutils literal notranslate"><span class="pre">pkg_resources.fixup_namespace_packages</span></code> and <a class="reference external" href="https://docs.python.org/3/library/importlib.html#importlib.invalidate_caches" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.invalidate_caches()</span></code></a>.</p>
<p>6. Use <a class="reference internal" href="contents.html#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.context</span></code></a> to apply patches only in a specific scope, which can help
control teardown of complex fixtures or patches to the stdlib.</p>
<p>See the <a class="reference external" href="https://tetamap.wordpress.com//2009/03/03/monkeypatching-in-unit-tests-done-right/">monkeypatch blog post</a> for some introduction material
and a discussion of its motivation.</p>
<div class="section" id="monkeypatching-functions">
<h4>Monkeypatching functions<a class="headerlink" href="#monkeypatching-functions" title="Permalink to this headline">¶</a></h4>
<p>Consider a scenario where you are working with user directories. In the context of
testing, you do not want your test to depend on the running user. <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code>
can be used to patch functions dependent on the user to always return a
specific value.</p>
<p>In this example, <a class="reference internal" href="contents.html#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code></a> is used to patch <code class="docutils literal notranslate"><span class="pre">Path.home</span></code>
so that the known testing path <code class="docutils literal notranslate"><span class="pre">Path(&quot;/abc&quot;)</span></code> is always used when the test is run.
This removes any dependency on the running user for testing purposes.
<a class="reference internal" href="contents.html#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code></a> must be called before the function which will use
the patched function is called.
After the test function finishes the <code class="docutils literal notranslate"><span class="pre">Path.home</span></code> modification will be undone.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_module.py with source code and the test</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>


<span class="k">def</span> <span class="nf">getssh</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Simple function to return expanded homedir ssh path.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.ssh&quot;</span>


<span class="k">def</span> <span class="nf">test_getssh</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="c1"># mocked return function to replace Path.home</span>
    <span class="c1"># always return &#39;/abc&#39;</span>
    <span class="k">def</span> <span class="nf">mockreturn</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/abc&quot;</span><span class="p">)</span>

    <span class="c1"># Application of the monkeypatch to replace Path.home</span>
    <span class="c1"># with the behavior of mockreturn defined above.</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">Path</span><span class="p">,</span> <span class="s2">&quot;home&quot;</span><span class="p">,</span> <span class="n">mockreturn</span><span class="p">)</span>

    <span class="c1"># Calling getssh() will use mockreturn in place of Path.home</span>
    <span class="c1"># for this test with the monkeypatch.</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">getssh</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/abc/.ssh&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="monkeypatching-returned-objects-building-mock-classes">
<h4>Monkeypatching returned objects: building mock classes<a class="headerlink" href="#monkeypatching-returned-objects-building-mock-classes" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code></a> can be used in conjunction with classes to mock returned
objects from functions instead of values.
Imagine a simple function to take an API url and return the json response.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of app.py, a simple API retrieval example</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="k">def</span> <span class="nf">get_json</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Takes a URL, and returns the JSON.&quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
<p>We need to mock <code class="docutils literal notranslate"><span class="pre">r</span></code>, the returned response object for testing purposes.
The mock of <code class="docutils literal notranslate"><span class="pre">r</span></code> needs a <code class="docutils literal notranslate"><span class="pre">.json()</span></code> method which returns a dictionary.
This can be done in our test file by defining a class to represent <code class="docutils literal notranslate"><span class="pre">r</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_app.py, a simple test for our API retrieval</span>
<span class="c1"># import requests for the purposes of monkeypatching</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># our app.py that includes the get_json() function</span>
<span class="c1"># this is the previous code block example</span>
<span class="kn">import</span> <span class="nn">app</span>

<span class="c1"># custom class to be the mock return value</span>
<span class="c1"># will override the requests.Response returned from requests.get</span>
<span class="k">class</span> <span class="nc">MockResponse</span><span class="p">:</span>

    <span class="c1"># mock json() method always returns a specific testing dictionary</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">json</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mock_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mock_response&quot;</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">test_get_json</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>

    <span class="c1"># Any arguments may be passed and mock_get() will always return our</span>
    <span class="c1"># mocked object, which only has the .json() method.</span>
    <span class="k">def</span> <span class="nf">mock_get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MockResponse</span><span class="p">()</span>

    <span class="c1"># apply the monkeypatch for requests.get to mock_get</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">requests</span><span class="p">,</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">mock_get</span><span class="p">)</span>

    <span class="c1"># app.get_json, which contains requests.get, uses the monkeypatch</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">get_json</span><span class="p">(</span><span class="s2">&quot;https://fakeurl&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;mock_key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;mock_response&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> applies the mock for <code class="docutils literal notranslate"><span class="pre">requests.get</span></code> with our <code class="docutils literal notranslate"><span class="pre">mock_get</span></code> function.
The <code class="docutils literal notranslate"><span class="pre">mock_get</span></code> function returns an instance of the <code class="docutils literal notranslate"><span class="pre">MockResponse</span></code> class, which
has a <code class="docutils literal notranslate"><span class="pre">json()</span></code> method defined to return a known testing dictionary and does not
require any outside API connection.</p>
<p>You can build the <code class="docutils literal notranslate"><span class="pre">MockResponse</span></code> class with the appropriate degree of complexity for
the scenario you are testing. For instance, it could include an <code class="docutils literal notranslate"><span class="pre">ok</span></code> property that
always returns <code class="docutils literal notranslate"><span class="pre">True</span></code>, or return different values from the <code class="docutils literal notranslate"><span class="pre">json()</span></code> mocked method
based on input strings.</p>
<p>This mock can be shared across tests using a <code class="docutils literal notranslate"><span class="pre">fixture</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_app.py, a simple test for our API retrieval</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># app.py that includes the get_json() function</span>
<span class="kn">import</span> <span class="nn">app</span>

<span class="c1"># custom class to be the mock return value of requests.get()</span>
<span class="k">class</span> <span class="nc">MockResponse</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">json</span><span class="p">():</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mock_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mock_response&quot;</span><span class="p">}</span>


<span class="c1"># monkeypatched requests.get moved to a fixture</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_response</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests.get() mocked to return {&#39;mock_key&#39;:&#39;mock_response&#39;}.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">mock_get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">MockResponse</span><span class="p">()</span>

    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">requests</span><span class="p">,</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="n">mock_get</span><span class="p">)</span>


<span class="c1"># notice our test uses the custom fixture instead of monkeypatch directly</span>
<span class="k">def</span> <span class="nf">test_get_json</span><span class="p">(</span><span class="n">mock_response</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">get_json</span><span class="p">(</span><span class="s2">&quot;https://fakeurl&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;mock_key&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;mock_response&quot;</span>
</pre></div>
</div>
<p>Furthermore, if the mock was designed to be applied to all tests, the <code class="docutils literal notranslate"><span class="pre">fixture</span></code> could
be moved to a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file and use the with <code class="docutils literal notranslate"><span class="pre">autouse=True</span></code> option.</p>
</div>
<div class="section" id="global-patch-example-preventing-requests-from-remote-operations">
<h4>Global patch example: preventing “requests” from remote operations<a class="headerlink" href="#global-patch-example-preventing-requests-from-remote-operations" title="Permalink to this headline">¶</a></h4>
<p>If you want to prevent the “requests” library from performing http
requests in all your tests, you can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">no_requests</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove requests.sessions.Session.request for all tests.&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">delattr</span><span class="p">(</span><span class="s2">&quot;requests.sessions.Session.request&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This autouse fixture will be executed for each test function and it
will delete the method <code class="docutils literal notranslate"><span class="pre">request.session.Session.request</span></code>
so that any attempts within tests to create http requests will fail.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be advised that it is not recommended to patch builtin functions such as <code class="docutils literal notranslate"><span class="pre">open</span></code>,
<code class="docutils literal notranslate"><span class="pre">compile</span></code>, etc., because it might break pytest’s internals. If that’s
unavoidable, passing <code class="docutils literal notranslate"><span class="pre">--tb=native</span></code>, <code class="docutils literal notranslate"><span class="pre">--assert=plain</span></code> and <code class="docutils literal notranslate"><span class="pre">--capture=no</span></code> might
help although there’s no guarantee.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mind that patching <code class="docutils literal notranslate"><span class="pre">stdlib</span></code> functions and some third-party libraries used by pytest
might break pytest itself, therefore in those cases it is recommended to use
<a class="reference internal" href="contents.html#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MonkeyPatch.context()</span></code></a> to limit the patching to the block you want tested:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>


<span class="k">def</span> <span class="nf">test_partial</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">monkeypatch</span><span class="o">.</span><span class="n">context</span><span class="p">()</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">functools</span><span class="p">,</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3290">issue #3290</a> for details.</p>
</div>
</div>
<div class="section" id="monkeypatching-environment-variables">
<h4>Monkeypatching environment variables<a class="headerlink" href="#monkeypatching-environment-variables" title="Permalink to this headline">¶</a></h4>
<p>If you are working with environment variables you often need to safely change the values
or delete them from the system for testing purposes. <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> provides a mechanism
to do this using the <code class="docutils literal notranslate"><span class="pre">setenv</span></code> and <code class="docutils literal notranslate"><span class="pre">delenv</span></code> method. Our example code to test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of our original code file e.g. code.py</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="k">def</span> <span class="nf">get_os_user_lower</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Simple retrieval function.</span>
<span class="sd">    Returns lowercase USER or raises OSError.&quot;&quot;&quot;</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">username</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="s2">&quot;USER environment is not set.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">username</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</pre></div>
</div>
<p>There are two potential paths. First, the <code class="docutils literal notranslate"><span class="pre">USER</span></code> environment variable is set to a
value. Second, the <code class="docutils literal notranslate"><span class="pre">USER</span></code> environment variable does not exist. Using <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code>
both paths can be safely tested without impacting the running environment:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of our test file e.g. test_code.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_upper_to_lower</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the USER env var to assert the behavior.&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">,</span> <span class="s2">&quot;TestingUser&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">get_os_user_lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;testinguser&quot;</span>


<span class="k">def</span> <span class="nf">test_raise_exception</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove the USER env var and assert OSError is raised.&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">):</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">get_os_user_lower</span><span class="p">()</span>
</pre></div>
</div>
<p>This behavior can be moved into <code class="docutils literal notranslate"><span class="pre">fixture</span></code> structures and shared across tests:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of our test file e.g. test_code.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_env_user</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">,</span> <span class="s2">&quot;TestingUser&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_env_missing</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">delenv</span><span class="p">(</span><span class="s2">&quot;USER&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="c1"># notice the tests reference the fixtures for mocks</span>
<span class="k">def</span> <span class="nf">test_upper_to_lower</span><span class="p">(</span><span class="n">mock_env_user</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">get_os_user_lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;testinguser&quot;</span>


<span class="k">def</span> <span class="nf">test_raise_exception</span><span class="p">(</span><span class="n">mock_env_missing</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">):</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">get_os_user_lower</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="monkeypatching-dictionaries">
<h4>Monkeypatching dictionaries<a class="headerlink" href="#monkeypatching-dictionaries" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="contents.html#pytest.MonkeyPatch.setitem" title="pytest.MonkeyPatch.setitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setitem</span></code></a> can be used to safely set the values of dictionaries
to specific values during tests. Take this simplified connection string example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of app.py to generate a simple connection string</span>
<span class="n">DEFAULT_CONFIG</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;user1&quot;</span><span class="p">,</span> <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;db1&quot;</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">create_connection_string</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates a connection string from input or defaults.&quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">config</span> <span class="ow">or</span> <span class="n">DEFAULT_CONFIG</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;User Id=</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">; Location=</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">;&quot;</span>
</pre></div>
</div>
<p>For testing purposes we can patch the <code class="docutils literal notranslate"><span class="pre">DEFAULT_CONFIG</span></code> dictionary to specific values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_app.py</span>
<span class="c1"># app.py with the connection string function (prior code block)</span>
<span class="kn">import</span> <span class="nn">app</span>


<span class="k">def</span> <span class="nf">test_connection</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>

    <span class="c1"># Patch the values of DEFAULT_CONFIG to specific</span>
    <span class="c1"># testing values only for this test.</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;test_user&quot;</span><span class="p">)</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;database&quot;</span><span class="p">,</span> <span class="s2">&quot;test_db&quot;</span><span class="p">)</span>

    <span class="c1"># expected result based on the mocks</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="s2">&quot;User Id=test_user; Location=test_db;&quot;</span>

    <span class="c1"># the test uses the monkeypatched dictionary settings</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">create_connection_string</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>You can use the <a class="reference internal" href="contents.html#pytest.MonkeyPatch.delitem" title="pytest.MonkeyPatch.delitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delitem</span></code></a> to remove values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_app.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c1"># app.py with the connection string function</span>
<span class="kn">import</span> <span class="nn">app</span>


<span class="k">def</span> <span class="nf">test_missing_user</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>

    <span class="c1"># patch the DEFAULT_CONFIG t be missing the &#39;user&#39; key</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">delitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Key error expected because a config is not passed, and the</span>
    <span class="c1"># default is now missing the &#39;user&#39; entry.</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">create_connection_string</span><span class="p">()</span>
</pre></div>
</div>
<p>The modularity of fixtures gives you the flexibility to define
separate fixtures for each potential mock and reference them in the needed tests.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of test_app.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c1"># app.py with the connection string function</span>
<span class="kn">import</span> <span class="nn">app</span>

<span class="c1"># all of the mocks are moved into separated fixtures</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_test_user</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the DEFAULT_CONFIG user to test_user.&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;test_user&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_test_database</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the DEFAULT_CONFIG database to test_db.&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;database&quot;</span><span class="p">,</span> <span class="s2">&quot;test_db&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mock_missing_default_user</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove the user key from DEFAULT_CONFIG&quot;&quot;&quot;</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">delitem</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">DEFAULT_CONFIG</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">raising</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="c1"># tests reference only the fixture mocks that are needed</span>
<span class="k">def</span> <span class="nf">test_connection</span><span class="p">(</span><span class="n">mock_test_user</span><span class="p">,</span> <span class="n">mock_test_database</span><span class="p">):</span>

    <span class="n">expected</span> <span class="o">=</span> <span class="s2">&quot;User Id=test_user; Location=test_db;&quot;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">create_connection_string</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="n">expected</span>


<span class="k">def</span> <span class="nf">test_missing_user</span><span class="p">(</span><span class="n">mock_missing_default_user</span><span class="p">):</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">create_connection_string</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<h4>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h4>
<p>Consult the docs for the <a class="reference internal" href="contents.html#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> class.</p>
</div>
</div>
<span id="document-how-to/doctest"></span><div class="section" id="how-to-run-doctests">
<span id="doctest"></span><h3>How to run doctests<a class="headerlink" href="#how-to-run-doctests" title="Permalink to this headline">¶</a></h3>
<p>By default, all files matching the <code class="docutils literal notranslate"><span class="pre">test*.txt</span></code> pattern will
be run through the python standard <a class="reference external" href="https://docs.python.org/3/library/doctest.html#module-doctest" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> module.  You
can change the pattern by issuing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --doctest-glob<span class="o">=</span><span class="s2">&quot;*.rst&quot;</span>
</pre></div>
</div>
<p>on the command line. <code class="docutils literal notranslate"><span class="pre">--doctest-glob</span></code> can be given multiple times in the command-line.</p>
<p>If you then have a text file like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># content of test_example.txt

hello this is a doctest
&gt;&gt;&gt; x = 3
&gt;&gt;&gt; x
3
</pre></div>
</div>
<p>then you can just invoke <code class="docutils literal notranslate"><span class="pre">pytest</span></code> directly:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_example.txt <span class=" -Color -Color-Green">.</span>                                                   <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>By default, pytest will collect <code class="docutils literal notranslate"><span class="pre">test*.txt</span></code> files looking for doctest directives, but you
can pass additional globs using the <code class="docutils literal notranslate"><span class="pre">--doctest-glob</span></code> option (multi-allowed).</p>
<p>In addition to text files, you can also execute doctests directly from docstrings of your classes
and functions, including from test modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of mymodule.py</span>
<span class="k">def</span> <span class="nf">something</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;a doctest in a docstring</span>
<span class="sd">    &gt;&gt;&gt; something()</span>
<span class="sd">    42</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">42</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pytest --doctest-modules
<span class="o">===========================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">============================</span>
platform linux -- Python <span class="m">3</span>.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected <span class="m">2</span> items

mymodule.py .                                                        <span class="o">[</span> <span class="m">50</span>%<span class="o">]</span>
test_example.txt .                                                   <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">============================</span> <span class="m">2</span> passed <span class="k">in</span> <span class="m">0</span>.12s <span class="o">=============================</span>
</pre></div>
</div>
<p>You can make these changes permanent in your project by
putting them into a pytest.ini file like this:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--doctest-modules</span><span class="w"></span>
</pre></div>
</div>
<div class="section" id="encoding">
<h4>Encoding<a class="headerlink" href="#encoding" title="Permalink to this headline">¶</a></h4>
<p>The default encoding is <strong>UTF-8</strong>, but you can specify the encoding
that will be used for those doctest files using the
<code class="docutils literal notranslate"><span class="pre">doctest_encoding</span></code> ini option:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">doctest_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">latin1</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="using-doctest-options">
<span id="id1"></span><h4>Using ‘doctest’ options<a class="headerlink" href="#using-doctest-options" title="Permalink to this headline">¶</a></h4>
<p>Python’s standard <a class="reference external" href="https://docs.python.org/3/library/doctest.html#module-doctest" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> module provides some <a class="reference external" href="https://docs.python.org/3/library/doctest.html#option-flags-and-directives" title="(in Python v3.10)"><span class="xref std std-ref">options</span></a>
to configure the strictness of doctest tests. In pytest, you can enable those flags using the
configuration file.</p>
<p>For example, to make pytest ignore trailing whitespaces and ignore
lengthy exception stack traces you can just write:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">doctest_optionflags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">NORMALIZE_WHITESPACE IGNORE_EXCEPTION_DETAIL</span><span class="w"></span>
</pre></div>
</div>
<p>Alternatively, options can be enabled by an inline comment in the doc test
itself:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; something_that_raises()  # doctest: +IGNORE_EXCEPTION_DETAIL
Traceback (most recent call last):
ValueError: ...
</pre></div>
</div>
<p>pytest also introduces new options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_UNICODE</span></code>: when enabled, the <code class="docutils literal notranslate"><span class="pre">u</span></code> prefix is stripped from unicode
strings in expected doctest output. This allows doctests to run in Python 2
and Python 3 unchanged.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_BYTES</span></code>: similarly, the <code class="docutils literal notranslate"><span class="pre">b</span></code> prefix is stripped from byte strings
in expected doctest output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NUMBER</span></code>: when enabled, floating-point numbers only need to match as far as
the precision you have written in the expected doctest output. The numbers are
compared using <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> with relative tolerance equal to the
precision. For example, the following output would only need to match to 2
decimal places when comparing <code class="docutils literal notranslate"><span class="pre">3.14</span></code> to
<code class="docutils literal notranslate"><span class="pre">pytest.approx(math.pi,</span> <span class="pre">rel=10**-2)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p>If you wrote <code class="docutils literal notranslate"><span class="pre">3.1416</span></code> then the actual output would need to match to
approximately 4 decimal places; and so on.</p>
<p>This avoids false positives caused by limited floating-point precision, like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Expected</span><span class="p">:</span>
    <span class="mf">0.233</span>
<span class="n">Got</span><span class="p">:</span>
    <span class="mf">0.23300000000000001</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">NUMBER</span></code> also supports lists of floating-point numbers – in fact, it
matches floating-point numbers appearing anywhere in the output, even inside
a string! This means that it may not be appropriate to enable globally in
<code class="docutils literal notranslate"><span class="pre">doctest_optionflags</span></code> in your configuration file.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.</span></p>
</div>
</li>
</ul>
</div>
<div class="section" id="continue-on-failure">
<h4>Continue on failure<a class="headerlink" href="#continue-on-failure" title="Permalink to this headline">¶</a></h4>
<p>By default, pytest would report only the first failure for a given doctest. If
you want to continue the test even when you have failures, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --doctest-modules --doctest-continue-on-failure
</pre></div>
</div>
</div>
<div class="section" id="output-format">
<h4>Output format<a class="headerlink" href="#output-format" title="Permalink to this headline">¶</a></h4>
<p>You can change the diff output format on failure for your doctests
by using one of standard doctest modules format in options
(see <a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.REPORT_UDIFF" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">doctest.REPORT_UDIFF</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.REPORT_CDIFF" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">doctest.REPORT_CDIFF</span></code></a>,
<a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.REPORT_NDIFF" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">doctest.REPORT_NDIFF</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.REPORT_ONLY_FIRST_FAILURE" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">doctest.REPORT_ONLY_FIRST_FAILURE</span></code></a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --doctest-modules --doctest-report none
pytest --doctest-modules --doctest-report udiff
pytest --doctest-modules --doctest-report cdiff
pytest --doctest-modules --doctest-report ndiff
pytest --doctest-modules --doctest-report only_first_failure
</pre></div>
</div>
</div>
<div class="section" id="pytest-specific-features">
<h4>pytest-specific features<a class="headerlink" href="#pytest-specific-features" title="Permalink to this headline">¶</a></h4>
<p>Some features are provided to make writing doctests easier or with better integration with
your existing test suite. Keep in mind however that by using those features you will make
your doctests incompatible with the standard <code class="docutils literal notranslate"><span class="pre">doctests</span></code> module.</p>
<div class="section" id="using-fixtures">
<h5>Using fixtures<a class="headerlink" href="#using-fixtures" title="Permalink to this headline">¶</a></h5>
<p>It is possible to use fixtures using the <code class="docutils literal notranslate"><span class="pre">getfixture</span></code> helper:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># content of example.rst
&gt;&gt;&gt; tmp = getfixture(&#39;tmp_path&#39;)
&gt;&gt;&gt; ...
&gt;&gt;&gt;
</pre></div>
</div>
<p>Note that the fixture needs to be defined in a place visible by pytest, for example, a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
file or plugin; normal python files containing docstrings are not normally scanned for fixtures
unless explicitly configured by <a class="reference internal" href="contents.html#confval-python_files"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_files</span></code></a>.</p>
<p>Also, the <a class="reference internal" href="contents.html#usefixtures"><span class="std std-ref">usefixtures</span></a> mark and fixtures marked as <a class="reference internal" href="contents.html#autouse"><span class="std std-ref">autouse</span></a> are supported
when executing text doctest files.</p>
</div>
<div class="section" id="doctest-namespace-fixture">
<span id="doctest-namespace"></span><h5>‘doctest_namespace’ fixture<a class="headerlink" href="#doctest-namespace-fixture" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">doctest_namespace</span></code> fixture can be used to inject items into the
namespace in which your doctests run. It is intended to be used within
your own fixtures to provide the tests that use them with context.</p>
<p><code class="docutils literal notranslate"><span class="pre">doctest_namespace</span></code> is a standard <code class="docutils literal notranslate"><span class="pre">dict</span></code> object into which you
place the objects you want to appear in the doctest namespace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">numpy</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_np</span><span class="p">(</span><span class="n">doctest_namespace</span><span class="p">):</span>
    <span class="n">doctest_namespace</span><span class="p">[</span><span class="s2">&quot;np&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>which can then be used in your doctests directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of numpy.py</span>
<span class="k">def</span> <span class="nf">arange</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &gt;&gt;&gt; a = np.arange(10)</span>
<span class="sd">    &gt;&gt;&gt; len(a)</span>
<span class="sd">    10</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Note that like the normal <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>, the fixtures are discovered in the directory tree conftest is in.
Meaning that if you put your doctest with your source code, the relevant conftest.py needs to be in the same directory tree.
Fixtures will not be discovered in a sibling directory tree!</p>
</div>
<div class="section" id="skipping-tests">
<h5>Skipping tests<a class="headerlink" href="#skipping-tests" title="Permalink to this headline">¶</a></h5>
<p>For the same reasons one might want to skip normal tests, it is also possible to skip
tests inside doctests.</p>
<p>To skip a single check inside a doctest you can use the standard
<a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.SKIP" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">doctest.SKIP</span></code></a> directive:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_random</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &gt;&gt;&gt; random.random()  # doctest: +SKIP</span>
<span class="sd">    0.156231223</span>

<span class="sd">    &gt;&gt;&gt; 1 + 1</span>
<span class="sd">    2</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>This will skip the first check, but not the second.</p>
<p>pytest also allows using the standard pytest functions <a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a> and
<a class="reference internal" href="contents.html#pytest.xfail" title="pytest.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.xfail()</span></code></a> inside doctests, which might be useful because you can
then skip/xfail tests based on external conditions:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; import sys, pytest
&gt;&gt;&gt; if sys.platform.startswith(&#39;win&#39;):
...     pytest.skip(&#39;this doctest does not work on Windows&#39;)
...
&gt;&gt;&gt; import fcntl
&gt;&gt;&gt; ...
</pre></div>
</div>
<p>However using those functions is discouraged because it reduces the readability of the
docstring.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a> and <a class="reference internal" href="contents.html#pytest.xfail" title="pytest.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.xfail()</span></code></a> behave differently depending
if the doctests are in a Python file (in docstrings) or a text file containing
doctests intermingled with text:</p>
<ul class="simple">
<li><p>Python modules (docstrings): the functions only act in that specific docstring,
letting the other docstrings in the same module execute as normal.</p></li>
<li><p>Text files: the functions will skip/xfail the checks for the rest of the entire
file.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="alternatives">
<h4>Alternatives<a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h4>
<p>While the built-in pytest support provides a good set of functionalities for using
doctests, if you use them extensively you might be interested in those external packages
which add many more features, and include pytest integration:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/astropy/pytest-doctestplus">pytest-doctestplus</a>: provides
advanced doctest support and enables the testing of reStructuredText (“.rst”) files.</p></li>
<li><p><a class="reference external" href="https://sybil.readthedocs.io">Sybil</a>: provides a way to test examples in
your documentation by parsing them from the documentation source and evaluating
the parsed examples as part of your normal test run.</p></li>
</ul>
</div>
</div>
<span id="document-how-to/cache"></span><div class="section" id="how-to-re-run-failed-tests-and-maintain-state-between-test-runs">
<span id="cache"></span><span id="cache-provider"></span><h3>How to re-run failed tests and maintain state between test runs<a class="headerlink" href="#how-to-re-run-failed-tests-and-maintain-state-between-test-runs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>The plugin provides two command line options to rerun failures from the
last <code class="docutils literal notranslate"><span class="pre">pytest</span></code> invocation:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--lf</span></code>, <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> - to only re-run the failures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--ff</span></code>, <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> - to run the failures first and then the rest of
the tests.</p></li>
</ul>
<p>For cleanup (usually not needed), a <code class="docutils literal notranslate"><span class="pre">--cache-clear</span></code> option allows to remove
all cross-session cache contents ahead of a test run.</p>
<p>Other plugins may access the <a class="reference internal" href="#config-cache">config.cache</a> object to set/get
<strong>json encodable</strong> values between <code class="docutils literal notranslate"><span class="pre">pytest</span></code> invocations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This plugin is enabled by default, but can be disabled if needed: see
<a class="reference internal" href="contents.html#cmdunregister"><span class="std std-ref">Deactivating / unregistering a plugin by name</span></a> (the internal name for this plugin is
<code class="docutils literal notranslate"><span class="pre">cacheprovider</span></code>).</p>
</div>
</div>
<div class="section" id="rerunning-only-failures-or-failures-first">
<h4>Rerunning only failures or failures first<a class="headerlink" href="#rerunning-only-failures-or-failures-first" title="Permalink to this headline">¶</a></h4>
<p>First, let’s create 50 test invocation of which only 2 fail:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_50.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">test_num</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">25</span><span class="p">):</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;bad luck&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you run this for the first time you will see two failures:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q
<span class=" -Color -Color-Green">.................</span><span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Green">.......</span><span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Green">........................</span>                   <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[17] _______________________________</span>

i = 17

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[25] _______________________________</span>

i = 25

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
========================= short test summary info ==========================
FAILED test_50.py::test_num[17] - Failed: bad luck
FAILED test_50.py::test_num[25] - Failed: bad luck
<span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span>, <span class=" -Color -Color-Green">48 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>If you then run it with <code class="docutils literal notranslate"><span class="pre">--lf</span></code>:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --lf
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items
run-last-failure: rerun previous 2 failures

test_50.py <span class=" -Color -Color-Red">FF</span>                                                        <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[17] _______________________________</span>

i = 17

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[25] _______________________________</span>

i = 25

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
========================= short test summary info ==========================
FAILED test_50.py::test_num[17] - Failed: bad luck
FAILED test_50.py::test_num[25] - Failed: bad luck
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>You have run only the two failing tests from the last run, while the 48 passing
tests have not been run (“deselected”).</p>
<p>Now, if you run with the <code class="docutils literal notranslate"><span class="pre">--ff</span></code> option, all tests will be run but the first
previous failures will be executed first (as can be seen from the series
of <code class="docutils literal notranslate"><span class="pre">FF</span></code> and dots):</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --ff
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 50 items
run-last-failure: rerun previous 2 failures first

test_50.py <span class=" -Color -Color-Red">FF</span><span class=" -Color -Color-Green">................................................</span>        <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[17] _______________________________</span>

i = 17

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_num[25] _______________________________</span>

i = 25

    @pytest.mark.parametrize(&quot;i&quot;, range(50))
    def test_num(i):
        if i in (17, 25):
&gt;           pytest.fail(&quot;bad luck&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: bad luck</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_50.py</span>:7: Failed
========================= short test summary info ==========================
FAILED test_50.py::test_num[17] - Failed: bad luck
FAILED test_50.py::test_num[25] - Failed: bad luck
<span class=" -Color -Color-Red">======================= </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span>, <span class=" -Color -Color-Green">48 passed</span><span class=" -Color -Color-Red"> in 0.12s =======================</span>
</pre></div>
</div>
<p id="config-cache">New <code class="docutils literal notranslate"><span class="pre">--nf</span></code>, <code class="docutils literal notranslate"><span class="pre">--new-first</span></code> options: run new tests first followed by the rest
of the tests, in both cases tests are also sorted by the file modified time,
with more recent files coming first.</p>
</div>
<div class="section" id="behavior-when-no-tests-failed-in-the-last-run">
<h4>Behavior when no tests failed in the last run<a class="headerlink" href="#behavior-when-no-tests-failed-in-the-last-run" title="Permalink to this headline">¶</a></h4>
<p>When no tests failed in the last run, or when no cached <code class="docutils literal notranslate"><span class="pre">lastfailed</span></code> data was
found, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> can be configured either to run all of the tests or no tests,
using the <code class="docutils literal notranslate"><span class="pre">--last-failed-no-failures</span></code> option, which takes one of the following values:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --last-failed --last-failed-no-failures all    <span class="c1"># run all tests (default behavior)</span>
pytest --last-failed --last-failed-no-failures none   <span class="c1"># run no tests and exit</span>
</pre></div>
</div>
</div>
<div class="section" id="the-new-config-cache-object">
<h4>The new config.cache object<a class="headerlink" href="#the-new-config-cache-object" title="Permalink to this headline">¶</a></h4>
<p>Plugins or conftest.py support code can get a cached value using the
pytest <code class="docutils literal notranslate"><span class="pre">config</span></code> object.  Here is a basic example plugin which
implements a <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixture</span></a> which re-uses previously created state
across pytest invocations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_caching.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="k">def</span> <span class="nf">expensive_computation</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;running expensive computation...&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">mydata</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;example/value&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">expensive_computation</span><span class="p">()</span>
        <span class="n">val</span> <span class="o">=</span> <span class="mi">42</span>
        <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;example/value&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">val</span>


<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">mydata</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">mydata</span> <span class="o">==</span> <span class="mi">23</span>
</pre></div>
</div>
<p>If you run this command for the first time, you can see the print statement:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_function _______________________________</span>

mydata = 42

    def test_function(mydata):
&gt;       assert mydata == 23
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 42 == 23</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_caching.py</span>:20: AssertionError
-------------------------- Captured stdout setup ---------------------------
running expensive computation...
========================= short test summary info ==========================
FAILED test_caching.py::test_function - assert 42 == 23
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>If you run it a second time, the value will be retrieved from
the cache and nothing will be printed:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_function _______________________________</span>

mydata = 42

    def test_function(mydata):
&gt;       assert mydata == 23
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 42 == 23</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_caching.py</span>:20: AssertionError
========================= short test summary info ==========================
FAILED test_caching.py::test_function - assert 42 == 23
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="contents.html#std-fixture-cache"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">config.cache</span> <span class="pre">fixture</span></code></a> for more details.</p>
</div>
<div class="section" id="inspecting-cache-content">
<h4>Inspecting Cache content<a class="headerlink" href="#inspecting-cache-content" title="Permalink to this headline">¶</a></h4>
<p>You can always peek at the content of the cache using the
<code class="docutils literal notranslate"><span class="pre">--cache-show</span></code> command line option:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --cache-show
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
cachedir: /home/sweet/project/.pytest_cache
--------------------------- cache values for &#39;*&#39; ---------------------------
cache/lastfailed contains:
  {&#39;test_caching.py::test_function&#39;: True}
cache/nodeids contains:
  [&#39;test_caching.py::test_function&#39;]
cache/stepwise contains:
  []
example/value contains:
  42

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--cache-show</span></code> takes an optional argument to specify a glob pattern for
filtering:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --cache-show example/*
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
cachedir: /home/sweet/project/.pytest_cache
----------------------- cache values for &#39;example/*&#39; -----------------------
example/value contains:
  42

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
</div>
<div class="section" id="clearing-cache-content">
<h4>Clearing Cache content<a class="headerlink" href="#clearing-cache-content" title="Permalink to this headline">¶</a></h4>
<p>You can instruct pytest to clear all cache files and values
by adding the <code class="docutils literal notranslate"><span class="pre">--cache-clear</span></code> option like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --cache-clear
</pre></div>
</div>
<p>This is recommended for invocations from Continuous Integration
servers where isolation and correctness is more important
than speed.</p>
</div>
<div class="section" id="stepwise">
<span id="cache-stepwise"></span><h4>Stepwise<a class="headerlink" href="#stepwise" title="Permalink to this headline">¶</a></h4>
<p>As an alternative to <code class="docutils literal notranslate"><span class="pre">--lf</span> <span class="pre">-x</span></code>, especially for cases where you expect a large part of the test suite will fail, <code class="docutils literal notranslate"><span class="pre">--sw</span></code>, <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> allows you to fix them one at a time. The test suite will run until the first failure and then stop. At the next invocation, tests will continue from the last failing test and then run until the next failing test. You may use the <code class="docutils literal notranslate"><span class="pre">--stepwise-skip</span></code> option to ignore one failing test and stop the test execution on the second failing test instead. This is useful if you get stuck on a failing test and just want to ignore it until later.  Providing <code class="docutils literal notranslate"><span class="pre">--stepwise-skip</span></code> will also enable <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> implicitly.</p>
</div>
</div>
<span id="document-how-to/logging"></span><div class="section" id="how-to-manage-logging">
<span id="logging"></span><h3>How to manage logging<a class="headerlink" href="#how-to-manage-logging" title="Permalink to this headline">¶</a></h3>
<p>pytest captures log messages of level <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> or above automatically and displays them in their own section
for each failed test in the same manner as captured stdout and stderr.</p>
<p>Running without options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
<p>Shows failed tests like so:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>----------------------- Captured stdlog call ----------------------
test_reporting.py    26 WARNING  text going to logger
----------------------- Captured stdout call ----------------------
text going to stdout
----------------------- Captured stderr call ----------------------
text going to stderr
==================== 2 failed in 0.02 seconds =====================
</pre></div>
</div>
<p>By default each captured log message shows the module, line number, log level
and message.</p>
<p>If desired the log and date format can be specified to
anything that the logging module supports by passing specific formatting options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --log-format<span class="o">=</span><span class="s2">&quot;%(asctime)s %(levelname)s %(message)s&quot;</span> <span class="se">\</span>
        --log-date-format<span class="o">=</span><span class="s2">&quot;%Y-%m-%d %H:%M:%S&quot;</span>
</pre></div>
</div>
<p>Shows failed tests like so:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>----------------------- Captured stdlog call ----------------------
2010-04-10 14:48:44 WARNING text going to logger
----------------------- Captured stdout call ----------------------
text going to stdout
----------------------- Captured stderr call ----------------------
text going to stderr
==================== 2 failed in 0.02 seconds =====================
</pre></div>
</div>
<p>These options can also be customized through <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span><span class="w"></span>
<span class="na">log_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span><span class="w"></span>
</pre></div>
</div>
<p>Further it is possible to disable reporting of captured content (stdout,
stderr and logs) on failed tests completely with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --show-capture<span class="o">=</span>no
</pre></div>
</div>
<div class="section" id="caplog-fixture">
<h4>caplog fixture<a class="headerlink" href="#caplog-fixture" title="Permalink to this headline">¶</a></h4>
<p>Inside tests it is possible to change the log level for the captured log
messages.  This is supported by the <code class="docutils literal notranslate"><span class="pre">caplog</span></code> fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">caplog</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>By default the level is set on the root logger,
however as a convenience it is also possible to set the log level of any
logger:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">caplog</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="s2">&quot;root.baz&quot;</span><span class="p">)</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The log levels set are restored automatically at the end of the test.</p>
<p>It is also possible to use a context manager to temporarily change the log
level inside a <code class="docutils literal notranslate"><span class="pre">with</span></code> block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">caplog</span><span class="o">.</span><span class="n">at_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Again, by default the level of the root logger is affected but the level of any
logger can be changed instead with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_bar</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">caplog</span><span class="o">.</span><span class="n">at_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="s2">&quot;root.baz&quot;</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Lastly all the logs sent to the logger during the test run are made available on
the fixture in the form of both the <code class="docutils literal notranslate"><span class="pre">logging.LogRecord</span></code> instances and the final log text.
This is useful for when you want to assert on the contents of a message:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_baz</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">func_under_test</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span> <span class="o">!=</span> <span class="s2">&quot;CRITICAL&quot;</span>
    <span class="k">assert</span> <span class="s2">&quot;wally&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
<p>For all the available attributes of the log records see the
<code class="docutils literal notranslate"><span class="pre">logging.LogRecord</span></code> class.</p>
<p>You can also resort to <code class="docutils literal notranslate"><span class="pre">record_tuples</span></code> if all you want to do is to ensure,
that certain messages have been logged under a given logger name with a given
severity and message:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;boo </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;arg&quot;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">caplog</span><span class="o">.</span><span class="n">record_tuples</span> <span class="o">==</span> <span class="p">[(</span><span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s2">&quot;boo arg&quot;</span><span class="p">)]</span>
</pre></div>
</div>
<p>You can call <code class="docutils literal notranslate"><span class="pre">caplog.clear()</span></code> to reset the captured log records in a test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something_with_clearing_records</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">some_method_that_creates_log_records</span><span class="p">()</span>
    <span class="n">caplog</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">your_test_method</span><span class="p">()</span>
    <span class="k">assert</span> <span class="p">[</span><span class="s2">&quot;Foo&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">rec</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">caplog.records</span></code> attribute contains records from the current stage only, so
inside the <code class="docutils literal notranslate"><span class="pre">setup</span></code> phase it contains only setup logs, same with the <code class="docutils literal notranslate"><span class="pre">call</span></code> and
<code class="docutils literal notranslate"><span class="pre">teardown</span></code> phases.</p>
<p>To access logs from other stages, use the <code class="docutils literal notranslate"><span class="pre">caplog.get_records(when)</span></code> method. As an example,
if you want to make sure that tests which use a certain fixture never log any warnings, you can inspect
the records for the <code class="docutils literal notranslate"><span class="pre">setup</span></code> and <code class="docutils literal notranslate"><span class="pre">call</span></code> stages during teardown like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">window</span><span class="p">(</span><span class="n">caplog</span><span class="p">):</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">create_window</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">window</span>
    <span class="k">for</span> <span class="n">when</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;setup&quot;</span><span class="p">,</span> <span class="s2">&quot;call&quot;</span><span class="p">):</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">x</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">caplog</span><span class="o">.</span><span class="n">get_records</span><span class="p">(</span><span class="n">when</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">levelno</span> <span class="o">==</span> <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">messages</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span>
                <span class="s2">&quot;warning messages encountered during testing: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
            <span class="p">)</span>
</pre></div>
</div>
<p>The full API is available at <a class="reference internal" href="contents.html#pytest.LogCaptureFixture" title="pytest.LogCaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.LogCaptureFixture</span></code></a>.</p>
</div>
<div class="section" id="live-logs">
<span id="id1"></span><h4>Live Logs<a class="headerlink" href="#live-logs" title="Permalink to this headline">¶</a></h4>
<p>By setting the <a class="reference internal" href="contents.html#confval-log_cli"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_cli</span></code></a> configuration option to <code class="docutils literal notranslate"><span class="pre">true</span></code>, pytest will output
logging records as they are emitted directly into the console.</p>
<p>You can specify the logging level for which log records with equal or higher
level are printed to the console by passing <code class="docutils literal notranslate"><span class="pre">--log-cli-level</span></code>. This setting
accepts the logging level names or numeric values as seen in
<a class="reference external" href="https://docs.python.org/3/library/logging.html#levels" title="(in Python v3.10)"><span class="xref std std-ref">logging’s documentation</span></a>.</p>
<p>Additionally, you can also specify <code class="docutils literal notranslate"><span class="pre">--log-cli-format</span></code> and
<code class="docutils literal notranslate"><span class="pre">--log-cli-date-format</span></code> which mirror and default to <code class="docutils literal notranslate"><span class="pre">--log-format</span></code> and
<code class="docutils literal notranslate"><span class="pre">--log-date-format</span></code> if not provided, but are applied only to the console
logging handler.</p>
<p>All of the CLI log options can also be set in the configuration INI file. The
option names are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log_cli_level</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_cli_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_cli_date_format</span></code></p></li>
</ul>
<p>If you need to record the whole test suite logging calls to a file, you can pass
<code class="docutils literal notranslate"><span class="pre">--log-file=/path/to/log/file</span></code>. This log file is opened in write mode which
means that it will be overwritten at each run tests session.
Note that relative paths for the log-file location, whether passed on the CLI or declared in a
config file, are always resolved relative to the current working directory.</p>
<p>You can also specify the logging level for the log file by passing
<code class="docutils literal notranslate"><span class="pre">--log-file-level</span></code>. This setting accepts the logging level names or numeric
values as seen in <a class="reference external" href="https://docs.python.org/3/library/logging.html#levels" title="(in Python v3.10)"><span class="xref std std-ref">logging’s documentation</span></a>.</p>
<p>Additionally, you can also specify <code class="docutils literal notranslate"><span class="pre">--log-file-format</span></code> and
<code class="docutils literal notranslate"><span class="pre">--log-file-date-format</span></code> which are equal to <code class="docutils literal notranslate"><span class="pre">--log-format</span></code> and
<code class="docutils literal notranslate"><span class="pre">--log-date-format</span></code> but are applied to the log file logging handler.</p>
<p>All of the log file options can also be set in the configuration INI file. The
option names are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log_file</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_file_level</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_file_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_file_date_format</span></code></p></li>
</ul>
<p>You can call <code class="docutils literal notranslate"><span class="pre">set_log_path()</span></code> to customize the log_file path dynamically. This functionality
is considered <strong>experimental</strong>.</p>
</div>
<div class="section" id="customizing-colors">
<span id="log-colors"></span><h4>Customizing Colors<a class="headerlink" href="#customizing-colors" title="Permalink to this headline">¶</a></h4>
<p>Log levels are colored if colored terminal output is enabled. Changing
from default colors or putting color on custom log levels is supported
through <code class="docutils literal notranslate"><span class="pre">add_color_level()</span></code>. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span>
<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">logging_plugin</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="s2">&quot;logging-plugin&quot;</span><span class="p">)</span>

    <span class="c1"># Change color on existing log level</span>
    <span class="n">logging_plugin</span><span class="o">.</span><span class="n">log_cli_handler</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">add_color_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s2">&quot;cyan&quot;</span><span class="p">)</span>

    <span class="c1"># Add color to a custom log level (a custom log level `SPAM` is already set up)</span>
    <span class="n">logging_plugin</span><span class="o">.</span><span class="n">log_cli_handler</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">add_color_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">SPAM</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature and its API are considered <strong>experimental</strong> and might change
between releases without a deprecation notice.</p>
</div>
</div>
<div class="section" id="release-notes">
<span id="log-release-notes"></span><h4>Release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h4>
<p>This feature was introduced as a drop-in replacement for the
<a class="reference external" href="https://pypi.org/project/pytest-catchlog/">pytest-catchlog</a> plugin and they conflict
with each other. The backward compatibility API with <code class="docutils literal notranslate"><span class="pre">pytest-capturelog</span></code>
has been dropped when this feature was introduced, so if for that reason you
still need <code class="docutils literal notranslate"><span class="pre">pytest-catchlog</span></code> you can disable the internal feature by
adding to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="w">    </span><span class="na">addopts</span><span class="o">=</span><span class="s">-p no:logging</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="incompatible-changes-in-pytest-3-4">
<span id="log-changes-3-4"></span><h4>Incompatible changes in pytest 3.4<a class="headerlink" href="#incompatible-changes-in-pytest-3-4" title="Permalink to this headline">¶</a></h4>
<p>This feature was introduced in <code class="docutils literal notranslate"><span class="pre">3.3</span></code> and some <strong>incompatible changes</strong> have been
made in <code class="docutils literal notranslate"><span class="pre">3.4</span></code> after community feedback:</p>
<ul class="simple">
<li><p>Log levels are no longer changed unless explicitly requested by the <a class="reference internal" href="contents.html#confval-log_level"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_level</span></code></a> configuration
or <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> command-line options. This allows users to configure logger objects themselves.
Setting <a class="reference internal" href="contents.html#confval-log_level"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_level</span></code></a> will set the level that is captured globally so if a specific test requires
a lower level than this, use the <code class="docutils literal notranslate"><span class="pre">caplog.set_level()</span></code> functionality otherwise that test will be prone to
failure.</p></li>
<li><p><a class="reference internal" href="#live-logs"><span class="std std-ref">Live Logs</span></a> is now disabled by default and can be enabled setting the
<a class="reference internal" href="contents.html#confval-log_cli"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_cli</span></code></a> configuration option to <code class="docutils literal notranslate"><span class="pre">true</span></code>. When enabled, the verbosity is increased so logging for each
test is visible.</p></li>
<li><p><a class="reference internal" href="#live-logs"><span class="std std-ref">Live Logs</span></a> are now sent to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and no longer require the <code class="docutils literal notranslate"><span class="pre">-s</span></code> command-line option
to work.</p></li>
</ul>
<p>If you want to partially restore the logging behavior of version <code class="docutils literal notranslate"><span class="pre">3.3</span></code>, you can add this options to your <code class="docutils literal notranslate"><span class="pre">ini</span></code>
file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_cli</span><span class="o">=</span><span class="s">true</span><span class="w"></span>
<span class="na">log_level</span><span class="o">=</span><span class="s">NOTSET</span><span class="w"></span>
</pre></div>
</div>
<p>More details about the discussion that lead to this changes can be read in <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3013">issue #3013</a>.</p>
</div>
</div>
<span id="document-how-to/capture-stdout-stderr"></span><div class="section" id="how-to-capture-stdout-stderr-output">
<span id="captures"></span><h3>How to capture stdout/stderr output<a class="headerlink" href="#how-to-capture-stdout-stderr-output" title="Permalink to this headline">¶</a></h3>
<div class="section" id="default-stdout-stderr-stdin-capturing-behaviour">
<h4>Default stdout/stderr/stdin capturing behaviour<a class="headerlink" href="#default-stdout-stderr-stdin-capturing-behaviour" title="Permalink to this headline">¶</a></h4>
<p>During test execution any output sent to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> is
captured.  If a test or a setup method fails its according captured
output will usually be shown along with the failure traceback. (this
behavior can be configured by the <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> command-line option).</p>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">stdin</span></code> is set to a “null” object which will
fail on attempts to read from it because it is rarely desired
to wait for interactive input when running automated tests.</p>
<p>By default capturing is done by intercepting writes to low level
file descriptors.  This allows to capture output from simple
print statements as well as output from a subprocess started by
a test.</p>
</div>
<div class="section" id="setting-capturing-methods-or-disabling-capturing">
<span id="capture-method"></span><h4>Setting capturing methods or disabling capturing<a class="headerlink" href="#setting-capturing-methods-or-disabling-capturing" title="Permalink to this headline">¶</a></h4>
<p>There are three ways in which <code class="docutils literal notranslate"><span class="pre">pytest</span></code> can perform capturing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fd</span></code> (file descriptor) level capturing (default): All writes going to the
operating system file descriptors 1 and 2 will be captured.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sys</span></code> level capturing: Only writes to Python files <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>
and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code> will be captured.  No capturing of writes to
filedescriptors is performed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tee-sys</span></code> capturing: Python writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>
will be captured, however the writes will also be passed-through to
the actual <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>. This allows output to be
‘live printed’ and captured for plugin use, such as junitxml (new in pytest 5.4).</p></li>
</ul>
<p id="disable-capturing">You can influence output capturing mechanisms from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -s                  <span class="c1"># disable all capturing</span>
pytest --capture<span class="o">=</span>sys       <span class="c1"># replace sys.stdout/stderr with in-mem files</span>
pytest --capture<span class="o">=</span>fd        <span class="c1"># also point filedescriptors 1 and 2 to temp file</span>
pytest --capture<span class="o">=</span>tee-sys   <span class="c1"># combines &#39;sys&#39; and &#39;-s&#39;, capturing sys.stdout/stderr</span>
                           <span class="c1"># and passing it along to the actual sys.stdout/stderr</span>
</pre></div>
</div>
</div>
<div class="section" id="using-print-statements-for-debugging">
<span id="printdebugging"></span><h4>Using print statements for debugging<a class="headerlink" href="#using-print-statements-for-debugging" title="Permalink to this headline">¶</a></h4>
<p>One primary benefit of the default capturing of stdout/stderr output
is that you can use print statements for debugging:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>


<span class="k">def</span> <span class="nf">setup_function</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setting up&quot;</span><span class="p">,</span> <span class="n">function</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_func1</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">test_func2</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</pre></div>
</div>
<p>and running this module will show you precisely the output
of the failing function and hide the other one:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_func2 ________________________________</span>

    def test_func2():
&gt;       assert False
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert False</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:12: AssertionError
-------------------------- Captured stdout setup ---------------------------
setting up &lt;function test_func2 at 0xdeadbeef0001&gt;
========================= short test summary info ==========================
FAILED test_module.py::test_func2 - assert False
<span class=" -Color -Color-Red">======================= </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s ========================</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-captured-output-from-a-test-function">
<h4>Accessing captured output from a test function<a class="headerlink" href="#accessing-captured-output-from-a-test-function" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">capsys</span></code>, <code class="docutils literal notranslate"><span class="pre">capsysbinary</span></code>, <code class="docutils literal notranslate"><span class="pre">capfd</span></code>, and <code class="docutils literal notranslate"><span class="pre">capfdbinary</span></code> fixtures
allow access to stdout/stderr output created during test execution.  Here is
an example test function that performs some output related checks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_myoutput</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>  <span class="c1"># or use &quot;capfd&quot; for fd-level</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;world</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">err</span> <span class="o">==</span> <span class="s2">&quot;world</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;next&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;next</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">readouterr()</span></code> call snapshots the output so far -
and capturing will be continued.  After the test
function finishes the original streams will
be restored.  Using <code class="docutils literal notranslate"><span class="pre">capsys</span></code> this way frees your
test from having to care about setting/resetting
output streams and also interacts well with pytest’s
own per-test capturing.</p>
<p>If you want to capture on filedescriptor level you can use
the <code class="docutils literal notranslate"><span class="pre">capfd</span></code> fixture which offers the exact
same interface but allows to also capture output from
libraries or subprocesses that directly write to operating
system level output streams (FD1 and FD2).</p>
<p>The return value from <code class="docutils literal notranslate"><span class="pre">readouterr</span></code> changed to a <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> with two attributes, <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code>.</p>
<p>If the code under test writes non-textual data, you can capture this using
the <code class="docutils literal notranslate"><span class="pre">capsysbinary</span></code> fixture which instead returns <code class="docutils literal notranslate"><span class="pre">bytes</span></code> from
the <code class="docutils literal notranslate"><span class="pre">readouterr</span></code> method.</p>
<p>If the code under test writes non-textual data, you can capture this using
the <code class="docutils literal notranslate"><span class="pre">capfdbinary</span></code> fixture which instead returns <code class="docutils literal notranslate"><span class="pre">bytes</span></code> from
the <code class="docutils literal notranslate"><span class="pre">readouterr</span></code> method.  The <code class="docutils literal notranslate"><span class="pre">capfdbinary</span></code> fixture operates on the
filedescriptor level.</p>
<p>To temporarily disable capture within a test, both <code class="docutils literal notranslate"><span class="pre">capsys</span></code>
and <code class="docutils literal notranslate"><span class="pre">capfd</span></code> have a <code class="docutils literal notranslate"><span class="pre">disabled()</span></code> method that can be used
as a context manager, disabling capture inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_disabling_capturing</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;this output is captured&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">capsys</span><span class="o">.</span><span class="n">disabled</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;output not captured, going directly to sys.stdout&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;this output is also captured&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-how-to/capture-warnings"></span><div class="section" id="how-to-capture-warnings">
<span id="warnings"></span><h3>How to capture warnings<a class="headerlink" href="#how-to-capture-warnings" title="Permalink to this headline">¶</a></h3>
<p>Starting from version <code class="docutils literal notranslate"><span class="pre">3.1</span></code>, pytest now automatically catches warnings during test execution
and displays them at the end of the session:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_show_warnings.py</span>
<span class="kn">import</span> <span class="nn">warnings</span>


<span class="k">def</span> <span class="nf">api_v1</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">(</span><span class="s2">&quot;api v1, should use functions from v2&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">api_v1</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Running pytest now produces this output:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_show_warnings.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_show_warnings.py <span class=" -Color -Color-Green">.</span>                                              <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Yellow">============================= warnings summary =============================</span>
test_show_warnings.py::test_one
  /home/sweet/project/test_show_warnings.py:5: UserWarning: api v1, should use functions from v2
    warnings.warn(UserWarning(&quot;api v1, should use functions from v2&quot;))

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">1 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 warning</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
<div class="section" id="controlling-warnings">
<h4>Controlling warnings<a class="headerlink" href="#controlling-warnings" title="Permalink to this headline">¶</a></h4>
<p>Similar to Python’s <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warning-filter">warning filter</a> and <a class="reference external" href="https://docs.python.org/3/using/cmdline.html#cmdoption-W" title="(in Python v3.10)"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span> <span class="pre">option</span></code></a> flag, pytest provides
its own <code class="docutils literal notranslate"><span class="pre">-W</span></code> flag to control which warnings are ignored, displayed, or turned into
errors. See the <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warning-filter">warning filter</a> documentation for more
advanced use-cases.</p>
<p>This code sample shows how to treat any <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> category class of warning
as an error:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_show_warnings.py -W error::UserWarning
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________________ test_one _________________________________</span>

    def test_one():
&gt;       assert api_v1() == 1

<span class=" -Color -Color-Bold -Color-Bold-Red">test_show_warnings.py</span>:10:
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>

    def api_v1():
&gt;       warnings.warn(UserWarning(&quot;api v1, should use functions from v2&quot;))
<span class=" -Color -Color-Bold -Color-Bold-Red">E       UserWarning: api v1, should use functions from v2</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_show_warnings.py</span>:5: UserWarning
========================= short test summary info ==========================
FAILED test_show_warnings.py::test_one - UserWarning: api v1, should use ...
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>The same option can be set in the <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> or <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file using the
<code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> ini option. For example, the configuration below will ignore all
user warnings and specific deprecation warnings matching a regex, but will transform
all other warnings into errors.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">error</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::UserWarning</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore:function ham\(\) is deprecated:DeprecationWarning</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span><span class="w"></span>
<span class="k">[tool.pytest.ini_options]</span><span class="w"></span>
<span class="n">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;error&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;ignore::UserWarning&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="c1"># note the use of single quote below to denote &quot;raw&quot; strings in TOML</span><span class="w"></span>
<span class="w">    </span><span class="s">&#39;ignore:function ham\(\) is deprecated:DeprecationWarning&#39;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>When a warning matches more than one option in the list, the action for the last matching option
is performed.</p>
</div>
<div class="section" id="pytest-mark-filterwarnings">
<span id="filterwarnings"></span><h4><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.filterwarnings</span></code><a class="headerlink" href="#pytest-mark-filterwarnings" title="Permalink to this headline">¶</a></h4>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.filterwarnings</span></code> to add warning filters to specific test items,
allowing you to have finer control of which warnings should be captured at test, class or
even module level:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>


<span class="k">def</span> <span class="nf">api_v1</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">(</span><span class="s2">&quot;api v1, should use functions from v2&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">1</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore:api v1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_one</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">api_v1</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Filters applied using a mark take precedence over filters passed on the command line or configured
by the <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> ini option.</p>
<p>You may apply a filter to all tests of a class by using the <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> mark as a class
decorator or to all tests in a module by setting the <a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a> variable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># turns all warnings into errors for this module</span>
<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Credits go to Florian Schulze for the reference implementation in the</em> <a class="reference external" href="https://github.com/fschulze/pytest-warnings">pytest-warnings</a>
<em>plugin.</em></p>
</div>
<div class="section" id="disabling-warnings-summary">
<h4>Disabling warnings summary<a class="headerlink" href="#disabling-warnings-summary" title="Permalink to this headline">¶</a></h4>
<p>Although not recommended, you can use the <code class="docutils literal notranslate"><span class="pre">--disable-warnings</span></code> command-line option to suppress the
warning summary entirely from the test run output.</p>
</div>
<div class="section" id="disabling-warning-capture-entirely">
<h4>Disabling warning capture entirely<a class="headerlink" href="#disabling-warning-capture-entirely" title="Permalink to this headline">¶</a></h4>
<p>This plugin is enabled by default but can be disabled entirely in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file with:</p>
<blockquote>
<div><div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-p no:warnings</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<p>Or passing <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:warnings</span></code> in the command-line. This might be useful if your test suites handles warnings
using an external system.</p>
</div>
<div class="section" id="deprecationwarning-and-pendingdeprecationwarning">
<span id="deprecation-warnings"></span><h4>DeprecationWarning and PendingDeprecationWarning<a class="headerlink" href="#deprecationwarning-and-pendingdeprecationwarning" title="Permalink to this headline">¶</a></h4>
<p>By default pytest will display <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> warnings from
user code and third-party libraries, as recommended by <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0565"><strong>PEP 565</strong></a>.
This helps users keep their code modern and avoid breakages when deprecated warnings are effectively removed.</p>
<p>Sometimes it is useful to hide some specific deprecation warnings that happen in code that you have no control over
(such as third-party libraries), in which case you might use the warning filters options (ini or marks) to ignore
those warnings.</p>
<p>For example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore:.*U.*mode is deprecated:DeprecationWarning</span><span class="w"></span>
</pre></div>
</div>
<p>This will ignore all warnings of type <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> where the start of the message matches
the regular expression <code class="docutils literal notranslate"><span class="pre">&quot;.*U.*mode</span> <span class="pre">is</span> <span class="pre">deprecated&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If warnings are configured at the interpreter level, using
the <span class="target" id="index-1"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONWARNINGS" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">PYTHONWARNINGS</span></code></a> environment variable or the
<code class="docutils literal notranslate"><span class="pre">-W</span></code> command-line option, pytest will not configure any filters by default.</p>
<p>Also pytest doesn’t follow <span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0506"><strong>PEP 506</strong></a> suggestion of resetting all warning filters because
it might break test suites that configure warning filters themselves
by calling <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.simplefilter" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.simplefilter()</span></code></a> (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2430">issue #2430</a> for an example of that).</p>
</div>
</div>
<div class="section" id="ensuring-code-triggers-a-deprecation-warning">
<span id="ensuring-function-triggers"></span><span id="ensuring-a-function-triggers-a-deprecation-warning"></span><h4>Ensuring code triggers a deprecation warning<a class="headerlink" href="#ensuring-code-triggers-a-deprecation-warning" title="Permalink to this headline">¶</a></h4>
<p>You can also use <a class="reference internal" href="contents.html#pytest.deprecated_call" title="pytest.deprecated_call"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.deprecated_call()</span></code></a> for checking
that a certain function call triggers a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> or
<code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_myfunction_deprecated</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">deprecated_call</span><span class="p">():</span>
        <span class="n">myfunction</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
</pre></div>
</div>
<p>This test will fail if <code class="docutils literal notranslate"><span class="pre">myfunction</span></code> does not issue a deprecation warning
when called with a <code class="docutils literal notranslate"><span class="pre">17</span></code> argument.</p>
</div>
<div class="section" id="warns">
<span id="asserting-warnings-with-the-warns-function"></span><span id="assertwarnings"></span><span id="asserting-warnings"></span><span id="id1"></span><h4>Asserting warnings with the warns function<a class="headerlink" href="#warns" title="Permalink to this headline">¶</a></h4>
<p>You can check that code raises a particular warning using <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns()</span></code></a>,
which works in a similar manner to <a class="reference internal" href="contents.html#assertraises"><span class="std std-ref">raises</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_warning</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;my warning&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
</pre></div>
</div>
<p>The test will fail if the warning in question is not raised. The keyword
argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert that the exception matches a text or regex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;must be 0 or None&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 0 or None&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;this is not here&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">Failed</span>: <span class="n">DID NOT WARN. No warnings of type ...UserWarning... were emitted...</span>
</pre></div>
</div>
<p>You can also call <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns()</span></code></a> on a function or code string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">expected_warning</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="n">expected_warning</span><span class="p">,</span> <span class="s2">&quot;func(*args, **kwargs)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The function also returns a list of all raised warnings (as
<code class="docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code> objects), which you can query for
additional information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">RuntimeWarning</span><span class="p">)</span> <span class="k">as</span> <span class="n">record</span><span class="p">:</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;another warning&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">)</span>

<span class="c1"># check that only one warning was raised</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="c1"># check that the message matches</span>
<span class="k">assert</span> <span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;another warning&quot;</span>
</pre></div>
</div>
<p>Alternatively, you can examine raised warnings in detail using the
<a class="reference internal" href="#recwarn"><span class="std std-ref">recwarn</span></a> fixture (see below).</p>
<p>The <a class="reference internal" href="#recwarn"><span class="std std-ref">recwarn</span></a> fixture automatically ensures to reset the warnings
filter at the end of the test, so no global state is leaked.</p>
</div>
<div class="section" id="recwarn">
<span id="recording-warnings"></span><span id="id2"></span><h4>Recording warnings<a class="headerlink" href="#recwarn" title="Permalink to this headline">¶</a></h4>
<p>You can record raised warnings either using <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns()</span></code></a> or with
the <code class="docutils literal notranslate"><span class="pre">recwarn</span></code> fixture.</p>
<p>To record with <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns()</span></code></a> without asserting anything about the warnings,
pass no arguments as the expected warning type and it will default to a generic Warning:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">()</span> <span class="k">as</span> <span class="n">record</span><span class="p">:</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;runtime&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">record</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span>
<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;runtime&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">recwarn</span></code> fixture will record warnings for the whole function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>


<span class="k">def</span> <span class="nf">test_hello</span><span class="p">(</span><span class="n">recwarn</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">recwarn</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">recwarn</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">category</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">message</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;hello&quot;</span>
    <span class="k">assert</span> <span class="n">w</span><span class="o">.</span><span class="n">filename</span>
    <span class="k">assert</span> <span class="n">w</span><span class="o">.</span><span class="n">lineno</span>
</pre></div>
</div>
<p>Both <code class="docutils literal notranslate"><span class="pre">recwarn</span></code> and <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns()</span></code></a> return the same interface for recorded
warnings: a WarningsRecorder instance. To view the recorded warnings, you can
iterate over this instance, call <code class="docutils literal notranslate"><span class="pre">len</span></code> on it to get the number of recorded
warnings, or index into it to get a particular recorded warning.</p>
<p>Full API: <code class="xref py py-class docutils literal notranslate"><span class="pre">WarningsRecorder</span></code>.</p>
</div>
<div class="section" id="additional-use-cases-of-warnings-in-tests">
<span id="warns-use-cases"></span><h4>Additional use cases of warnings in tests<a class="headerlink" href="#additional-use-cases-of-warnings-in-tests" title="Permalink to this headline">¶</a></h4>
<p>Here are some use cases involving warnings that often come up in tests, and suggestions on how to deal with them:</p>
<ul class="simple">
<li><p>To ensure that <strong>at least one</strong> warning is emitted, use:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To ensure that <strong>no</strong> warnings are emitted, use:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>To suppress warnings, use:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-failure-messages">
<span id="id3"></span><h4>Custom failure messages<a class="headerlink" href="#custom-failure-messages" title="Permalink to this headline">¶</a></h4>
<p>Recording warnings provides an opportunity to produce custom test
failure messages for when no warnings are issued or other conditions
are met.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">Warning</span><span class="p">)</span> <span class="k">as</span> <span class="n">record</span><span class="p">:</span>
        <span class="n">f</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">record</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Expected a warning!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If no warnings are issued when calling <code class="docutils literal notranslate"><span class="pre">f</span></code>, then <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">record</span></code> will
evaluate to <code class="docutils literal notranslate"><span class="pre">True</span></code>.  You can then call <a class="reference internal" href="contents.html#pytest.fail" title="pytest.fail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fail()</span></code></a> with a
custom error message.</p>
</div>
<div class="section" id="internal-pytest-warnings">
<span id="internal-warnings"></span><h4>Internal pytest warnings<a class="headerlink" href="#internal-pytest-warnings" title="Permalink to this headline">¶</a></h4>
<p>pytest may generate its own warnings in some situations, such as improper usage or deprecated features.</p>
<p>For example, pytest will emit a warning if it encounters a class that matches <a class="reference internal" href="contents.html#confval-python_classes"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_classes</span></code></a> but also
defines an <code class="docutils literal notranslate"><span class="pre">__init__</span></code> constructor, as this prevents the class from being instantiated:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_pytest_warnings.py</span>
<span class="k">class</span> <span class="nc">Test</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_pytest_warnings.py -q

<span class=" -Color -Color-Yellow">============================= warnings summary =============================</span>
test_pytest_warnings.py:1
  /home/sweet/project/test_pytest_warnings.py:1: PytestCollectionWarning: cannot collect test class &#39;Test&#39; because it has a __init__ constructor (from: test_pytest_warnings.py)
    class Test:

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
<span class=" -Color -Color-Bold -Color-Bold-Yellow">1 warning</span><span class=" -Color -Color-Yellow"> in 0.12s</span>
</pre></div>
</div>
<p>These warnings might be filtered using the same builtin mechanisms used to filter other types of warnings.</p>
<p>Please read our <a class="reference internal" href="contents.html#backwards-compatibility"><span class="std std-ref">Backwards Compatibility Policy</span></a> to learn how we proceed about deprecating and eventually removing
features.</p>
<p>The full list of warnings is listed in <a class="reference internal" href="contents.html#warnings-ref"><span class="std std-ref">the reference documentation</span></a>.</p>
</div>
<div class="section" id="resource-warnings">
<span id="id4"></span><h4>Resource Warnings<a class="headerlink" href="#resource-warnings" title="Permalink to this headline">¶</a></h4>
<p>Additional information of the source of a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ResourceWarning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a> can be obtained when captured by pytest if
<a class="reference external" href="https://docs.python.org/3/library/tracemalloc.html#module-tracemalloc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracemalloc</span></code></a> module is enabled.</p>
<p>One convenient way to enable <a class="reference external" href="https://docs.python.org/3/library/tracemalloc.html#module-tracemalloc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracemalloc</span></code></a> when running tests is to set the <span class="target" id="index-3"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONTRACEMALLOC" title="(in Python v3.10)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONTRACEMALLOC</span></code></a> to a large
enough number of frames (say <code class="docutils literal notranslate"><span class="pre">20</span></code>, but that number is application dependent).</p>
<p>For more information, consult the <a class="reference external" href="https://docs.python.org/3/library/devmode.html">Python Development Mode</a>
section in the Python documentation.</p>
</div>
</div>
<span id="document-how-to/skipping"></span><div class="section" id="how-to-use-skip-and-xfail-to-deal-with-tests-that-cannot-succeed">
<span id="skipping"></span><span id="skip-and-xfail"></span><h3>How to use skip and xfail to deal with tests that cannot succeed<a class="headerlink" href="#how-to-use-skip-and-xfail-to-deal-with-tests-that-cannot-succeed" title="Permalink to this headline">¶</a></h3>
<p>You can mark test functions that cannot be run on certain platforms
or that you expect to fail so pytest can deal with them accordingly and
present a summary of the test session, while keeping the test suite <em>green</em>.</p>
<p>A <strong>skip</strong> means that you expect your test to pass only if some conditions are met,
otherwise pytest should skip running the test altogether. Common examples are skipping
windows-only tests on non-windows platforms, or skipping tests that depend on an external
resource which is not available at the moment (for example a database).</p>
<p>An <strong>xfail</strong> means that you expect a test to fail for some reason.
A common example is a test for a feature not yet implemented, or a bug not yet fixed.
When a test passes despite being expected to fail (marked with <code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code>),
it’s an <strong>xpass</strong> and will be reported in the test summary.</p>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> counts and lists <em>skip</em> and <em>xfail</em> tests separately. Detailed
information about skipped/xfailed tests is not shown by default to avoid
cluttering the output.  You can use the <code class="docutils literal notranslate"><span class="pre">-r</span></code> option to see details
corresponding to the “short” letters shown in the test progress:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -rxXs  <span class="c1"># show extra info on xfailed, xpassed, and skipped tests</span>
</pre></div>
</div>
<p>More details on the <code class="docutils literal notranslate"><span class="pre">-r</span></code> option can be found by running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-h</span></code>.</p>
<p>(See <a class="reference internal" href="contents.html#how-to-change-command-line-options-defaults"><span class="std std-ref">Builtin configuration file options</span></a>)</p>
<div class="section" id="skipping-test-functions">
<span id="condition-booleans"></span><span id="skip"></span><span id="skipif"></span><h4>Skipping test functions<a class="headerlink" href="#skipping-test-functions" title="Permalink to this headline">¶</a></h4>
<p>The simplest way to skip a test function is to mark it with the <code class="docutils literal notranslate"><span class="pre">skip</span></code> decorator
which may be passed an optional <code class="docutils literal notranslate"><span class="pre">reason</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;no way of currently testing this&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_the_unknown</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Alternatively, it is also possible to skip imperatively during test execution or setup
by calling the <code class="docutils literal notranslate"><span class="pre">pytest.skip(reason)</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_config</span><span class="p">():</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;unsupported configuration&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The imperative method is useful when it is not possible to evaluate the skip condition
during import time.</p>
<p>It is also possible to skip the whole module using
<code class="docutils literal notranslate"><span class="pre">pytest.skip(reason,</span> <span class="pre">allow_module_level=True)</span></code> at the module level:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;win&quot;</span><span class="p">):</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;skipping windows-only tests&quot;</span><span class="p">,</span> <span class="n">allow_module_level</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Reference</strong>: <a class="reference internal" href="contents.html#pytest-mark-skip-ref"><span class="std std-ref">pytest.mark.skip</span></a></p>
<div class="section" id="id1">
<h5><code class="docutils literal notranslate"><span class="pre">skipif</span></code><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>If you wish to skip something conditionally then you can use <code class="docutils literal notranslate"><span class="pre">skipif</span></code> instead.
Here is an example of marking a test function to be skipped
when run on an interpreter earlier than Python3.10:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;requires python3.10 or higher&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>If the condition evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code> during collection, the test function will be skipped,
with the specified reason appearing in the summary when using <code class="docutils literal notranslate"><span class="pre">-rs</span></code>.</p>
<p>You can share <code class="docutils literal notranslate"><span class="pre">skipif</span></code> markers between modules.  Consider this test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_mymodule.py</span>
<span class="kn">import</span> <span class="nn">mymodule</span>

<span class="n">minversion</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span>
    <span class="n">mymodule</span><span class="o">.</span><span class="n">__versioninfo__</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;at least mymodule-1.1 required&quot;</span>
<span class="p">)</span>


<span class="nd">@minversion</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>You can import the marker and reuse it in another test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># test_myothermodule.py</span>
<span class="kn">from</span> <span class="nn">test_mymodule</span> <span class="kn">import</span> <span class="n">minversion</span>


<span class="nd">@minversion</span>
<span class="k">def</span> <span class="nf">test_anotherfunction</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>For larger test suites it’s usually a good idea to have one file
where you define the markers which you then consistently apply
throughout your test suite.</p>
<p>Alternatively, you can use <a class="reference internal" href="contents.html#string-conditions"><span class="std std-ref">condition strings</span></a> instead of booleans, but they can’t be shared between modules easily
so they are supported mainly for backward compatibility reasons.</p>
<p><strong>Reference</strong>: <a class="reference internal" href="contents.html#pytest-mark-skipif-ref"><span class="std std-ref">pytest.mark.skipif</span></a></p>
</div>
<div class="section" id="skip-all-test-functions-of-a-class-or-module">
<h5>Skip all test functions of a class or module<a class="headerlink" href="#skip-all-test-functions-of-a-class-or-module" title="Permalink to this headline">¶</a></h5>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">skipif</span></code> marker (as any other marker) on classes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;does not run on windows&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestPosixCalls</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;will not be setup or run under &#39;win32&#39; platform&quot;</span>
</pre></div>
</div>
<p>If the condition is <code class="docutils literal notranslate"><span class="pre">True</span></code>, this marker will produce a skip result for
each of the test methods of that class.</p>
<p>If you want to skip all test functions of a module, you may use the
<a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a> global:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># test_module.py</span>
<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>If multiple <code class="docutils literal notranslate"><span class="pre">skipif</span></code> decorators are applied to a test function, it
will be skipped if any of the skip conditions is true.</p>
</div>
<div class="section" id="skipping-files-or-directories">
<h5>Skipping files or directories<a class="headerlink" href="#skipping-files-or-directories" title="Permalink to this headline">¶</a></h5>
<p>Sometimes you may need to skip an entire file or directory, for example if the
tests rely on Python version-specific features or contain code that you do not
wish pytest to run. In this case, you must exclude the files and directories
from collection. Refer to <a class="reference internal" href="contents.html#customizing-test-collection"><span class="std std-ref">Customizing test collection</span></a> for more
information.</p>
</div>
<div class="section" id="skipping-on-a-missing-import-dependency">
<h5>Skipping on a missing import dependency<a class="headerlink" href="#skipping-on-a-missing-import-dependency" title="Permalink to this headline">¶</a></h5>
<p>You can skip tests on a missing import by using <a class="reference internal" href="contents.html#pytest-importorskip-ref"><span class="std std-ref">pytest.importorskip</span></a>
at module level, within a test, or test setup function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;docutils&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">docutils</span></code> cannot be imported here, this will lead to a skip outcome of
the test. You can also skip based on the version number of a library:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;docutils&quot;</span><span class="p">,</span> <span class="n">minversion</span><span class="o">=</span><span class="s2">&quot;0.3&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The version will be read from the specified
module’s <code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute.</p>
</div>
<div class="section" id="summary">
<h5>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h5>
<p>Here’s a quick guide on how to skip tests in a module in different situations:</p>
<ol class="arabic simple">
<li><p>Skip all tests in a module unconditionally:</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;all tests still WIP&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Skip all tests in a module based on some condition:</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;tests for linux only&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Skip all tests in a module if some import is missing:</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pexpect</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;pexpect&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="xfail-mark-test-functions-as-expected-to-fail">
<span id="xfail"></span><h4>XFail: mark test functions as expected to fail<a class="headerlink" href="#xfail-mark-test-functions-as-expected-to-fail" title="Permalink to this headline">¶</a></h4>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">xfail</span></code> marker to indicate that you
expect a test to fail:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This test will run but no traceback will be reported when it fails. Instead, terminal
reporting will list it in the “expected to fail” (<code class="docutils literal notranslate"><span class="pre">XFAIL</span></code>) or “unexpectedly
passing” (<code class="docutils literal notranslate"><span class="pre">XPASS</span></code>) sections.</p>
<p>Alternatively, you can also mark a test as <code class="docutils literal notranslate"><span class="pre">XFAIL</span></code> from within the test or its setup function
imperatively:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_config</span><span class="p">():</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="s2">&quot;failing configuration (but should work)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function2</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">slow_module</span>

    <span class="k">if</span> <span class="n">slow_module</span><span class="o">.</span><span class="n">slow_function</span><span class="p">():</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="s2">&quot;slow_module taking too long&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>These two examples illustrate situations where you don’t want to check for a condition
at the module level, which is when a condition would otherwise be evaluated for marks.</p>
<p>This will make <code class="docutils literal notranslate"><span class="pre">test_function</span></code> <code class="docutils literal notranslate"><span class="pre">XFAIL</span></code>. Note that no other code is executed after
the <a class="reference internal" href="contents.html#pytest.xfail" title="pytest.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.xfail()</span></code></a> call, differently from the marker. That’s because it is implemented
internally by raising a known exception.</p>
<p><strong>Reference</strong>: <a class="reference internal" href="contents.html#pytest-mark-xfail-ref"><span class="std std-ref">pytest.mark.xfail</span></a></p>
<div class="section" id="condition-parameter">
<h5><code class="docutils literal notranslate"><span class="pre">condition</span></code> parameter<a class="headerlink" href="#condition-parameter" title="Permalink to this headline">¶</a></h5>
<p>If a test is only expected to fail under a certain condition, you can pass
that condition as the first parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;bug in a 3rd party library&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Note that you have to pass a reason as well (see the parameter description at
<a class="reference internal" href="contents.html#pytest-mark-xfail-ref"><span class="std std-ref">pytest.mark.xfail</span></a>).</p>
</div>
<div class="section" id="reason-parameter">
<h5><code class="docutils literal notranslate"><span class="pre">reason</span></code> parameter<a class="headerlink" href="#reason-parameter" title="Permalink to this headline">¶</a></h5>
<p>You can specify the motive of an expected failure with the <code class="docutils literal notranslate"><span class="pre">reason</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;known parser issue&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="raises-parameter">
<h5><code class="docutils literal notranslate"><span class="pre">raises</span></code> parameter<a class="headerlink" href="#raises-parameter" title="Permalink to this headline">¶</a></h5>
<p>If you want to be more specific as to why the test is failing, you can specify
a single exception, or a tuple of exceptions, in the <code class="docutils literal notranslate"><span class="pre">raises</span></code> argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">raises</span><span class="o">=</span><span class="ne">RuntimeError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Then the test will be reported as a regular failure if it fails with an
exception not mentioned in <code class="docutils literal notranslate"><span class="pre">raises</span></code>.</p>
</div>
<div class="section" id="run-parameter">
<h5><code class="docutils literal notranslate"><span class="pre">run</span></code> parameter<a class="headerlink" href="#run-parameter" title="Permalink to this headline">¶</a></h5>
<p>If a test should be marked as xfail and reported as such but should not be
even executed, use the <code class="docutils literal notranslate"><span class="pre">run</span></code> parameter as <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This is specially useful for xfailing tests that are crashing the interpreter and should be
investigated later.</p>
</div>
<div class="section" id="strict-parameter">
<span id="xfail-strict-tutorial"></span><h5><code class="docutils literal notranslate"><span class="pre">strict</span></code> parameter<a class="headerlink" href="#strict-parameter" title="Permalink to this headline">¶</a></h5>
<p>Both <code class="docutils literal notranslate"><span class="pre">XFAIL</span></code> and <code class="docutils literal notranslate"><span class="pre">XPASS</span></code> don’t fail the test suite by default.
You can change this by setting the <code class="docutils literal notranslate"><span class="pre">strict</span></code> keyword-only parameter to <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This will make <code class="docutils literal notranslate"><span class="pre">XPASS</span></code> (“unexpectedly passing”) results from this test to fail the test suite.</p>
<p>You can change the default value of the <code class="docutils literal notranslate"><span class="pre">strict</span></code> parameter using the
<code class="docutils literal notranslate"><span class="pre">xfail_strict</span></code> ini option:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">xfail_strict</span><span class="o">=</span><span class="s">true</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="ignoring-xfail">
<h5>Ignoring xfail<a class="headerlink" href="#ignoring-xfail" title="Permalink to this headline">¶</a></h5>
<p>By specifying on the commandline:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --runxfail
</pre></div>
</div>
<p>you can force the running and reporting of an <code class="docutils literal notranslate"><span class="pre">xfail</span></code> marked test
as if it weren’t marked at all. This also causes <a class="reference internal" href="contents.html#pytest.xfail" title="pytest.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.xfail()</span></code></a> to produce no effect.</p>
</div>
<div class="section" id="examples">
<h5>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h5>
<p>Here is a simple test file with the several usages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">xfail</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span>


<span class="nd">@xfail</span>
<span class="k">def</span> <span class="nf">test_hello</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="nd">@xfail</span><span class="p">(</span><span class="n">run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_hello2</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="nd">@xfail</span><span class="p">(</span><span class="s2">&quot;hasattr(os, &#39;sep&#39;)&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_hello3</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="nd">@xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;bug 110&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_hello4</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="nd">@xfail</span><span class="p">(</span><span class="s1">&#39;pytest.__version__[0] != &quot;17&quot;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_hello5</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_hello6</span><span class="p">():</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">)</span>


<span class="nd">@xfail</span><span class="p">(</span><span class="n">raises</span><span class="o">=</span><span class="ne">IndexError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_hello7</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Running it with the report-on-xfail option gives this output:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>! pytest -rx xfail_demo.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-6.x.y, py-1.x.y, pluggy-1.x.y
cachedir: $PYTHON_PREFIX/.pytest_cache
rootdir: $REGENDOC_TMPDIR/example
collected 7 items

xfail_demo.py <span class=" -Color -Color-Yellow">xxxxxxx</span>                                                <span class=" -Color -Color-Yellow">[100%]</span>

========================= short test summary info ==========================
XFAIL xfail_demo.py::test_hello
XFAIL xfail_demo.py::test_hello2
  reason: [NOTRUN]
XFAIL xfail_demo.py::test_hello3
  condition: hasattr(os, &#39;sep&#39;)
XFAIL xfail_demo.py::test_hello4
  bug 110
XFAIL xfail_demo.py::test_hello5
  condition: pytest.__version__[0] != &quot;17&quot;
XFAIL xfail_demo.py::test_hello6
  reason: reason
XFAIL xfail_demo.py::test_hello7
<span class=" -Color -Color-Yellow">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Yellow">7 xfailed</span><span class=" -Color -Color-Yellow"> in 0.12s ============================</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="skip-xfail-with-parametrize">
<span id="id2"></span><h4>Skip/xfail with parametrize<a class="headerlink" href="#skip-xfail-with-parametrize" title="Permalink to this headline">¶</a></h4>
<p>It is possible to apply markers like skip and xfail to individual
test instances when using parametrize:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;expected&quot;</span><span class="p">),</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;some bug&quot;</span><span class="p">)),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;py2k&quot;</span><span class="p">)</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_increment</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
</div>
</div>
<span id="document-how-to/plugins"></span><div class="section" id="how-to-install-and-use-plugins">
<span id="using-plugins"></span><span id="extplugins"></span><span id="external-plugins"></span><h3>How to install and use plugins<a class="headerlink" href="#how-to-install-and-use-plugins" title="Permalink to this headline">¶</a></h3>
<p>This section talks about installing and using third party plugins.
For writing your own plugins, please refer to <a class="reference internal" href="contents.html#writing-plugins"><span class="std std-ref">Writing plugins</span></a>.</p>
<p>Installing a third party plugin can be easily done with <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pytest-NAME
pip uninstall pytest-NAME
</pre></div>
</div>
<p>If a plugin is installed, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> automatically finds and integrates it,
there is no need to activate it.</p>
<p>Here is a little annotated list for some popular plugins:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/pytest-django/">pytest-django</a>: write tests
for <a class="reference external" href="https://docs.djangoproject.com/">django</a> apps, using pytest integration.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-twisted/">pytest-twisted</a>: write tests
for <a class="reference external" href="https://twistedmatrix.com/">twisted</a> apps, starting a reactor and
processing deferreds from test functions.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-cov/">pytest-cov</a>:
coverage reporting, compatible with distributed testing</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-xdist/">pytest-xdist</a>:
to distribute tests to CPUs and remote hosts, to run in boxed
mode which allows to survive segmentation faults, to run in
looponfailing mode, automatically re-running failing tests
on file changes.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-instafail/">pytest-instafail</a>:
to report failures while the test run is happening.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-bdd/">pytest-bdd</a>:
to write tests using behaviour-driven testing.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-timeout/">pytest-timeout</a>:
to timeout tests based on function marks or global definitions.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-pep8/">pytest-pep8</a>:
a <code class="docutils literal notranslate"><span class="pre">--pep8</span></code> option to enable PEP8 compliance checking.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pytest-flakes/">pytest-flakes</a>:
check source code with pyflakes.</p></li>
</ul>
<p>To see a complete list of all plugins with their latest testing
status against different pytest and Python versions, please visit
<a class="reference internal" href="contents.html#plugin-list"><span class="std std-ref">Plugin List</span></a>.</p>
<p>You may also discover more plugins through a <a class="reference external" href="https://pypi.org/search/?q=pytest-">pytest- pypi.org search</a>.</p>
<div class="section" id="requiring-loading-plugins-in-a-test-module-or-conftest-file">
<span id="available-installable-plugins"></span><h4>Requiring/Loading plugins in a test module or conftest file<a class="headerlink" href="#requiring-loading-plugins-in-a-test-module-or-conftest-file" title="Permalink to this headline">¶</a></h4>
<p>You can require plugins in a test module or a conftest file using <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;myapp.testsupport.myplugin&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>When the test module or conftest plugin is loaded the specified plugins
will be loaded as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Requiring plugins using a <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> variable in non-root
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files is deprecated. See
<a class="reference internal" href="contents.html#requiring-plugins-in-non-root-conftests"><span class="std std-ref">full explanation</span></a>
in the Writing plugins section.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> is reserved and should not be used as a
name for a custom plugin module.</p>
</div>
</div>
<div class="section" id="finding-out-which-plugins-are-active">
<span id="findpluginname"></span><h4>Finding out which plugins are active<a class="headerlink" href="#finding-out-which-plugins-are-active" title="Permalink to this headline">¶</a></h4>
<p>If you want to find out which plugins are active in your
environment you can type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --trace-config
</pre></div>
</div>
<p>and will get an extended test header which shows activated plugins
and their names. It will also print local plugins aka
<a class="reference internal" href="contents.html#conftest-py-plugins"><span class="std std-ref">conftest.py</span></a> files when they are loaded.</p>
</div>
<div class="section" id="deactivating-unregistering-a-plugin-by-name">
<span id="cmdunregister"></span><h4>Deactivating / unregistering a plugin by name<a class="headerlink" href="#deactivating-unregistering-a-plugin-by-name" title="Permalink to this headline">¶</a></h4>
<p>You can prevent plugins from loading or unregister them:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -p no:NAME
</pre></div>
</div>
<p>This means that any subsequent try to activate/load the named
plugin will not work.</p>
<p>If you want to unconditionally disable a plugin for a project, you can add
this option to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-p no:NAME</span><span class="w"></span>
</pre></div>
</div>
<p>Alternatively to disable it only in certain environments (for example in a
CI server), you can set <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> environment variable to
<code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:name</span></code>.</p>
<p>See <a class="reference internal" href="#findpluginname"><span class="std std-ref">Finding out which plugins are active</span></a> for how to obtain the name of a plugin.</p>
<span class="target" id="builtin-plugins"></span></div>
</div>
<span id="document-how-to/writing_plugins"></span><div class="section" id="writing-plugins">
<span id="plugins"></span><span id="id1"></span><h3>Writing plugins<a class="headerlink" href="#writing-plugins" title="Permalink to this headline">¶</a></h3>
<p>It is easy to implement <a class="reference internal" href="#local-conftest-plugins">local conftest plugins</a> for your own project
or <a class="reference internal" href="#pip-installable-plugins">pip-installable plugins</a> that can be used throughout many projects,
including third party projects.  Please refer to <a class="reference internal" href="contents.html#using-plugins"><span class="std std-ref">How to install and use plugins</span></a> if you
only want to use but not write plugins.</p>
<p>A plugin contains one or multiple hook functions. <a class="reference internal" href="contents.html#writinghooks"><span class="std std-ref">Writing hooks</span></a>
explains the basics and details of how you can write a hook function yourself.
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> implements all aspects of configuration, collection, running and
reporting by calling <a class="reference internal" href="contents.html#hook-reference"><span class="std std-ref">well specified hooks</span></a> of the following plugins:</p>
<ul class="simple">
<li><p>builtin plugins: loaded from pytest’s internal <code class="docutils literal notranslate"><span class="pre">_pytest</span></code> directory.</p></li>
<li><p><a class="reference internal" href="contents.html#extplugins"><span class="std std-ref">external plugins</span></a>: modules discovered through
<a class="reference internal" href="#setuptools-entry-points">setuptools entry points</a></p></li>
<li><p><a class="reference internal" href="#conftest-py-plugins">conftest.py plugins</a>: modules auto-discovered in test directories</p></li>
</ul>
<p>In principle, each hook call is a <code class="docutils literal notranslate"><span class="pre">1:N</span></code> Python function call where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the
number of registered implementation functions for a given specification.
All specifications and implementations follow the <code class="docutils literal notranslate"><span class="pre">pytest_</span></code> prefix
naming convention, making them easy to distinguish and find.</p>
<div class="section" id="plugin-discovery-order-at-tool-startup">
<span id="pluginorder"></span><h4>Plugin discovery order at tool startup<a class="headerlink" href="#plugin-discovery-order-at-tool-startup" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> loads plugin modules at tool startup in the following way:</p>
<ol class="arabic">
<li><p>by scanning the command line for the <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:name</span></code> option
and <em>blocking</em> that plugin from being loaded (even builtin plugins can
be blocked this way). This happens before normal command-line parsing.</p></li>
<li><p>by loading all builtin plugins.</p></li>
<li><p>by scanning the command line for the <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">name</span></code> option
and loading the specified plugin. This happens before normal command-line parsing.</p></li>
<li><p>by loading all plugins registered through <a class="reference internal" href="#setuptools-entry-points">setuptools entry points</a>.</p></li>
<li><p>by loading all plugins specified through the <span class="target" id="index-0"></span><a class="reference internal" href="contents.html#envvar-PYTEST_PLUGINS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_PLUGINS</span></code></a> environment variable.</p></li>
<li><p>by loading all <code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code> files as inferred by the command line
invocation:</p>
<ul class="simple">
<li><p>if no test paths are specified, use the current dir as a test path</p></li>
<li><p>if exists, load <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> and <code class="docutils literal notranslate"><span class="pre">test*/conftest.py</span></code> relative
to the directory part of the first test path. After the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
file is loaded, load all plugins specified in its
<a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> variable if present.</p></li>
</ul>
<p>Note that pytest does not find <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files in deeper nested
sub directories at tool startup.  It is usually a good idea to keep
your <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file in the top level test or project root directory.</p>
</li>
<li><p>by recursively loading all plugins specified by the
<a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> variable in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p></li>
</ol>
</div>
<div class="section" id="conftest-py-local-per-directory-plugins">
<span id="local-conftest-plugins"></span><span id="localplugin"></span><span id="conftest-py-plugins"></span><h4>conftest.py: local per-directory plugins<a class="headerlink" href="#conftest-py-local-per-directory-plugins" title="Permalink to this headline">¶</a></h4>
<p>Local <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> plugins contain directory-specific hook
implementations.  Hook Session and test running activities will
invoke all hooks defined in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files closer to the
root of the filesystem.  Example of implementing the
<code class="docutils literal notranslate"><span class="pre">pytest_runtest_setup</span></code> hook so that is called for tests in the <code class="docutils literal notranslate"><span class="pre">a</span></code>
sub directory but not for other directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="o">/</span><span class="n">conftest</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
        <span class="c1"># called for running each test in &#39;a&#39; directory</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setting up&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

<span class="n">a</span><span class="o">/</span><span class="n">test_sub</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_sub</span><span class="p">():</span>
        <span class="k">pass</span>

<span class="n">test_flat</span><span class="o">.</span><span class="n">py</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_flat</span><span class="p">():</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Here is how you might run it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="n">test_flat</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">capture</span><span class="o">=</span><span class="n">no</span>  <span class="c1"># will not show &quot;setting up&quot;</span>
<span class="n">pytest</span> <span class="n">a</span><span class="o">/</span><span class="n">test_sub</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">capture</span><span class="o">=</span><span class="n">no</span>  <span class="c1"># will show &quot;setting up&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files which do not reside in a
python package directory (i.e. one containing an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>) then
“import conftest” can be ambiguous because there might be other
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files as well on your <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> or <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.
It is thus good practice for projects to either put <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
under a package scope or to never import anything from a
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file.</p>
<p>See also: <a class="reference internal" href="contents.html#pythonpath"><span class="std std-ref">pytest import mechanisms and sys.path/PYTHONPATH</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some hooks should be implemented only in plugins or conftest.py files situated at the
tests root directory due to how pytest discovers plugins during startup,
see the documentation of each hook for details.</p>
</div>
</div>
<div class="section" id="writing-your-own-plugin">
<h4>Writing your own plugin<a class="headerlink" href="#writing-your-own-plugin" title="Permalink to this headline">¶</a></h4>
<p>If you want to write a plugin, there are many real-life examples
you can copy from:</p>
<ul class="simple">
<li><p>a custom collection example plugin: <a class="reference internal" href="contents.html#yaml-plugin"><span class="std std-ref">A basic example for specifying tests in Yaml files</span></a></p></li>
<li><p>builtin plugins which provide pytest’s own functionality</p></li>
<li><p>many <a class="reference internal" href="contents.html#plugin-list"><span class="std std-ref">external plugins</span></a> providing additional features</p></li>
</ul>
<p>All of these plugins implement <a class="reference internal" href="contents.html#hook-reference"><span class="std std-ref">hooks</span></a> and/or <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixtures</span></a>
to extend and add functionality.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to check out the excellent
<a class="reference external" href="https://github.com/pytest-dev/cookiecutter-pytest-plugin">cookiecutter-pytest-plugin</a>
project, which is a <a class="reference external" href="https://github.com/audreyr/cookiecutter">cookiecutter template</a>
for authoring plugins.</p>
<p>The template provides an excellent starting point with a working plugin,
tests running with tox, a comprehensive README file as well as a
pre-configured entry-point.</p>
</div>
<p>Also consider <a class="reference internal" href="contents.html#submitplugin"><span class="std std-ref">contributing your plugin to pytest-dev</span></a>
once it has some happy users other than yourself.</p>
</div>
<div class="section" id="making-your-plugin-installable-by-others">
<span id="pip-installable-plugins"></span><span id="setuptools-entry-points"></span><h4>Making your plugin installable by others<a class="headerlink" href="#making-your-plugin-installable-by-others" title="Permalink to this headline">¶</a></h4>
<p>If you want to make your plugin externally available, you
may define a so-called entry point for your distribution so
that <code class="docutils literal notranslate"><span class="pre">pytest</span></code> finds your plugin module.  Entry points are
a feature that is provided by <a class="reference external" href="https://setuptools.pypa.io/en/stable/index.html" title="(in setuptools v65.3.0.post20220824)"><span>Documentation</span></a>. pytest looks up
the <code class="docutils literal notranslate"><span class="pre">pytest11</span></code> entrypoint to discover its
plugins and you can thus make your plugin available by defining
it in your setuptools-invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sample ./setup.py file</span>
<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;myproject&quot;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;myproject&quot;</span><span class="p">],</span>
    <span class="c1"># the following makes a plugin available to pytest</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pytest11&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;name_of_plugin = myproject.pluginmodule&quot;</span><span class="p">]},</span>
    <span class="c1"># custom PyPI classifier for pytest plugins</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Framework :: Pytest&quot;</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If a package is installed this way, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will load
<code class="docutils literal notranslate"><span class="pre">myproject.pluginmodule</span></code> as a plugin which can define
<a class="reference internal" href="contents.html#hook-reference"><span class="std std-ref">hooks</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to include <code class="docutils literal notranslate"><span class="pre">Framework</span> <span class="pre">::</span> <span class="pre">Pytest</span></code> in your list of
<a class="reference external" href="https://pypi.org/classifiers/">PyPI classifiers</a>
to make it easy for users to find your plugin.</p>
</div>
</div>
<div class="section" id="assertion-rewriting">
<span id="id2"></span><h4>Assertion Rewriting<a class="headerlink" href="#assertion-rewriting" title="Permalink to this headline">¶</a></h4>
<p>One of the main features of <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is the use of plain assert
statements and the detailed introspection of expressions upon
assertion failures.  This is provided by “assertion rewriting” which
modifies the parsed AST before it gets compiled to bytecode.  This is
done via a <span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0302"><strong>PEP 302</strong></a> import hook which gets installed early on when
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> starts up and will perform this rewriting when modules get
imported.  However, since we do not want to test different bytecode
from what you will run in production, this hook only rewrites test modules
themselves (as defined by the <a class="reference internal" href="contents.html#confval-python_files"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_files</span></code></a> configuration option),
and any modules which are part of plugins.
Any other imported module will not be rewritten and normal assertion behaviour
will happen.</p>
<p>If you have assertion helpers in other modules where you would need
assertion rewriting to be enabled you need to ask <code class="docutils literal notranslate"><span class="pre">pytest</span></code>
explicitly to rewrite this module before it gets imported.</p>
<dl class="py function">
<dt>
<code class="sig-name descname"><span class="pre">register_assert_rewrite</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/assertion.html#register_assert_rewrite"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Register one or more module names to be rewritten on import.</p>
<p>This function will make sure that this module or all modules inside
the package will get their assert statements rewritten.
Thus you should make sure to call this before the module is
actually imported, usually in your __init__.py if you are a plugin
using a package.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><strong>TypeError</strong></a> – If the given module names are not strings.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<p>This is especially important when you write a pytest plugin which is
created using a package.  The import hook only treats <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
files and any modules which are listed in the <code class="docutils literal notranslate"><span class="pre">pytest11</span></code> entrypoint
as plugins.  As an example consider the following package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_foo</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">pytest_foo</span><span class="o">/</span><span class="n">plugin</span><span class="o">.</span><span class="n">py</span>
<span class="n">pytest_foo</span><span class="o">/</span><span class="n">helper</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>With the following typical <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> extract:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;pytest11&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;foo = pytest_foo.plugin&quot;</span><span class="p">]},</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case only <code class="docutils literal notranslate"><span class="pre">pytest_foo/plugin.py</span></code> will be rewritten.  If the
helper module also contains assert statements which need to be
rewritten it needs to be marked as such, before it gets imported.
This is easiest by marking it for rewriting inside the
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> module, which will always be imported first when a
module inside a package is imported.  This way <code class="docutils literal notranslate"><span class="pre">plugin.py</span></code> can still
import <code class="docutils literal notranslate"><span class="pre">helper.py</span></code> normally.  The contents of
<code class="docutils literal notranslate"><span class="pre">pytest_foo/__init__.py</span></code> will then need to look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytest</span><span class="o">.</span><span class="n">register_assert_rewrite</span><span class="p">(</span><span class="s2">&quot;pytest_foo.helper&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="requiring-loading-plugins-in-a-test-module-or-conftest-file">
<h4>Requiring/Loading plugins in a test module or conftest file<a class="headerlink" href="#requiring-loading-plugins-in-a-test-module-or-conftest-file" title="Permalink to this headline">¶</a></h4>
<p>You can require plugins in a test module or a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file using <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name1&quot;</span><span class="p">,</span> <span class="s2">&quot;name2&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>When the test module or conftest plugin is loaded the specified plugins
will be loaded as well. Any module can be blessed as a plugin, including internal
application modules:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;myapp.testsupport.myplugin&quot;</span>
</pre></div>
</div>
<p><a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> are processed recursively, so note that in the example above
if <code class="docutils literal notranslate"><span class="pre">myapp.testsupport.myplugin</span></code> also declares <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a>, the contents
of the variable will also be loaded as plugins, and so on.</p>
<div class="admonition note" id="requiring-plugins-in-non-root-conftests">
<p class="admonition-title">Note</p>
<p>Requiring plugins using <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> variable in non-root
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files is deprecated.</p>
<p>This is important because <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files implement per-directory
hook implementations, but once a plugin is imported, it will affect the
entire directory tree. In order to avoid confusion, defining
<a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> in any <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file which is not located in the
tests root directory is deprecated, and will raise a warning.</p>
</div>
<p>This mechanism makes it easy to share fixtures within applications or even
external applications without the need to create external plugins using
the <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>’s entry point technique.</p>
<p>Plugins imported by <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> will also automatically be marked
for assertion rewriting (see <a class="reference internal" href="contents.html#pytest.register_assert_rewrite" title="pytest.register_assert_rewrite"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.register_assert_rewrite()</span></code></a>).
However for this to have any effect the module must not be
imported already; if it was already imported at the time the
<a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> statement is processed, a warning will result and
assertions inside the plugin will not be rewritten.  To fix this you
can either call <a class="reference internal" href="contents.html#pytest.register_assert_rewrite" title="pytest.register_assert_rewrite"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.register_assert_rewrite()</span></code></a> yourself before
the module is imported, or you can arrange the code to delay the
importing until after the plugin is registered.</p>
</div>
<div class="section" id="accessing-another-plugin-by-name">
<h4>Accessing another plugin by name<a class="headerlink" href="#accessing-another-plugin-by-name" title="Permalink to this headline">¶</a></h4>
<p>If a plugin wants to collaborate with code from
another plugin it can obtain a reference through
the plugin manager like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plugin</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="s2">&quot;name_of_plugin&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to look at the names of existing plugins, use
the <code class="docutils literal notranslate"><span class="pre">--trace-config</span></code> option.</p>
</div>
<div class="section" id="registering-custom-markers">
<span id="registering-markers"></span><h4>Registering custom markers<a class="headerlink" href="#registering-custom-markers" title="Permalink to this headline">¶</a></h4>
<p>If your plugin uses any markers, you should register them so that they appear in
pytest’s help text and do not <a class="reference internal" href="contents.html#unknown-marks"><span class="std std-ref">cause spurious warnings</span></a>.
For example, the following plugin would register <code class="docutils literal notranslate"><span class="pre">cool_marker</span></code> and
<code class="docutils literal notranslate"><span class="pre">mark_with</span></code> for all users:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span> <span class="s2">&quot;cool_marker: this one is for cool tests.&quot;</span><span class="p">)</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span> <span class="s2">&quot;mark_with(arg, arg2): this marker takes arguments.&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-plugins">
<h4>Testing plugins<a class="headerlink" href="#testing-plugins" title="Permalink to this headline">¶</a></h4>
<p>pytest comes with a plugin named <code class="docutils literal notranslate"><span class="pre">pytester</span></code> that helps you write tests for
your plugin code. The plugin is disabled by default, so you will have to enable
it before you can use it.</p>
<p>You can do so by adding the following line to a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file in your
testing directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;pytester&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Alternatively you can invoke pytest with the <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">pytester</span></code> command line
option.</p>
<p>This will allow you to use the <a class="reference internal" href="contents.html#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytester</span></code></a>
fixture for testing your plugin code.</p>
<p>Let’s demonstrate what you can do with the plugin with an example. Imagine we
developed a plugin that provides a fixture <code class="docutils literal notranslate"><span class="pre">hello</span></code> which yields a function
and we can invoke this function with one optional parameter. It will return a
string value of <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">World!</span></code> if we do not supply a value or <code class="docutils literal notranslate"><span class="pre">Hello</span>
<span class="pre">{value}!</span></code> if we do supply a string value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">getgroup</span><span class="p">(</span><span class="s2">&quot;helloworld&quot;</span><span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--name&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Default &quot;name&quot; for hello().&#39;</span><span class="p">,</span>
    <span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_hello</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;Hello </span><span class="si">{name}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_hello</span>
</pre></div>
</div>
<p>Now the <code class="docutils literal notranslate"><span class="pre">pytester</span></code> fixture provides a convenient API for creating temporary
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files and test files. It also allows us to run the tests and
return a result object, with which we can assert the tests’ outcomes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_hello</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make sure that our plugin works.&quot;&quot;&quot;</span>

    <span class="c1"># create a temporary conftest.py file</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makeconftest</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        import pytest</span>

<span class="sd">        @pytest.fixture(params=[</span>
<span class="sd">            &quot;Brianna&quot;,</span>
<span class="sd">            &quot;Andreas&quot;,</span>
<span class="sd">            &quot;Floris&quot;,</span>
<span class="sd">        ])</span>
<span class="sd">        def name(request):</span>
<span class="sd">            return request.param</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="c1"># create a temporary pytest test file</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        def test_hello_default(hello):</span>
<span class="sd">            assert hello() == &quot;Hello World!&quot;</span>

<span class="sd">        def test_hello_name(hello, name):</span>
<span class="sd">            assert hello(name) == &quot;Hello {0}!&quot;.format(name)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>

    <span class="c1"># run all tests with pytest</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>

    <span class="c1"># check that all 4 tests passed</span>
    <span class="n">result</span><span class="o">.</span><span class="n">assert_outcomes</span><span class="p">(</span><span class="n">passed</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally it is possible to copy examples to the <code class="docutils literal notranslate"><span class="pre">pytester</span></code>’s isolated environment
before running pytest on it. This way we can abstract the tested logic to separate files,
which is especially useful for longer tests and/or longer <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p>
<p>Note that for <code class="docutils literal notranslate"><span class="pre">pytester.copy_example</span></code> to work we need to set <code class="docutils literal notranslate"><span class="pre">pytester_example_dir</span></code>
in our <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> to tell pytest where to look for example files.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">pytester_example_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">.</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_example.py</span>


<span class="k">def</span> <span class="nf">test_plugin</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">copy_example</span><span class="p">(</span><span class="s2">&quot;test_example.py&quot;</span><span class="p">)</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">(</span><span class="s2">&quot;-k&quot;</span><span class="p">,</span> <span class="s2">&quot;test_example&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_example</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project, configfile: pytest.ini
collected 2 items

test_example.py <span class=" -Color -Color-Green">..</span>                                                   <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>For more information about the result object that <code class="docutils literal notranslate"><span class="pre">runpytest()</span></code> returns, and
the methods that it provides please check out the <code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code> documentation.</p>
</div>
</div>
<span id="document-how-to/writing_hook_functions"></span><div class="section" id="writing-hook-functions">
<span id="writinghooks"></span><h3>Writing hook functions<a class="headerlink" href="#writing-hook-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="hook-function-validation-and-execution">
<span id="validation"></span><h4>hook function validation and execution<a class="headerlink" href="#hook-function-validation-and-execution" title="Permalink to this headline">¶</a></h4>
<p>pytest calls hook functions from registered plugins for any
given hook specification.  Let’s look at a typical hook function
for the <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems(session,</span> <span class="pre">config,</span>
<span class="pre">items)</span></code> hook which pytest calls after collection of all test items is
completed.</p>
<p>When we implement a <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code> function in our plugin
pytest will during registration verify that you use argument
names which match the specification and bail out if not.</p>
<p>Let’s look at a possible implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
    <span class="c1"># called after collection is completed</span>
    <span class="c1"># you can modify the ``items`` list</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will pass in <code class="docutils literal notranslate"><span class="pre">config</span></code> (the pytest config object)
and <code class="docutils literal notranslate"><span class="pre">items</span></code> (the list of collected test items) but will not pass
in the <code class="docutils literal notranslate"><span class="pre">session</span></code> argument because we didn’t list it in the function
signature.  This dynamic “pruning” of arguments allows <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to
be “future-compatible”: we can introduce new hook named parameters without
breaking the signatures of existing hook implementations.  It is one of
the reasons for the general long-lived compatibility of pytest plugins.</p>
<p>Note that hook functions other than <code class="docutils literal notranslate"><span class="pre">pytest_runtest_*</span></code> are not
allowed to raise exceptions.  Doing so will break the pytest run.</p>
</div>
<div class="section" id="firstresult-stop-at-first-non-none-result">
<span id="firstresult"></span><h4>firstresult: stop at first non-None result<a class="headerlink" href="#firstresult-stop-at-first-non-none-result" title="Permalink to this headline">¶</a></h4>
<p>Most calls to <code class="docutils literal notranslate"><span class="pre">pytest</span></code> hooks result in a <strong>list of results</strong> which contains
all non-None results of the called hook functions.</p>
<p>Some hook specifications use the <code class="docutils literal notranslate"><span class="pre">firstresult=True</span></code> option so that the hook
call only executes until the first of N registered functions returns a
non-None result which is then taken as result of the overall hook call.
The remaining hook functions will not be called in this case.</p>
</div>
<div class="section" id="hookwrapper-executing-around-other-hooks">
<span id="hookwrapper"></span><h4>hookwrapper: executing around other hooks<a class="headerlink" href="#hookwrapper-executing-around-other-hooks" title="Permalink to this headline">¶</a></h4>
<p>pytest plugins can implement hook wrappers which wrap the execution
of other hook implementations.  A hook wrapper is a generator function
which yields exactly once. When pytest invokes hooks it first executes
hook wrappers and passes the same arguments as to the regular hooks.</p>
<p>At the yield point of the hook wrapper pytest will execute the next hook
implementations and return their result to the yield point in the form of
a <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> instance which encapsulates a result or
exception info.  The yield point itself will thus typically not raise
exceptions (unless there are bugs).</p>
<p>Here is an example definition of a hook wrapper:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">hookwrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_pyfunc_call</span><span class="p">(</span><span class="n">pyfuncitem</span><span class="p">):</span>
    <span class="n">do_something_before_next_hook_executes</span><span class="p">()</span>

    <span class="n">outcome</span> <span class="o">=</span> <span class="k">yield</span>
    <span class="c1"># outcome.excinfo may be None or a (cls, val, tb) tuple</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">outcome</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>  <span class="c1"># will raise if outcome was exception</span>

    <span class="n">post_process_result</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

    <span class="n">outcome</span><span class="o">.</span><span class="n">force_result</span><span class="p">(</span><span class="n">new_res</span><span class="p">)</span>  <span class="c1"># to override the return value to the plugin system</span>
</pre></div>
</div>
<p>Note that hook wrappers don’t return results themselves, they merely
perform tracing or other side effects around the actual hook implementations.
If the result of the underlying hook is a mutable object, they may modify
that result but it’s probably better to avoid it.</p>
<p>For more information, consult the
<a class="reference external" href="https://pluggy.readthedocs.io/en/stable/index.html#hookwrappers" title="(in pluggy v1.0)"><span class="xref std std-ref">pluggy documentation about hookwrappers</span></a>.</p>
</div>
<div class="section" id="hook-function-ordering-call-example">
<span id="plugin-hookorder"></span><h4>Hook function ordering / call example<a class="headerlink" href="#hook-function-ordering-call-example" title="Permalink to this headline">¶</a></h4>
<p>For any given hook specification there may be more than one
implementation and we thus generally view <code class="docutils literal notranslate"><span class="pre">hook</span></code> execution as a
<code class="docutils literal notranslate"><span class="pre">1:N</span></code> function call where <code class="docutils literal notranslate"><span class="pre">N</span></code> is the number of registered functions.
There are ways to influence if a hook implementation comes before or
after others, i.e.  the position in the <code class="docutils literal notranslate"><span class="pre">N</span></code>-sized list of functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plugin 1</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="c1"># will execute as early as possible</span>
    <span class="o">...</span>


<span class="c1"># Plugin 2</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">trylast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="c1"># will execute as late as possible</span>
    <span class="o">...</span>


<span class="c1"># Plugin 3</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">hookwrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="c1"># will execute even before the tryfirst one above!</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="k">yield</span>
    <span class="c1"># will execute after all non-hookwrappers executed</span>
</pre></div>
</div>
<p>Here is the order of execution:</p>
<ol class="arabic simple">
<li><p>Plugin3’s pytest_collection_modifyitems called until the yield point
because it is a hook wrapper.</p></li>
<li><p>Plugin1’s pytest_collection_modifyitems is called because it is marked
with <code class="docutils literal notranslate"><span class="pre">tryfirst=True</span></code>.</p></li>
<li><p>Plugin2’s pytest_collection_modifyitems is called because it is marked
with <code class="docutils literal notranslate"><span class="pre">trylast=True</span></code> (but even without this mark it would come after
Plugin1).</p></li>
<li><p>Plugin3’s pytest_collection_modifyitems then executing the code after the yield
point.  The yield receives a <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code> instance which encapsulates
the result from calling the non-wrappers.  Wrappers shall not modify the result.</p></li>
</ol>
<p>It’s possible to use <code class="docutils literal notranslate"><span class="pre">tryfirst</span></code> and <code class="docutils literal notranslate"><span class="pre">trylast</span></code> also in conjunction with
<code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code> in which case it will influence the ordering of hookwrappers
among each other.</p>
</div>
<div class="section" id="declaring-new-hooks">
<h4>Declaring new hooks<a class="headerlink" href="#declaring-new-hooks" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a quick overview on how to add new hooks and how they work in general, but a more complete
overview can be found in <a class="reference external" href="https://pluggy.readthedocs.io/en/latest/">the pluggy documentation</a>.</p>
</div>
<p>Plugins and <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files may declare new hooks that can then be
implemented by other plugins in order to alter behaviour or interact with
the new plugin:</p>
<dl class="py function">
<dt>
<code class="sig-name descname"><span class="pre">pytest_addhooks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_addhooks"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Called at plugin registration time to allow adding new hooks via a call to
<code class="docutils literal notranslate"><span class="pre">pluginmanager.add_hookspecs(module_or_class,</span> <span class="pre">prefix)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pluginmanager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>pytest.PytestPluginManager</em></a>) – The pytest plugin manager.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with <code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>.</p>
</div>
</dd></dl>

<p>Hooks are usually declared as do-nothing functions that contain only
documentation describing when the hook will be called and what return values
are expected. The names of the functions must start with <code class="docutils literal notranslate"><span class="pre">pytest_</span></code> otherwise pytest won’t recognize them.</p>
<p>Here’s an example. Let’s assume this code is in the <code class="docutils literal notranslate"><span class="pre">sample_hook.py</span></code> module.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_my_hook</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Receives the pytest config and does things with it</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>To register the hooks with pytest they need to be structured in their own module or class. This
class or module can then be passed to the <code class="docutils literal notranslate"><span class="pre">pluginmanager</span></code> using the <code class="docutils literal notranslate"><span class="pre">pytest_addhooks</span></code> function
(which itself is a hook exposed by pytest).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_addhooks</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This example assumes the hooks are grouped in the &#39;sample_hook&#39; module. &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">my_app.tests</span> <span class="kn">import</span> <span class="n">sample_hook</span>

    <span class="n">pluginmanager</span><span class="o">.</span><span class="n">add_hookspecs</span><span class="p">(</span><span class="n">sample_hook</span><span class="p">)</span>
</pre></div>
</div>
<p>For a real world example, see <a class="reference external" href="https://github.com/pytest-dev/pytest-xdist/blob/974bd566c599dc6a9ea291838c6f226197208b46/xdist/newhooks.py">newhooks.py</a> from <a class="reference external" href="https://github.com/pytest-dev/pytest-xdist">xdist</a>.</p>
<p>Hooks may be called both from fixtures or from other hooks. In both cases, hooks are called
through the <code class="docutils literal notranslate"><span class="pre">hook</span></code> object, available in the <code class="docutils literal notranslate"><span class="pre">config</span></code> object. Most hooks receive a
<code class="docutils literal notranslate"><span class="pre">config</span></code> object directly, while fixtures may use the <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> fixture which provides the same object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">my_fixture</span><span class="p">(</span><span class="n">pytestconfig</span><span class="p">):</span>
    <span class="c1"># call the hook called &quot;pytest_my_hook&quot;</span>
    <span class="c1"># &#39;result&#39; will be a list of return values from all registered functions.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pytestconfig</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_my_hook</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">pytestconfig</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hooks receive parameters using only keyword arguments.</p>
</div>
<p>Now your hook is ready to be used. To register a function at the hook, other plugins or users must
now simply define the function <code class="docutils literal notranslate"><span class="pre">pytest_my_hook</span></code> with the correct signature in their <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_my_hook</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Print all active hooks to the screen.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">hook</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-hooks-in-pytest-addoption">
<span id="addoptionhooks"></span><h4>Using hooks in pytest_addoption<a class="headerlink" href="#using-hooks-in-pytest-addoption" title="Permalink to this headline">¶</a></h4>
<p>Occasionally, it is necessary to change the way in which command line options
are defined by one plugin based on hooks in another plugin. For example,
a plugin may expose a command line option for which another plugin needs
to define the default value. The pluginmanager can be used to install and
use hooks to accomplish this. The plugin would define and add the hooks
and use pytest_addoption as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of hooks.py</span>

<span class="c1"># Use firstresult=True because we only want one plugin to define this</span>
<span class="c1"># default value</span>
<span class="nd">@hookspec</span><span class="p">(</span><span class="n">firstresult</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_config_file_default_value</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Return the default value for the config file command line option. &quot;&quot;&quot;</span>


<span class="c1"># contents of myplugin.py</span>


<span class="k">def</span> <span class="nf">pytest_addhooks</span><span class="p">(</span><span class="n">pluginmanager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This example assumes the hooks are grouped in the &#39;hooks&#39; module. &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">hooks</span>

    <span class="n">pluginmanager</span><span class="o">.</span><span class="n">add_hookspecs</span><span class="p">(</span><span class="n">hooks</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">pluginmanager</span><span class="p">):</span>
    <span class="n">default_value</span> <span class="o">=</span> <span class="n">pluginmanager</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">pytest_config_file_default_value</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--config-file&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Config file to use, defaults to </span><span class="si">%(default)s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">default_value</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>The conftest.py that is using myplugin would simply define the hook as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_config_file_default_value</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;config.yaml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="optionally-using-hooks-from-3rd-party-plugins">
<h4>Optionally using hooks from 3rd party plugins<a class="headerlink" href="#optionally-using-hooks-from-3rd-party-plugins" title="Permalink to this headline">¶</a></h4>
<p>Using new hooks from plugins as explained above might be a little tricky
because of the standard <a class="reference internal" href="#validation"><span class="std std-ref">validation mechanism</span></a>:
if you depend on a plugin that is not installed, validation will fail and
the error message will not make much sense to your users.</p>
<p>One approach is to defer the hook implementation to a new plugin instead of
declaring the hook functions directly in your plugin module, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of myplugin.py</span>


<span class="k">class</span> <span class="nc">DeferPlugin</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Simple plugin to defer pytest-xdist hook functions.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">pytest_testnodedown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;standard xdist hook function.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">hasplugin</span><span class="p">(</span><span class="s2">&quot;xdist&quot;</span><span class="p">):</span>
        <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">DeferPlugin</span><span class="p">())</span>
</pre></div>
</div>
<p>This has the added benefit of allowing you to conditionally install hooks
depending on which plugins are installed.</p>
</div>
<div class="section" id="storing-data-on-items-across-hook-functions">
<span id="plugin-stash"></span><h4>Storing data on items across hook functions<a class="headerlink" href="#storing-data-on-items-across-hook-functions" title="Permalink to this headline">¶</a></h4>
<p>Plugins often need to store data on <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a>s in one hook
implementation, and access it in another. One common solution is to just
assign some private attribute directly on the item, but type-checkers like
mypy frown upon this, and it may also cause conflicts with other plugins.
So pytest offers a better way to do this, <a class="reference internal" href="contents.html#pytest.nodes.Node.stash" title="_pytest.nodes.Node.stash"><code class="xref py py-attr docutils literal notranslate"><span class="pre">item.stash</span></code></a>.</p>
<p>To use the “stash” in your plugins, first create “stash keys” somewhere at the
top level of your plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">been_there_key</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">StashKey</span><span class="p">[</span><span class="nb">bool</span><span class="p">]()</span>
<span class="n">done_that_key</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">StashKey</span><span class="p">[</span><span class="nb">str</span><span class="p">]()</span>
</pre></div>
</div>
<p>then use the keys to stash your data at some point:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">pytest</span><span class="o">.</span><span class="n">Item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">been_there_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">done_that_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
</pre></div>
</div>
<p>and retrieve them at another point:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_runtest_teardown</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">pytest</span><span class="o">.</span><span class="n">Item</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">been_there_key</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oh?&quot;</span><span class="p">)</span>
    <span class="n">item</span><span class="o">.</span><span class="n">stash</span><span class="p">[</span><span class="n">done_that_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;yes!&quot;</span>
</pre></div>
</div>
<p>Stashes are available on all node types (like <a class="reference internal" href="contents.html#pytest.Class" title="pytest.Class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Class</span></code></a>,
<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>) and also on <a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>, if needed.</p>
</div>
</div>
<span id="document-how-to/existingtestsuite"></span><div class="section" id="how-to-use-pytest-with-an-existing-test-suite">
<span id="existingtestsuite"></span><h3>How to use pytest with an existing test suite<a class="headerlink" href="#how-to-use-pytest-with-an-existing-test-suite" title="Permalink to this headline">¶</a></h3>
<p>Pytest can be used with most existing test suites, but its
behavior differs from other test runners such as <a class="reference internal" href="contents.html#noseintegration"><span class="std std-ref">nose</span></a> or
Python’s default unittest framework.</p>
<p>Before using this section you will want to <a class="reference internal" href="contents.html#getstarted"><span class="std std-ref">install pytest</span></a>.</p>
<div class="section" id="running-an-existing-test-suite-with-pytest">
<h4>Running an existing test suite with pytest<a class="headerlink" href="#running-an-existing-test-suite-with-pytest" title="Permalink to this headline">¶</a></h4>
<p>Say you want to contribute to an existing repository somewhere.
After pulling the code into your development space using some
flavor of version control and (optionally) setting up a virtualenv
you will want to run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;repository&gt;
pip install -e .  <span class="c1"># Environment dependent alternatives include</span>
                  <span class="c1"># &#39;python setup.py develop&#39; and &#39;conda develop&#39;</span>
</pre></div>
</div>
<p>in your project root.  This will set up a symlink to your code in
site-packages, allowing you to edit your code while your tests
run against it as if it were installed.</p>
<p>Setting up your project in development mode lets you avoid having to
reinstall every time you want to run your tests, and is less brittle than
mucking about with sys.path to point your tests at local code.</p>
<p>Also consider using <a class="reference internal" href="contents.html#use-tox"><span class="std std-ref">tox</span></a>.</p>
</div>
</div>
<span id="document-how-to/unittest"></span><div class="section" id="how-to-use-unittest-based-tests-with-pytest">
<span id="unittest"></span><span id="unittest-testcase"></span><h3>How to use <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based tests with pytest<a class="headerlink" href="#how-to-use-unittest-based-tests-with-pytest" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> supports running Python <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based tests out of the box.
It’s meant for leveraging existing <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based test suites
to use pytest as a test runner and also allow to incrementally adapt
the test suite to take full advantage of pytest’s features.</p>
<p>To run an existing <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-style test suite using <code class="docutils literal notranslate"><span class="pre">pytest</span></code>, type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest tests
</pre></div>
</div>
<p>pytest will automatically collect <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses and
their <code class="docutils literal notranslate"><span class="pre">test</span></code> methods in <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> or <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> files.</p>
<p>Almost all <code class="docutils literal notranslate"><span class="pre">unittest</span></code> features are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;unittest.skip</span></code> style decorators;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setUp/tearDown</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setUpClass/tearDownClass</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setUpModule/tearDownModule</span></code>;</p></li>
</ul>
<p>Additionally, <a class="reference external" href="https://docs.python.org/3/library/unittest.html#subtests" title="(in Python v3.10)"><span class="xref std std-ref">subtests</span></a> are supported by the
<a class="reference external" href="https://github.com/pytest-dev/pytest-subtests">pytest-subtests</a> plugin.</p>
<p>Up to this point pytest does not have support for the following features:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/unittest.html#load-tests-protocol">load_tests protocol</a>;</p></li>
</ul>
<div class="section" id="benefits-out-of-the-box">
<h4>Benefits out of the box<a class="headerlink" href="#benefits-out-of-the-box" title="Permalink to this headline">¶</a></h4>
<p>By running your test suite with pytest you can make use of several features,
in most cases without having to modify existing code:</p>
<ul class="simple">
<li><p>Obtain <a class="reference internal" href="contents.html#tbreportdemo"><span class="std std-ref">more informative tracebacks</span></a>;</p></li>
<li><p><a class="reference internal" href="contents.html#captures"><span class="std std-ref">stdout and stderr</span></a> capturing;</p></li>
<li><p><a class="reference internal" href="contents.html#select-tests"><span class="std std-ref">Test selection options</span></a> using <code class="docutils literal notranslate"><span class="pre">-k</span></code> and <code class="docutils literal notranslate"><span class="pre">-m</span></code> flags;</p></li>
<li><p><a class="reference internal" href="contents.html#maxfail"><span class="std std-ref">Stopping after the first (or N) failures</span></a>;</p></li>
<li><p><a class="reference internal" href="contents.html#pdb-option"><span class="std std-ref">–pdb</span></a> command-line option for debugging on test failures
(see <a class="reference internal" href="#pdb-unittest-note"><span class="std std-ref">note</span></a> below);</p></li>
<li><p>Distribute tests to multiple CPUs using the <a class="reference external" href="https://pypi.org/project/pytest-xdist/">pytest-xdist</a> plugin;</p></li>
<li><p>Use <a class="reference internal" href="contents.html#assert"><span class="std std-ref">plain assert-statements</span></a> instead of <code class="docutils literal notranslate"><span class="pre">self.assert*</span></code> functions
(<a class="reference external" href="https://pypi.org/project/unittest2pytest/">unittest2pytest</a> is immensely helpful in this);</p></li>
</ul>
</div>
<div class="section" id="pytest-features-in-unittest-testcase-subclasses">
<h4>pytest features in <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses<a class="headerlink" href="#pytest-features-in-unittest-testcase-subclasses" title="Permalink to this headline">¶</a></h4>
<p>The following pytest features work in <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#mark"><span class="std std-ref">Marks</span></a>: <a class="reference internal" href="contents.html#skip"><span class="std std-ref">skip</span></a>, <a class="reference internal" href="contents.html#skipif"><span class="std std-ref">skipif</span></a>, <a class="reference internal" href="contents.html#xfail"><span class="std std-ref">xfail</span></a>;</p></li>
<li><p><a class="reference internal" href="#mixing-fixtures"><span class="std std-ref">Auto-use fixtures</span></a>;</p></li>
</ul>
<p>The following pytest features <strong>do not</strong> work, and probably
never will due to different design philosophies:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#fixture"><span class="std std-ref">Fixtures</span></a> (except for <code class="docutils literal notranslate"><span class="pre">autouse</span></code> fixtures, see <a class="reference internal" href="#mixing-fixtures"><span class="std std-ref">below</span></a>);</p></li>
<li><p><a class="reference internal" href="contents.html#parametrize"><span class="std std-ref">Parametrization</span></a>;</p></li>
<li><p><a class="reference internal" href="contents.html#writing-plugins"><span class="std std-ref">Custom hooks</span></a>;</p></li>
</ul>
<p>Third party plugins may or may not work well, depending on the plugin and the test suite.</p>
</div>
<div class="section" id="mixing-pytest-fixtures-into-unittest-testcase-subclasses-using-marks">
<span id="mixing-fixtures"></span><h4>Mixing pytest fixtures into <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses using marks<a class="headerlink" href="#mixing-pytest-fixtures-into-unittest-testcase-subclasses-using-marks" title="Permalink to this headline">¶</a></h4>
<p>Running your unittest with <code class="docutils literal notranslate"><span class="pre">pytest</span></code> allows you to use its
<a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixture mechanism</span></a> with <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> style
tests.  Assuming you have at least skimmed the pytest fixture features,
let’s jump-start into an example that integrates a pytest <code class="docutils literal notranslate"><span class="pre">db_class</span></code>
fixture, setting up a class-cached database object, and then reference
it from a unittest-style test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="c1"># we define a fixture function below and it will be &quot;used&quot; by</span>
<span class="c1"># referencing its name from tests</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">db_class</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">DummyDB</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># set a class attribute on the invoking test context</span>
    <span class="n">request</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">DummyDB</span><span class="p">()</span>
</pre></div>
</div>
<p>This defines a fixture function <code class="docutils literal notranslate"><span class="pre">db_class</span></code> which - if used - is
called once for each test class and which sets the class-level
<code class="docutils literal notranslate"><span class="pre">db</span></code> attribute to a <code class="docutils literal notranslate"><span class="pre">DummyDB</span></code> instance.  The fixture function
achieves this by receiving a special <code class="docutils literal notranslate"><span class="pre">request</span></code> object which gives
access to <a class="reference internal" href="contents.html#request-context"><span class="std std-ref">the requesting test context</span></a> such
as the <code class="docutils literal notranslate"><span class="pre">cls</span></code> attribute, denoting the class from which the fixture
is used.  This architecture de-couples fixture writing from actual test
code and allows re-use of the fixture by a minimal reference, the fixture
name.  So let’s write an actual <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> class using our
fixture definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_unittest_db.py</span>

<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">usefixtures</span><span class="p">(</span><span class="s2">&quot;db_class&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_method1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;db&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span>  <span class="c1"># fail for demo purposes</span>

    <span class="k">def</span> <span class="nf">test_method2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span>  <span class="c1"># fail for demo purposes</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.usefixtures(&quot;db_class&quot;)</span></code> class-decorator makes sure that
the pytest fixture function <code class="docutils literal notranslate"><span class="pre">db_class</span></code> is called once per class.
Due to the deliberately failing assert statements, we can take a look at
the <code class="docutils literal notranslate"><span class="pre">self.db</span></code> values in the traceback:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_unittest_db.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_unittest_db.py <span class=" -Color -Color-Red">FF</span>                                               <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ MyTest.test_method1 ____________________________</span>

self = &lt;test_unittest_db.MyTest testMethod=test_method1&gt;

    def test_method1(self):
        assert hasattr(self, &quot;db&quot;)
&gt;       assert 0, self.db  # fail for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: &lt;conftest.db_class.&lt;locals&gt;.DummyDB object at 0xdeadbeef0001&gt;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_unittest_db.py</span>:10: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ MyTest.test_method2 ____________________________</span>

self = &lt;test_unittest_db.MyTest testMethod=test_method2&gt;

    def test_method2(self):
&gt;       assert 0, self.db  # fail for demo purposes
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: &lt;conftest.db_class.&lt;locals&gt;.DummyDB object at 0xdeadbeef0001&gt;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_unittest_db.py</span>:13: AssertionError
========================= short test summary info ==========================
FAILED test_unittest_db.py::MyTest::test_method1 - AssertionError: &lt;conft...
FAILED test_unittest_db.py::MyTest::test_method2 - AssertionError: &lt;conft...
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>This default pytest traceback shows that the two test methods
share the same <code class="docutils literal notranslate"><span class="pre">self.db</span></code> instance which was our intention
when writing the class-scoped fixture function above.</p>
</div>
<div class="section" id="using-autouse-fixtures-and-accessing-other-fixtures">
<h4>Using autouse fixtures and accessing other fixtures<a class="headerlink" href="#using-autouse-fixtures-and-accessing-other-fixtures" title="Permalink to this headline">¶</a></h4>
<p>Although it’s usually better to explicitly declare use of fixtures you need
for a given test, you may sometimes want to have fixtures that are
automatically used in a given context.  After all, the traditional
style of unittest-setup mandates the use of this implicit fixture writing
and chances are, you are used to it or like it.</p>
<p>You can flag fixture functions with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture(autouse=True)</span></code>
and define the fixture function in the context where you want it used.
Let’s look at an <code class="docutils literal notranslate"><span class="pre">initdir</span></code> fixture which makes all test methods of a
<code class="docutils literal notranslate"><span class="pre">TestCase</span></code> class execute in a temporary directory with a
pre-initialized <code class="docutils literal notranslate"><span class="pre">samplefile.ini</span></code>.  Our <code class="docutils literal notranslate"><span class="pre">initdir</span></code> fixture itself uses
the pytest builtin <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a> fixture to delegate the
creation of a per-test temporary directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_unittest_cleandir.py</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">initdir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tmp_path</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">):</span>
        <span class="n">monkeypatch</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">)</span>  <span class="c1"># change to pytest-provided temporary directory</span>
        <span class="n">tmp_path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;samplefile.ini&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;# testdata&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;samplefile.ini&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">assert</span> <span class="s2">&quot;testdata&quot;</span> <span class="ow">in</span> <span class="n">s</span>
</pre></div>
</div>
<p>Due to the <code class="docutils literal notranslate"><span class="pre">autouse</span></code> flag the <code class="docutils literal notranslate"><span class="pre">initdir</span></code> fixture function will be
used for all methods of the class where it is defined.  This is a
shortcut for using a <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.usefixtures(&quot;initdir&quot;)</span></code> marker
on the class like in the previous example.</p>
<p>Running this test module …:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_unittest_cleandir.py
<span class=" -Color -Color-Green">.</span>                                                                    <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<p>… gives us one passed test because the <code class="docutils literal notranslate"><span class="pre">initdir</span></code> fixture function
was executed ahead of the <code class="docutils literal notranslate"><span class="pre">test_method</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> methods cannot directly receive fixture
arguments as implementing that is likely to inflict
on the ability to run general unittest.TestCase test suites.</p>
<p>The above <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> and <code class="docutils literal notranslate"><span class="pre">autouse</span></code> examples should help to mix in
pytest fixtures into unittest suites.</p>
<p>You can also gradually move away from subclassing from <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> to <em>plain asserts</em>
and then start to benefit from the full pytest feature set step by step.</p>
</div>
<div class="admonition note" id="pdb-unittest-note">
<p class="admonition-title">Note</p>
<p>Due to architectural differences between the two frameworks, setup and
teardown for <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based tests is performed during the <code class="docutils literal notranslate"><span class="pre">call</span></code> phase
of testing instead of in <code class="docutils literal notranslate"><span class="pre">pytest</span></code>’s standard <code class="docutils literal notranslate"><span class="pre">setup</span></code> and <code class="docutils literal notranslate"><span class="pre">teardown</span></code>
stages. This can be important to understand in some situations, particularly
when reasoning about errors. For example, if a <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based suite
exhibits errors during setup, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will report no errors during its
<code class="docutils literal notranslate"><span class="pre">setup</span></code> phase and will instead raise the error during <code class="docutils literal notranslate"><span class="pre">call</span></code>.</p>
</div>
</div>
</div>
<span id="document-how-to/nose"></span><div class="section" id="how-to-run-tests-written-for-nose">
<span id="noseintegration"></span><h3>How to run tests written for nose<a class="headerlink" href="#how-to-run-tests-written-for-nose" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> has basic support for running tests written for <a class="reference external" href="https://nose.readthedocs.io/en/latest/">nose</a>.</p>
<div class="section" id="usage">
<span id="nosestyle"></span><h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>After <a class="reference internal" href="contents.html#installation"><span class="std std-ref">Install pytest</span></a> type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py develop  <span class="c1"># make sure tests can import our package</span>
pytest  <span class="c1"># instead of &#39;nosetests&#39;</span>
</pre></div>
</div>
<p>and you should be able to run your nose style tests and
make use of pytest’s capabilities.</p>
</div>
<div class="section" id="supported-nose-idioms">
<h4>Supported nose Idioms<a class="headerlink" href="#supported-nose-idioms" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>setup and teardown at module/class/method level</p></li>
<li><p>SkipTest exceptions and markers</p></li>
<li><p>setup/teardown decorators</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute on modules/classes/functions</p></li>
<li><p>general usage of nose utilities</p></li>
</ul>
</div>
<div class="section" id="unsupported-idioms-known-issues">
<h4>Unsupported idioms / known issues<a class="headerlink" href="#unsupported-idioms-known-issues" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>unittest-style <code class="docutils literal notranslate"><span class="pre">setUp,</span> <span class="pre">tearDown,</span> <span class="pre">setUpClass,</span> <span class="pre">tearDownClass</span></code>
are recognized only on <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> classes but not
on plain classes.  <code class="docutils literal notranslate"><span class="pre">nose</span></code> supports these methods also on plain
classes but pytest deliberately does not.  As nose and pytest already
both support <code class="docutils literal notranslate"><span class="pre">setup_class,</span> <span class="pre">teardown_class,</span> <span class="pre">setup_method,</span> <span class="pre">teardown_method</span></code>
it doesn’t seem useful to duplicate the unittest-API like nose does.
If you however rather think pytest should support the unittest-spelling on
plain classes please post to <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/377">issue #377</a>.</p></li>
<li><p>nose imports test modules with the same import path (e.g.
<code class="docutils literal notranslate"><span class="pre">tests.test_mode</span></code>) but different file system paths
(e.g. <code class="docutils literal notranslate"><span class="pre">tests/test_mode.py</span></code> and <code class="docutils literal notranslate"><span class="pre">other/tests/test_mode.py</span></code>)
by extending sys.path/import semantics.   pytest does not do that
but there is discussion in <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/268">issue #268</a> for adding some support.  Note that
<a class="reference external" href="https://nose2.readthedocs.io/en/latest/differences.html#test-discovery-and-loading">nose2 choose to avoid this sys.path/import hackery</a>.</p>
<p>If you place a conftest.py file in the root directory of your project
(as determined by pytest) pytest will run tests “nose style” against
the code below that directory by adding it to your <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> instead of
running against your installed code.</p>
<p>You may find yourself wanting to do this if you ran <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code>
to set up your project, as opposed to <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> or any of
the package manager equivalents.  Installing with develop in a
virtual environment like tox is recommended over this pattern.</p>
</li>
<li><p>nose-style doctests are not collected and executed correctly,
also doctest fixtures don’t work.</p></li>
<li><p>no nose-configuration is recognized.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code>-based methods are unsupported as of pytest 4.1.0.  They are
fundamentally incompatible with pytest because they don’t support fixtures
properly since collection and test execution are separated.</p></li>
</ul>
</div>
<div class="section" id="migrating-from-nose-to-pytest">
<h4>Migrating from nose to pytest<a class="headerlink" href="#migrating-from-nose-to-pytest" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/pytest-dev/nose2pytest">nose2pytest</a> is a Python script
and pytest plugin to help convert Nose-based tests into pytest-based tests.
Specifically, the script transforms nose.tools.assert_* function calls into
raw assert statements, while preserving format of original arguments
as much as possible.</p>
</div>
</div>
<span id="document-how-to/xunit_setup"></span><div class="section" id="how-to-implement-xunit-style-set-up">
<span id="xunitsetup"></span><span id="classic-xunit"></span><h3>How to implement xunit-style set-up<a class="headerlink" href="#how-to-implement-xunit-style-set-up" title="Permalink to this headline">¶</a></h3>
<p>This section describes a classic and popular way how you can implement
fixtures (setup and teardown test state) on a per-module/class/function basis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While these setup/teardown methods are simple and familiar to those
coming from a <code class="docutils literal notranslate"><span class="pre">unittest</span></code> or <code class="docutils literal notranslate"><span class="pre">nose</span></code> background, you may also consider
using pytest’s more powerful <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixture mechanism</span></a> which leverages the concept of dependency injection, allowing
for a more modular and more scalable approach for managing test state,
especially for larger projects and for functional testing.  You can
mix both fixture mechanisms in the same file but
test methods of <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses
cannot receive fixture arguments.</p>
</div>
<div class="section" id="module-level-setup-teardown">
<h4>Module level setup/teardown<a class="headerlink" href="#module-level-setup-teardown" title="Permalink to this headline">¶</a></h4>
<p>If you have multiple test functions and test classes in a single
module you can optionally implement the following fixture methods
which will usually be called once for all the functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setup_module</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; setup any state specific to the execution of the given module.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">teardown_module</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;teardown any state that was previously setup with a setup_module</span>
<span class="sd">    method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>As of pytest-3.0, the <code class="docutils literal notranslate"><span class="pre">module</span></code> parameter is optional.</p>
</div>
<div class="section" id="class-level-setup-teardown">
<h4>Class level setup/teardown<a class="headerlink" href="#class-level-setup-teardown" title="Permalink to this headline">¶</a></h4>
<p>Similarly, the following methods are called at class level before
and after all test methods of the class are called:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">setup_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;setup any state specific to the execution of the given class (which</span>
<span class="sd">    usually contains tests).</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">teardown_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;teardown any state that was previously setup with a call to</span>
<span class="sd">    setup_class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="method-and-function-level-setup-teardown">
<h4>Method and function level setup/teardown<a class="headerlink" href="#method-and-function-level-setup-teardown" title="Permalink to this headline">¶</a></h4>
<p>Similarly, the following methods are called around each method invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setup_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;setup any state tied to the execution of the given method in a</span>
<span class="sd">    class.  setup_method is invoked for every test method of a class.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">teardown_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;teardown any state that was previously setup with a setup_method</span>
<span class="sd">    call.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>As of pytest-3.0, the <code class="docutils literal notranslate"><span class="pre">method</span></code> parameter is optional.</p>
<p>If you would rather define test functions directly at module level
you can also use the following functions to implement fixtures:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setup_function</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;setup any state tied to the execution of the given function.</span>
<span class="sd">    Invoked for every test function in the module.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">teardown_function</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;teardown any state that was previously setup with a setup_function</span>
<span class="sd">    call.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>As of pytest-3.0, the <code class="docutils literal notranslate"><span class="pre">function</span></code> parameter is optional.</p>
<p>Remarks:</p>
<ul>
<li><p>It is possible for setup/teardown pairs to be invoked multiple times
per testing process.</p></li>
<li><p>teardown functions are not called if the corresponding setup function existed
and failed/was skipped.</p></li>
<li><p>Prior to pytest-4.2, xunit-style functions did not obey the scope rules of fixtures, so
it was possible, for example, for a <code class="docutils literal notranslate"><span class="pre">setup_method</span></code> to be called before a
session-scoped autouse fixture.</p>
<p>Now the xunit-style functions are integrated with the fixture mechanism and obey the proper
scope rules of fixtures involved in the call.</p>
</li>
</ul>
</div>
</div>
<span id="document-how-to/bash-completion"></span><div class="section" id="how-to-set-up-bash-completion">
<span id="bash-completion"></span><h3>How to set up bash completion<a class="headerlink" href="#how-to-set-up-bash-completion" title="Permalink to this headline">¶</a></h3>
<p>When using bash as your shell, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> can use argcomplete
(<a class="reference external" href="https://kislyuk.github.io/argcomplete/">https://kislyuk.github.io/argcomplete/</a>) for auto-completion.
For this <code class="docutils literal notranslate"><span class="pre">argcomplete</span></code> needs to be installed <strong>and</strong> enabled.</p>
<p>Install argcomplete using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo pip install <span class="s1">&#39;argcomplete&gt;=0.5.7&#39;</span>
</pre></div>
</div>
<p>For global activation of all argcomplete enabled python applications run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo activate-global-python-argcomplete
</pre></div>
</div>
<p>For permanent (but not global) <code class="docutils literal notranslate"><span class="pre">pytest</span></code> activation, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>register-python-argcomplete pytest &gt;&gt; ~/.bashrc
</pre></div>
</div>
<p>For one-time activation of argcomplete for <code class="docutils literal notranslate"><span class="pre">pytest</span></code> only, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">eval</span> <span class="s2">&quot;</span><span class="k">$(</span>register-python-argcomplete pytest<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="reference-guides">
<h2>Reference guides<a class="headerlink" href="#reference-guides" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-reference/fixtures"></span><div class="section" id="fixtures-reference">
<span id="id1"></span><span id="pytest-fixture"></span><span id="fixtures"></span><span id="fixture"></span><span id="reference-fixtures"></span><h3>Fixtures reference<a class="headerlink" href="#fixtures-reference" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#about-fixtures"><span class="std std-ref">About fixtures</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#how-to-fixtures"><span class="std std-ref">How to use fixtures</span></a></p>
</div>
<div class="section" id="built-in-fixtures">
<h4>Built-in fixtures<a class="headerlink" href="#built-in-fixtures" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="contents.html#fixtures-api"><span class="std std-ref">Fixtures</span></a> are defined using the <a class="reference internal" href="contents.html#pytest-fixture-api"><span class="std std-ref">&#64;pytest.fixture</span></a> decorator. Pytest has several useful built-in fixtures:</p>
<blockquote>
<div><dl class="simple">
<dt><a class="reference internal" href="contents.html#std-fixture-capfd"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfd</span></code></a></dt><dd><p>Capture, as text, output to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-capfdbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfdbinary</span></code></a></dt><dd><p>Capture, as bytes, output to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-caplog"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">caplog</span></code></a></dt><dd><p>Control logging and access log entries.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-capsys"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsys</span></code></a></dt><dd><p>Capture, as text, output to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span></code></a></dt><dd><p>Capture, as bytes, output to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-cache"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">cache</span></code></a></dt><dd><p>Store and retrieve values across pytest runs.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-doctest_namespace"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">doctest_namespace</span></code></a></dt><dd><p>Provide a dict injected into the docstests namespace.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a></dt><dd><p>Temporarily modify classes, functions, dictionaries,
<code class="docutils literal notranslate"><span class="pre">os.environ</span></code>, and other objects.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-pytestconfig"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytestconfig</span></code></a></dt><dd><p>Access to configuration values, pluginmanager and plugin hooks.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-record_property"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">record_property</span></code></a></dt><dd><p>Add extra properties to the test.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-record_testsuite_property"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">record_testsuite_property</span></code></a></dt><dd><p>Add extra properties to the test suite.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-recwarn"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">recwarn</span></code></a></dt><dd><p>Record warnings emitted by test functions.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-request"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">request</span></code></a></dt><dd><p>Provide information on the executing test function.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a></dt><dd><p>Provide a temporary test directory to aid in running, and
testing, pytest plugins.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a></dt><dd><p>Provide a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> object to a temporary directory
which is unique to each test function.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-tmp_path_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path_factory</span></code></a></dt><dd><p>Make session-scoped temporary directories and return
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a></dt><dd><p>Provide a <code class="xref py py-class docutils literal notranslate"><span class="pre">py.path.local</span></code> object to a temporary
directory which is unique to each test function;
replaced by <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a>.</p>
</dd>
<dt><a class="reference internal" href="contents.html#std-fixture-tmpdir_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir_factory</span></code></a></dt><dd><p>Make session-scoped temporary directories and return
<code class="xref py py-class docutils literal notranslate"><span class="pre">py.path.local</span></code> objects;
replaced by <a class="reference internal" href="contents.html#std-fixture-tmp_path_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path_factory</span></code></a>.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="fixture-availability">
<span id="conftest"></span><span id="conftest-py"></span><h4>Fixture availability<a class="headerlink" href="#fixture-availability" title="Permalink to this headline">¶</a></h4>
<p>Fixture availability is determined from the perspective of the test. A fixture
is only available for tests to request if they are in the scope that fixture is
defined in. If a fixture is defined inside a class, it can only be requested by
tests inside that class. But if a fixture is defined inside the global scope of
the module, than every test in that module, even if it’s defined inside a class,
can request it.</p>
<p>Similarly, a test can also only be affected by an autouse fixture if that test
is in the same scope that autouse fixture is defined in (see
<a class="reference internal" href="#autouse-order"><span class="std std-ref">Autouse fixtures are executed first within their scope</span></a>).</p>
<p>A fixture can also request any other fixture, no matter where it’s defined, so
long as the test requesting them can see all fixtures involved.</p>
<p>For example, here’s a test file with a fixture (<code class="docutils literal notranslate"><span class="pre">outer</span></code>) that requests a
fixture (<code class="docutils literal notranslate"><span class="pre">inner</span></code>) from a scope it wasn’t defined in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">outer</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">inner</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestOne</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">outer</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;outer&quot;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">TestTwo</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">outer</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;outer&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>From the tests’ perspectives, they have no problem seeing each of the fixtures
they’re dependent on:</p>
<img alt="_images/test_fixtures_request_different_scope.svg" class="align-center" src="_images/test_fixtures_request_different_scope.svg" /><p>So when they run, <code class="docutils literal notranslate"><span class="pre">outer</span></code> will have no problem finding <code class="docutils literal notranslate"><span class="pre">inner</span></code>, because
pytest searched from the tests’ perspectives.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The scope a fixture is defined in has no bearing on the order it will be
instantiated in: the order is mandated by the logic described
<a class="reference internal" href="#fixture-order"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="conftest-py-sharing-fixtures-across-multiple-files">
<h5><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>: sharing fixtures across multiple files<a class="headerlink" href="#conftest-py-sharing-fixtures-across-multiple-files" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file serves as a means of providing fixtures for an entire
directory. Fixtures defined in a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> can be used by any test
in that package without needing to import them (pytest will automatically
discover them).</p>
<p>You can have multiple nested directories/packages containing your tests, and
each directory can have its own <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> with its own fixtures, adding on
to the ones provided by the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files in parent directories.</p>
<p>For example, given a test file structure like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">top</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">innermost</span><span class="p">):</span>
            <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>

    <span class="n">test_top</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/test_top.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">innermost</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;innermost top&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">top</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;innermost top&quot;</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span><span class="p">]</span>

    <span class="n">subpackage</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

        <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subpackage/conftest.py</span>
            <span class="kn">import</span> <span class="nn">pytest</span>

            <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
            <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
                <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;mid subpackage&quot;</span><span class="p">)</span>

        <span class="n">test_subpackage</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subpackage/test_subpackage.py</span>
            <span class="kn">import</span> <span class="nn">pytest</span>

            <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
            <span class="k">def</span> <span class="nf">innermost</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">mid</span><span class="p">):</span>
                <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;innermost subpackage&quot;</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">top</span><span class="p">):</span>
                <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;mid subpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;innermost subpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The boundaries of the scopes can be visualized like this:</p>
<img alt="_images/fixture_availability.svg" class="align-center" src="_images/fixture_availability.svg" /><p>The directories become their own sort of scope where fixtures that are defined
in a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file in that directory become available for that whole
scope.</p>
<p>Tests are allowed to search upward (stepping outside a circle) for fixtures, but
can never go down (stepping inside a circle) to continue their search. So
<code class="docutils literal notranslate"><span class="pre">tests/subpackage/test_subpackage.py::test_order</span></code> would be able to find the
<code class="docutils literal notranslate"><span class="pre">innermost</span></code> fixture defined in <code class="docutils literal notranslate"><span class="pre">tests/subpackage/test_subpackage.py</span></code>, but
the one defined in <code class="docutils literal notranslate"><span class="pre">tests/test_top.py</span></code> would be unavailable to it because it
would have to step down a level (step inside a circle) to find it.</p>
<p>The first fixture the test finds is the one that will be used, so
<a class="reference internal" href="contents.html#override-fixtures"><span class="std std-ref">fixtures can be overridden</span></a> if you need to change or
extend what one does for a particular scope.</p>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file to implement
<a class="reference internal" href="contents.html#conftest-py-plugins"><span class="std std-ref">local per-directory plugins</span></a>.</p>
</div>
<div class="section" id="fixtures-from-third-party-plugins">
<h5>Fixtures from third-party plugins<a class="headerlink" href="#fixtures-from-third-party-plugins" title="Permalink to this headline">¶</a></h5>
<p>Fixtures don’t have to be defined in this structure to be available for tests,
though. They can also be provided by third-party plugins that are installed, and
this is how many pytest plugins operate. As long as those plugins are installed,
the fixtures they provide can be requested from anywhere in your test suite.</p>
<p>Because they’re provided from outside the structure of your test suite,
third-party plugins don’t really provide a scope like <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files and
the directories in your test suite do. As a result, pytest will search for
fixtures stepping out through scopes as explained previously, only reaching
fixtures defined in plugins <em>last</em>.</p>
<p>For example, given the following file structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tests</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

    <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
        <span class="c1"># content of tests/conftest.py</span>
        <span class="kn">import</span> <span class="nn">pytest</span>

        <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
        <span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="n">subpackage</span><span class="o">/</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>

        <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subpackage/conftest.py</span>
            <span class="kn">import</span> <span class="nn">pytest</span>

            <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">b_fix</span><span class="p">):</span>
                <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;mid subpackage&quot;</span><span class="p">)</span>

        <span class="n">test_subpackage</span><span class="o">.</span><span class="n">py</span>
            <span class="c1"># content of tests/subpackage/test_subpackage.py</span>
            <span class="kn">import</span> <span class="nn">pytest</span>

            <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
            <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">a_fix</span><span class="p">):</span>
                <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;inner subpackage&quot;</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">inner</span><span class="p">):</span>
                <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;b_fix&quot;</span><span class="p">,</span> <span class="s2">&quot;mid subpackage&quot;</span><span class="p">,</span> <span class="s2">&quot;a_fix&quot;</span><span class="p">,</span> <span class="s2">&quot;inner subpackage&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">plugin_a</span></code> is installed and provides the fixture <code class="docutils literal notranslate"><span class="pre">a_fix</span></code>, and
<code class="docutils literal notranslate"><span class="pre">plugin_b</span></code> is installed and provides the fixture <code class="docutils literal notranslate"><span class="pre">b_fix</span></code>, then this is what
the test’s search for fixtures would look like:</p>
<img alt="_images/fixture_availability_plugins.svg" class="align-center" src="_images/fixture_availability_plugins.svg" /><p>pytest will only search for <code class="docutils literal notranslate"><span class="pre">a_fix</span></code> and <code class="docutils literal notranslate"><span class="pre">b_fix</span></code> in the plugins after
searching for them first in the scopes inside <code class="docutils literal notranslate"><span class="pre">tests/</span></code>.</p>
</div>
</div>
<div class="section" id="fixture-instantiation-order">
<span id="fixture-order"></span><h4>Fixture instantiation order<a class="headerlink" href="#fixture-instantiation-order" title="Permalink to this headline">¶</a></h4>
<p>When pytest wants to execute a test, once it knows what fixtures will be
executed, it has to figure out the order they’ll be executed in. To do this, it
considers 3 factors:</p>
<ol class="arabic simple">
<li><p>scope</p></li>
<li><p>dependencies</p></li>
<li><p>autouse</p></li>
</ol>
<p>Names of fixtures or tests, where they’re defined, the order they’re defined in,
and the order fixtures are requested in have no bearing on execution order
beyond coincidence. While pytest will try to make sure coincidences like these
stay consistent from run to run, it’s not something that should be depended on.
If you want to control the order, it’s safest to rely on these 3 things and make
sure dependencies are clearly established.</p>
<div class="section" id="higher-scoped-fixtures-are-executed-first">
<h5>Higher-scoped fixtures are executed first<a class="headerlink" href="#higher-scoped-fixtures-are-executed-first" title="Permalink to this headline">¶</a></h5>
<p>Within a function request for fixtures, those of higher-scopes (such as
<code class="docutils literal notranslate"><span class="pre">session</span></code>) are executed before lower-scoped fixtures (such as <code class="docutils literal notranslate"><span class="pre">function</span></code> or
<code class="docutils literal notranslate"><span class="pre">class</span></code>).</p>
<p>Here’s an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cls</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">mod</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pack</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;package&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">sess</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">mod</span><span class="p">,</span> <span class="n">pack</span><span class="p">,</span> <span class="n">sess</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="s2">&quot;package&quot;</span><span class="p">,</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The test will pass because the larger scoped fixtures are executing first.</p>
<p>The order breaks down to this:</p>
<img alt="_images/test_fixtures_order_scope.svg" class="align-center" src="_images/test_fixtures_order_scope.svg" /></div>
<div class="section" id="fixtures-of-the-same-order-execute-based-on-dependencies">
<h5>Fixtures of the same order execute based on dependencies<a class="headerlink" href="#fixtures-of-the-same-order-execute-based-on-dependencies" title="Permalink to this headline">¶</a></h5>
<p>When a fixture requests another fixture, the other fixture is executed first.
So if fixture <code class="docutils literal notranslate"><span class="pre">a</span></code> requests fixture <code class="docutils literal notranslate"><span class="pre">b</span></code>, fixture <code class="docutils literal notranslate"><span class="pre">b</span></code> will execute first,
because <code class="docutils literal notranslate"><span class="pre">a</span></code> depends on <code class="docutils literal notranslate"><span class="pre">b</span></code> and can’t operate without it. Even if <code class="docutils literal notranslate"><span class="pre">a</span></code>
doesn’t need the result of <code class="docutils literal notranslate"><span class="pre">b</span></code>, it can still request <code class="docutils literal notranslate"><span class="pre">b</span></code> if it needs to make
sure it is executed after <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">e</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>If we map out what depends on what, we get something that look like this:</p>
<img alt="_images/test_fixtures_order_dependencies.svg" class="align-center" src="_images/test_fixtures_order_dependencies.svg" /><p>The rules provided by each fixture (as to what fixture(s) each one has to come
after) are comprehensive enough that it can be flattened to this:</p>
<img alt="_images/test_fixtures_order_dependencies_flat.svg" class="align-center" src="_images/test_fixtures_order_dependencies_flat.svg" /><p>Enough information has to be provided through these requests in order for pytest
to be able to figure out a clear, linear chain of dependencies, and as a result,
an order of operations for a given test. If there’s any ambiguity, and the order
of operations can be interpreted more than one way, you should assume pytest
could go with any one of those interpretations at any point.</p>
<p>For example, if <code class="docutils literal notranslate"><span class="pre">d</span></code> didn’t request <code class="docutils literal notranslate"><span class="pre">c</span></code>, i.e.the graph would look like this:</p>
<img alt="_images/test_fixtures_order_dependencies_unclear.svg" class="align-center" src="_images/test_fixtures_order_dependencies_unclear.svg" /><p>Because nothing requested <code class="docutils literal notranslate"><span class="pre">c</span></code> other than <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">g</span></code> also requests <code class="docutils literal notranslate"><span class="pre">f</span></code>,
it’s now unclear if <code class="docutils literal notranslate"><span class="pre">c</span></code> should go before/after <code class="docutils literal notranslate"><span class="pre">f</span></code>, <code class="docutils literal notranslate"><span class="pre">e</span></code>, or <code class="docutils literal notranslate"><span class="pre">d</span></code>. The
only rules that were set for <code class="docutils literal notranslate"><span class="pre">c</span></code> is that it must execute after <code class="docutils literal notranslate"><span class="pre">b</span></code> and
before <code class="docutils literal notranslate"><span class="pre">g</span></code>.</p>
<p>pytest doesn’t know where <code class="docutils literal notranslate"><span class="pre">c</span></code> should go in the case, so it should be assumed
that it could go anywhere between <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>This isn’t necessarily bad, but it’s something to keep in mind. If the order
they execute in could affect the behavior a test is targeting, or could
otherwise influence the result of a test, then the order should be defined
explicitly in a way that allows pytest to linearize/”flatten” that order.</p>
</div>
<div class="section" id="autouse-fixtures-are-executed-first-within-their-scope">
<span id="autouse-order"></span><h5>Autouse fixtures are executed first within their scope<a class="headerlink" href="#autouse-fixtures-are-executed-first-within-their-scope" title="Permalink to this headline">¶</a></h5>
<p>Autouse fixtures are assumed to apply to every test that could reference them,
so they are executed before other fixtures in that scope. Fixtures that are
requested by autouse fixtures effectively become autouse fixtures themselves for
the tests that the real autouse fixture applies to.</p>
<p>So if fixture <code class="docutils literal notranslate"><span class="pre">a</span></code> is autouse and fixture <code class="docutils literal notranslate"><span class="pre">b</span></code> is not, but fixture <code class="docutils literal notranslate"><span class="pre">a</span></code>
requests fixture <code class="docutils literal notranslate"><span class="pre">b</span></code>, then fixture <code class="docutils literal notranslate"><span class="pre">b</span></code> will effectively be an autouse
fixture as well, but only for the tests that <code class="docutils literal notranslate"><span class="pre">a</span></code> applies to.</p>
<p>In the last example, the graph became unclear if <code class="docutils literal notranslate"><span class="pre">d</span></code> didn’t request <code class="docutils literal notranslate"><span class="pre">c</span></code>. But
if <code class="docutils literal notranslate"><span class="pre">c</span></code> was autouse, then <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span></code> would effectively also be autouse
because <code class="docutils literal notranslate"><span class="pre">c</span></code> depends on them. As a result, they would all be shifted above
non-autouse fixtures within that scope.</p>
<p>So if the test file looked like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">e</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_order_and_g</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>the graph would look like this:</p>
<img alt="_images/test_fixtures_order_autouse.svg" class="align-center" src="_images/test_fixtures_order_autouse.svg" /><p>Because <code class="docutils literal notranslate"><span class="pre">c</span></code> can now be put above <code class="docutils literal notranslate"><span class="pre">d</span></code> in the graph, pytest can once again
linearize the graph to this:</p>
<img alt="_images/test_fixtures_order_autouse_flat.svg" class="align-center" src="_images/test_fixtures_order_autouse_flat.svg" /><p>In this example, <code class="docutils literal notranslate"><span class="pre">c</span></code> makes <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span></code> effectively autouse fixtures as
well.</p>
<p>Be careful with autouse, though, as an autouse fixture will automatically
execute for every test that can reach it, even if they don’t request it. For
example, consider this file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c1</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c1&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c2</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c2&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">c3</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">c1</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c3&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestClassWithC1Request</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c3</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">TestClassWithoutC1Request</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Even though nothing in <code class="docutils literal notranslate"><span class="pre">TestClassWithoutC1Request</span></code> is requesting <code class="docutils literal notranslate"><span class="pre">c1</span></code>, it still
is executed for the tests inside it anyway:</p>
<img alt="_images/test_fixtures_order_autouse_multiple_scopes.svg" class="align-center" src="_images/test_fixtures_order_autouse_multiple_scopes.svg" /><p>But just because one autouse fixture requested a non-autouse fixture, that
doesn’t mean the non-autouse fixture becomes an autouse fixture for all contexts
that it can apply to. It only effectively becomes an autouse fixture for the
contexts the real autouse fixture (the one that requested the non-autouse
fixture) can apply to.</p>
<p>For example, take a look at this test file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">c1</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c1&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">c2</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c2&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestClassWithAutouse</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">c3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
        <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;c3&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_req</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">c1</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">test_no_req</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c3&quot;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">TestClassWithoutAutouse</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_req</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">c1</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">test_no_req</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[]</span>
</pre></div>
</div>
<p>It would break down to something like this:</p>
<img alt="_images/test_fixtures_order_autouse_temp_effects.svg" class="align-center" src="_images/test_fixtures_order_autouse_temp_effects.svg" /><p>For <code class="docutils literal notranslate"><span class="pre">test_req</span></code> and <code class="docutils literal notranslate"><span class="pre">test_no_req</span></code> inside <code class="docutils literal notranslate"><span class="pre">TestClassWithAutouse</span></code>, <code class="docutils literal notranslate"><span class="pre">c3</span></code>
effectively makes <code class="docutils literal notranslate"><span class="pre">c2</span></code> an autouse fixture, which is why <code class="docutils literal notranslate"><span class="pre">c2</span></code> and <code class="docutils literal notranslate"><span class="pre">c3</span></code> are
executed for both tests, despite not being requested, and why <code class="docutils literal notranslate"><span class="pre">c2</span></code> and <code class="docutils literal notranslate"><span class="pre">c3</span></code>
are executed before <code class="docutils literal notranslate"><span class="pre">c1</span></code> for <code class="docutils literal notranslate"><span class="pre">test_req</span></code>.</p>
<p>If this made <code class="docutils literal notranslate"><span class="pre">c2</span></code> an <em>actual</em> autouse fixture, then <code class="docutils literal notranslate"><span class="pre">c2</span></code> would also execute
for the tests inside <code class="docutils literal notranslate"><span class="pre">TestClassWithoutAutouse</span></code>, since they can reference
<code class="docutils literal notranslate"><span class="pre">c2</span></code> if they wanted to. But it doesn’t, because from the perspective of the
<code class="docutils literal notranslate"><span class="pre">TestClassWithoutAutouse</span></code> tests, <code class="docutils literal notranslate"><span class="pre">c2</span></code> isn’t an autouse fixture, since they
can’t see <code class="docutils literal notranslate"><span class="pre">c3</span></code>.</p>
</div>
</div>
</div>
<span id="document-reference/plugin_list"></span><div class="section" id="plugin-list">
<span id="id1"></span><h3>Plugin List<a class="headerlink" href="#plugin-list" title="Permalink to this headline">¶</a></h3>
<p>PyPI projects that match “pytest-*” are considered plugins and are listed
automatically. Packages classified as inactive are excluded.</p>
<p>This list contains 1007 plugins.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 56%" />
<col style="width: 5%" />
<col style="width: 7%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>summary</p></th>
<th class="head"><p>last release</p></th>
<th class="head"><p>status</p></th>
<th class="head"><p>requires</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-accept/">pytest-accept</a></p></td>
<td><p>A pytest-plugin for updating doctest outputs</p></td>
<td><p>Jan 07, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6,&lt;8)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-adaptavist/">pytest-adaptavist</a></p></td>
<td><p>pytest plugin for generating test execution results within Jira Test Management (tm4j)</p></td>
<td><p>Feb 22, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-addons-test/">pytest-addons-test</a></p></td>
<td><p>用于测试pytest的插件</p></td>
<td><p>Aug 02, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.4,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-adf/">pytest-adf</a></p></td>
<td><p>Pytest plugin for writing Azure Data Factory integration tests</p></td>
<td><p>May 10, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-adf-azure-identity/">pytest-adf-azure-identity</a></p></td>
<td><p>Pytest plugin for writing Azure Data Factory integration tests</p></td>
<td><p>Mar 06, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-agent/">pytest-agent</a></p></td>
<td><p>Service that exposes a REST API that can be used to interract remotely with Pytest. It is shipped with a dashboard that enables running tests in a more convenient way.</p></td>
<td><p>Nov 25, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aggreport/">pytest-aggreport</a></p></td>
<td><p>pytest plugin for pytest-repeat that generate aggregate report of the same test cases with additional statistics details.</p></td>
<td><p>Mar 07, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aio/">pytest-aio</a></p></td>
<td><p>Pytest plugin for testing async python code</p></td>
<td><p>Oct 20, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aiofiles/">pytest-aiofiles</a></p></td>
<td><p>pytest fixtures for writing aiofiles tests with pyfakefs</p></td>
<td><p>May 14, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aiohttp/">pytest-aiohttp</a></p></td>
<td><p>Pytest plugin for aiohttp support</p></td>
<td><p>Feb 12, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.1.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aiohttp-client/">pytest-aiohttp-client</a></p></td>
<td><p>Pytest `client` fixture for the Aiohttp</p></td>
<td><p>Nov 01, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aiomoto/">pytest-aiomoto</a></p></td>
<td><p>pytest-aiomoto</p></td>
<td><p>Feb 24, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aioresponses/">pytest-aioresponses</a></p></td>
<td><p>py.test integration for aioresponses</p></td>
<td><p>Jul 29, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aioworkers/">pytest-aioworkers</a></p></td>
<td><p>A plugin to test aioworkers project with pytest</p></td>
<td><p>Dec 04, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-airflow/">pytest-airflow</a></p></td>
<td><p>pytest support for airflow.</p></td>
<td><p>Apr 03, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-airflow-utils/">pytest-airflow-utils</a></p></td>
<td></td>
<td><p>Nov 15, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-alembic/">pytest-alembic</a></p></td>
<td><p>A pytest plugin for verifying alembic migrations.</p></td>
<td><p>Feb 08, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=1.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allclose/">pytest-allclose</a></p></td>
<td><p>Pytest fixture extending Numpy’s allclose function</p></td>
<td><p>Jul 30, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allure-adaptor/">pytest-allure-adaptor</a></p></td>
<td><p>Plugin for py.test to generate allure xml reports</p></td>
<td><p>Jan 10, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.7.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allure-adaptor2/">pytest-allure-adaptor2</a></p></td>
<td><p>Plugin for py.test to generate allure xml reports</p></td>
<td><p>Oct 14, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.7.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allure-collection/">pytest-allure-collection</a></p></td>
<td><p>pytest plugin to collect allure markers without running any tests</p></td>
<td><p>Feb 21, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allure-dsl/">pytest-allure-dsl</a></p></td>
<td><p>pytest plugin to test case doc string dls instructions</p></td>
<td><p>Oct 25, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-allure-spec-coverage/">pytest-allure-spec-coverage</a></p></td>
<td><p>The pytest plugin aimed to display test coverage of the specs(requirements) in Allure</p></td>
<td><p>Oct 26, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-alphamoon/">pytest-alphamoon</a></p></td>
<td><p>Static code checks used at Alphamoon</p></td>
<td><p>Dec 30, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-android/">pytest-android</a></p></td>
<td><p>This fixture provides a configured “driver” for Android Automated Testing, using uiautomator2.</p></td>
<td><p>Feb 21, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-anki/">pytest-anki</a></p></td>
<td><p>A pytest plugin for testing Anki add-ons</p></td>
<td><p>Oct 14, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-annotate/">pytest-annotate</a></p></td>
<td><p>pytest-annotate: Generate PyAnnotate annotations from your pytest tests.</p></td>
<td><p>Nov 29, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&lt;7.0.0,&gt;=3.2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ansible/">pytest-ansible</a></p></td>
<td><p>Plugin for py.test to simplify calling ansible modules from tests or fixtures</p></td>
<td><p>May 25, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ansible-playbook/">pytest-ansible-playbook</a></p></td>
<td><p>Pytest fixture which runs given ansible playbook file.</p></td>
<td><p>Mar 08, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ansible-playbook-runner/">pytest-ansible-playbook-runner</a></p></td>
<td><p>Pytest fixture which runs given ansible playbook file.</p></td>
<td><p>Dec 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-antilru/">pytest-antilru</a></p></td>
<td><p>Bust functools.lru_cache when running pytest to avoid test pollution</p></td>
<td><p>Jan 29, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-anyio/">pytest-anyio</a></p></td>
<td><p>The pytest anyio plugin is built into anyio. You don’t need this package.</p></td>
<td><p>Jun 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-anything/">pytest-anything</a></p></td>
<td><p>Pytest fixtures to assert anything and something</p></td>
<td><p>Feb 18, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aoc/">pytest-aoc</a></p></td>
<td><p>Downloads puzzle inputs for Advent of Code and synthesizes PyTest fixtures</p></td>
<td><p>Nov 23, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest ; extra == ‘test’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-api/">pytest-api</a></p></td>
<td><p>PyTest-API Python Web Framework built for testing purposes.</p></td>
<td><p>May 04, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-apistellar/">pytest-apistellar</a></p></td>
<td><p>apistellar plugin for pytest.</p></td>
<td><p>Jun 18, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-appengine/">pytest-appengine</a></p></td>
<td><p>AppEngine integration that works well with pytest-django</p></td>
<td><p>Feb 27, 2017</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-appium/">pytest-appium</a></p></td>
<td><p>Pytest plugin for appium</p></td>
<td><p>Dec 05, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-approvaltests/">pytest-approvaltests</a></p></td>
<td><p>A plugin to use approvaltests with pytest</p></td>
<td><p>Feb 07, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-argus/">pytest-argus</a></p></td>
<td><p>pyest results colection plugin</p></td>
<td><p>Jun 24, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-arraydiff/">pytest-arraydiff</a></p></td>
<td><p>pytest plugin to help with comparing array output from tests</p></td>
<td><p>Jan 13, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-asgi-server/">pytest-asgi-server</a></p></td>
<td><p>Convenient ASGI client/server fixtures for Pytest</p></td>
<td><p>Dec 12, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-asptest/">pytest-asptest</a></p></td>
<td><p>test Answer Set Programming programs</p></td>
<td><p>Apr 28, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-assertutil/">pytest-assertutil</a></p></td>
<td><p>pytest-assertutil</p></td>
<td><p>May 10, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-assert-utils/">pytest-assert-utils</a></p></td>
<td><p>Useful assertion utilities for use with pytest</p></td>
<td><p>Sep 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-assume/">pytest-assume</a></p></td>
<td><p>A pytest plugin that allows multiple failures per test</p></td>
<td><p>Jun 24, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.7)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ast-back-to-python/">pytest-ast-back-to-python</a></p></td>
<td><p>A plugin for pytest devs to view how assertion rewriting recodes the AST</p></td>
<td><p>Sep 29, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-astropy/">pytest-astropy</a></p></td>
<td><p>Meta-package containing dependencies for testing</p></td>
<td><p>Sep 21, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-astropy-header/">pytest-astropy-header</a></p></td>
<td><p>pytest plugin to add diagnostic information to the header of the test output</p></td>
<td><p>Dec 27, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ast-transformer/">pytest-ast-transformer</a></p></td>
<td></td>
<td><p>May 04, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-asyncio/">pytest-asyncio</a></p></td>
<td><p>Pytest support for asyncio</p></td>
<td><p>Mar 03, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.1.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-asyncio-cooperative/">pytest-asyncio-cooperative</a></p></td>
<td><p>Run all your asynchronous tests cooperatively.</p></td>
<td><p>Jan 25, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-asyncio-network-simulator/">pytest-asyncio-network-simulator</a></p></td>
<td><p>pytest-asyncio-network-simulator: Plugin for pytest for simulator the network in tests</p></td>
<td><p>Jul 31, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&lt;3.7.0,&gt;=3.3.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-async-mongodb/">pytest-async-mongodb</a></p></td>
<td><p>pytest plugin for async MongoDB</p></td>
<td><p>Oct 18, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.5.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-async-sqlalchemy/">pytest-async-sqlalchemy</a></p></td>
<td><p>Database testing fixtures using the SQLAlchemy asyncio API</p></td>
<td><p>Oct 07, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-atomic/">pytest-atomic</a></p></td>
<td><p>Skip rest of tests if previous test failed.</p></td>
<td><p>Nov 24, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-attrib/">pytest-attrib</a></p></td>
<td><p>pytest plugin to select tests based on attributes similar to the nose-attrib plugin</p></td>
<td><p>May 24, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-austin/">pytest-austin</a></p></td>
<td><p>Austin plugin for pytest</p></td>
<td><p>Oct 11, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-autochecklog/">pytest-autochecklog</a></p></td>
<td><p>automatically check condition and log all the checks</p></td>
<td><p>Apr 25, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-automation/">pytest-automation</a></p></td>
<td><p>pytest plugin for building a test suite, using YAML files to extend pytest parameterize functionality.</p></td>
<td><p>Oct 01, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-automock/">pytest-automock</a></p></td>
<td><p>Pytest plugin for automatical mocks creation</p></td>
<td><p>Feb 01, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest ; extra == ‘dev’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-auto-parametrize/">pytest-auto-parametrize</a></p></td>
<td><p>pytest plugin: avoid repeating arguments in parametrize</p></td>
<td><p>Oct 02, 2016</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-autotest/">pytest-autotest</a></p></td>
<td><p>This fixture provides a configured “driver” for Android Automated Testing, using uiautomator2.</p></td>
<td><p>Aug 25, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-avoidance/">pytest-avoidance</a></p></td>
<td><p>Makes pytest skip tests that don not need rerunning</p></td>
<td><p>May 23, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aws/">pytest-aws</a></p></td>
<td><p>pytest plugin for testing AWS resource configurations</p></td>
<td><p>Oct 04, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-aws-config/">pytest-aws-config</a></p></td>
<td><p>Protect your AWS credentials in unit tests</p></td>
<td><p>May 28, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-axe/">pytest-axe</a></p></td>
<td><p>pytest plugin for axe-selenium-python</p></td>
<td><p>Nov 12, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-azurepipelines/">pytest-azurepipelines</a></p></td>
<td><p>Formatting PyTest output for Azure Pipelines UI</p></td>
<td><p>Jul 23, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bandit/">pytest-bandit</a></p></td>
<td><p>A bandit plugin for pytest</p></td>
<td><p>Feb 23, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-base-url/">pytest-base-url</a></p></td>
<td><p>pytest plugin for URL based testing</p></td>
<td><p>Jun 19, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.7.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bdd/">pytest-bdd</a></p></td>
<td><p>BDD for pytest</p></td>
<td><p>Oct 25, 2021</p></td>
<td><p>6 - Mature</p></td>
<td><p>pytest (&gt;=4.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bdd-splinter/">pytest-bdd-splinter</a></p></td>
<td><p>Common steps for pytest bdd and splinter integration</p></td>
<td><p>Aug 12, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bdd-web/">pytest-bdd-web</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Jan 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bdd-wrappers/">pytest-bdd-wrappers</a></p></td>
<td></td>
<td><p>Feb 11, 2020</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-beakerlib/">pytest-beakerlib</a></p></td>
<td><p>A pytest plugin that reports test results to the BeakerLib framework</p></td>
<td><p>Mar 17, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-beds/">pytest-beds</a></p></td>
<td><p>Fixtures for testing Google Appengine (GAE) apps</p></td>
<td><p>Jun 07, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bench/">pytest-bench</a></p></td>
<td><p>Benchmark utility that plugs into pytest.</p></td>
<td><p>Jul 21, 2014</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-benchmark/">pytest-benchmark</a></p></td>
<td><p>A ``pytest`` fixture for benchmarking code. It will group the tests into rounds that are calibrated to the chosen timer.</p></td>
<td><p>Apr 17, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.8)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bg-process/">pytest-bg-process</a></p></td>
<td><p>Pytest plugin to initialize background process</p></td>
<td><p>Jan 24, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bigchaindb/">pytest-bigchaindb</a></p></td>
<td><p>A BigchainDB plugin for pytest.</p></td>
<td><p>Jan 24, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bigquery-mock/">pytest-bigquery-mock</a></p></td>
<td><p>Provides a mock fixture for python bigquery client</p></td>
<td><p>Aug 05, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-black/">pytest-black</a></p></td>
<td><p>A pytest plugin to enable format checking with black</p></td>
<td><p>Oct 05, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-black-multipy/">pytest-black-multipy</a></p></td>
<td><p>Allow ‘–black’ on older Pythons</p></td>
<td><p>Jan 14, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (!=3.7.3,&gt;=3.5) ; extra == ‘testing’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-blame/">pytest-blame</a></p></td>
<td><p>A pytest plugin helps developers to debug by providing useful commits history.</p></td>
<td><p>May 04, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-blender/">pytest-blender</a></p></td>
<td><p>Blender Pytest plugin.</p></td>
<td><p>Oct 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (==6.2.5) ; extra == ‘dev’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-blink1/">pytest-blink1</a></p></td>
<td><p>Pytest plugin to emit notifications via the Blink(1) RGB LED</p></td>
<td><p>Jan 07, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-blockage/">pytest-blockage</a></p></td>
<td><p>Disable network requests during a test run.</p></td>
<td><p>Dec 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-blocker/">pytest-blocker</a></p></td>
<td><p>pytest plugin to mark a test as blocker and skip all other tests</p></td>
<td><p>Sep 07, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-board/">pytest-board</a></p></td>
<td><p>Local continuous test runner with pytest and watchdog.</p></td>
<td><p>Jan 20, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bootstrap/">pytest-bootstrap</a></p></td>
<td></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bpdb/">pytest-bpdb</a></p></td>
<td><p>A py.test plug-in to enable drop to bpdb debugger on test failure.</p></td>
<td><p>Jan 19, 2015</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bravado/">pytest-bravado</a></p></td>
<td><p>Pytest-bravado automatically generates from OpenAPI specification client fixtures.</p></td>
<td><p>Feb 15, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-breakword/">pytest-breakword</a></p></td>
<td><p>Use breakword with pytest</p></td>
<td><p>Aug 04, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.4,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-breed-adapter/">pytest-breed-adapter</a></p></td>
<td><p>A simple plugin to connect with breed-server</p></td>
<td><p>Nov 07, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-briefcase/">pytest-briefcase</a></p></td>
<td><p>A pytest plugin for running tests on a Briefcase project.</p></td>
<td><p>Jun 14, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-browser/">pytest-browser</a></p></td>
<td><p>A pytest plugin for console based browser test selection just after the collection phase</p></td>
<td><p>Dec 10, 2016</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-browsermob-proxy/">pytest-browsermob-proxy</a></p></td>
<td><p>BrowserMob proxy plugin for py.test.</p></td>
<td><p>Jun 11, 2013</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-browserstack-local/">pytest-browserstack-local</a></p></td>
<td><p>``py.test`` plugin to run ``BrowserStackLocal`` in background.</p></td>
<td><p>Feb 09, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bug/">pytest-bug</a></p></td>
<td><p>Pytest plugin for marking tests as a bug</p></td>
<td><p>Jun 02, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bugtong-tag/">pytest-bugtong-tag</a></p></td>
<td><p>pytest-bugtong-tag is a plugin for pytest</p></td>
<td><p>Jan 16, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bugzilla/">pytest-bugzilla</a></p></td>
<td><p>py.test bugzilla integration plugin</p></td>
<td><p>May 05, 2010</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bugzilla-notifier/">pytest-bugzilla-notifier</a></p></td>
<td><p>A plugin that allows you to execute create, update, and read information from BugZilla bugs</p></td>
<td><p>Jun 15, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.9.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-buildkite/">pytest-buildkite</a></p></td>
<td><p>Plugin for pytest that automatically publishes coverage and pytest report annotations to Buildkite.</p></td>
<td><p>Jul 13, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-builtin-types/">pytest-builtin-types</a></p></td>
<td></td>
<td><p>Nov 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-bwrap/">pytest-bwrap</a></p></td>
<td><p>Run your tests in Bubblewrap sandboxes</p></td>
<td><p>Oct 26, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cache/">pytest-cache</a></p></td>
<td><p>pytest plugin with mechanisms for caching across test runs</p></td>
<td><p>Jun 04, 2013</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cache-assert/">pytest-cache-assert</a></p></td>
<td><p>Cache assertion data to simplify regression testing of complex serializable data</p></td>
<td><p>Mar 03, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cagoule/">pytest-cagoule</a></p></td>
<td><p>Pytest plugin to only run tests affected by changes</p></td>
<td><p>Jan 01, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cairo/">pytest-cairo</a></p></td>
<td><p>Pytest support for cairo-lang and starknet</p></td>
<td><p>Feb 19, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-camel-collect/">pytest-camel-collect</a></p></td>
<td><p>Enable CamelCase-aware pytest class collection</p></td>
<td><p>Aug 02, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.9)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-canonical-data/">pytest-canonical-data</a></p></td>
<td><p>A plugin which allows to compare results with canonical results, based on previous runs</p></td>
<td><p>May 08, 2020</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-caprng/">pytest-caprng</a></p></td>
<td><p>A plugin that replays pRNG state on failure.</p></td>
<td><p>May 02, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-capture-deprecatedwarnings/">pytest-capture-deprecatedwarnings</a></p></td>
<td><p>pytest plugin to capture all deprecatedwarnings and put them in one file</p></td>
<td><p>Apr 30, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cases/">pytest-cases</a></p></td>
<td><p>Separate test code from test cases in pytest.</p></td>
<td><p>Feb 08, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cassandra/">pytest-cassandra</a></p></td>
<td><p>Cassandra CCM Test Fixtures for pytest</p></td>
<td><p>Nov 04, 2017</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-catchlog/">pytest-catchlog</a></p></td>
<td><p>py.test plugin to catch log messages. This is a fork of pytest-capturelog.</p></td>
<td><p>Jan 24, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-catch-server/">pytest-catch-server</a></p></td>
<td><p>Pytest plugin with server for catching HTTP requests.</p></td>
<td><p>Dec 12, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-celery/">pytest-celery</a></p></td>
<td><p>pytest-celery a shim pytest plugin to enable celery.contrib.pytest</p></td>
<td><p>May 06, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-chainmaker/">pytest-chainmaker</a></p></td>
<td><p>pytest plugin for chainmaker</p></td>
<td><p>Oct 15, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-chalice/">pytest-chalice</a></p></td>
<td><p>A set of py.test fixtures for AWS Chalice</p></td>
<td><p>Jul 01, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-change-demo/">pytest-change-demo</a></p></td>
<td><p>turn . into √，turn F into x</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-change-report/">pytest-change-report</a></p></td>
<td><p>turn . into √，turn F into x</p></td>
<td><p>Sep 14, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-chdir/">pytest-chdir</a></p></td>
<td><p>A pytest fixture for changing current working directory</p></td>
<td><p>Jan 28, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.0.0,&lt;6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-checkdocs/">pytest-checkdocs</a></p></td>
<td><p>check the README when running tests</p></td>
<td><p>Jul 31, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6) ; extra == ‘testing’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-checkipdb/">pytest-checkipdb</a></p></td>
<td><p>plugin to check if there are ipdb debugs left</p></td>
<td><p>Jul 22, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.9.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-check-links/">pytest-check-links</a></p></td>
<td><p>Check links in files</p></td>
<td><p>Jul 29, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-check-mk/">pytest-check-mk</a></p></td>
<td><p>pytest plugin to test Check_MK checks</p></td>
<td><p>Nov 19, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-circleci/">pytest-circleci</a></p></td>
<td><p>py.test plugin for CircleCI</p></td>
<td><p>May 03, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-circleci-parallelized/">pytest-circleci-parallelized</a></p></td>
<td><p>Parallelize pytest across CircleCI workers.</p></td>
<td><p>Mar 26, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ckan/">pytest-ckan</a></p></td>
<td><p>Backport of CKAN 2.9 pytest plugin and fixtures to CAKN 2.8</p></td>
<td><p>Apr 28, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-clarity/">pytest-clarity</a></p></td>
<td><p>A plugin providing an alternative, colourful diff output for failing assertions.</p></td>
<td><p>Jun 11, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cldf/">pytest-cldf</a></p></td>
<td><p>Easy quality control for CLDF datasets using pytest</p></td>
<td><p>May 06, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-click/">pytest-click</a></p></td>
<td><p>Pytest plugin for Click</p></td>
<td><p>Feb 11, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-clld/">pytest-clld</a></p></td>
<td></td>
<td><p>Nov 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cloud/">pytest-cloud</a></p></td>
<td><p>Distributed tests planner plugin for pytest testing framework.</p></td>
<td><p>Oct 05, 2020</p></td>
<td><p>6 - Mature</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cloudflare-worker/">pytest-cloudflare-worker</a></p></td>
<td><p>pytest plugin for testing cloudflare workers</p></td>
<td><p>Mar 30, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cobra/">pytest-cobra</a></p></td>
<td><p>PyTest plugin for testing Smart Contracts for Ethereum blockchain.</p></td>
<td><p>Jun 29, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&lt;4.0.0,&gt;=3.7.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-codecheckers/">pytest-codecheckers</a></p></td>
<td><p>pytest plugin to add source code sanity checks (pep8 and friends)</p></td>
<td><p>Feb 13, 2010</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-codecov/">pytest-codecov</a></p></td>
<td><p>Pytest plugin for uploading pytest-cov results to codecov.io</p></td>
<td><p>Oct 27, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-codegen/">pytest-codegen</a></p></td>
<td><p>Automatically create pytest test signatures</p></td>
<td><p>Aug 23, 2020</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-codestyle/">pytest-codestyle</a></p></td>
<td><p>pytest plugin to run pycodestyle</p></td>
<td><p>Mar 23, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-collect-formatter/">pytest-collect-formatter</a></p></td>
<td><p>Formatter for pytest collect output</p></td>
<td><p>Mar 29, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-collect-formatter2/">pytest-collect-formatter2</a></p></td>
<td><p>Formatter for pytest collect output</p></td>
<td><p>May 31, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-colordots/">pytest-colordots</a></p></td>
<td><p>Colorizes the progress indicators</p></td>
<td><p>Oct 06, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-commander/">pytest-commander</a></p></td>
<td><p>An interactive GUI test runner for PyTest</p></td>
<td><p>Aug 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&lt;7.0.0,&gt;=6.2.4)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-common-subject/">pytest-common-subject</a></p></td>
<td><p>pytest framework for testing different aspects of a common method</p></td>
<td><p>Nov 12, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6,&lt;7)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-concurrent/">pytest-concurrent</a></p></td>
<td><p>Concurrently execute test cases with multithread, multiprocess and gevent</p></td>
<td><p>Jan 12, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-config/">pytest-config</a></p></td>
<td><p>Base configurations and utilities for developing    your Python project test suite with pytest.</p></td>
<td><p>Nov 07, 2014</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-confluence-report/">pytest-confluence-report</a></p></td>
<td><p>Package stands for pytest plugin to upload results into Confluence page.</p></td>
<td><p>Nov 06, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-console-scripts/">pytest-console-scripts</a></p></td>
<td><p>Pytest plugin for testing console scripts</p></td>
<td><p>Feb 23, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-consul/">pytest-consul</a></p></td>
<td><p>pytest plugin with fixtures for testing consul aware apps</p></td>
<td><p>Nov 24, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-container/">pytest-container</a></p></td>
<td><p>Pytest fixtures for writing container based tests</p></td>
<td><p>Feb 01, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.10)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-contextfixture/">pytest-contextfixture</a></p></td>
<td><p>Define pytest fixtures as context managers.</p></td>
<td><p>Mar 12, 2013</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-contexts/">pytest-contexts</a></p></td>
<td><p>A plugin to run tests written with the Contexts framework using pytest</p></td>
<td><p>May 19, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cookies/">pytest-cookies</a></p></td>
<td><p>The pytest plugin for your Cookiecutter templates. 🍪</p></td>
<td><p>May 24, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-couchdbkit/">pytest-couchdbkit</a></p></td>
<td><p>py.test extension for per-test couchdb databases using couchdbkit</p></td>
<td><p>Apr 17, 2012</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-count/">pytest-count</a></p></td>
<td><p>count erros and send email</p></td>
<td><p>Jan 12, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cov/">pytest-cov</a></p></td>
<td><p>Pytest plugin for measuring coverage.</p></td>
<td><p>Oct 04, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cover/">pytest-cover</a></p></td>
<td><p>Pytest plugin for measuring coverage. Forked from `pytest-cov`.</p></td>
<td><p>Aug 01, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-coverage/">pytest-coverage</a></p></td>
<td></td>
<td><p>Jun 17, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-coverage-context/">pytest-coverage-context</a></p></td>
<td><p>Coverage dynamic context support for PyTest, including sub-processes</p></td>
<td><p>Jan 04, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.1.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cov-exclude/">pytest-cov-exclude</a></p></td>
<td><p>Pytest plugin for excluding tests based on coverage data</p></td>
<td><p>Apr 29, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.0,&lt;2.9.0); extra == ‘dev’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cpp/">pytest-cpp</a></p></td>
<td><p>Use pytest’s runner to discover and execute C++ tests</p></td>
<td><p>Dec 06, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (!=5.4.0,!=5.4.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cram/">pytest-cram</a></p></td>
<td><p>Run cram tests with pytest.</p></td>
<td><p>Aug 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-crate/">pytest-crate</a></p></td>
<td><p>Manages CrateDB instances during your integration tests</p></td>
<td><p>May 28, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cricri/">pytest-cricri</a></p></td>
<td><p>A Cricri plugin for pytest.</p></td>
<td><p>Jan 27, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-crontab/">pytest-crontab</a></p></td>
<td><p>add crontab task in crontab</p></td>
<td><p>Dec 09, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-csv/">pytest-csv</a></p></td>
<td><p>CSV output for pytest.</p></td>
<td><p>Apr 22, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-curio/">pytest-curio</a></p></td>
<td><p>Pytest support for curio.</p></td>
<td><p>Oct 07, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-curl-report/">pytest-curl-report</a></p></td>
<td><p>pytest plugin to generate curl command line report</p></td>
<td><p>Dec 11, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-custom-concurrency/">pytest-custom-concurrency</a></p></td>
<td><p>Custom grouping concurrence for pytest</p></td>
<td><p>Feb 08, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-custom-exit-code/">pytest-custom-exit-code</a></p></td>
<td><p>Exit pytest test session with custom exit code in different scenarios</p></td>
<td><p>Aug 07, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.0.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-custom-nodeid/">pytest-custom-nodeid</a></p></td>
<td><p>Custom grouping for pytest-xdist, rename test cases name and test cases nodeid, support allure report</p></td>
<td><p>Mar 07, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-custom-report/">pytest-custom-report</a></p></td>
<td><p>Configure the symbols displayed for test outcomes</p></td>
<td><p>Jan 30, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-custom-scheduling/">pytest-custom-scheduling</a></p></td>
<td><p>Custom grouping for pytest-xdist, rename test cases name and test cases nodeid, support allure report</p></td>
<td><p>Mar 01, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-cython/">pytest-cython</a></p></td>
<td><p>A plugin for testing Cython extension modules</p></td>
<td><p>Jan 26, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.7.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-darker/">pytest-darker</a></p></td>
<td><p>A pytest plugin for checking of modified code using Darker</p></td>
<td><p>Aug 16, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.0.1) ; extra == ‘test’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dash/">pytest-dash</a></p></td>
<td><p>pytest fixtures to run dash applications.</p></td>
<td><p>Mar 18, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-data/">pytest-data</a></p></td>
<td><p>Useful functions for managing data for pytest fixtures</p></td>
<td><p>Nov 01, 2016</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-databricks/">pytest-databricks</a></p></td>
<td><p>Pytest plugin for remote Databricks notebooks testing</p></td>
<td><p>Jul 29, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datadir/">pytest-datadir</a></p></td>
<td><p>pytest plugin for test data directories and files</p></td>
<td><p>Oct 22, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.7.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datadir-mgr/">pytest-datadir-mgr</a></p></td>
<td><p>Manager for test data: downloads, artifact caching, and a tmpdir context.</p></td>
<td><p>Jan 20, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datadir-ng/">pytest-datadir-ng</a></p></td>
<td><p>Fixtures for pytest allowing test functions/methods to easily retrieve test resources from the local filesystem.</p></td>
<td><p>Dec 25, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-data-file/">pytest-data-file</a></p></td>
<td><p>Fixture “data” and “case_data” for test from yaml file</p></td>
<td><p>Dec 04, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datafiles/">pytest-datafiles</a></p></td>
<td><p>py.test plugin to create a ‘tmpdir’ containing predefined files/directories.</p></td>
<td><p>Oct 07, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datafixtures/">pytest-datafixtures</a></p></td>
<td><p>Data fixtures for pytest made simple</p></td>
<td><p>Dec 05, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-data-from-files/">pytest-data-from-files</a></p></td>
<td><p>pytest plugin to provide data from files loaded automatically</p></td>
<td><p>Oct 13, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dataplugin/">pytest-dataplugin</a></p></td>
<td><p>A pytest plugin for managing an archive of test data.</p></td>
<td><p>Sep 16, 2017</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datarecorder/">pytest-datarecorder</a></p></td>
<td><p>A py.test plugin recording and comparing test output.</p></td>
<td><p>Apr 20, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-datatest/">pytest-datatest</a></p></td>
<td><p>A pytest plugin for test driven data-wrangling (this is the development version of datatest’s pytest integration).</p></td>
<td><p>Oct 15, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-db/">pytest-db</a></p></td>
<td><p>Session scope fixture “db” for mysql query or change</p></td>
<td><p>Dec 04, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dbfixtures/">pytest-dbfixtures</a></p></td>
<td><p>Databases fixtures plugin for py.test.</p></td>
<td><p>Dec 07, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-db-plugin/">pytest-db-plugin</a></p></td>
<td></td>
<td><p>Nov 27, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dbt-adapter/">pytest-dbt-adapter</a></p></td>
<td><p>A pytest plugin for testing dbt adapter plugins</p></td>
<td><p>Nov 24, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&lt;7,&gt;=6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dbt-conventions/">pytest-dbt-conventions</a></p></td>
<td><p>A pytest plugin for linting a dbt project’s conventions</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dbt-core/">pytest-dbt-core</a></p></td>
<td><p>Pytest extension for dbt.</p></td>
<td><p>Jan 28, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5) ; extra == ‘test’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dbus-notification/">pytest-dbus-notification</a></p></td>
<td><p>D-BUS notifications for pytest results.</p></td>
<td><p>Mar 05, 2014</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-deadfixtures/">pytest-deadfixtures</a></p></td>
<td><p>A simple plugin to list unused fixtures in pytest</p></td>
<td><p>Jul 23, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-deepcov/">pytest-deepcov</a></p></td>
<td><p>deepcov</p></td>
<td><p>Mar 30, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-defer/">pytest-defer</a></p></td>
<td></td>
<td><p>Aug 24, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-demo-plugin/">pytest-demo-plugin</a></p></td>
<td><p>pytest示例插件</p></td>
<td><p>May 15, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dependency/">pytest-dependency</a></p></td>
<td><p>Manage dependencies of tests</p></td>
<td><p>Feb 14, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-depends/">pytest-depends</a></p></td>
<td><p>Tests that depend on other tests</p></td>
<td><p>Apr 05, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-deprecate/">pytest-deprecate</a></p></td>
<td><p>Mark tests as testing a deprecated feature with a warning note.</p></td>
<td><p>Jul 01, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-describe/">pytest-describe</a></p></td>
<td><p>Describe-style plugin for pytest</p></td>
<td><p>Nov 13, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-describe-it/">pytest-describe-it</a></p></td>
<td><p>plugin for rich text descriptions</p></td>
<td><p>Jul 19, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-devpi-server/">pytest-devpi-server</a></p></td>
<td><p>DevPI server fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-diamond/">pytest-diamond</a></p></td>
<td><p>pytest plugin for diamond</p></td>
<td><p>Aug 31, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dicom/">pytest-dicom</a></p></td>
<td><p>pytest plugin to provide DICOM fixtures</p></td>
<td><p>Dec 19, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dictsdiff/">pytest-dictsdiff</a></p></td>
<td></td>
<td><p>Jul 26, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-diff/">pytest-diff</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Mar 30, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-diff-selector/">pytest-diff-selector</a></p></td>
<td><p>Get tests affected by code changes (using git)</p></td>
<td><p>Feb 24, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.2) ; extra == ‘all’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-disable/">pytest-disable</a></p></td>
<td><p>pytest plugin to disable a test and skip it from testrun</p></td>
<td><p>Sep 10, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-disable-plugin/">pytest-disable-plugin</a></p></td>
<td><p>Disable plugins per test</p></td>
<td><p>Feb 28, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-discord/">pytest-discord</a></p></td>
<td><p>A pytest plugin to notify test results to a Discord channel.</p></td>
<td><p>Feb 12, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (!=6.0.0,&lt;8,&gt;=3.3.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django/">pytest-django</a></p></td>
<td><p>A Django plugin for pytest.</p></td>
<td><p>Dec 07, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-ahead/">pytest-django-ahead</a></p></td>
<td><p>A Django plugin for pytest.</p></td>
<td><p>Oct 27, 2016</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.9)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-djangoapp/">pytest-djangoapp</a></p></td>
<td><p>Nice pytest plugin to help you with Django pluggable application testing.</p></td>
<td><p>Aug 04, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-cache-xdist/">pytest-django-cache-xdist</a></p></td>
<td><p>A djangocachexdist plugin for pytest</p></td>
<td><p>May 12, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-casperjs/">pytest-django-casperjs</a></p></td>
<td><p>Integrate CasperJS with your django tests as a pytest fixture.</p></td>
<td><p>Mar 15, 2015</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-dotenv/">pytest-django-dotenv</a></p></td>
<td><p>Pytest plugin used to setup environment variables with django-dotenv</p></td>
<td><p>Nov 26, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-factories/">pytest-django-factories</a></p></td>
<td><p>Factories for your Django models that can be used as Pytest fixtures.</p></td>
<td><p>Nov 12, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-gcir/">pytest-django-gcir</a></p></td>
<td><p>A Django plugin for pytest.</p></td>
<td><p>Mar 06, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-haystack/">pytest-django-haystack</a></p></td>
<td><p>Cleanup your Haystack indexes between tests</p></td>
<td><p>Sep 03, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-ifactory/">pytest-django-ifactory</a></p></td>
<td><p>A model instance factory for pytest-django</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-lite/">pytest-django-lite</a></p></td>
<td><p>The bare minimum to integrate py.test with Django.</p></td>
<td><p>Jan 30, 2014</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-liveserver-ssl/">pytest-django-liveserver-ssl</a></p></td>
<td></td>
<td><p>Jan 20, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-model/">pytest-django-model</a></p></td>
<td><p>A Simple Way to Test your Django Models</p></td>
<td><p>Feb 14, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-ordering/">pytest-django-ordering</a></p></td>
<td><p>A pytest plugin for preserving the order in which Django runs tests.</p></td>
<td><p>Jul 25, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-queries/">pytest-django-queries</a></p></td>
<td><p>Generate performance reports from your django database performance tests.</p></td>
<td><p>Mar 01, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-djangorestframework/">pytest-djangorestframework</a></p></td>
<td><p>A djangorestframework plugin for pytest</p></td>
<td><p>Aug 11, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-rq/">pytest-django-rq</a></p></td>
<td><p>A pytest plugin to help writing unit test for django-rq</p></td>
<td><p>Apr 13, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-sqlcounts/">pytest-django-sqlcounts</a></p></td>
<td><p>py.test plugin for reporting the number of SQLs executed per django testcase.</p></td>
<td><p>Jun 16, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-django-testing-postgresql/">pytest-django-testing-postgresql</a></p></td>
<td><p>Use a temporary PostgreSQL database with pytest-django</p></td>
<td><p>Jan 31, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doc/">pytest-doc</a></p></td>
<td><p>A documentation plugin for py.test.</p></td>
<td><p>Jun 28, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docfiles/">pytest-docfiles</a></p></td>
<td><p>pytest plugin to test codeblocks in your documentation.</p></td>
<td><p>Dec 22, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.7.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docgen/">pytest-docgen</a></p></td>
<td><p>An RST Documentation Generator for pytest-based test suites</p></td>
<td><p>Apr 17, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker/">pytest-docker</a></p></td>
<td><p>Simple pytest fixtures for Docker and docker-compose based tests</p></td>
<td><p>Jun 14, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&lt;7.0,&gt;=4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-apache-fixtures/">pytest-docker-apache-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with apache2 (httpd).</p></td>
<td><p>Feb 16, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-butla/">pytest-docker-butla</a></p></td>
<td></td>
<td><p>Jun 16, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dockerc/">pytest-dockerc</a></p></td>
<td><p>Run, manage and stop Docker Compose project from Docker API</p></td>
<td><p>Oct 09, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-compose/">pytest-docker-compose</a></p></td>
<td><p>Manages Docker containers during your integration tests</p></td>
<td><p>Jan 26, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-db/">pytest-docker-db</a></p></td>
<td><p>A plugin to use docker databases for pytests</p></td>
<td><p>Mar 20, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-fixtures/">pytest-docker-fixtures</a></p></td>
<td><p>pytest docker fixtures</p></td>
<td><p>Nov 23, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-git-fixtures/">pytest-docker-git-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with git scm.</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-haproxy-fixtures/">pytest-docker-haproxy-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with haproxy.</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-pexpect/">pytest-docker-pexpect</a></p></td>
<td><p>pytest plugin for writing functional tests with pexpect and docker</p></td>
<td><p>Jan 14, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-postgresql/">pytest-docker-postgresql</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Sep 24, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-py/">pytest-docker-py</a></p></td>
<td><p>Easy to use, simple to extend, pytest plugin that minimally leverages docker-py.</p></td>
<td><p>Nov 27, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (==4.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-registry-fixtures/">pytest-docker-registry-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with docker registries.</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-squid-fixtures/">pytest-docker-squid-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with squid.</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docker-tools/">pytest-docker-tools</a></p></td>
<td><p>Docker integration tests for pytest</p></td>
<td><p>Feb 17, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docs/">pytest-docs</a></p></td>
<td><p>Documentation tool for pytest</p></td>
<td><p>Nov 11, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-docstyle/">pytest-docstyle</a></p></td>
<td><p>pytest plugin to run pydocstyle</p></td>
<td><p>Mar 23, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doctest-custom/">pytest-doctest-custom</a></p></td>
<td><p>A py.test plugin for customizing string representations of doctest results.</p></td>
<td><p>Jul 25, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doctest-ellipsis-markers/">pytest-doctest-ellipsis-markers</a></p></td>
<td><p>Setup additional values for ELLIPSIS_MARKER for doctests</p></td>
<td><p>Jan 12, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doctest-import/">pytest-doctest-import</a></p></td>
<td><p>A simple pytest plugin to import names and add them to the doctest namespace.</p></td>
<td><p>Nov 13, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doctestplus/">pytest-doctestplus</a></p></td>
<td><p>Pytest plugin with advanced doctest features.</p></td>
<td><p>Feb 25, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dolphin/">pytest-dolphin</a></p></td>
<td><p>Some extra stuff that we use ininternally</p></td>
<td><p>Nov 30, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (==3.0.4)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-doorstop/">pytest-doorstop</a></p></td>
<td><p>A pytest plugin for adding test results into doorstop items.</p></td>
<td><p>Jun 09, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dotenv/">pytest-dotenv</a></p></td>
<td><p>A py.test plugin that parses environment files before running tests</p></td>
<td><p>Jun 16, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-drf/">pytest-drf</a></p></td>
<td><p>A Django REST framework plugin for pytest.</p></td>
<td><p>Nov 12, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-drivings/">pytest-drivings</a></p></td>
<td><p>Tool to allow webdriver automation to be ran locally or remotely</p></td>
<td><p>Jan 13, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-drop-dup-tests/">pytest-drop-dup-tests</a></p></td>
<td><p>A Pytest plugin to drop duplicated tests during collection</p></td>
<td><p>May 23, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.7)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dummynet/">pytest-dummynet</a></p></td>
<td><p>A py.test plugin providing access to a dummynet.</p></td>
<td><p>Dec 15, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dump2json/">pytest-dump2json</a></p></td>
<td><p>A pytest plugin for dumping test results to json.</p></td>
<td><p>Jun 29, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-duration-insights/">pytest-duration-insights</a></p></td>
<td></td>
<td><p>Jun 25, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-durations/">pytest-durations</a></p></td>
<td><p>Pytest plugin reporting fixtures and test functions execution time.</p></td>
<td><p>Feb 14, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dynamicrerun/">pytest-dynamicrerun</a></p></td>
<td><p>A pytest plugin to rerun tests dynamically based off of test outcome and output.</p></td>
<td><p>Aug 15, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-dynamodb/">pytest-dynamodb</a></p></td>
<td><p>DynamoDB fixtures for pytest</p></td>
<td><p>Jun 03, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-easy-addoption/">pytest-easy-addoption</a></p></td>
<td><p>pytest-easy-addoption: Easy way to work with pytest addoption</p></td>
<td><p>Jan 22, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-easy-api/">pytest-easy-api</a></p></td>
<td><p>Simple API testing with pytest</p></td>
<td><p>Mar 26, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-easyMPI/">pytest-easyMPI</a></p></td>
<td><p>Package that supports mpi tests in pytest</p></td>
<td><p>Oct 21, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-easyread/">pytest-easyread</a></p></td>
<td><p>pytest plugin that makes terminal printouts of the reports easier to read</p></td>
<td><p>Nov 17, 2017</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-easy-server/">pytest-easy-server</a></p></td>
<td><p>Pytest plugin for easy testing against servers</p></td>
<td><p>May 01, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&lt;5.0.0,&gt;=4.3.1) ; python_version &lt; “3.5”</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ec2/">pytest-ec2</a></p></td>
<td><p>Pytest execution on EC2 instance</p></td>
<td><p>Oct 22, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-echo/">pytest-echo</a></p></td>
<td><p>pytest plugin with mechanisms for echoing environment variables, package version and generic attributes</p></td>
<td><p>Jan 08, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-elasticsearch/">pytest-elasticsearch</a></p></td>
<td><p>Elasticsearch fixtures and fixture factories for Pytest.</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-elements/">pytest-elements</a></p></td>
<td><p>Tool to help automate user interfaces</p></td>
<td><p>Jan 13, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4,&lt;6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-elk-reporter/">pytest-elk-reporter</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Jan 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-email/">pytest-email</a></p></td>
<td><p>Send execution result email</p></td>
<td><p>Jul 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded/">pytest-embedded</a></p></td>
<td><p>pytest embedded plugin</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-arduino/">pytest-embedded-arduino</a></p></td>
<td><p>pytest embedded plugin for Arduino projects</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-idf/">pytest-embedded-idf</a></p></td>
<td><p>pytest embedded plugin for esp-idf project</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-jtag/">pytest-embedded-jtag</a></p></td>
<td><p>pytest embedded plugin for testing with jtag</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-qemu/">pytest-embedded-qemu</a></p></td>
<td><p>pytest embedded plugin for qemu, not target chip</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-qemu-idf/">pytest-embedded-qemu-idf</a></p></td>
<td><p>pytest embedded plugin for esp-idf project by qemu, not target chip</p></td>
<td><p>Jun 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-serial/">pytest-embedded-serial</a></p></td>
<td><p>pytest embedded plugin for testing serial ports</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-embedded-serial-esp/">pytest-embedded-serial-esp</a></p></td>
<td><p>pytest embedded plugin for testing espressif boards via serial ports</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-emoji/">pytest-emoji</a></p></td>
<td><p>A pytest plugin that adds emojis to your test result report</p></td>
<td><p>Feb 19, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.2.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-emoji-output/">pytest-emoji-output</a></p></td>
<td><p>Pytest plugin to represent test output with emoji support</p></td>
<td><p>Oct 10, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (==6.0.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-enabler/">pytest-enabler</a></p></td>
<td><p>Enable installed pytest plugins</p></td>
<td><p>Nov 08, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6) ; extra == ‘testing’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-encode/">pytest-encode</a></p></td>
<td><p>set your encoding and logger</p></td>
<td><p>Nov 06, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-encode-kane/">pytest-encode-kane</a></p></td>
<td><p>set your encoding and logger</p></td>
<td><p>Nov 16, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-enhancements/">pytest-enhancements</a></p></td>
<td><p>Improvements for pytest (rejected upstream)</p></td>
<td><p>Oct 30, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-env/">pytest-env</a></p></td>
<td><p>py.test plugin that allows you to add environment variables.</p></td>
<td><p>Jun 16, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-envfiles/">pytest-envfiles</a></p></td>
<td><p>A py.test plugin that parses environment files before running tests</p></td>
<td><p>Oct 08, 2015</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-env-info/">pytest-env-info</a></p></td>
<td><p>Push information about the running pytest into envvars</p></td>
<td><p>Nov 25, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-envraw/">pytest-envraw</a></p></td>
<td><p>py.test plugin that allows you to add environment variables.</p></td>
<td><p>Aug 27, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-envvars/">pytest-envvars</a></p></td>
<td><p>Pytest plugin to validate use of envvars on your tests</p></td>
<td><p>Jun 13, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-env-yaml/">pytest-env-yaml</a></p></td>
<td></td>
<td><p>Apr 02, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-eradicate/">pytest-eradicate</a></p></td>
<td><p>pytest plugin to check for commented out code</p></td>
<td><p>Sep 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-error-for-skips/">pytest-error-for-skips</a></p></td>
<td><p>Pytest plugin to treat skipped tests a test failure</p></td>
<td><p>Dec 19, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-eth/">pytest-eth</a></p></td>
<td><p>PyTest plugin for testing Smart Contracts for Ethereum Virtual Machine (EVM).</p></td>
<td><p>Aug 14, 2020</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ethereum/">pytest-ethereum</a></p></td>
<td><p>pytest-ethereum: Pytest library for ethereum projects.</p></td>
<td><p>Jun 24, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (==3.3.2); extra == ‘dev’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-eucalyptus/">pytest-eucalyptus</a></p></td>
<td><p>Pytest Plugin for BDD</p></td>
<td><p>Aug 13, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-eventlet/">pytest-eventlet</a></p></td>
<td><p>Applies eventlet monkey-patch as a pytest plugin.</p></td>
<td><p>Oct 04, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest ; extra == ‘dev’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-excel/">pytest-excel</a></p></td>
<td><p>pytest plugin for generating excel reports</p></td>
<td><p>Jan 31, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-exceptional/">pytest-exceptional</a></p></td>
<td><p>Better exceptions</p></td>
<td><p>Mar 16, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-exception-script/">pytest-exception-script</a></p></td>
<td><p>Walk your code through exception script to check it’s resiliency to failures.</p></td>
<td><p>Aug 04, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-executable/">pytest-executable</a></p></td>
<td><p>pytest plugin for testing executables</p></td>
<td><p>Nov 10, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&lt;6.3,&gt;=4.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-execution-timer/">pytest-execution-timer</a></p></td>
<td><p>A timer for the phases of Pytest’s execution.</p></td>
<td><p>Dec 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-expect/">pytest-expect</a></p></td>
<td><p>py.test plugin to store test expectations and mark tests based on them</p></td>
<td><p>Apr 21, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-expecter/">pytest-expecter</a></p></td>
<td><p>Better testing with expecter and pytest.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-expectr/">pytest-expectr</a></p></td>
<td><p>This plugin is used to expect multiple assert using pytest framework.</p></td>
<td><p>Oct 05, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-experiments/">pytest-experiments</a></p></td>
<td><p>A pytest plugin to help developers of research-oriented software projects keep track of the results of their numerical experiments.</p></td>
<td><p>Dec 13, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-explicit/">pytest-explicit</a></p></td>
<td><p>A Pytest plugin to ignore certain marked tests by default</p></td>
<td><p>Jun 15, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-exploratory/">pytest-exploratory</a></p></td>
<td><p>Interactive console for pytest.</p></td>
<td><p>Feb 21, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-external-blockers/">pytest-external-blockers</a></p></td>
<td><p>a special outcome for tests that are blocked for external reasons</p></td>
<td><p>Oct 05, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-extra-durations/">pytest-extra-durations</a></p></td>
<td><p>A pytest plugin to get durations on a per-function basis and per module basis.</p></td>
<td><p>Apr 21, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fabric/">pytest-fabric</a></p></td>
<td><p>Provides test utilities to run fabric task tests by using docker containers</p></td>
<td><p>Sep 12, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-factory/">pytest-factory</a></p></td>
<td><p>Use factories for test setup with py.test</p></td>
<td><p>Sep 06, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;4.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-factoryboy/">pytest-factoryboy</a></p></td>
<td><p>Factory Boy support for pytest.</p></td>
<td><p>Dec 30, 2020</p></td>
<td><p>6 - Mature</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-factoryboy-fixtures/">pytest-factoryboy-fixtures</a></p></td>
<td><p>Generates pytest fixtures that allow the use of type hinting</p></td>
<td><p>Jun 25, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-factoryboy-state/">pytest-factoryboy-state</a></p></td>
<td><p>Simple factoryboy random state management</p></td>
<td><p>Dec 11, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-failed-screenshot/">pytest-failed-screenshot</a></p></td>
<td><p>Test case fails,take a screenshot,save it,attach it to the allure</p></td>
<td><p>Apr 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-failed-to-verify/">pytest-failed-to-verify</a></p></td>
<td><p>A pytest plugin that helps better distinguishing real test failures from setup flakiness.</p></td>
<td><p>Aug 08, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.1.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fail-slow/">pytest-fail-slow</a></p></td>
<td><p>Fail tests that take too long to run</p></td>
<td><p>Dec 10, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-faker/">pytest-faker</a></p></td>
<td><p>Faker integration with the pytest framework.</p></td>
<td><p>Dec 19, 2016</p></td>
<td><p>6 - Mature</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-falcon/">pytest-falcon</a></p></td>
<td><p>Pytest helpers for Falcon.</p></td>
<td><p>Sep 07, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-falcon-client/">pytest-falcon-client</a></p></td>
<td><p>Pytest `client` fixture for the Falcon Framework</p></td>
<td><p>Mar 19, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fantasy/">pytest-fantasy</a></p></td>
<td><p>Pytest plugin for Flask Fantasy Framework</p></td>
<td><p>Mar 14, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fastapi/">pytest-fastapi</a></p></td>
<td></td>
<td><p>Dec 27, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fastest/">pytest-fastest</a></p></td>
<td><p>Use SCM and coverage to run only needed tests</p></td>
<td><p>Mar 05, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fast-first/">pytest-fast-first</a></p></td>
<td><p>Pytest plugin that runs fast tests first</p></td>
<td><p>Apr 02, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-faulthandler/">pytest-faulthandler</a></p></td>
<td><p>py.test plugin that activates the fault handler module for tests (dummy package)</p></td>
<td><p>Jul 04, 2019</p></td>
<td><p>6 - Mature</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fauxfactory/">pytest-fauxfactory</a></p></td>
<td><p>Integration of fauxfactory into pytest.</p></td>
<td><p>Dec 06, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-figleaf/">pytest-figleaf</a></p></td>
<td><p>py.test figleaf coverage plugin</p></td>
<td><p>Jan 18, 2010</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-filecov/">pytest-filecov</a></p></td>
<td><p>A pytest plugin to detect unused files</p></td>
<td><p>Jun 27, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-filedata/">pytest-filedata</a></p></td>
<td><p>easily load data from files</p></td>
<td><p>Jan 17, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-filemarker/">pytest-filemarker</a></p></td>
<td><p>A pytest plugin that runs marked tests when files change.</p></td>
<td><p>Dec 01, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-filter-case/">pytest-filter-case</a></p></td>
<td><p>run test cases filter by mark</p></td>
<td><p>Nov 05, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-filter-subpackage/">pytest-filter-subpackage</a></p></td>
<td><p>Pytest plugin for filtering based on sub-packages</p></td>
<td><p>Jan 09, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-find-dependencies/">pytest-find-dependencies</a></p></td>
<td><p>A pytest plugin to find dependencies between tests</p></td>
<td><p>Jan 16, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-finer-verdicts/">pytest-finer-verdicts</a></p></td>
<td><p>A pytest plugin to treat non-assertion failures as test errors.</p></td>
<td><p>Jun 18, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-firefox/">pytest-firefox</a></p></td>
<td><p>pytest plugin to manipulate firefox</p></td>
<td><p>Aug 08, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-config/">pytest-fixture-config</a></p></td>
<td><p>Fixture configuration utils for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-maker/">pytest-fixture-maker</a></p></td>
<td><p>Pytest plugin to load fixtures from YAML files</p></td>
<td><p>Sep 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-marker/">pytest-fixture-marker</a></p></td>
<td><p>A pytest plugin to add markers based on fixtures used.</p></td>
<td><p>Oct 11, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-order/">pytest-fixture-order</a></p></td>
<td><p>pytest plugin to control fixture evaluation order</p></td>
<td><p>Aug 25, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-rtttg/">pytest-fixture-rtttg</a></p></td>
<td><p>Warn or fail on fixture name clash</p></td>
<td><p>Feb 23, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=7.0.1,&lt;8.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixtures/">pytest-fixtures</a></p></td>
<td><p>Common fixtures for pytest</p></td>
<td><p>May 01, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-tools/">pytest-fixture-tools</a></p></td>
<td><p>Plugin for pytest which provides tools for fixtures</p></td>
<td><p>Aug 18, 2020</p></td>
<td><p>6 - Mature</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fixture-typecheck/">pytest-fixture-typecheck</a></p></td>
<td><p>A pytest plugin to assert type annotations at runtime.</p></td>
<td><p>Aug 24, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flake8/">pytest-flake8</a></p></td>
<td><p>pytest plugin to check FLAKE8 requirements</p></td>
<td><p>Mar 05, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flake8-path/">pytest-flake8-path</a></p></td>
<td><p>A pytest fixture for testing flake8 plugins.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flake8-v2/">pytest-flake8-v2</a></p></td>
<td><p>pytest plugin to check FLAKE8 requirements</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=7.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flakefinder/">pytest-flakefinder</a></p></td>
<td><p>Runs tests multiple times to expose flakiness.</p></td>
<td><p>Jul 28, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.7.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flakes/">pytest-flakes</a></p></td>
<td><p>pytest plugin to check source code with pyflakes</p></td>
<td><p>Dec 02, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flaptastic/">pytest-flaptastic</a></p></td>
<td><p>Flaptastic py.test plugin</p></td>
<td><p>Mar 17, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flask/">pytest-flask</a></p></td>
<td><p>A set of py.test fixtures to test Flask applications.</p></td>
<td><p>Feb 27, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flask-sqlalchemy/">pytest-flask-sqlalchemy</a></p></td>
<td><p>A pytest plugin for preserving test isolation in Flask-SQlAlchemy using database transactions.</p></td>
<td><p>Apr 04, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.2.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flask-sqlalchemy-transactions/">pytest-flask-sqlalchemy-transactions</a></p></td>
<td><p>Run tests in transactions using pytest, Flask, and SQLalchemy.</p></td>
<td><p>Aug 02, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.2.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-flyte/">pytest-flyte</a></p></td>
<td><p>Pytest fixtures for simplifying Flyte integration testing</p></td>
<td><p>May 03, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-focus/">pytest-focus</a></p></td>
<td><p>A pytest plugin that alerts user of failed test cases with screen notifications</p></td>
<td><p>May 04, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fold/">pytest-fold</a></p></td>
<td><p>Fold console output and drop user into interactive text user interface</p></td>
<td><p>Feb 20, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-forcefail/">pytest-forcefail</a></p></td>
<td><p>py.test plugin to make the test failing regardless of pytest.mark.xfail</p></td>
<td><p>May 15, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-forward-compatability/">pytest-forward-compatability</a></p></td>
<td><p>A name to avoid typosquating pytest-foward-compatibility</p></td>
<td><p>Sep 06, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-forward-compatibility/">pytest-forward-compatibility</a></p></td>
<td><p>A pytest plugin to shim pytest commandline options for fowards compatibility</p></td>
<td><p>Sep 29, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-freezegun/">pytest-freezegun</a></p></td>
<td><p>Wrap tests with fixtures in freeze_time</p></td>
<td><p>Jul 19, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-freeze-reqs/">pytest-freeze-reqs</a></p></td>
<td><p>Check if requirement files are frozen</p></td>
<td><p>Apr 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-frozen-uuids/">pytest-frozen-uuids</a></p></td>
<td><p>Deterministically frozen UUID’s for your tests</p></td>
<td><p>Feb 14, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-func-cov/">pytest-func-cov</a></p></td>
<td><p>Pytest plugin for measuring function coverage</p></td>
<td><p>Apr 15, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-funparam/">pytest-funparam</a></p></td>
<td><p>An alternative way to parametrize test cases.</p></td>
<td><p>Dec 02, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest &gt;=4.6.0</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fxa/">pytest-fxa</a></p></td>
<td><p>pytest plugin for Firefox Accounts</p></td>
<td><p>Aug 28, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-fxtest/">pytest-fxtest</a></p></td>
<td></td>
<td><p>Oct 27, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gc/">pytest-gc</a></p></td>
<td><p>The garbage collector plugin for py.test</p></td>
<td><p>Feb 01, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gcov/">pytest-gcov</a></p></td>
<td><p>Uses gcov to measure test coverage of a C library</p></td>
<td><p>Feb 01, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gevent/">pytest-gevent</a></p></td>
<td><p>Ensure that gevent is properly patched when invoking pytest</p></td>
<td><p>Feb 25, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gherkin/">pytest-gherkin</a></p></td>
<td><p>A flexible framework for executing BDD gherkin tests</p></td>
<td><p>Jul 27, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gh-log-group/">pytest-gh-log-group</a></p></td>
<td><p>pytest plugin for gh actions</p></td>
<td><p>Jan 11, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ghostinspector/">pytest-ghostinspector</a></p></td>
<td><p>For finding/executing Ghost Inspector tests</p></td>
<td><p>May 17, 2016</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-girder/">pytest-girder</a></p></td>
<td><p>A set of pytest fixtures for testing Girder applications.</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-git/">pytest-git</a></p></td>
<td><p>Git repository fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gitcov/">pytest-gitcov</a></p></td>
<td><p>Pytest plugin for reporting on coverage of the last git commit.</p></td>
<td><p>Jan 11, 2020</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-git-fixtures/">pytest-git-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with git.</p></td>
<td><p>Mar 11, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-github/">pytest-github</a></p></td>
<td><p>Plugin for py.test that associates tests with github issues using a marker.</p></td>
<td><p>Mar 07, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-github-actions-annotate-failures/">pytest-github-actions-annotate-failures</a></p></td>
<td><p>pytest plugin to annotate failed tests with a workflow command for GitHub Actions</p></td>
<td><p>Dec 08, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gitignore/">pytest-gitignore</a></p></td>
<td><p>py.test plugin to ignore the same files as git</p></td>
<td><p>Jul 17, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-glamor-allure/">pytest-glamor-allure</a></p></td>
<td><p>Extends allure-pytest functionality</p></td>
<td><p>Nov 26, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-gnupg-fixtures/">pytest-gnupg-fixtures</a></p></td>
<td><p>Pytest fixtures for testing with gnupg.</p></td>
<td><p>Mar 04, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-golden/">pytest-golden</a></p></td>
<td><p>Plugin for pytest that offloads expected outputs to data files</p></td>
<td><p>Nov 23, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-graphql-schema/">pytest-graphql-schema</a></p></td>
<td><p>Get graphql schema as fixture for pytest</p></td>
<td><p>Oct 18, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-greendots/">pytest-greendots</a></p></td>
<td><p>Green progress dots</p></td>
<td><p>Feb 08, 2014</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-growl/">pytest-growl</a></p></td>
<td><p>Growl notifications for pytest results.</p></td>
<td><p>Jan 13, 2014</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-grpc/">pytest-grpc</a></p></td>
<td><p>pytest plugin for grpc</p></td>
<td><p>May 01, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hammertime/">pytest-hammertime</a></p></td>
<td><p>Display “🔨 ” instead of “.” for passed pytest tests.</p></td>
<td><p>Jul 28, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-harvest/">pytest-harvest</a></p></td>
<td><p>Store data created during your pytest tests execution, and retrieve it at the end of the session, e.g. for applicative benchmarking purposes.</p></td>
<td><p>Apr 01, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-helm-chart/">pytest-helm-chart</a></p></td>
<td><p>A plugin to provide different types and configs of Kubernetes clusters that can be used for testing.</p></td>
<td><p>Jun 15, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.4.2,&lt;6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-helm-charts/">pytest-helm-charts</a></p></td>
<td><p>A plugin to provide different types and configs of Kubernetes clusters that can be used for testing.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-helper/">pytest-helper</a></p></td>
<td><p>Functions to help in using the pytest testing framework</p></td>
<td><p>May 31, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-helpers/">pytest-helpers</a></p></td>
<td><p>pytest helpers</p></td>
<td><p>May 17, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-helpers-namespace/">pytest-helpers-namespace</a></p></td>
<td><p>Pytest Helpers Namespace Plugin</p></td>
<td><p>Dec 29, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hidecaptured/">pytest-hidecaptured</a></p></td>
<td><p>Hide captured output</p></td>
<td><p>May 04, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-historic/">pytest-historic</a></p></td>
<td><p>Custom report to display pytest historical execution records</p></td>
<td><p>Apr 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-historic-hook/">pytest-historic-hook</a></p></td>
<td><p>Custom listener to store execution results into MYSQL DB, which is used for pytest-historic report</p></td>
<td><p>Apr 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-homeassistant/">pytest-homeassistant</a></p></td>
<td><p>A pytest plugin for use with homeassistant custom components.</p></td>
<td><p>Aug 12, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-homeassistant-custom-component/">pytest-homeassistant-custom-component</a></p></td>
<td><p>Experimental package to automatically extract test plugins for Home Assistant custom components</p></td>
<td><p>Mar 05, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (==7.0.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-honey/">pytest-honey</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Jan 07, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-honors/">pytest-honors</a></p></td>
<td><p>Report on tests that honor constraints, and guard against regressions</p></td>
<td><p>Mar 06, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hoverfly/">pytest-hoverfly</a></p></td>
<td><p>Simplify working with Hoverfly from pytest</p></td>
<td><p>Jan 20, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hoverfly-wrapper/">pytest-hoverfly-wrapper</a></p></td>
<td><p>Integrates the Hoverfly HTTP proxy into Pytest</p></td>
<td><p>Feb 22, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hpfeeds/">pytest-hpfeeds</a></p></td>
<td><p>Helpers for testing hpfeeds in your python project</p></td>
<td><p>Aug 27, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.4,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html/">pytest-html</a></p></td>
<td><p>pytest plugin for generating HTML reports</p></td>
<td><p>Dec 13, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (!=6.0.0,&gt;=5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-lee/">pytest-html-lee</a></p></td>
<td><p>optimized pytest plugin for generating HTML reports</p></td>
<td><p>Jun 30, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-merger/">pytest-html-merger</a></p></td>
<td><p>Pytest HTML reports merging utility</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-object-storage/">pytest-html-object-storage</a></p></td>
<td><p>Pytest report plugin for send HTML report on object-storage</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-profiling/">pytest-html-profiling</a></p></td>
<td><p>Pytest plugin for generating HTML reports with per-test profiling and optionally call graph visualizations. Based on pytest-html by Dave Hunt.</p></td>
<td><p>Feb 11, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-reporter/">pytest-html-reporter</a></p></td>
<td><p>Generates a static html report based on pytest framework</p></td>
<td><p>Feb 13, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-html-thread/">pytest-html-thread</a></p></td>
<td><p>pytest plugin for generating HTML reports</p></td>
<td><p>Dec 29, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-http/">pytest-http</a></p></td>
<td><p>Fixture “http” for http requests</p></td>
<td><p>Dec 05, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-httpbin/">pytest-httpbin</a></p></td>
<td><p>Easily test your HTTP library against a local copy of httpbin</p></td>
<td><p>Feb 25, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest ; extra == ‘test’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-http-mocker/">pytest-http-mocker</a></p></td>
<td><p>Pytest plugin for http mocking (via <a class="reference external" href="https://github.com/vilus/mocker">https://github.com/vilus/mocker</a>)</p></td>
<td><p>Oct 20, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-httpretty/">pytest-httpretty</a></p></td>
<td><p>A thin wrapper of HTTPretty for pytest</p></td>
<td><p>Feb 16, 2014</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-httpserver/">pytest-httpserver</a></p></td>
<td><p>pytest-httpserver is a httpserver for pytest</p></td>
<td><p>Jan 27, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-httpx/">pytest-httpx</a></p></td>
<td><p>Send responses to httpx.</p></td>
<td><p>Feb 05, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&lt;8.*,&gt;=6.*)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-httpx-blockage/">pytest-httpx-blockage</a></p></td>
<td><p>Disable httpx requests during a test run</p></td>
<td><p>Nov 16, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hue/">pytest-hue</a></p></td>
<td><p>Visualise PyTest status via your Phillips Hue lights</p></td>
<td><p>May 09, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hylang/">pytest-hylang</a></p></td>
<td><p>Pytest plugin to allow running tests written in hylang</p></td>
<td><p>Mar 28, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-hypo-25/">pytest-hypo-25</a></p></td>
<td><p>help hypo module for pytest</p></td>
<td><p>Jan 12, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ibutsu/">pytest-ibutsu</a></p></td>
<td><p>A plugin to sent pytest results to an Ibutsu server</p></td>
<td><p>Jan 14, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-icdiff/">pytest-icdiff</a></p></td>
<td><p>use icdiff for better error messages in pytest assertions</p></td>
<td><p>Apr 08, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-idapro/">pytest-idapro</a></p></td>
<td><p>A pytest plugin for idapython. Allows a pytest setup to run tests outside and inside IDA in an automated manner by runnig pytest inside IDA and by mocking idapython api</p></td>
<td><p>Nov 03, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-idempotent/">pytest-idempotent</a></p></td>
<td><p>Pytest plugin for testing function idempotence.</p></td>
<td><p>Jan 30, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ignore-flaky/">pytest-ignore-flaky</a></p></td>
<td><p>ignore failures from flaky tests (pytest plugin)</p></td>
<td><p>Apr 23, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-image-diff/">pytest-image-diff</a></p></td>
<td></td>
<td><p>Jan 20, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-incremental/">pytest-incremental</a></p></td>
<td><p>an incremental test runner (pytest plugin)</p></td>
<td><p>Apr 24, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-influxdb/">pytest-influxdb</a></p></td>
<td><p>Plugin for influxdb and pytest integration.</p></td>
<td><p>Apr 20, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-info-collector/">pytest-info-collector</a></p></td>
<td><p>pytest plugin to collect information from tests</p></td>
<td><p>May 26, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-informative-node/">pytest-informative-node</a></p></td>
<td><p>display more node ininformation.</p></td>
<td><p>Apr 25, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-infrastructure/">pytest-infrastructure</a></p></td>
<td><p>pytest stack validation prior to testing executing</p></td>
<td><p>Apr 12, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ini/">pytest-ini</a></p></td>
<td><p>Reuse pytest.ini to store env variables</p></td>
<td><p>Sep 30, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-inmanta/">pytest-inmanta</a></p></td>
<td><p>A py.test plugin providing fixtures to simplify inmanta modules testing.</p></td>
<td><p>Jan 26, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-inmanta-extensions/">pytest-inmanta-extensions</a></p></td>
<td><p>Inmanta tests package</p></td>
<td><p>Feb 11, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-Inomaly/">pytest-Inomaly</a></p></td>
<td><p>A simple image diff plugin for pytest</p></td>
<td><p>Feb 13, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-insta/">pytest-insta</a></p></td>
<td><p>A practical snapshot testing plugin for pytest</p></td>
<td><p>Feb 28, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.0.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-instafail/">pytest-instafail</a></p></td>
<td><p>pytest plugin to show failures instantly</p></td>
<td><p>Jun 14, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.9)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-instrument/">pytest-instrument</a></p></td>
<td><p>pytest plugin to instrument tests</p></td>
<td><p>Apr 05, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.1.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-integration/">pytest-integration</a></p></td>
<td><p>Organizing pytests by integration or not</p></td>
<td><p>Apr 16, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-integration-mark/">pytest-integration-mark</a></p></td>
<td><p>Automatic integration test marking and excluding plugin for pytest</p></td>
<td><p>Jul 19, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.2,&lt;7.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-interactive/">pytest-interactive</a></p></td>
<td><p>A pytest plugin for console based interactive test selection just after the collection phase</p></td>
<td><p>Nov 30, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-intercept-remote/">pytest-intercept-remote</a></p></td>
<td><p>Pytest plugin for intercepting outgoing connection requests during pytest run.</p></td>
<td><p>May 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-invenio/">pytest-invenio</a></p></td>
<td><p>Pytest fixtures for Invenio.</p></td>
<td><p>Feb 17, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&lt;7,&gt;=6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-involve/">pytest-involve</a></p></td>
<td><p>Run tests covering a specific file or changeset</p></td>
<td><p>Feb 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ipdb/">pytest-ipdb</a></p></td>
<td><p>A py.test plug-in to enable drop to ipdb debugger on test failure.</p></td>
<td><p>Sep 02, 2014</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ipynb/">pytest-ipynb</a></p></td>
<td><p>THIS PROJECT IS ABANDONED</p></td>
<td><p>Jan 29, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-isort/">pytest-isort</a></p></td>
<td><p>py.test plugin to check import ordering using isort</p></td>
<td><p>Feb 08, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-is-running/">pytest-is-running</a></p></td>
<td><p>pytest plugin providing a function to check if pytest is running.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-it/">pytest-it</a></p></td>
<td><p>Pytest plugin to display test reports as a plaintext spec, inspired by Rspec: <a class="reference external" href="https://github.com/mattduck/pytest-it">https://github.com/mattduck/pytest-it</a>.</p></td>
<td><p>Jan 22, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-iterassert/">pytest-iterassert</a></p></td>
<td><p>Nicer list and iterable assertion messages for pytest</p></td>
<td><p>May 11, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jasmine/">pytest-jasmine</a></p></td>
<td><p>Run jasmine tests from your pytest test suite</p></td>
<td><p>Nov 04, 2017</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jest/">pytest-jest</a></p></td>
<td><p>A custom jest-pytest oriented Pytest reporter</p></td>
<td><p>May 22, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.3.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jira/">pytest-jira</a></p></td>
<td><p>py.test JIRA integration plugin, using markers</p></td>
<td><p>Dec 02, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jira-xray/">pytest-jira-xray</a></p></td>
<td><p>pytest plugin to integrate tests with JIRA XRAY</p></td>
<td><p>Feb 26, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jobserver/">pytest-jobserver</a></p></td>
<td><p>Limit parallel tests with posix jobserver.</p></td>
<td><p>May 15, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-joke/">pytest-joke</a></p></td>
<td><p>Test failures are better served with humor.</p></td>
<td><p>Oct 08, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.2.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-json/">pytest-json</a></p></td>
<td><p>Generate JSON test reports</p></td>
<td><p>Jan 18, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-jsonlint/">pytest-jsonlint</a></p></td>
<td><p>UNKNOWN</p></td>
<td><p>Aug 04, 2016</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-json-report/">pytest-json-report</a></p></td>
<td><p>A pytest plugin to report test results as JSON files</p></td>
<td><p>Sep 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.8.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-kafka/">pytest-kafka</a></p></td>
<td><p>Zookeeper, Kafka server, and Kafka consumer fixtures for Pytest</p></td>
<td><p>Aug 24, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-kafkavents/">pytest-kafkavents</a></p></td>
<td><p>A plugin to send pytest events to Kafka</p></td>
<td><p>Sep 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-kind/">pytest-kind</a></p></td>
<td><p>Kubernetes test support with KIND for pytest</p></td>
<td><p>Jan 24, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-kivy/">pytest-kivy</a></p></td>
<td><p>Kivy GUI tests fixtures using pytest</p></td>
<td><p>Jul 06, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-knows/">pytest-knows</a></p></td>
<td><p>A pytest plugin that can automaticly skip test case based on dependence info calculated by trace</p></td>
<td><p>Aug 22, 2014</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-konira/">pytest-konira</a></p></td>
<td><p>Run Konira DSL tests with py.test</p></td>
<td><p>Oct 09, 2011</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-krtech-common/">pytest-krtech-common</a></p></td>
<td><p>pytest krtech common library</p></td>
<td><p>Nov 28, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-kwparametrize/">pytest-kwparametrize</a></p></td>
<td><p>Alternate syntax for &#64;pytest.mark.parametrize with test cases as dictionaries and default value fallbacks</p></td>
<td><p>Jan 22, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lambda/">pytest-lambda</a></p></td>
<td><p>Define pytest fixtures with lambda functions.</p></td>
<td><p>Aug 23, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.6,&lt;7)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lamp/">pytest-lamp</a></p></td>
<td></td>
<td><p>Jan 06, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-layab/">pytest-layab</a></p></td>
<td><p>Pytest fixtures for layab.</p></td>
<td><p>Oct 05, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lazy-fixture/">pytest-lazy-fixture</a></p></td>
<td><p>It helps to use fixtures in pytest.mark.parametrize</p></td>
<td><p>Feb 01, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.2.5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ldap/">pytest-ldap</a></p></td>
<td><p>python-ldap fixtures for pytest</p></td>
<td><p>Aug 18, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-leaks/">pytest-leaks</a></p></td>
<td><p>A pytest plugin to trace resource leaks.</p></td>
<td><p>Nov 27, 2019</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-level/">pytest-level</a></p></td>
<td><p>Select tests of a given level or lower</p></td>
<td><p>Oct 21, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-libfaketime/">pytest-libfaketime</a></p></td>
<td><p>A python-libfaketime plugin for pytest.</p></td>
<td><p>Dec 22, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-libiio/">pytest-libiio</a></p></td>
<td><p>A pytest plugin to manage interfacing with libiio contexts</p></td>
<td><p>Feb 23, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-libnotify/">pytest-libnotify</a></p></td>
<td><p>Pytest plugin that shows notifications about the test run</p></td>
<td><p>Apr 02, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ligo/">pytest-ligo</a></p></td>
<td></td>
<td><p>Jan 16, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lineno/">pytest-lineno</a></p></td>
<td><p>A pytest plugin to show the line numbers of test functions</p></td>
<td><p>Dec 04, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-line-profiler/">pytest-line-profiler</a></p></td>
<td><p>Profile code executed by pytest</p></td>
<td><p>May 03, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lisa/">pytest-lisa</a></p></td>
<td><p>Pytest plugin for organizing tests.</p></td>
<td><p>Jan 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-listener/">pytest-listener</a></p></td>
<td><p>A simple network listener</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-litf/">pytest-litf</a></p></td>
<td><p>A pytest plugin that stream output in LITF format</p></td>
<td><p>Jan 18, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-live/">pytest-live</a></p></td>
<td><p>Live results for pytest</p></td>
<td><p>Mar 08, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-localftpserver/">pytest-localftpserver</a></p></td>
<td><p>A PyTest plugin which provides an FTP fixture for your tests</p></td>
<td><p>Aug 25, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-localserver/">pytest-localserver</a></p></td>
<td><p>py.test plugin to test server connections locally.</p></td>
<td><p>Dec 13, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-localstack/">pytest-localstack</a></p></td>
<td><p>Pytest plugin for AWS integration tests</p></td>
<td><p>Aug 22, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-lockable/">pytest-lockable</a></p></td>
<td><p>lockable resource plugin for pytest</p></td>
<td><p>Feb 28, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-locker/">pytest-locker</a></p></td>
<td><p>Used to lock object during testing. Essentially changing assertions from being hard coded to asserting that nothing changed</p></td>
<td><p>Oct 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-log/">pytest-log</a></p></td>
<td><p>print log</p></td>
<td><p>Aug 15, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.8)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-logbook/">pytest-logbook</a></p></td>
<td><p>py.test plugin to capture logbook log messages</p></td>
<td><p>Nov 23, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.8)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-logdog/">pytest-logdog</a></p></td>
<td><p>Pytest plugin to test logging</p></td>
<td><p>Jun 15, 2021</p></td>
<td><p>1 - Planning</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-logfest/">pytest-logfest</a></p></td>
<td><p>Pytest plugin providing three logger fixtures with basic or full writing to log files</p></td>
<td><p>Jul 21, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-logger/">pytest-logger</a></p></td>
<td><p>Plugin configuring handlers for loggers from Python logging module.</p></td>
<td><p>Jul 25, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-logging/">pytest-logging</a></p></td>
<td><p>Configures logging and allows tweaking the log level with a py.test flag</p></td>
<td><p>Nov 04, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-log-report/">pytest-log-report</a></p></td>
<td><p>Package for creating a pytest test run reprot</p></td>
<td><p>Dec 26, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-loguru/">pytest-loguru</a></p></td>
<td><p>Pytest Loguru</p></td>
<td><p>Feb 27, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-manual-marker/">pytest-manual-marker</a></p></td>
<td><p>pytest marker for marking manual tests</p></td>
<td><p>Oct 11, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-markdown/">pytest-markdown</a></p></td>
<td><p>Test your markdown docs with pytest</p></td>
<td><p>Jan 15, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.1,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-marker-bugzilla/">pytest-marker-bugzilla</a></p></td>
<td><p>py.test bugzilla integration plugin, using markers</p></td>
<td><p>Jan 09, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-markers-presence/">pytest-markers-presence</a></p></td>
<td><p>A simple plugin to detect missed pytest tags and markers”</p></td>
<td><p>Feb 04, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-markfiltration/">pytest-markfiltration</a></p></td>
<td><p>UNKNOWN</p></td>
<td><p>Nov 08, 2011</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mark-no-py3/">pytest-mark-no-py3</a></p></td>
<td><p>pytest plugin and bowler codemod to help migrate tests to Python 3</p></td>
<td><p>May 17, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-marks/">pytest-marks</a></p></td>
<td><p>UNKNOWN</p></td>
<td><p>Nov 23, 2012</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-matcher/">pytest-matcher</a></p></td>
<td><p>Match test output against patterns stored in files</p></td>
<td><p>Dec 10, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-match-skip/">pytest-match-skip</a></p></td>
<td><p>Skip matching marks. Matches partial marks using wildcards.</p></td>
<td><p>May 15, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.4.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mat-report/">pytest-mat-report</a></p></td>
<td><p>this is report</p></td>
<td><p>Jan 20, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-matrix/">pytest-matrix</a></p></td>
<td><p>Provide tools for generating tests from combinations of fixtures.</p></td>
<td><p>Jun 24, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.4.3,&lt;6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mccabe/">pytest-mccabe</a></p></td>
<td><p>pytest plugin to run the mccabe code complexity checker.</p></td>
<td><p>Jul 22, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-md/">pytest-md</a></p></td>
<td><p>Plugin for generating Markdown reports for pytest results</p></td>
<td><p>Jul 11, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.2.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-md-report/">pytest-md-report</a></p></td>
<td><p>A pytest plugin to make a test results report with Markdown table format.</p></td>
<td><p>Feb 06, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (!=6.0.0,&lt;8,&gt;=3.3.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-memprof/">pytest-memprof</a></p></td>
<td><p>Estimates memory consumption of test functions</p></td>
<td><p>Mar 29, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-menu/">pytest-menu</a></p></td>
<td><p>A pytest plugin for console based interactive test selection just after the collection phase</p></td>
<td><p>Oct 04, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mercurial/">pytest-mercurial</a></p></td>
<td><p>pytest plugin to write integration tests for projects using Mercurial Python internals</p></td>
<td><p>Nov 21, 2020</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-message/">pytest-message</a></p></td>
<td><p>Pytest plugin for sending report message of marked tests execution</p></td>
<td><p>Jan 05, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-messenger/">pytest-messenger</a></p></td>
<td><p>Pytest to Slack reporting plugin</p></td>
<td><p>Feb 07, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-metadata/">pytest-metadata</a></p></td>
<td><p>pytest plugin for test session metadata</p></td>
<td><p>Nov 27, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.9.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-metrics/">pytest-metrics</a></p></td>
<td><p>Custom metrics report for pytest</p></td>
<td><p>Apr 04, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mimesis/">pytest-mimesis</a></p></td>
<td><p>Mimesis integration with the pytest test runner</p></td>
<td><p>Mar 21, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-minecraft/">pytest-minecraft</a></p></td>
<td><p>A pytest plugin for running tests against Minecraft releases</p></td>
<td><p>Sep 26, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.0.1,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-missing-fixtures/">pytest-missing-fixtures</a></p></td>
<td><p>Pytest plugin that creates missing fixtures</p></td>
<td><p>Oct 14, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ml/">pytest-ml</a></p></td>
<td><p>Test your machine learning!</p></td>
<td><p>May 04, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mocha/">pytest-mocha</a></p></td>
<td><p>pytest plugin to display test execution output like a mochajs</p></td>
<td><p>Apr 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock/">pytest-mock</a></p></td>
<td><p>Thin-wrapper around the mock package for easier use with pytest</p></td>
<td><p>Jan 28, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock-api/">pytest-mock-api</a></p></td>
<td><p>A mock API server with configurable routes and responses available as a fixture.</p></td>
<td><p>Feb 13, 2019</p></td>
<td><p>1 - Planning</p></td>
<td><p>pytest (&gt;=4.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock-generator/">pytest-mock-generator</a></p></td>
<td><p>A pytest fixture wrapper for <a class="reference external" href="https://pypi.org/project/mock-generator">https://pypi.org/project/mock-generator</a></p></td>
<td><p>Jan 05, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock-helper/">pytest-mock-helper</a></p></td>
<td><p>Help you mock HTTP call and generate mock code</p></td>
<td><p>Jan 24, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mockito/">pytest-mockito</a></p></td>
<td><p>Base fixtures for mockito</p></td>
<td><p>Jul 11, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mockredis/">pytest-mockredis</a></p></td>
<td><p>An in-memory mock of a Redis server that runs in a separate thread. This is to be used for unit-tests that require a Redis database.</p></td>
<td><p>Jan 02, 2018</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock-resources/">pytest-mock-resources</a></p></td>
<td><p>A pytest plugin for easily instantiating reproducible mock resources.</p></td>
<td><p>Feb 26, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=1.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mock-server/">pytest-mock-server</a></p></td>
<td><p>Mock server plugin for pytest</p></td>
<td><p>Jan 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mockservers/">pytest-mockservers</a></p></td>
<td><p>A set of fixtures to test your requests to HTTP/UDP servers</p></td>
<td><p>Mar 31, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-modified-env/">pytest-modified-env</a></p></td>
<td><p>Pytest plugin to fail a test if it leaves modified `os.environ` afterwards.</p></td>
<td><p>Jan 29, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-modifyjunit/">pytest-modifyjunit</a></p></td>
<td><p>Utility for adding additional properties to junit xml for IDM QE</p></td>
<td><p>Jan 10, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-modifyscope/">pytest-modifyscope</a></p></td>
<td><p>pytest plugin to modify fixture scope</p></td>
<td><p>Apr 12, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-molecule/">pytest-molecule</a></p></td>
<td><p>PyTest Molecule Plugin :: discover and run molecule tests</p></td>
<td><p>Oct 06, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mongo/">pytest-mongo</a></p></td>
<td><p>MongoDB process and client fixtures plugin for Pytest.</p></td>
<td><p>Jun 07, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mongodb/">pytest-mongodb</a></p></td>
<td><p>pytest plugin for MongoDB fixtures</p></td>
<td><p>Dec 07, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.5.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-monitor/">pytest-monitor</a></p></td>
<td><p>Pytest plugin for analyzing resource usage.</p></td>
<td><p>Dec 23, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-monkeyplus/">pytest-monkeyplus</a></p></td>
<td><p>pytest’s monkeypatch subclass with extra functionalities</p></td>
<td><p>Sep 18, 2012</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-monkeytype/">pytest-monkeytype</a></p></td>
<td><p>pytest-monkeytype: Generate Monkeytype annotations from your pytest tests.</p></td>
<td><p>Jul 29, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-moto/">pytest-moto</a></p></td>
<td><p>Fixtures for integration tests of AWS services,uses moto mocking library.</p></td>
<td><p>Aug 28, 2015</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-motor/">pytest-motor</a></p></td>
<td><p>A pytest plugin for motor, the non-blocking MongoDB driver.</p></td>
<td><p>Jul 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mp/">pytest-mp</a></p></td>
<td><p>A test batcher for multiprocessed Pytest runs</p></td>
<td><p>May 23, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mpi/">pytest-mpi</a></p></td>
<td><p>pytest plugin to collect information from tests</p></td>
<td><p>Jan 08, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mpl/">pytest-mpl</a></p></td>
<td><p>pytest plugin to help with testing figures output from Matplotlib</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mproc/">pytest-mproc</a></p></td>
<td><p>low-startup-overhead, scalable, distributed-testing pytest plugin</p></td>
<td><p>Feb 28, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-multi-check/">pytest-multi-check</a></p></td>
<td><p>Pytest-плагин, реализует возможность мульти проверок и мягких проверок</p></td>
<td><p>Jun 03, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-multihost/">pytest-multihost</a></p></td>
<td><p>Utility for writing multi-host tests for pytest</p></td>
<td><p>Apr 07, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-multilog/">pytest-multilog</a></p></td>
<td><p>Multi-process logs handling and other helpers for pytest</p></td>
<td><p>Jun 10, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-multithreading/">pytest-multithreading</a></p></td>
<td><p>a pytest plugin for th and concurrent testing</p></td>
<td><p>Aug 12, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mutagen/">pytest-mutagen</a></p></td>
<td><p>Add the mutation testing feature to pytest</p></td>
<td><p>Jul 24, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mypy/">pytest-mypy</a></p></td>
<td><p>Mypy static type checker plugin for Pytest</p></td>
<td><p>Feb 07, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2) ; python_version &gt;= “3.10”</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mypyd/">pytest-mypyd</a></p></td>
<td><p>Mypy static type checker plugin for Pytest</p></td>
<td><p>Aug 20, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&lt;4.7,&gt;=2.8) ; python_version &lt; “3.5”</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mypy-plugins/">pytest-mypy-plugins</a></p></td>
<td><p>pytest plugin for writing tests for mypy plugins</p></td>
<td><p>Jan 11, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mypy-plugins-shim/">pytest-mypy-plugins-shim</a></p></td>
<td><p>Substitute for “pytest-mypy-plugins” for Python implementations which aren’t supported by mypy.</p></td>
<td><p>Apr 12, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mypy-testing/">pytest-mypy-testing</a></p></td>
<td><p>Pytest plugin to check mypy output.</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-mysql/">pytest-mysql</a></p></td>
<td><p>MySQL process and client fixtures for pytest</p></td>
<td><p>Feb 15, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-needle/">pytest-needle</a></p></td>
<td><p>pytest plugin for visual testing websites using selenium</p></td>
<td><p>Dec 10, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&lt;5.0.0,&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-neo/">pytest-neo</a></p></td>
<td><p>pytest-neo is a plugin for pytest that shows tests like screen of Matrix.</p></td>
<td><p>Jan 08, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-network/">pytest-network</a></p></td>
<td><p>A simple plugin to disable network on socket level.</p></td>
<td><p>May 07, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-never-sleep/">pytest-never-sleep</a></p></td>
<td><p>pytest plugin helps to avoid adding tests without mock `time.sleep`</p></td>
<td><p>May 05, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.5.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nginx/">pytest-nginx</a></p></td>
<td><p>nginx fixture for pytest</p></td>
<td><p>Aug 12, 2017</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nginx-iplweb/">pytest-nginx-iplweb</a></p></td>
<td><p>nginx fixture for pytest - iplweb temporary fork</p></td>
<td><p>Mar 01, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ngrok/">pytest-ngrok</a></p></td>
<td></td>
<td><p>Jan 20, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ngsfixtures/">pytest-ngsfixtures</a></p></td>
<td><p>pytest ngs fixtures</p></td>
<td><p>Sep 06, 2019</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nice/">pytest-nice</a></p></td>
<td><p>A pytest plugin that alerts user of failed test cases with screen notifications</p></td>
<td><p>May 04, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nice-parametrize/">pytest-nice-parametrize</a></p></td>
<td><p>A small snippet for nicer PyTest’s Parametrize</p></td>
<td><p>Apr 17, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nlcov/">pytest-nlcov</a></p></td>
<td><p>Pytest plugin to get the coverage of the new lines (based on git diff) only</p></td>
<td><p>Jul 07, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nocustom/">pytest-nocustom</a></p></td>
<td><p>Run all tests without custom markers</p></td>
<td><p>Jul 07, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nodev/">pytest-nodev</a></p></td>
<td><p>Test-driven source code search for Python.</p></td>
<td><p>Jul 21, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nogarbage/">pytest-nogarbage</a></p></td>
<td><p>Ensure a test produces no garbage</p></td>
<td><p>Aug 29, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-notice/">pytest-notice</a></p></td>
<td><p>Send pytest execution result email</p></td>
<td><p>Nov 05, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-notification/">pytest-notification</a></p></td>
<td><p>A pytest plugin for sending a desktop notification and playing a sound upon completion of tests</p></td>
<td><p>Jun 19, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-notifier/">pytest-notifier</a></p></td>
<td><p>A pytest plugin to notify test result</p></td>
<td><p>Jun 12, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-notimplemented/">pytest-notimplemented</a></p></td>
<td><p>Pytest markers for not implemented features and tests.</p></td>
<td><p>Aug 27, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.1,&lt;6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-notion/">pytest-notion</a></p></td>
<td><p>A PyTest Reporter to send test runs to Notion.so</p></td>
<td><p>Aug 07, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-nunit/">pytest-nunit</a></p></td>
<td><p>A pytest plugin for generating NUnit3 test result XML output</p></td>
<td><p>Aug 04, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ochrus/">pytest-ochrus</a></p></td>
<td><p>pytest results data-base and HTML reporter</p></td>
<td><p>Feb 21, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-odoo/">pytest-odoo</a></p></td>
<td><p>py.test plugin to run Odoo tests</p></td>
<td><p>Feb 08, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-odoo-fixtures/">pytest-odoo-fixtures</a></p></td>
<td><p>Project description</p></td>
<td><p>Jun 25, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-oerp/">pytest-oerp</a></p></td>
<td><p>pytest plugin to test OpenERP modules</p></td>
<td><p>Feb 28, 2012</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ok/">pytest-ok</a></p></td>
<td><p>The ultimate pytest output plugin</p></td>
<td><p>Apr 01, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-only/">pytest-only</a></p></td>
<td><p>Use &#64;pytest.mark.only to run a single test</p></td>
<td><p>Jan 19, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-oot/">pytest-oot</a></p></td>
<td><p>Run object-oriented tests in a simple format</p></td>
<td><p>Sep 18, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-openfiles/">pytest-openfiles</a></p></td>
<td><p>Pytest plugin for detecting inadvertent open file handles</p></td>
<td><p>Apr 16, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-opentmi/">pytest-opentmi</a></p></td>
<td><p>pytest plugin for publish results to opentmi</p></td>
<td><p>Feb 28, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-operator/">pytest-operator</a></p></td>
<td><p>Fixtures for Operators</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-optional/">pytest-optional</a></p></td>
<td><p>include/exclude values of fixtures in pytest</p></td>
<td><p>Oct 07, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-optional-tests/">pytest-optional-tests</a></p></td>
<td><p>Easy declaration of optional tests (i.e., that are not run by default)</p></td>
<td><p>Jul 09, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-orchestration/">pytest-orchestration</a></p></td>
<td><p>A pytest plugin for orchestrating tests</p></td>
<td><p>Jul 18, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-order/">pytest-order</a></p></td>
<td><p>pytest plugin to run your tests in a specific order</p></td>
<td><p>Jan 09, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.0) ; python_version &lt; “3.10”</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ordering/">pytest-ordering</a></p></td>
<td><p>pytest plugin to run your tests in a specific order</p></td>
<td><p>Nov 14, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-osxnotify/">pytest-osxnotify</a></p></td>
<td><p>OS X notifications for py.test results.</p></td>
<td><p>May 15, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-otel/">pytest-otel</a></p></td>
<td><p>pytest-otel report OpenTelemetry traces about test executed</p></td>
<td><p>Jan 31, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pact/">pytest-pact</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Jan 07, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pahrametahrize/">pytest-pahrametahrize</a></p></td>
<td><p>Parametrize your tests with a Boston accent.</p></td>
<td><p>Nov 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0,&lt;7.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parallel/">pytest-parallel</a></p></td>
<td><p>a pytest plugin for parallel and concurrent testing</p></td>
<td><p>Oct 10, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parallel-39/">pytest-parallel-39</a></p></td>
<td><p>a pytest plugin for parallel and concurrent testing</p></td>
<td><p>Jul 12, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-param/">pytest-param</a></p></td>
<td><p>pytest plugin to test all, first, last or random params</p></td>
<td><p>Sep 11, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-paramark/">pytest-paramark</a></p></td>
<td><p>Configure pytest fixtures using a combination of”parametrize” and markers</p></td>
<td><p>Jan 10, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parametrization/">pytest-parametrization</a></p></td>
<td><p>Simpler PyTest parametrization</p></td>
<td><p>Nov 30, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parametrize-cases/">pytest-parametrize-cases</a></p></td>
<td><p>A more user-friendly way to write parametrized tests.</p></td>
<td><p>Dec 12, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parametrized/">pytest-parametrized</a></p></td>
<td><p>Pytest plugin for parametrizing tests with default iterables.</p></td>
<td><p>Oct 19, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-parawtf/">pytest-parawtf</a></p></td>
<td><p>Finally spell paramete?ri[sz]e correctly</p></td>
<td><p>Dec 03, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pass/">pytest-pass</a></p></td>
<td><p>Check out <a class="reference external" href="https://github.com/elilutsky/pytest-pass">https://github.com/elilutsky/pytest-pass</a></p></td>
<td><p>Dec 04, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-passrunner/">pytest-passrunner</a></p></td>
<td><p>Pytest plugin providing the ‘run_on_pass’ marker</p></td>
<td><p>Feb 10, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-paste-config/">pytest-paste-config</a></p></td>
<td><p>Allow setting the path to a paste config file</p></td>
<td><p>Sep 18, 2013</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-patches/">pytest-patches</a></p></td>
<td><p>A contextmanager pytest fixture for handling multiple mock patches</p></td>
<td><p>Aug 30, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pdb/">pytest-pdb</a></p></td>
<td><p>pytest plugin which adds pdb helper commands related to pytest.</p></td>
<td><p>Jul 31, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-peach/">pytest-peach</a></p></td>
<td><p>pytest plugin for fuzzing with Peach API Security</p></td>
<td><p>Apr 12, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.7)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pep257/">pytest-pep257</a></p></td>
<td><p>py.test plugin for pep257</p></td>
<td><p>Jul 09, 2016</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pep8/">pytest-pep8</a></p></td>
<td><p>pytest plugin to check PEP8 requirements</p></td>
<td><p>Apr 27, 2014</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-percent/">pytest-percent</a></p></td>
<td><p>Change the exit code of pytest test sessions when a required percent of tests pass.</p></td>
<td><p>May 21, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-perf/">pytest-perf</a></p></td>
<td><p>pytest-perf</p></td>
<td><p>Feb 05, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6) ; extra == ‘testing’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-performance/">pytest-performance</a></p></td>
<td><p>A simple plugin to ensure the execution of critical sections of code has not been impacted</p></td>
<td><p>Sep 11, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.7.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-persistence/">pytest-persistence</a></p></td>
<td><p>Pytest tool for persistent objects</p></td>
<td><p>Dec 07, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pg/">pytest-pg</a></p></td>
<td><p>Helps to run PostgreSQL in docker as pytest fixture</p></td>
<td><p>Jan 18, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pgsql/">pytest-pgsql</a></p></td>
<td><p>Pytest plugins and helpers for tests using a Postgres database.</p></td>
<td><p>May 13, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-phmdoctest/">pytest-phmdoctest</a></p></td>
<td><p>pytest plugin to test Python examples in Markdown using phmdoctest.</p></td>
<td><p>Nov 10, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2) ; extra == ‘test’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-picked/">pytest-picked</a></p></td>
<td><p>Run the tests related to the changed files</p></td>
<td><p>Dec 23, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pigeonhole/">pytest-pigeonhole</a></p></td>
<td></td>
<td><p>Jun 25, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pikachu/">pytest-pikachu</a></p></td>
<td><p>Show surprise when tests are passing</p></td>
<td><p>Aug 05, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pilot/">pytest-pilot</a></p></td>
<td><p>Slice in your test base thanks to powerful markers.</p></td>
<td><p>Oct 09, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pings/">pytest-pings</a></p></td>
<td><p>🦊 The pytest plugin for Firefox Telemetry 📊</p></td>
<td><p>Jun 29, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pinned/">pytest-pinned</a></p></td>
<td><p>A simple pytest plugin for pinning tests</p></td>
<td><p>Sep 17, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pinpoint/">pytest-pinpoint</a></p></td>
<td><p>A pytest plugin which runs SBFL algorithms to detect faults.</p></td>
<td><p>Sep 25, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=4.4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pipeline/">pytest-pipeline</a></p></td>
<td><p>Pytest plugin for functional testing of data analysispipelines</p></td>
<td><p>Jan 24, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-platform-markers/">pytest-platform-markers</a></p></td>
<td><p>Markers for pytest to skip tests on specific platforms</p></td>
<td><p>Sep 09, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-play/">pytest-play</a></p></td>
<td><p>pytest plugin that let you automate actions and assertions with test metrics reporting executing plain YAML files</p></td>
<td><p>Jun 12, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-playbook/">pytest-playbook</a></p></td>
<td><p>Pytest plugin for reading playbooks.</p></td>
<td><p>Jan 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-playwright/">pytest-playwright</a></p></td>
<td><p>A pytest wrapper with fixtures for Playwright to automate web browsers</p></td>
<td><p>Feb 10, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-playwrights/">pytest-playwrights</a></p></td>
<td><p>A pytest wrapper with fixtures for Playwright to automate web browsers</p></td>
<td><p>Dec 02, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-playwright-snapshot/">pytest-playwright-snapshot</a></p></td>
<td><p>A pytest wrapper for snapshot testing with playwright</p></td>
<td><p>Aug 19, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-plt/">pytest-plt</a></p></td>
<td><p>Fixtures for quickly making Matplotlib plots in tests</p></td>
<td><p>Aug 17, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-plugin-helpers/">pytest-plugin-helpers</a></p></td>
<td><p>A plugin to help developing and testing other plugins</p></td>
<td><p>Nov 23, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-plus/">pytest-plus</a></p></td>
<td><p>PyTest Plus Plugin :: extends pytest functionality</p></td>
<td><p>Mar 19, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.50)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pmisc/">pytest-pmisc</a></p></td>
<td></td>
<td><p>Mar 21, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pointers/">pytest-pointers</a></p></td>
<td><p>Pytest plugin to define functions you test with special marks for better navigation and reports</p></td>
<td><p>Oct 14, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-polarion-cfme/">pytest-polarion-cfme</a></p></td>
<td><p>pytest plugin for collecting test cases and recording test results</p></td>
<td><p>Nov 13, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-polarion-collect/">pytest-polarion-collect</a></p></td>
<td><p>pytest plugin for collecting polarion test cases data</p></td>
<td><p>Jun 18, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-polecat/">pytest-polecat</a></p></td>
<td><p>Provides Polecat pytest fixtures</p></td>
<td><p>Aug 12, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ponyorm/">pytest-ponyorm</a></p></td>
<td><p>PonyORM in Pytest</p></td>
<td><p>Oct 31, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-poo/">pytest-poo</a></p></td>
<td><p>Visualize your crappy tests</p></td>
<td><p>Mar 25, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-poo-fail/">pytest-poo-fail</a></p></td>
<td><p>Visualize your failed tests with poo</p></td>
<td><p>Feb 12, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pop/">pytest-pop</a></p></td>
<td><p>A pytest plugin to help with testing pop projects</p></td>
<td><p>Aug 19, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-portion/">pytest-portion</a></p></td>
<td><p>Select a portion of the collected tests</p></td>
<td><p>Jan 28, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-postgres/">pytest-postgres</a></p></td>
<td><p>Run PostgreSQL in Docker container in Pytest.</p></td>
<td><p>Mar 22, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-postgresql/">pytest-postgresql</a></p></td>
<td><p>Postgresql fixtures and fixture factories for Pytest.</p></td>
<td><p>Dec 22, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-power/">pytest-power</a></p></td>
<td><p>pytest plugin with powerful fixtures</p></td>
<td><p>Dec 31, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pretty-terminal/">pytest-pretty-terminal</a></p></td>
<td><p>pytest plugin for generating prettier terminal output</p></td>
<td><p>Jan 31, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.4.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pride/">pytest-pride</a></p></td>
<td><p>Minitest-style test colors</p></td>
<td><p>Apr 02, 2016</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-print/">pytest-print</a></p></td>
<td><p>pytest-print adds the printer fixture you can use to print messages to the user (directly to the pytest runner, not stdout)</p></td>
<td><p>Dec 28, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-profiles/">pytest-profiles</a></p></td>
<td><p>pytest plugin for configuration profiles</p></td>
<td><p>Dec 09, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.7.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-profiling/">pytest-profiling</a></p></td>
<td><p>Profiling plugin for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-progress/">pytest-progress</a></p></td>
<td><p>pytest plugin for instant test progress status</p></td>
<td><p>Jan 31, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-prometheus/">pytest-prometheus</a></p></td>
<td><p>Report test pass / failures to a Prometheus PushGateway</p></td>
<td><p>Oct 03, 2017</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-prometheus-pushgateway/">pytest-prometheus-pushgateway</a></p></td>
<td><p>Pytest report plugin for Zulip</p></td>
<td><p>Feb 23, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-prosper/">pytest-prosper</a></p></td>
<td><p>Test helpers for Prosper projects</p></td>
<td><p>Sep 24, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pspec/">pytest-pspec</a></p></td>
<td><p>A rspec format reporter for Python ptest</p></td>
<td><p>Jun 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-psqlgraph/">pytest-psqlgraph</a></p></td>
<td><p>pytest plugin for testing applications that use psqlgraph</p></td>
<td><p>Oct 19, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ptera/">pytest-ptera</a></p></td>
<td><p>Use ptera probes in tests</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.4,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pudb/">pytest-pudb</a></p></td>
<td><p>Pytest PuDB debugger integration</p></td>
<td><p>Oct 25, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-purkinje/">pytest-purkinje</a></p></td>
<td><p>py.test plugin for purkinje test runner</p></td>
<td><p>Oct 28, 2017</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pycharm/">pytest-pycharm</a></p></td>
<td><p>Plugin for py.test to enter PyCharm debugger on uncaught exceptions</p></td>
<td><p>Aug 13, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pycodestyle/">pytest-pycodestyle</a></p></td>
<td><p>pytest plugin to run pycodestyle</p></td>
<td><p>Aug 10, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pydev/">pytest-pydev</a></p></td>
<td><p>py.test plugin to connect to a remote debug server with PyDev or PyCharm.</p></td>
<td><p>Nov 15, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pydocstyle/">pytest-pydocstyle</a></p></td>
<td><p>pytest plugin to run pydocstyle</p></td>
<td><p>Aug 10, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pylint/">pytest-pylint</a></p></td>
<td><p>pytest plugin to check source code with pylint</p></td>
<td><p>Nov 09, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.4)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pypi/">pytest-pypi</a></p></td>
<td><p>Easily test your HTTP library against a local copy of pypi</p></td>
<td><p>Mar 04, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pypom-navigation/">pytest-pypom-navigation</a></p></td>
<td><p>Core engine for cookiecutter-qa and pytest-play packages</p></td>
<td><p>Feb 18, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.7)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pyppeteer/">pytest-pyppeteer</a></p></td>
<td><p>A plugin to run pyppeteer in pytest</p></td>
<td><p>Jan 27, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pyq/">pytest-pyq</a></p></td>
<td><p>Pytest fixture “q” for pyq</p></td>
<td><p>Mar 10, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pyramid/">pytest-pyramid</a></p></td>
<td><p>pytest_pyramid - provides fixtures for testing pyramid applications with pytest test suite</p></td>
<td><p>Oct 15, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pyramid-server/">pytest-pyramid-server</a></p></td>
<td><p>Pyramid server fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pyright/">pytest-pyright</a></p></td>
<td><p>Pytest plugin for type checking code with Pyright</p></td>
<td><p>Aug 16, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pytestrail/">pytest-pytestrail</a></p></td>
<td><p>Pytest plugin for interaction with TestRail</p></td>
<td><p>Aug 27, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.8.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pythonpath/">pytest-pythonpath</a></p></td>
<td><p>pytest plugin for adding to the PYTHONPATH from command line or configs.</p></td>
<td><p>Feb 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&lt;7,&gt;=2.5.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-pytorch/">pytest-pytorch</a></p></td>
<td><p>pytest plugin for a better developer experience when working with the PyTorch test suite</p></td>
<td><p>May 25, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qasync/">pytest-qasync</a></p></td>
<td><p>Pytest support for qasync.</p></td>
<td><p>Jul 12, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qatouch/">pytest-qatouch</a></p></td>
<td><p>Pytest plugin for uploading test results to your QA Touch Testrun.</p></td>
<td><p>Jun 26, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qgis/">pytest-qgis</a></p></td>
<td><p>A pytest plugin for testing QGIS python plugins</p></td>
<td><p>Jan 18, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qml/">pytest-qml</a></p></td>
<td><p>Run QML Tests with pytest</p></td>
<td><p>Dec 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qr/">pytest-qr</a></p></td>
<td><p>pytest plugin to generate test result QR codes</p></td>
<td><p>Nov 25, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qt/">pytest-qt</a></p></td>
<td><p>pytest support for PyQt and PySide applications</p></td>
<td><p>Jun 13, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-qt-app/">pytest-qt-app</a></p></td>
<td><p>QT app fixture for py.test</p></td>
<td><p>Dec 23, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-quarantine/">pytest-quarantine</a></p></td>
<td><p>A plugin for pytest to manage expected test failures</p></td>
<td><p>Nov 24, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-quickcheck/">pytest-quickcheck</a></p></td>
<td><p>pytest plugin to generate random data inspired by QuickCheck</p></td>
<td><p>Nov 15, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&lt;6.0.0,&gt;=4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rabbitmq/">pytest-rabbitmq</a></p></td>
<td><p>RabbitMQ process and client fixtures for pytest</p></td>
<td><p>Feb 11, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-race/">pytest-race</a></p></td>
<td><p>Race conditions tester for pytest</p></td>
<td><p>Nov 21, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rage/">pytest-rage</a></p></td>
<td><p>pytest plugin to implement PEP712</p></td>
<td><p>Oct 21, 2011</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rail/">pytest-rail</a></p></td>
<td><p>pytest plugin for creating TestRail runs and adding results</p></td>
<td><p>Feb 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-railflow-testrail-reporter/">pytest-railflow-testrail-reporter</a></p></td>
<td><p>Generate json reports along with specified metadata defined in test markers.</p></td>
<td><p>Feb 25, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-raises/">pytest-raises</a></p></td>
<td><p>An implementation of pytest.raises as a pytest.mark fixture</p></td>
<td><p>Apr 23, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.2.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-raisesregexp/">pytest-raisesregexp</a></p></td>
<td><p>Simple pytest plugin to look for regex in Exceptions</p></td>
<td><p>Dec 18, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-raisin/">pytest-raisin</a></p></td>
<td><p>Plugin enabling the use of exception instances with pytest.raises</p></td>
<td><p>Feb 06, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-random/">pytest-random</a></p></td>
<td><p>py.test plugin to randomize tests</p></td>
<td><p>Apr 28, 2013</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-randomly/">pytest-randomly</a></p></td>
<td><p>Pytest plugin to randomly order tests and control random.seed.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-randomness/">pytest-randomness</a></p></td>
<td><p>Pytest plugin about random seed management</p></td>
<td><p>May 30, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-random-num/">pytest-random-num</a></p></td>
<td><p>Randomise the order in which pytest tests are run with some control over the randomness</p></td>
<td><p>Oct 19, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-random-order/">pytest-random-order</a></p></td>
<td><p>Randomise the order in which pytest tests are run with some control over the randomness</p></td>
<td><p>Nov 30, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-readme/">pytest-readme</a></p></td>
<td><p>Test your README.md file</p></td>
<td><p>Dec 28, 2014</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reana/">pytest-reana</a></p></td>
<td><p>Pytest fixtures for REANA.</p></td>
<td><p>Feb 26, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-recording/">pytest-recording</a></p></td>
<td><p>A pytest plugin that allows you recording of network interactions via VCR.py</p></td>
<td><p>Jul 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-recordings/">pytest-recordings</a></p></td>
<td><p>Provides pytest plugins for reporting request/response traffic, screenshots, and more to ReportPortal</p></td>
<td><p>Aug 13, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-redis/">pytest-redis</a></p></td>
<td><p>Redis fixtures and fixture factories for Pytest.</p></td>
<td><p>Feb 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-redislite/">pytest-redislite</a></p></td>
<td><p>Pytest plugin for testing code using Redis</p></td>
<td><p>Sep 19, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-redmine/">pytest-redmine</a></p></td>
<td><p>Pytest plugin for redmine</p></td>
<td><p>Mar 19, 2018</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ref/">pytest-ref</a></p></td>
<td><p>A plugin to store reference files to ease regression testing</p></td>
<td><p>Nov 23, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reference-formatter/">pytest-reference-formatter</a></p></td>
<td><p>Conveniently run pytest with a dot-formatted test reference.</p></td>
<td><p>Oct 01, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-regressions/">pytest-regressions</a></p></td>
<td><p>Easy to use fixtures to write regression tests.</p></td>
<td><p>Jan 19, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-regtest/">pytest-regtest</a></p></td>
<td><p>pytest plugin for regression tests</p></td>
<td><p>Jun 03, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-relative-order/">pytest-relative-order</a></p></td>
<td><p>a pytest plugin that sorts tests using “before” and “after” markers</p></td>
<td><p>May 17, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-relaxed/">pytest-relaxed</a></p></td>
<td><p>Relaxed test discovery/organization for pytest</p></td>
<td><p>Jun 14, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&lt;5,&gt;=3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-remfiles/">pytest-remfiles</a></p></td>
<td><p>Pytest plugin to create a temporary directory with remote files</p></td>
<td><p>Jul 01, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-remotedata/">pytest-remotedata</a></p></td>
<td><p>Pytest plugin for controlling remote data access.</p></td>
<td><p>Dec 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-remote-response/">pytest-remote-response</a></p></td>
<td><p>Pytest plugin for capturing and mocking connection requests.</p></td>
<td><p>Jun 30, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-remove-stale-bytecode/">pytest-remove-stale-bytecode</a></p></td>
<td><p>py.test plugin to remove stale byte code files.</p></td>
<td><p>Mar 04, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reorder/">pytest-reorder</a></p></td>
<td><p>Reorder tests depending on their paths and names.</p></td>
<td><p>May 31, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-repeat/">pytest-repeat</a></p></td>
<td><p>pytest plugin for repeating tests</p></td>
<td><p>Oct 31, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-replay/">pytest-replay</a></p></td>
<td><p>Saves previous test runs and allow re-execute previous pytest runs to reproduce crashes or flaky tests</p></td>
<td><p>Jun 09, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-repo-health/">pytest-repo-health</a></p></td>
<td><p>A pytest plugin to report on repository standards conformance</p></td>
<td><p>Dec 16, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-report/">pytest-report</a></p></td>
<td><p>Creates json report that is compatible with atom.io’s linter message format</p></td>
<td><p>May 11, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reporter/">pytest-reporter</a></p></td>
<td><p>Generate Pytest reports with templates</p></td>
<td><p>Jul 22, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reporter-html1/">pytest-reporter-html1</a></p></td>
<td><p>A basic HTML report template for Pytest</p></td>
<td><p>Jun 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reportinfra/">pytest-reportinfra</a></p></td>
<td><p>Pytest plugin for reportinfra</p></td>
<td><p>Aug 11, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reporting/">pytest-reporting</a></p></td>
<td><p>A plugin to report summarized results in a table format</p></td>
<td><p>Oct 25, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reportlog/">pytest-reportlog</a></p></td>
<td><p>Replacement for the –resultlog option, focused in simplicity and extensibility</p></td>
<td><p>Dec 11, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-report-me/">pytest-report-me</a></p></td>
<td><p>A pytest plugin to generate report.</p></td>
<td><p>Dec 31, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-report-parameters/">pytest-report-parameters</a></p></td>
<td><p>pytest plugin for adding tests’ parameters to junit report</p></td>
<td><p>Jun 18, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reportportal/">pytest-reportportal</a></p></td>
<td><p>Agent for Reporting results of tests to the Report Portal</p></td>
<td><p>Feb 22, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.8.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reqs/">pytest-reqs</a></p></td>
<td><p>pytest plugin to check pinned requirements</p></td>
<td><p>May 12, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-requests/">pytest-requests</a></p></td>
<td><p>A simple plugin to use with pytest</p></td>
<td><p>Jun 24, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-requires/">pytest-requires</a></p></td>
<td><p>A pytest plugin to elegantly skip tests with optional requirements</p></td>
<td><p>Dec 21, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reraise/">pytest-reraise</a></p></td>
<td><p>Make multi-threaded pytest test cases fail when they should</p></td>
<td><p>Jun 17, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rerun/">pytest-rerun</a></p></td>
<td><p>Re-run only changed files in specified branch</p></td>
<td><p>Jul 08, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rerunfailures/">pytest-rerunfailures</a></p></td>
<td><p>pytest plugin to re-run tests to eliminate flaky failures</p></td>
<td><p>Sep 17, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-resilient-circuits/">pytest-resilient-circuits</a></p></td>
<td><p>Resilient Circuits fixtures for PyTest.</p></td>
<td><p>Jan 20, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-resource/">pytest-resource</a></p></td>
<td><p>Load resource fixture plugin to use with pytest</p></td>
<td><p>Nov 14, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-resource-path/">pytest-resource-path</a></p></td>
<td><p>Provides path for uniform access to test resources in isolated directory</p></td>
<td><p>May 01, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-responsemock/">pytest-responsemock</a></p></td>
<td><p>Simplified requests calls mocking for pytest</p></td>
<td><p>Feb 04, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-responses/">pytest-responses</a></p></td>
<td><p>py.test integration for responses</p></td>
<td><p>Apr 26, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-restrict/">pytest-restrict</a></p></td>
<td><p>Pytest plugin to restrict the test types allowed</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rethinkdb/">pytest-rethinkdb</a></p></td>
<td><p>A RethinkDB plugin for pytest.</p></td>
<td><p>Jul 24, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-reverse/">pytest-reverse</a></p></td>
<td><p>Pytest plugin to reverse test order.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rich/">pytest-rich</a></p></td>
<td><p>Leverage rich for richer test session output</p></td>
<td><p>Mar 03, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=7.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rich-reporter/">pytest-rich-reporter</a></p></td>
<td><p>A pytest plugin using Rich for beautiful test result formatting.</p></td>
<td><p>Feb 17, 2022</p></td>
<td><p>1 - Planning</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ringo/">pytest-ringo</a></p></td>
<td><p>pytest plugin to test webapplications using the Ringo webframework</p></td>
<td><p>Sep 27, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rng/">pytest-rng</a></p></td>
<td><p>Fixtures for seeding tests and making randomness reproducible</p></td>
<td><p>Aug 08, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-roast/">pytest-roast</a></p></td>
<td><p>pytest plugin for ROAST configuration override and fixtures</p></td>
<td><p>Jul 29, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rocketchat/">pytest-rocketchat</a></p></td>
<td><p>Pytest to Rocket.Chat reporting plugin</p></td>
<td><p>Apr 18, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rotest/">pytest-rotest</a></p></td>
<td><p>Pytest integration with rotest</p></td>
<td><p>Sep 08, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rpc/">pytest-rpc</a></p></td>
<td><p>Extend py.test for RPC OpenStack testing.</p></td>
<td><p>Feb 22, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (~=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rst/">pytest-rst</a></p></td>
<td><p>Test code from RST documents with pytest</p></td>
<td><p>Sep 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rt/">pytest-rt</a></p></td>
<td><p>pytest data collector plugin for Testgr</p></td>
<td><p>Dec 22, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-rts/">pytest-rts</a></p></td>
<td><p>Coverage-based regression test selection (RTS) plugin for pytest</p></td>
<td><p>May 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-run-changed/">pytest-run-changed</a></p></td>
<td><p>Pytest plugin that runs changed tests only</p></td>
<td><p>Apr 02, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-runfailed/">pytest-runfailed</a></p></td>
<td><p>implement a –failed option for pytest</p></td>
<td><p>Mar 24, 2016</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-runner/">pytest-runner</a></p></td>
<td><p>Invoke py.test as distutils command with dependency resolution</p></td>
<td><p>Feb 25, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6) ; extra == ‘testing’</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-runtime-xfail/">pytest-runtime-xfail</a></p></td>
<td><p>Call runtime_xfail() to mark running test as xfail.</p></td>
<td><p>Aug 26, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-salt/">pytest-salt</a></p></td>
<td><p>Pytest Salt Plugin</p></td>
<td><p>Jan 27, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-salt-containers/">pytest-salt-containers</a></p></td>
<td><p>A Pytest plugin that builds and creates docker containers</p></td>
<td><p>Nov 09, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-salt-factories/">pytest-salt-factories</a></p></td>
<td><p>Pytest Salt Plugin</p></td>
<td><p>Feb 19, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-salt-from-filenames/">pytest-salt-from-filenames</a></p></td>
<td><p>Simple PyTest Plugin For Salt’s Test Suite Specifically</p></td>
<td><p>Jan 29, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-salt-runtests-bridge/">pytest-salt-runtests-bridge</a></p></td>
<td><p>Simple PyTest Plugin For Salt’s Test Suite Specifically</p></td>
<td><p>Dec 05, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=4.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sanic/">pytest-sanic</a></p></td>
<td><p>a pytest plugin for Sanic</p></td>
<td><p>Oct 25, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sanity/">pytest-sanity</a></p></td>
<td></td>
<td><p>Dec 07, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sa-pg/">pytest-sa-pg</a></p></td>
<td></td>
<td><p>May 14, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sbase/">pytest-sbase</a></p></td>
<td><p>A complete web automation framework for end-to-end testing.</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-scenario/">pytest-scenario</a></p></td>
<td><p>pytest plugin for test scenarios</p></td>
<td><p>Feb 06, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-schema/">pytest-schema</a></p></td>
<td><p>👍 Validate return values against a schema-like object in testing</p></td>
<td><p>Aug 31, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-securestore/">pytest-securestore</a></p></td>
<td><p>An encrypted password store for use within pytest cases</p></td>
<td><p>Nov 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-select/">pytest-select</a></p></td>
<td><p>A pytest plugin which allows to (de-)select tests from a file.</p></td>
<td><p>Jan 18, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-selenium/">pytest-selenium</a></p></td>
<td><p>pytest plugin for Selenium</p></td>
<td><p>Sep 19, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-seleniumbase/">pytest-seleniumbase</a></p></td>
<td><p>A complete web automation framework for end-to-end testing.</p></td>
<td><p>Mar 02, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-selenium-enhancer/">pytest-selenium-enhancer</a></p></td>
<td><p>pytest plugin for Selenium</p></td>
<td><p>Dec 16, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-selenium-pdiff/">pytest-selenium-pdiff</a></p></td>
<td><p>A pytest package implementing perceptualdiff for Selenium tests.</p></td>
<td><p>Apr 06, 2017</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-send-email/">pytest-send-email</a></p></td>
<td><p>Send pytest execution result email</p></td>
<td><p>Dec 04, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sentry/">pytest-sentry</a></p></td>
<td><p>A pytest plugin to send testrun information to Sentry.io</p></td>
<td><p>Apr 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-server-fixtures/">pytest-server-fixtures</a></p></td>
<td><p>Extensible server fixures for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-serverless/">pytest-serverless</a></p></td>
<td><p>Automatically mocks resources from serverless.yml in pytest using moto.</p></td>
<td><p>Nov 27, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-services/">pytest-services</a></p></td>
<td><p>Services plugin for pytest testing framework</p></td>
<td><p>Oct 30, 2020</p></td>
<td><p>6 - Mature</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-session2file/">pytest-session2file</a></p></td>
<td><p>pytest-session2file (aka: pytest-session_to_file for v0.1.0 - v0.1.2) is a py.test plugin for capturing and saving to file the stdout of py.test.</p></td>
<td><p>Jan 26, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-session-fixture-globalize/">pytest-session-fixture-globalize</a></p></td>
<td><p>py.test plugin to make session fixtures behave as if written in conftest, even if it is written in some modules</p></td>
<td><p>May 15, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-session_to_file/">pytest-session_to_file</a></p></td>
<td><p>pytest-session_to_file is a py.test plugin for capturing and saving to file the stdout of py.test.</p></td>
<td><p>Oct 01, 2015</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sftpserver/">pytest-sftpserver</a></p></td>
<td><p>py.test plugin to locally test sftp server connections.</p></td>
<td><p>Sep 16, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-shard/">pytest-shard</a></p></td>
<td></td>
<td><p>Dec 11, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-shell/">pytest-shell</a></p></td>
<td><p>A pytest plugin to help with testing shell scripts / black box commands</p></td>
<td><p>Nov 07, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-shell-utilities/">pytest-shell-utilities</a></p></td>
<td><p>Pytest plugin to simplify running shell commands against the system</p></td>
<td><p>Feb 21, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sheraf/">pytest-sheraf</a></p></td>
<td><p>Versatile ZODB abstraction layer - pytest fixtures</p></td>
<td><p>Feb 11, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sherlock/">pytest-sherlock</a></p></td>
<td><p>pytest plugin help to find coupled tests</p></td>
<td><p>Nov 18, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-shortcuts/">pytest-shortcuts</a></p></td>
<td><p>Expand command-line shortcuts listed in pytest configuration</p></td>
<td><p>Oct 29, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-shutil/">pytest-shutil</a></p></td>
<td><p>A goodie-bag of unix shell and environment tools for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-simplehttpserver/">pytest-simplehttpserver</a></p></td>
<td><p>Simple pytest fixture to spin up an HTTP server</p></td>
<td><p>Jun 24, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-simple-plugin/">pytest-simple-plugin</a></p></td>
<td><p>Simple pytest plugin</p></td>
<td><p>Nov 27, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-simple-settings/">pytest-simple-settings</a></p></td>
<td><p>simple-settings plugin for pytest</p></td>
<td><p>Nov 17, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-single-file-logging/">pytest-single-file-logging</a></p></td>
<td><p>Allow for multiple processes to log to a single file</p></td>
<td><p>May 05, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-skip-markers/">pytest-skip-markers</a></p></td>
<td><p>Pytest Salt Plugin</p></td>
<td><p>Feb 22, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-skipper/">pytest-skipper</a></p></td>
<td><p>A plugin that selects only tests with changes in execution path</p></td>
<td><p>Mar 26, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-skippy/">pytest-skippy</a></p></td>
<td><p>Automatically skip tests that don’t need to run!</p></td>
<td><p>Jan 27, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.3.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-skip-slow/">pytest-skip-slow</a></p></td>
<td><p>A pytest plugin to skip <a class="reference external" href="mailto:`&#37;&#52;&#48;pytest&#46;mark&#46;slow">`<span>&#64;</span>pytest<span>&#46;</span>mark<span>&#46;</span>slow</a>` tests by default.</p></td>
<td><p>Sep 28, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-slack/">pytest-slack</a></p></td>
<td><p>Pytest to Slack reporting plugin</p></td>
<td><p>Dec 15, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-slow/">pytest-slow</a></p></td>
<td><p>A pytest plugin to skip <a class="reference external" href="mailto:`&#37;&#52;&#48;pytest&#46;mark&#46;slow">`<span>&#64;</span>pytest<span>&#46;</span>mark<span>&#46;</span>slow</a>` tests by default.</p></td>
<td><p>Sep 28, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-smartcollect/">pytest-smartcollect</a></p></td>
<td><p>A plugin for collecting tests that touch changed code</p></td>
<td><p>Oct 04, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-smartcov/">pytest-smartcov</a></p></td>
<td><p>Smart coverage plugin for pytest.</p></td>
<td><p>Sep 30, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-smtp/">pytest-smtp</a></p></td>
<td><p>Send email with pytest execution result</p></td>
<td><p>Feb 20, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-snail/">pytest-snail</a></p></td>
<td><p>Plugin for adding a marker to slow running tests. 🐌</p></td>
<td><p>Nov 04, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.0.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-snapci/">pytest-snapci</a></p></td>
<td><p>py.test plugin for Snap-CI</p></td>
<td><p>Nov 12, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-snapshot/">pytest-snapshot</a></p></td>
<td><p>A plugin for snapshot testing with pytest.</p></td>
<td><p>Feb 11, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-snmpserver/">pytest-snmpserver</a></p></td>
<td></td>
<td><p>May 12, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-snowflake-bdd/">pytest-snowflake-bdd</a></p></td>
<td><p>Setup test data and run tests on snowflake in BDD style!</p></td>
<td><p>Jan 05, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-socket/">pytest-socket</a></p></td>
<td><p>Pytest Plugin to disable socket calls during tests</p></td>
<td><p>Jan 23, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.6.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-soft-assertions/">pytest-soft-assertions</a></p></td>
<td></td>
<td><p>May 05, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-solidity/">pytest-solidity</a></p></td>
<td><p>A PyTest library plugin for Solidity language.</p></td>
<td><p>Jan 15, 2022</p></td>
<td><p>1 - Planning</p></td>
<td><p>pytest (&lt;7,&gt;=6.0.1) ; extra == ‘tests’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-solr/">pytest-solr</a></p></td>
<td><p>Solr process and client fixtures for py.test.</p></td>
<td><p>May 11, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sorter/">pytest-sorter</a></p></td>
<td><p>A simple plugin to first execute tests that historically failed more</p></td>
<td><p>Apr 20, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sosu/">pytest-sosu</a></p></td>
<td><p>Unofficial PyTest plugin for Sauce Labs</p></td>
<td><p>Feb 21, 2022</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sourceorder/">pytest-sourceorder</a></p></td>
<td><p>Test-ordering plugin for pytest</p></td>
<td><p>Sep 01, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-spark/">pytest-spark</a></p></td>
<td><p>pytest plugin to run the tests with support of pyspark.</p></td>
<td><p>Feb 23, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-spawner/">pytest-spawner</a></p></td>
<td><p>py.test plugin to spawn process and communicate with them.</p></td>
<td><p>Jul 31, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-spec/">pytest-spec</a></p></td>
<td><p>Library pytest-spec is a pytest plugin to display test execution output like a SPECIFICATION.</p></td>
<td><p>May 04, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sphinx/">pytest-sphinx</a></p></td>
<td><p>Doctest plugin for pytest with support for Sphinx-specific doctest-directives</p></td>
<td><p>Aug 05, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-spiratest/">pytest-spiratest</a></p></td>
<td><p>Exports unit tests as test runs in SpiraTest/Team/Plan</p></td>
<td><p>Feb 08, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splinter/">pytest-splinter</a></p></td>
<td><p>Splinter plugin for pytest testing framework</p></td>
<td><p>Dec 25, 2020</p></td>
<td><p>6 - Mature</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splinter4/">pytest-splinter4</a></p></td>
<td><p>Pytest plugin for the splinter automation library</p></td>
<td><p>Dec 22, 2021</p></td>
<td><p>6 - Mature</p></td>
<td><p>pytest (&gt;=6.2.4)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-split/">pytest-split</a></p></td>
<td><p>Pytest plugin which splits the test suite to equally sized sub suites based on test execution time.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5,&lt;7)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splitio/">pytest-splitio</a></p></td>
<td><p>Split.io SDK integration for e2e tests</p></td>
<td><p>Sep 22, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&lt;7,&gt;=5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-split-tests/">pytest-split-tests</a></p></td>
<td><p>A Pytest plugin for running a subset of your tests by splitting them in to equally sized groups. Forked from Mark Adams’ original project pytest-test-groups.</p></td>
<td><p>Jul 30, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-split-tests-tresorit/">pytest-split-tests-tresorit</a></p></td>
<td></td>
<td><p>Feb 22, 2021</p></td>
<td><p>1 - Planning</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splunk-addon/">pytest-splunk-addon</a></p></td>
<td><p>A Dynamic test tool for Splunk Apps and Add-ons</p></td>
<td><p>Feb 18, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;5.4.0,&lt;6.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splunk-addon-ui-smartx/">pytest-splunk-addon-ui-smartx</a></p></td>
<td><p>Library to support testing Splunk Add-on UX</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-splunk-env/">pytest-splunk-env</a></p></td>
<td><p>pytest fixtures for interaction with Splunk Enterprise and Splunk Cloud</p></td>
<td><p>Oct 22, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.1.1,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sqitch/">pytest-sqitch</a></p></td>
<td><p>sqitch for pytest</p></td>
<td><p>Apr 06, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sqlalchemy/">pytest-sqlalchemy</a></p></td>
<td><p>pytest plugin with sqlalchemy related fixtures</p></td>
<td><p>Mar 13, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sql-bigquery/">pytest-sql-bigquery</a></p></td>
<td><p>Yet another SQL-testing framework for BigQuery provided by pytest plugin</p></td>
<td><p>Dec 19, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-squadcast/">pytest-squadcast</a></p></td>
<td><p>Pytest report plugin for Squadcast</p></td>
<td><p>Feb 22, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-srcpaths/">pytest-srcpaths</a></p></td>
<td><p>Add paths to sys.path</p></td>
<td><p>Oct 15, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ssh/">pytest-ssh</a></p></td>
<td><p>pytest plugin for ssh command run</p></td>
<td><p>May 27, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-start-from/">pytest-start-from</a></p></td>
<td><p>Start pytest run from a given point</p></td>
<td><p>Apr 11, 2016</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-statsd/">pytest-statsd</a></p></td>
<td><p>pytest plugin for reporting to graphite</p></td>
<td><p>Nov 30, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stepfunctions/">pytest-stepfunctions</a></p></td>
<td><p>A small description</p></td>
<td><p>May 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-steps/">pytest-steps</a></p></td>
<td><p>Create step-wise / incremental tests in pytest.</p></td>
<td><p>Sep 23, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stepwise/">pytest-stepwise</a></p></td>
<td><p>Run a test suite one failing test at a time.</p></td>
<td><p>Dec 01, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stoq/">pytest-stoq</a></p></td>
<td><p>A plugin to pytest stoq</p></td>
<td><p>Feb 09, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stress/">pytest-stress</a></p></td>
<td><p>A Pytest plugin that allows you to loop tests for a user defined amount of time.</p></td>
<td><p>Dec 07, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-structlog/">pytest-structlog</a></p></td>
<td><p>Structured logging assertions</p></td>
<td><p>Sep 21, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-structmpd/">pytest-structmpd</a></p></td>
<td><p>provide structured temporary directory</p></td>
<td><p>Oct 17, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stub/">pytest-stub</a></p></td>
<td><p>Stub packages, modules and attributes.</p></td>
<td><p>Apr 28, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-stubprocess/">pytest-stubprocess</a></p></td>
<td><p>Provide stub implementations for subprocesses in Python tests</p></td>
<td><p>Sep 17, 2018</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-study/">pytest-study</a></p></td>
<td><p>A pytest plugin to organize long run tests (named studies) without interfering the regular tests</p></td>
<td><p>Sep 26, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-subprocess/">pytest-subprocess</a></p></td>
<td><p>A plugin to fake subprocess for pytest</p></td>
<td><p>Feb 09, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-subtesthack/">pytest-subtesthack</a></p></td>
<td><p>A hack to explicitly set up and tear down fixtures.</p></td>
<td><p>Mar 02, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-subtests/">pytest-subtests</a></p></td>
<td><p>unittest subTest() support and subtests fixture</p></td>
<td><p>Feb 13, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=7.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-subunit/">pytest-subunit</a></p></td>
<td><p>pytest-subunit is a plugin for py.test which outputs testsresult in subunit format.</p></td>
<td><p>Aug 29, 2017</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sugar/">pytest-sugar</a></p></td>
<td><p>pytest-sugar is a plugin for pytest that changes the default look and feel of pytest (e.g. progressbar, show tests that fail instantly).</p></td>
<td><p>Jul 06, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-sugar-bugfix159/">pytest-sugar-bugfix159</a></p></td>
<td><p>Workaround for <a class="reference external" href="https://github.com/Frozenball/pytest-sugar/issues/159">https://github.com/Frozenball/pytest-sugar/issues/159</a></p></td>
<td><p>Nov 07, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (!=3.7.3,&gt;=3.5); extra == ‘testing’</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-super-check/">pytest-super-check</a></p></td>
<td><p>Pytest plugin to check your TestCase classes call super in setUp, tearDown, etc.</p></td>
<td><p>Jan 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-svn/">pytest-svn</a></p></td>
<td><p>SVN repository fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-symbols/">pytest-symbols</a></p></td>
<td><p>pytest-symbols is a pytest plugin that adds support for passing test environment symbols into pytest tests.</p></td>
<td><p>Nov 20, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-system-statistics/">pytest-system-statistics</a></p></td>
<td><p>Pytest plugin to track and report system usage statistics</p></td>
<td><p>Feb 16, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-system-test-plugin/">pytest-system-test-plugin</a></p></td>
<td><p>Pyst - Pytest System-Test Plugin</p></td>
<td><p>Feb 03, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-takeltest/">pytest-takeltest</a></p></td>
<td><p>Fixtures for ansible, testinfra and molecule</p></td>
<td><p>Jan 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-talisker/">pytest-talisker</a></p></td>
<td></td>
<td><p>Nov 28, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tap/">pytest-tap</a></p></td>
<td><p>Test Anything Protocol (TAP) reporting plugin for pytest</p></td>
<td><p>Oct 27, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tape/">pytest-tape</a></p></td>
<td><p>easy assertion with expected results saved to yaml files</p></td>
<td><p>Mar 17, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-target/">pytest-target</a></p></td>
<td><p>Pytest plugin for remote target orchestration.</p></td>
<td><p>Jan 21, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=6.1.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tblineinfo/">pytest-tblineinfo</a></p></td>
<td><p>tblineinfo is a py.test plugin that insert the node id in the final py.test report when –tb=line option is used</p></td>
<td><p>Dec 01, 2015</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-teamcity-logblock/">pytest-teamcity-logblock</a></p></td>
<td><p>py.test plugin to introduce block structure in teamcity build log, if output is not captured</p></td>
<td><p>May 15, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-telegram/">pytest-telegram</a></p></td>
<td><p>Pytest to Telegram reporting plugin</p></td>
<td><p>Dec 10, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tempdir/">pytest-tempdir</a></p></td>
<td><p>Predictable and repeatable tempdir support.</p></td>
<td><p>Oct 11, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-terraform/">pytest-terraform</a></p></td>
<td><p>A pytest plugin for using terraform fixtures</p></td>
<td><p>Jan 17, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-terraform-fixture/">pytest-terraform-fixture</a></p></td>
<td><p>generate terraform resources to use with pytest</p></td>
<td><p>Nov 14, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testbook/">pytest-testbook</a></p></td>
<td><p>A plugin to run tests written in Jupyter notebook</p></td>
<td><p>Dec 11, 2016</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testconfig/">pytest-testconfig</a></p></td>
<td><p>Test configuration plugin for pytest.</p></td>
<td><p>Jan 11, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testdirectory/">pytest-testdirectory</a></p></td>
<td><p>A py.test plugin providing temporary directories in unit tests.</p></td>
<td><p>Feb 21, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testdox/">pytest-testdox</a></p></td>
<td><p>A testdox format reporter for pytest</p></td>
<td><p>Dec 05, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-test-groups/">pytest-test-groups</a></p></td>
<td><p>A Pytest plugin for running a subset of your tests by splitting them in to equally sized groups.</p></td>
<td><p>Oct 25, 2016</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testinfra/">pytest-testinfra</a></p></td>
<td><p>Test infrastructures</p></td>
<td><p>Feb 10, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (!=3.0.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testlink-adaptor/">pytest-testlink-adaptor</a></p></td>
<td><p>pytest reporting plugin for testlink</p></td>
<td><p>Dec 20, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testmon/">pytest-testmon</a></p></td>
<td><p>selects tests affected by changed files and methods</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testobject/">pytest-testobject</a></p></td>
<td><p>Plugin to use TestObject Suites with Pytest</p></td>
<td><p>Sep 24, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testpluggy/">pytest-testpluggy</a></p></td>
<td><p>set your encoding</p></td>
<td><p>Jan 07, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail/">pytest-testrail</a></p></td>
<td><p>pytest plugin for creating TestRail runs and adding results</p></td>
<td><p>Aug 27, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail2/">pytest-testrail2</a></p></td>
<td><p>A small example package</p></td>
<td><p>Nov 17, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-api/">pytest-testrail-api</a></p></td>
<td><p>Плагин Pytest, для интеграции с TestRail</p></td>
<td><p>Dec 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-api-client/">pytest-testrail-api-client</a></p></td>
<td><p>TestRail Api Python Client</p></td>
<td><p>Dec 14, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-appetize/">pytest-testrail-appetize</a></p></td>
<td><p>pytest plugin for creating TestRail runs and adding results</p></td>
<td><p>Sep 29, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-client/">pytest-testrail-client</a></p></td>
<td><p>pytest plugin for Testrail</p></td>
<td><p>Sep 29, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-e2e/">pytest-testrail-e2e</a></p></td>
<td><p>pytest plugin for creating TestRail runs and adding results</p></td>
<td><p>Oct 11, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-ns/">pytest-testrail-ns</a></p></td>
<td><p>pytest plugin for creating TestRail runs and adding results</p></td>
<td><p>Oct 08, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-plugin/">pytest-testrail-plugin</a></p></td>
<td><p>PyTest plugin for TestRail</p></td>
<td><p>Apr 21, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testrail-reporter/">pytest-testrail-reporter</a></p></td>
<td></td>
<td><p>Sep 10, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testreport/">pytest-testreport</a></p></td>
<td></td>
<td><p>Nov 12, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-testslide/">pytest-testslide</a></p></td>
<td><p>TestSlide fixture for pytest</p></td>
<td><p>Jan 07, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (~=6.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-test-this/">pytest-test-this</a></p></td>
<td><p>Plugin for py.test to run relevant tests, based on naively checking if a test contains a reference to the symbol you supply</p></td>
<td><p>Sep 15, 2019</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>pytest (&gt;=2.3)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-test-utils/">pytest-test-utils</a></p></td>
<td></td>
<td><p>Dec 14, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tesults/">pytest-tesults</a></p></td>
<td><p>Tesults plugin for pytest</p></td>
<td><p>Dec 31, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tezos/">pytest-tezos</a></p></td>
<td><p>pytest-ligo</p></td>
<td><p>Jan 16, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-thawgun/">pytest-thawgun</a></p></td>
<td><p>Pytest plugin for time travel</p></td>
<td><p>May 26, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-threadleak/">pytest-threadleak</a></p></td>
<td><p>Detects thread leaks</p></td>
<td><p>Jan 18, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tick/">pytest-tick</a></p></td>
<td><p>Ticking on tests</p></td>
<td><p>Aug 31, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timeit/">pytest-timeit</a></p></td>
<td><p>A pytest plugin to time test function runs</p></td>
<td><p>Oct 13, 2016</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timeout/">pytest-timeout</a></p></td>
<td><p>pytest plugin to abort hanging tests</p></td>
<td><p>Jan 18, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timeouts/">pytest-timeouts</a></p></td>
<td><p>Linux-only Pytest plugin to control durations of various test case execution phases</p></td>
<td><p>Sep 21, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timer/">pytest-timer</a></p></td>
<td><p>A timer plugin for pytest</p></td>
<td><p>Jun 02, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timestamper/">pytest-timestamper</a></p></td>
<td><p>Pytest plugin to add a timestamp prefix to the pytest output</p></td>
<td><p>Jun 06, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-timestamps/">pytest-timestamps</a></p></td>
<td><p>A simple plugin to view timestamps for each test</p></td>
<td><p>Jan 16, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=5.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tipsi-django/">pytest-tipsi-django</a></p></td>
<td></td>
<td><p>Nov 17, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tipsi-testing/">pytest-tipsi-testing</a></p></td>
<td><p>Better fixtures management. Various helpers</p></td>
<td><p>Nov 04, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tldr/">pytest-tldr</a></p></td>
<td><p>A pytest plugin that limits the output to just the things you need.</p></td>
<td><p>Mar 12, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tm4j-reporter/">pytest-tm4j-reporter</a></p></td>
<td><p>Cloud Jira Test Management (TM4J) PyTest reporter plugin</p></td>
<td><p>Sep 01, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tmnet/">pytest-tmnet</a></p></td>
<td><p>A small example package</p></td>
<td><p>Mar 01, 2022</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tmreport/">pytest-tmreport</a></p></td>
<td><p>this is a vue-element ui report for pytest</p></td>
<td><p>Nov 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-todo/">pytest-todo</a></p></td>
<td><p>A small plugin for the pytest testing framework, marking TODO comments as failure</p></td>
<td><p>May 23, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tomato/">pytest-tomato</a></p></td>
<td></td>
<td><p>Mar 01, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-toolbelt/">pytest-toolbelt</a></p></td>
<td><p>This is just a collection of utilities for pytest, but don’t really belong in pytest proper.</p></td>
<td><p>Aug 12, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-toolbox/">pytest-toolbox</a></p></td>
<td><p>Numerous useful plugins for pytest.</p></td>
<td><p>Apr 07, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tornado/">pytest-tornado</a></p></td>
<td><p>A py.test plugin providing fixtures and markers to simplify testing of asynchronous tornado applications.</p></td>
<td><p>Jun 17, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tornado5/">pytest-tornado5</a></p></td>
<td><p>A py.test plugin providing fixtures and markers to simplify testing of asynchronous tornado applications.</p></td>
<td><p>Nov 16, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tornado-yen3/">pytest-tornado-yen3</a></p></td>
<td><p>A py.test plugin providing fixtures and markers to simplify testing of asynchronous tornado applications.</p></td>
<td><p>Oct 15, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tornasync/">pytest-tornasync</a></p></td>
<td><p>py.test plugin for testing Python 3.5+ Tornado code</p></td>
<td><p>Jul 15, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-track/">pytest-track</a></p></td>
<td></td>
<td><p>Feb 26, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-translations/">pytest-translations</a></p></td>
<td><p>Test your translation files.</p></td>
<td><p>Nov 05, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-travis-fold/">pytest-travis-fold</a></p></td>
<td><p>Folds captured output sections in Travis CI build log</p></td>
<td><p>Nov 29, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-trello/">pytest-trello</a></p></td>
<td><p>Plugin for py.test that integrates trello using markers</p></td>
<td><p>Nov 20, 2015</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-trepan/">pytest-trepan</a></p></td>
<td><p>Pytest plugin for trepan debugger.</p></td>
<td><p>Jul 28, 2018</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-trialtemp/">pytest-trialtemp</a></p></td>
<td><p>py.test plugin for using the same _trial_temp working directory as trial</p></td>
<td><p>Jun 08, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-trio/">pytest-trio</a></p></td>
<td><p>Pytest plugin for trio</p></td>
<td><p>Oct 16, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-trytond/">pytest-trytond</a></p></td>
<td><p>Pytest plugin for the Tryton server framework</p></td>
<td><p>Feb 02, 2022</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tspwplib/">pytest-tspwplib</a></p></td>
<td><p>A simple plugin to use with tspwplib</p></td>
<td><p>Jan 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tstcls/">pytest-tstcls</a></p></td>
<td><p>Test Class Base</p></td>
<td><p>Mar 23, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-twisted/">pytest-twisted</a></p></td>
<td><p>A twisted plugin for pytest.</p></td>
<td><p>Aug 30, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-typechecker/">pytest-typechecker</a></p></td>
<td><p>Run type checkers on specified test files</p></td>
<td><p>Feb 04, 2022</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-typhoon-xray/">pytest-typhoon-xray</a></p></td>
<td><p>Typhoon HIL plugin for pytest</p></td>
<td><p>Feb 14, 2022</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-tytest/">pytest-tytest</a></p></td>
<td><p>Typhoon HIL plugin for pytest</p></td>
<td><p>May 25, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=5.4.2)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ubersmith/">pytest-ubersmith</a></p></td>
<td><p>Easily mock calls to ubersmith at the `requests` level.</p></td>
<td><p>Apr 13, 2015</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ui/">pytest-ui</a></p></td>
<td><p>Text User Interface for running python tests</p></td>
<td><p>Jul 05, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-unhandled-exception-exit-code/">pytest-unhandled-exception-exit-code</a></p></td>
<td><p>Plugin for py.test set a different exit code on uncaught exceptions</p></td>
<td><p>Jun 22, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-unittest-filter/">pytest-unittest-filter</a></p></td>
<td><p>A pytest plugin for filtering unittest-based test classes</p></td>
<td><p>Jan 12, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-unmarked/">pytest-unmarked</a></p></td>
<td><p>Run only unmarked tests</p></td>
<td><p>Aug 27, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-unordered/">pytest-unordered</a></p></td>
<td><p>Test equality of unordered collections in pytest</p></td>
<td><p>Mar 28, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-upload-report/">pytest-upload-report</a></p></td>
<td><p>pytest-upload-report is a plugin for pytest that upload your test report for test results.</p></td>
<td><p>Jun 18, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-utils/">pytest-utils</a></p></td>
<td><p>Some helpers for pytest.</p></td>
<td><p>Dec 04, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.5,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vagrant/">pytest-vagrant</a></p></td>
<td><p>A py.test plugin providing access to vagrant.</p></td>
<td><p>Sep 07, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-valgrind/">pytest-valgrind</a></p></td>
<td></td>
<td><p>May 19, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-variables/">pytest-variables</a></p></td>
<td><p>pytest plugin for providing variables to tests/fixtures</p></td>
<td><p>Oct 23, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=2.4.2)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-variant/">pytest-variant</a></p></td>
<td><p>Variant support for Pytest</p></td>
<td><p>Jun 20, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vcr/">pytest-vcr</a></p></td>
<td><p>Plugin for managing VCR.py cassettes</p></td>
<td><p>Apr 26, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=3.6.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vcr-delete-on-fail/">pytest-vcr-delete-on-fail</a></p></td>
<td><p>A pytest plugin that automates vcrpy cassettes deletion on test failure.</p></td>
<td><p>Aug 13, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vcrpandas/">pytest-vcrpandas</a></p></td>
<td><p>Test from HTTP interactions to dataframe processed.</p></td>
<td><p>Jan 12, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-venv/">pytest-venv</a></p></td>
<td><p>py.test fixture for creating a virtual environment</p></td>
<td><p>Aug 04, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-ver/">pytest-ver</a></p></td>
<td><p>Pytest module with Verification Report</p></td>
<td><p>Aug 30, 2021</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-verbose-parametrize/">pytest-verbose-parametrize</a></p></td>
<td><p>More descriptive output for parametrized py.test tests</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vimqf/">pytest-vimqf</a></p></td>
<td><p>A simple pytest plugin that will shrink pytest output when specified, to fit vim quickfix window.</p></td>
<td><p>Feb 08, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=6.2.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-virtualenv/">pytest-virtualenv</a></p></td>
<td><p>Virtualenv fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-voluptuous/">pytest-voluptuous</a></p></td>
<td><p>Pytest plugin for asserting data against voluptuous schema.</p></td>
<td><p>Jun 09, 2020</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vscodedebug/">pytest-vscodedebug</a></p></td>
<td><p>A pytest plugin to easily enable debugging tests within Visual Studio Code</p></td>
<td><p>Dec 04, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vts/">pytest-vts</a></p></td>
<td><p>pytest plugin for automatic recording of http stubbed tests</p></td>
<td><p>Jun 05, 2019</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=2.3)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vw/">pytest-vw</a></p></td>
<td><p>pytest-vw makes your failing test cases succeed under CI tools scrutiny</p></td>
<td><p>Oct 07, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-vyper/">pytest-vyper</a></p></td>
<td><p>Plugin for the vyper smart contract language.</p></td>
<td><p>May 28, 2020</p></td>
<td><p>2 - Pre-Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-wa-e2e-plugin/">pytest-wa-e2e-plugin</a></p></td>
<td><p>Pytest plugin for testing whatsapp bots with end to end tests</p></td>
<td><p>Feb 18, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-watch/">pytest-watch</a></p></td>
<td><p>Local continuous test runner with pytest and watchdog.</p></td>
<td><p>May 20, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-watcher/">pytest-watcher</a></p></td>
<td><p>Continiously runs pytest on changes in *.py files</p></td>
<td><p>Dec 30, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-wdl/">pytest-wdl</a></p></td>
<td><p>Pytest plugin for testing WDL workflows.</p></td>
<td><p>Nov 17, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-webdriver/">pytest-webdriver</a></p></td>
<td><p>Selenium webdriver fixture for py.test</p></td>
<td><p>May 28, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-wetest/">pytest-wetest</a></p></td>
<td><p>Welian API Automation test framework pytest plugin</p></td>
<td><p>Nov 10, 2018</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-whirlwind/">pytest-whirlwind</a></p></td>
<td><p>Testing Tornado.</p></td>
<td><p>Jun 12, 2020</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-wholenodeid/">pytest-wholenodeid</a></p></td>
<td><p>pytest addon for displaying the whole node id for failures</p></td>
<td><p>Aug 26, 2015</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-win32consoletitle/">pytest-win32consoletitle</a></p></td>
<td><p>Pytest progress in console title (Win32 only)</p></td>
<td><p>Aug 08, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-winnotify/">pytest-winnotify</a></p></td>
<td><p>Windows tray notifications for py.test results.</p></td>
<td><p>Apr 22, 2016</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-with-docker/">pytest-with-docker</a></p></td>
<td><p>pytest with docker helpers.</p></td>
<td><p>Nov 09, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-workflow/">pytest-workflow</a></p></td>
<td><p>A pytest plugin for configuring workflow/pipeline tests using YAML files</p></td>
<td><p>Dec 03, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xdist/">pytest-xdist</a></p></td>
<td><p>pytest xdist plugin for distributed testing and loop-on-failing modes</p></td>
<td><p>Dec 10, 2021</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=6.2.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xdist-debug-for-graingert/">pytest-xdist-debug-for-graingert</a></p></td>
<td><p>pytest xdist plugin for distributed testing and loop-on-failing modes</p></td>
<td><p>Jul 24, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.4.0)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xdist-forked/">pytest-xdist-forked</a></p></td>
<td><p>forked from pytest-xdist</p></td>
<td><p>Feb 10, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.4.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xdist-tracker/">pytest-xdist-tracker</a></p></td>
<td><p>pytest plugin helps to reproduce failures for particular xdist node</p></td>
<td><p>Nov 18, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=3.5.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xfaillist/">pytest-xfaillist</a></p></td>
<td><p>Maintain a xfaillist in an additional file to avoid merge-conflicts.</p></td>
<td><p>Sep 17, 2021</p></td>
<td><p>N/A</p></td>
<td><p>pytest (&gt;=6.2.2,&lt;7.0.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xfiles/">pytest-xfiles</a></p></td>
<td><p>Pytest fixtures providing data read from function, module or package related (x)files.</p></td>
<td><p>Feb 27, 2018</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xlog/">pytest-xlog</a></p></td>
<td><p>Extended logging for test and decorators</p></td>
<td><p>May 31, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xpara/">pytest-xpara</a></p></td>
<td><p>An extended parametrizing plugin of pytest.</p></td>
<td><p>Oct 30, 2017</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xprocess/">pytest-xprocess</a></p></td>
<td><p>A pytest plugin for managing processes across test runs.</p></td>
<td><p>Jul 28, 2021</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xray/">pytest-xray</a></p></td>
<td></td>
<td><p>May 30, 2019</p></td>
<td><p>3 - Alpha</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xrayjira/">pytest-xrayjira</a></p></td>
<td></td>
<td><p>Mar 17, 2020</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (==4.3.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xray-server/">pytest-xray-server</a></p></td>
<td></td>
<td><p>Oct 27, 2021</p></td>
<td><p>3 - Alpha</p></td>
<td><p>pytest (&gt;=5.3.1)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-xvfb/">pytest-xvfb</a></p></td>
<td><p>A pytest plugin to run Xvfb for tests.</p></td>
<td><p>Jun 09, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=2.8.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yaml/">pytest-yaml</a></p></td>
<td><p>This plugin is used to load yaml output to your test using pytest framework.</p></td>
<td><p>Oct 05, 2018</p></td>
<td><p>N/A</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yamltree/">pytest-yamltree</a></p></td>
<td><p>Create or check file/directory trees described by YAML</p></td>
<td><p>Mar 02, 2020</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yamlwsgi/">pytest-yamlwsgi</a></p></td>
<td><p>Run tests against wsgi apps defined in yaml</p></td>
<td><p>May 11, 2010</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yapf/">pytest-yapf</a></p></td>
<td><p>Run yapf</p></td>
<td><p>Jul 06, 2017</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (&gt;=3.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yapf3/">pytest-yapf3</a></p></td>
<td><p>Validate your Python file format with yapf</p></td>
<td><p>Aug 03, 2020</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=5.4)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yield/">pytest-yield</a></p></td>
<td><p>PyTest plugin to run tests concurrently, each `yield` switch context to other one</p></td>
<td><p>Jan 23, 2019</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-yuk/">pytest-yuk</a></p></td>
<td><p>Display tests you are uneasy with, using 🤢/🤮 for pass/fail of tests marked with yuk.</p></td>
<td><p>Mar 26, 2021</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-zafira/">pytest-zafira</a></p></td>
<td><p>A Zafira plugin for pytest</p></td>
<td><p>Sep 18, 2019</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (==4.1.1)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-zap/">pytest-zap</a></p></td>
<td><p>OWASP ZAP plugin for py.test.</p></td>
<td><p>May 12, 2014</p></td>
<td><p>4 - Beta</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-zebrunner/">pytest-zebrunner</a></p></td>
<td><p>Pytest connector for Zebrunner reporting</p></td>
<td><p>Feb 02, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest (&gt;=4.5.0)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://pypi.org/project/pytest-zigzag/">pytest-zigzag</a></p></td>
<td><p>Extend py.test for RPC OpenStack testing.</p></td>
<td><p>Feb 27, 2019</p></td>
<td><p>4 - Beta</p></td>
<td><p>pytest (~=3.6)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/pytest-zulip/">pytest-zulip</a></p></td>
<td><p>Pytest report plugin for Zulip</p></td>
<td><p>Mar 04, 2022</p></td>
<td><p>5 - Production/Stable</p></td>
<td><p>pytest</p></td>
</tr>
</tbody>
</table>
</div>
<span id="document-reference/customize"></span><div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="command-line-options-and-configuration-file-settings">
<h4>Command line options and configuration file settings<a class="headerlink" href="#command-line-options-and-configuration-file-settings" title="Permalink to this headline">¶</a></h4>
<p>You can get help on command line options and values in INI-style
configurations files by using the general help option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -h   <span class="c1"># prints options _and_ config file settings</span>
</pre></div>
</div>
<p>This will display command line and configuration file settings
which were registered by installed plugins.</p>
</div>
<div class="section" id="configuration-file-formats">
<span id="config-file-formats"></span><h4>Configuration file formats<a class="headerlink" href="#configuration-file-formats" title="Permalink to this headline">¶</a></h4>
<p>Many <a class="reference internal" href="contents.html#ini-options-ref"><span class="std std-ref">pytest settings</span></a> can be set in a <em>configuration file</em>, which
by convention resides in the root directory of your repository.</p>
<p>A quick example of the configuration files supported by pytest:</p>
<div class="section" id="pytest-ini">
<h5>pytest.ini<a class="headerlink" href="#pytest-ini" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> files take precedence over other files, even when empty.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">6.0</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-ra -q</span><span class="w"></span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">tests</span><span class="w"></span>
<span class="w">    </span><span class="na">integration</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="pyproject-toml">
<h5>pyproject.toml<a class="headerlink" href="#pyproject-toml" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> are considered for configuration when they contain a <code class="docutils literal notranslate"><span class="pre">tool.pytest.ini_options</span></code> table.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span><span class="w"></span>
<span class="k">[tool.pytest.ini_options]</span><span class="w"></span>
<span class="n">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;6.0&quot;</span><span class="w"></span>
<span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;-ra -q&quot;</span><span class="w"></span>
<span class="n">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;tests&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;integration&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One might wonder why <code class="docutils literal notranslate"><span class="pre">[tool.pytest.ini_options]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">[tool.pytest]</span></code> as is the
case with other tools.</p>
<p>The reason is that the pytest team intends to fully utilize the rich TOML data format
for configuration in the future, reserving the <code class="docutils literal notranslate"><span class="pre">[tool.pytest]</span></code> table for that.
The <code class="docutils literal notranslate"><span class="pre">ini_options</span></code> table is being used, for now, as a bridge between the existing
<code class="docutils literal notranslate"><span class="pre">.ini</span></code> configuration system and the future configuration format.</p>
</div>
</div>
<div class="section" id="tox-ini">
<h5>tox.ini<a class="headerlink" href="#tox-ini" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> files are the configuration files of the <a class="reference external" href="https://tox.readthedocs.io">tox</a> project,
and can also be used to hold pytest configuration if they have a <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> section.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># tox.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">6.0</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-ra -q</span><span class="w"></span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">tests</span><span class="w"></span>
<span class="w">    </span><span class="na">integration</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="setup-cfg">
<h5>setup.cfg<a class="headerlink" href="#setup-cfg" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files are general purpose configuration files, used originally by <a class="reference external" href="https://docs.python.org/3/distutils/configfile.html" title="(in Python v3.10)"><span class="xref std std-doc">distutils</span></a>, and can also be used to hold pytest configuration
if they have a <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> section.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup.cfg</span><span class="w"></span>
<span class="k">[tool:pytest]</span><span class="w"></span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">6.0</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-ra -q</span><span class="w"></span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">tests</span><span class="w"></span>
<span class="w">    </span><span class="na">integration</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Usage of <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> is not recommended unless for very simple use cases. <code class="docutils literal notranslate"><span class="pre">.cfg</span></code>
files use a different parser than <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> and <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> which might cause hard to track
down problems.
When possible, it is recommended to use the latter files, or <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, to hold your
pytest configuration.</p>
</div>
</div>
</div>
<div class="section" id="initialization-determining-rootdir-and-configfile">
<span id="configfiles"></span><span id="rootdir"></span><h4>Initialization: determining rootdir and configfile<a class="headerlink" href="#initialization-determining-rootdir-and-configfile" title="Permalink to this headline">¶</a></h4>
<p>pytest determines a <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> for each test run which depends on
the command line arguments (specified test files, paths) and on
the existence of configuration files.  The determined <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> and <code class="docutils literal notranslate"><span class="pre">configfile</span></code> are
printed as part of the pytest header during startup.</p>
<p>Here’s a summary what <code class="docutils literal notranslate"><span class="pre">pytest</span></code> uses <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> for:</p>
<ul class="simple">
<li><p>Construct <em>nodeids</em> during collection; each test is assigned
a unique <em>nodeid</em> which is rooted at the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> and takes into account
the full path, class name, function name and parametrization (if any).</p></li>
<li><p>Is used by plugins as a stable location to store project/test run specific information;
for example, the internal <a class="reference internal" href="contents.html#cache"><span class="std std-ref">cache</span></a> plugin creates a <code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> subdirectory
in <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> to store its cross-test run state.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">rootdir</span></code> is <strong>NOT</strong> used to modify <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>/<code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> or
influence how modules are imported. See <a class="reference internal" href="contents.html#pythonpath"><span class="std std-ref">pytest import mechanisms and sys.path/PYTHONPATH</span></a> for more details.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--rootdir=path</span></code> command-line option can be used to force a specific directory.
Note that contrary to other command-line options, <code class="docutils literal notranslate"><span class="pre">--rootdir</span></code> cannot be used with
<a class="reference internal" href="contents.html#confval-addopts"><code class="xref std std-confval docutils literal notranslate"><span class="pre">addopts</span></code></a> inside <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> because the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> is used to <em>find</em> <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>
already.</p>
<div class="section" id="finding-the-rootdir">
<h5>Finding the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code><a class="headerlink" href="#finding-the-rootdir" title="Permalink to this headline">¶</a></h5>
<p>Here is the algorithm which finds the rootdir from <code class="docutils literal notranslate"><span class="pre">args</span></code>:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">-c</span></code> is passed in the command-line, use that as configuration file, and its directory as <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p></li>
<li><p>Determine the common ancestor directory for the specified <code class="docutils literal notranslate"><span class="pre">args</span></code> that are
recognised as paths that exist in the file system. If no such paths are
found, the common ancestor directory is set to the current working directory.</p></li>
<li><p>Look for <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>, and <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files in the ancestor
directory and upwards.  If one is matched, it becomes the <code class="docutils literal notranslate"><span class="pre">configfile</span></code> and its
directory becomes the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p></li>
<li><p>If no configuration file was found, look for <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> upwards from the common
ancestor directory to determine the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p></li>
<li><p>If no <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> was found, look for <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>, and
<code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> in each of the specified <code class="docutils literal notranslate"><span class="pre">args</span></code> and upwards. If one is
matched, it becomes the <code class="docutils literal notranslate"><span class="pre">configfile</span></code> and its directory becomes the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p></li>
<li><p>If no <code class="docutils literal notranslate"><span class="pre">configfile</span></code> was found and no configuration argument is passed, use the already determined common ancestor as root
directory. This allows the use of pytest in structures that are not part of
a package and don’t have any particular configuration file.</p></li>
</ul>
<p>If no <code class="docutils literal notranslate"><span class="pre">args</span></code> are given, pytest collects test below the current working
directory and also starts determining the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> from there.</p>
<p>Files will only be matched for configuration if:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>: will always match and take precedence, even if empty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>: contains a <code class="docutils literal notranslate"><span class="pre">[tool.pytest.ini_options]</span></code> table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>: contains a <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> section.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>: contains a <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> section.</p></li>
</ul>
<p>The files are considered in the order above. Options from multiple <code class="docutils literal notranslate"><span class="pre">configfiles</span></code> candidates
are never merged - the first match wins.</p>
<p>The <a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> object (accessible via hooks or through the <a class="reference internal" href="contents.html#std-fixture-pytestconfig"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytestconfig</span></code></a> fixture)
will subsequently carry these attributes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#pytest.Config.rootpath" title="pytest.Config.rootpath"><code class="xref py py-attr docutils literal notranslate"><span class="pre">config.rootpath</span></code></a>: the determined root directory, guaranteed to exist.</p></li>
<li><p><a class="reference internal" href="contents.html#pytest.Config.inipath" title="pytest.Config.inipath"><code class="xref py py-attr docutils literal notranslate"><span class="pre">config.inipath</span></code></a>: the determined <code class="docutils literal notranslate"><span class="pre">configfile</span></code>, may be <code class="docutils literal notranslate"><span class="pre">None</span></code>
(it is named <code class="docutils literal notranslate"><span class="pre">inipath</span></code> for historical reasons).</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.1: </span>The <code class="docutils literal notranslate"><span class="pre">config.rootpath</span></code> and <code class="docutils literal notranslate"><span class="pre">config.inipath</span></code> properties. They are <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
versions of the older <code class="docutils literal notranslate"><span class="pre">config.rootdir</span></code> and <code class="docutils literal notranslate"><span class="pre">config.inifile</span></code>, which have type
<code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>, and still exist for backward compatibility.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> is used as a reference directory for constructing test
addresses (“nodeids”) and can be used also by plugins for storing
per-testrun information.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest path/to/testdir path/other/
</pre></div>
</div>
<p>will determine the common ancestor as <code class="docutils literal notranslate"><span class="pre">path</span></code> and then
check for configuration files as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># first look for pytest.ini files
path/pytest.ini
path/pyproject.toml  # must contain a [tool.pytest.ini_options] table to match
path/tox.ini         # must contain [pytest] section to match
path/setup.cfg       # must contain [tool:pytest] section to match
pytest.ini
... # all the way up to the root

# now look for setup.py
path/setup.py
setup.py
... # all the way up to the root
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Custom pytest plugin commandline arguments may include a path, as in
<code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--log-output</span> <span class="pre">../../test.log</span> <span class="pre">args</span></code>. Then <code class="docutils literal notranslate"><span class="pre">args</span></code> is mandatory,
otherwise pytest uses the folder of test.log for rootdir determination
(see also <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1435">issue #1435</a>).
A dot <code class="docutils literal notranslate"><span class="pre">.</span></code> for referencing to the current working directory is also
possible.</p>
</div>
</div>
</div>
<div class="section" id="builtin-configuration-file-options">
<span id="adding-default-options"></span><span id="how-to-change-command-line-options-defaults"></span><h4>Builtin configuration file options<a class="headerlink" href="#builtin-configuration-file-options" title="Permalink to this headline">¶</a></h4>
<p>For the full list of options consult the <a class="reference internal" href="contents.html#ini-options-ref"><span class="std std-ref">reference documentation</span></a>.</p>
</div>
<div class="section" id="syntax-highlighting-theme-customization">
<h4>Syntax highlighting theme customization<a class="headerlink" href="#syntax-highlighting-theme-customization" title="Permalink to this headline">¶</a></h4>
<p>The syntax highlighting themes used by pytest can be customized using two environment variables:</p>
<ul class="simple">
<li><p><span class="target" id="index-0"></span><a class="reference internal" href="contents.html#envvar-PYTEST_THEME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME</span></code></a> sets a <a class="reference external" href="https://pygments.org/docs/styles/">pygment style</a> to use.</p></li>
<li><p><span class="target" id="index-1"></span><a class="reference internal" href="contents.html#envvar-PYTEST_THEME_MODE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME_MODE</span></code></a> sets this style to <em>light</em> or <em>dark</em>.</p></li>
</ul>
</div>
</div>
<span id="document-reference/reference"></span><div class="section" id="api-reference">
<span id="id1"></span><h3>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h3>
<p>This page contains the full reference to pytest’s API.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#constants" id="id4">Constants</a></p>
<ul>
<li><p><a class="reference internal" href="#pytest-version" id="id5">pytest.__version__</a></p></li>
<li><p><a class="reference internal" href="#pytest-version-tuple" id="id6">pytest.version_tuple</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#functions" id="id7">Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#pytest-approx" id="id8">pytest.approx</a></p></li>
<li><p><a class="reference internal" href="#pytest-fail" id="id9">pytest.fail</a></p></li>
<li><p><a class="reference internal" href="#pytest-skip" id="id10">pytest.skip</a></p></li>
<li><p><a class="reference internal" href="#pytest-importorskip" id="id11">pytest.importorskip</a></p></li>
<li><p><a class="reference internal" href="#pytest-xfail" id="id12">pytest.xfail</a></p></li>
<li><p><a class="reference internal" href="#pytest-exit" id="id13">pytest.exit</a></p></li>
<li><p><a class="reference internal" href="#pytest-main" id="id14">pytest.main</a></p></li>
<li><p><a class="reference internal" href="#pytest-param" id="id15">pytest.param</a></p></li>
<li><p><a class="reference internal" href="#pytest-raises" id="id16">pytest.raises</a></p></li>
<li><p><a class="reference internal" href="#pytest-deprecated-call" id="id17">pytest.deprecated_call</a></p></li>
<li><p><a class="reference internal" href="#pytest-register-assert-rewrite" id="id18">pytest.register_assert_rewrite</a></p></li>
<li><p><a class="reference internal" href="#pytest-warns" id="id19">pytest.warns</a></p></li>
<li><p><a class="reference internal" href="#pytest-freeze-includes" id="id20">pytest.freeze_includes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#marks" id="id21">Marks</a></p>
<ul>
<li><p><a class="reference internal" href="#pytest-mark-filterwarnings" id="id22">pytest.mark.filterwarnings</a></p></li>
<li><p><a class="reference internal" href="#pytest-mark-parametrize" id="id23">pytest.mark.parametrize</a></p></li>
<li><p><a class="reference internal" href="#pytest-mark-skip" id="id24">pytest.mark.skip</a></p></li>
<li><p><a class="reference internal" href="#pytest-mark-skipif" id="id25">pytest.mark.skipif</a></p></li>
<li><p><a class="reference internal" href="#pytest-mark-usefixtures" id="id26">pytest.mark.usefixtures</a></p></li>
<li><p><a class="reference internal" href="#pytest-mark-xfail" id="id27">pytest.mark.xfail</a></p></li>
<li><p><a class="reference internal" href="#custom-marks" id="id28">Custom marks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fixtures" id="id29">Fixtures</a></p>
<ul>
<li><p><a class="reference internal" href="#pytest-fixture" id="id30">&#64;pytest.fixture</a></p></li>
<li><p><a class="reference internal" href="#config-cache" id="id31">config.cache</a></p></li>
<li><p><a class="reference internal" href="#capsys" id="id32">capsys</a></p></li>
<li><p><a class="reference internal" href="#capsysbinary" id="id33">capsysbinary</a></p></li>
<li><p><a class="reference internal" href="#capfd" id="id34">capfd</a></p></li>
<li><p><a class="reference internal" href="#capfdbinary" id="id35">capfdbinary</a></p></li>
<li><p><a class="reference internal" href="#doctest-namespace" id="id36">doctest_namespace</a></p></li>
<li><p><a class="reference internal" href="#request" id="id37">request</a></p></li>
<li><p><a class="reference internal" href="#pytestconfig" id="id38">pytestconfig</a></p></li>
<li><p><a class="reference internal" href="#record-property" id="id39">record_property</a></p></li>
<li><p><a class="reference internal" href="#record-testsuite-property" id="id40">record_testsuite_property</a></p></li>
<li><p><a class="reference internal" href="#caplog" id="id41">caplog</a></p></li>
<li><p><a class="reference internal" href="#monkeypatch" id="id42">monkeypatch</a></p></li>
<li><p><a class="reference internal" href="#pytester" id="id43">pytester</a></p></li>
<li><p><a class="reference internal" href="#testdir" id="id44">testdir</a></p></li>
<li><p><a class="reference internal" href="#recwarn" id="id45">recwarn</a></p></li>
<li><p><a class="reference internal" href="#tmp-path" id="id46">tmp_path</a></p></li>
<li><p><a class="reference internal" href="#tmp-path-factory" id="id47">tmp_path_factory</a></p></li>
<li><p><a class="reference internal" href="#tmpdir" id="id48">tmpdir</a></p></li>
<li><p><a class="reference internal" href="#tmpdir-factory" id="id49">tmpdir_factory</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#hooks" id="id50">Hooks</a></p>
<ul>
<li><p><a class="reference internal" href="#bootstrapping-hooks" id="id51">Bootstrapping hooks</a></p></li>
<li><p><a class="reference internal" href="#initialization-hooks" id="id52">Initialization hooks</a></p></li>
<li><p><a class="reference internal" href="#collection-hooks" id="id53">Collection hooks</a></p></li>
<li><p><a class="reference internal" href="#test-running-runtest-hooks" id="id54">Test running (runtest) hooks</a></p></li>
<li><p><a class="reference internal" href="#reporting-hooks" id="id55">Reporting hooks</a></p></li>
<li><p><a class="reference internal" href="#debugging-interaction-hooks" id="id56">Debugging/Interaction hooks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#objects" id="id57">Objects</a></p>
<ul>
<li><p><a class="reference internal" href="#callinfo" id="id58">CallInfo</a></p></li>
<li><p><a class="reference internal" href="#class" id="id59">Class</a></p></li>
<li><p><a class="reference internal" href="#collector" id="id60">Collector</a></p></li>
<li><p><a class="reference internal" href="#collectreport" id="id61">CollectReport</a></p></li>
<li><p><a class="reference internal" href="#config" id="id62">Config</a></p></li>
<li><p><a class="reference internal" href="#exceptioninfo" id="id63">ExceptionInfo</a></p></li>
<li><p><a class="reference internal" href="#exitcode" id="id64">ExitCode</a></p></li>
<li><p><a class="reference internal" href="#file" id="id65">File</a></p></li>
<li><p><a class="reference internal" href="#fixturedef" id="id66">FixtureDef</a></p></li>
<li><p><a class="reference internal" href="#fscollector" id="id67">FSCollector</a></p></li>
<li><p><a class="reference internal" href="#function" id="id68">Function</a></p></li>
<li><p><a class="reference internal" href="#functiondefinition" id="id69">FunctionDefinition</a></p></li>
<li><p><a class="reference internal" href="#item" id="id70">Item</a></p></li>
<li><p><a class="reference internal" href="#markdecorator" id="id71">MarkDecorator</a></p></li>
<li><p><a class="reference internal" href="#markgenerator" id="id72">MarkGenerator</a></p></li>
<li><p><a class="reference internal" href="#mark" id="id73">Mark</a></p></li>
<li><p><a class="reference internal" href="#metafunc" id="id74">Metafunc</a></p></li>
<li><p><a class="reference internal" href="#module" id="id75">Module</a></p></li>
<li><p><a class="reference internal" href="#node" id="id76">Node</a></p></li>
<li><p><a class="reference internal" href="#parser" id="id77">Parser</a></p></li>
<li><p><a class="reference internal" href="#optiongroup" id="id78">OptionGroup</a></p></li>
<li><p><a class="reference internal" href="#pytestpluginmanager" id="id79">PytestPluginManager</a></p></li>
<li><p><a class="reference internal" href="#session" id="id80">Session</a></p></li>
<li><p><a class="reference internal" href="#testreport" id="id81">TestReport</a></p></li>
<li><p><a class="reference internal" href="#result" id="id82">_Result</a></p></li>
<li><p><a class="reference internal" href="#stash" id="id83">Stash</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#global-variables" id="id84">Global Variables</a></p></li>
<li><p><a class="reference internal" href="#environment-variables" id="id85">Environment Variables</a></p></li>
<li><p><a class="reference internal" href="#exceptions" id="id86">Exceptions</a></p></li>
<li><p><a class="reference internal" href="#warnings" id="id87">Warnings</a></p></li>
<li><p><a class="reference internal" href="#configuration-options" id="id88">Configuration Options</a></p></li>
<li><p><a class="reference internal" href="#command-line-flags" id="id89">Command-line Flags</a></p></li>
</ul>
</div>
<div class="section" id="constants">
<h4><a class="toc-backref" href="#id4">Constants</a><a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h4>
<div class="section" id="pytest-version">
<h5><a class="toc-backref" href="#id5">pytest.__version__</a><a class="headerlink" href="#pytest-version" title="Permalink to this headline">¶</a></h5>
<p>The current pytest version, as a string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">__version__</span>
<span class="go">&#39;7.0.0&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="pytest-version-tuple">
<span id="version-tuple"></span><h5><a class="toc-backref" href="#id6">pytest.version_tuple</a><a class="headerlink" href="#pytest-version-tuple" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<p>The current pytest version, as a tuple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, 0)</span>
</pre></div>
</div>
<p>For pre-releases, the last component will be a string with the prerelease version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytest</span><span class="o">.</span><span class="n">version_tuple</span>
<span class="go">(7, 0, &#39;0rc1&#39;)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="functions">
<h4><a class="toc-backref" href="#id7">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="pytest-approx">
<h5><a class="toc-backref" href="#id8">pytest.approx</a><a class="headerlink" href="#pytest-approx" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.approx">
<code class="sig-name descname"><span class="pre">approx</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expected</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python_api.html#approx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.approx" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that two numbers (or two ordered sequences of numbers) are equal to each other
within some tolerance.</p>
<p>Due to the <a class="reference external" href="https://docs.python.org/3/tutorial/floatingpoint.html" title="(in Python v3.10)"><span>Floating Point Arithmetic:  Issues and Limitations</span></a>, numbers that we
would intuitively expect to be equal are not always so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">==</span> <span class="mf">0.3</span>
<span class="go">False</span>
</pre></div>
</div>
<p>This problem is commonly encountered when writing tests, e.g. when making
sure that floating-point values are what you expect them to be.  One way to
deal with this problem is to assert that two floating-point numbers are
equal to within some appropriate tolerance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">((</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-6</span>
<span class="go">True</span>
</pre></div>
</div>
<p>However, comparisons like this are tedious to write and difficult to
understand.  Furthermore, absolute comparisons like the one above are
usually discouraged because there’s no tolerance that works well for all
situations.  <code class="docutils literal notranslate"><span class="pre">1e-6</span></code> is good for numbers around <code class="docutils literal notranslate"><span class="pre">1</span></code>, but too small for
very big numbers and too big for very small ones.  It’s better to express
the tolerance as a fraction of the expected value, but relative comparisons
like that are even more difficult to write correctly and concisely.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">approx</span></code> class performs floating-point comparisons using a syntax
that’s as intuitive as possible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytest</span> <span class="kn">import</span> <span class="n">approx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The same syntax also works for ordered sequences of numbers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">)</span> <span class="o">==</span> <span class="n">approx</span><span class="p">((</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                                          
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">])</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">]))</span> 
<span class="go">True</span>
</pre></div>
</div>
<p>And for a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array against a scalar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                         
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span> 
<span class="go">True</span>
</pre></div>
</div>
<p>Only ordered sequences are supported, because <code class="docutils literal notranslate"><span class="pre">approx</span></code> needs
to infer the relative position of the sequences without ambiguity. This means
<code class="docutils literal notranslate"><span class="pre">sets</span></code> and other unordered sequences are not supported.</p>
<p>Finally, dictionary <em>values</em> can also be compared:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">0.2</span> <span class="o">+</span> <span class="mf">0.4</span><span class="p">}</span> <span class="o">==</span> <span class="n">approx</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The comparison will be true if both mappings have the same keys and their
respective values match the expected tolerances.</p>
<p><strong>Tolerances</strong></p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">approx</span></code> considers numbers within a relative tolerance of
<code class="docutils literal notranslate"><span class="pre">1e-6</span></code> (i.e. one part in a million) of its expected value to be equal.
This treatment would lead to surprising results if the expected value was
<code class="docutils literal notranslate"><span class="pre">0.0</span></code>, because nothing but <code class="docutils literal notranslate"><span class="pre">0.0</span></code> itself is relatively close to <code class="docutils literal notranslate"><span class="pre">0.0</span></code>.
To handle this case less surprisingly, <code class="docutils literal notranslate"><span class="pre">approx</span></code> also considers numbers
within an absolute tolerance of <code class="docutils literal notranslate"><span class="pre">1e-12</span></code> of its expected value to be
equal.  Infinity and NaN are special cases.  Infinity is only considered
equal to itself, regardless of the relative tolerance.  NaN is not
considered equal to anything by default, but you can make it be equal to
itself by setting the <code class="docutils literal notranslate"><span class="pre">nan_ok</span></code> argument to True.  (This is meant to
facilitate comparing arrays that use NaN to mean “no data”.)</p>
<p>Both the relative and absolute tolerances can be changed by passing
arguments to the <code class="docutils literal notranslate"><span class="pre">approx</span></code> constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rel</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">1.0001</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you specify <code class="docutils literal notranslate"><span class="pre">abs</span></code> but not <code class="docutils literal notranslate"><span class="pre">rel</span></code>, the comparison will not consider
the relative tolerance at all.  In other words, two numbers that are within
the default relative tolerance of <code class="docutils literal notranslate"><span class="pre">1e-6</span></code> will still be considered unequal
if they exceed the specified absolute tolerance.  If you specify both
<code class="docutils literal notranslate"><span class="pre">abs</span></code> and <code class="docutils literal notranslate"><span class="pre">rel</span></code>, the numbers will be considered equal if either
tolerance is met:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mf">1e-8</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rel</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">approx</span></code> to compare nonnumeric types, or dicts and
sequences containing nonnumeric types, in which case it falls back to
strict equality. This can be useful for comparing dicts and sequences that
can contain optional values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="mf">1.0000005</span><span class="p">,</span> <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span> <span class="o">==</span> <span class="n">approx</span><span class="p">({</span><span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mf">1.0000005</span><span class="p">]</span> <span class="o">==</span> <span class="n">approx</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="mf">1.0000005</span><span class="p">]</span> <span class="o">==</span> <span class="n">approx</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If you’re thinking about using <code class="docutils literal notranslate"><span class="pre">approx</span></code>, then you might want to know how
it compares to other good ways of comparing floating-point numbers.  All of
these algorithms are based on relative and absolute tolerances and should
agree for the most part, but they do have meaningful differences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">math.isclose(a,</span> <span class="pre">b,</span> <span class="pre">rel_tol=1e-9,</span> <span class="pre">abs_tol=0.0)</span></code>:  True if the relative
tolerance is met w.r.t. either <code class="docutils literal notranslate"><span class="pre">a</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code> or if the absolute
tolerance is met.  Because the relative tolerance is calculated w.r.t.
both <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test is symmetric (i.e.  neither <code class="docutils literal notranslate"><span class="pre">a</span></code> nor
<code class="docutils literal notranslate"><span class="pre">b</span></code> is a “reference value”).  You have to specify an absolute tolerance
if you want to compare to <code class="docutils literal notranslate"><span class="pre">0.0</span></code> because there is no tolerance by
default.  More information: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isclose" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isclose()</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.isclose(a,</span> <span class="pre">b,</span> <span class="pre">rtol=1e-5,</span> <span class="pre">atol=1e-8)</span></code>: True if the difference
between <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> is less that the sum of the relative tolerance
w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code> and the absolute tolerance.  Because the relative tolerance
is only calculated w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test is asymmetric and you can
think of <code class="docutils literal notranslate"><span class="pre">b</span></code> as the reference value.  Support for comparing sequences
is provided by <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.allclose.html#numpy.allclose" title="(in NumPy v1.23)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.allclose()</span></code></a>.  More information:
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.isclose.html" title="(in NumPy v1.23)"><span>numpy.isclose</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unittest.TestCase.assertAlmostEqual(a,</span> <span class="pre">b)</span></code>: True if <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>
are within an absolute tolerance of <code class="docutils literal notranslate"><span class="pre">1e-7</span></code>.  No relative tolerance is
considered , so this function is not appropriate for very large or very
small numbers.  Also, it’s only available in subclasses of <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>
and it’s ugly because it doesn’t follow PEP8.  More information:
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertAlmostEqual" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.assertAlmostEqual()</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">pytest.approx(b,</span> <span class="pre">rel=1e-6,</span> <span class="pre">abs=1e-12)</span></code>: True if the relative
tolerance is met w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code> or if the absolute tolerance is met.
Because the relative tolerance is only calculated w.r.t. <code class="docutils literal notranslate"><span class="pre">b</span></code>, this test
is asymmetric and you can think of <code class="docutils literal notranslate"><span class="pre">b</span></code> as the reference value.  In the
special case that you explicitly specify an absolute tolerance but not a
relative tolerance, only the absolute tolerance is considered.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">approx</span></code> can handle numpy arrays, but we recommend the
specialised test helpers in <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.testing.html" title="(in NumPy v1.23)"><span>Test Support (numpy.testing)</span></a>
if you need support for comparisons, NaNs, or ULP-based tolerances.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.2.</span></p>
</div>
<p>In order to avoid inconsistent behavior, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> is
raised for <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> comparisons.
The example below illustrates the problem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">1e-10</span>  <span class="c1"># calls approx(0.1).__gt__(0.1 + 1e-10)</span>
<span class="k">assert</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">1e-10</span> <span class="o">&gt;</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>  <span class="c1"># calls approx(0.1).__lt__(0.1 + 1e-10)</span>
</pre></div>
</div>
<p>In the second example one expects <code class="docutils literal notranslate"><span class="pre">approx(0.1).__le__(0.1</span> <span class="pre">+</span> <span class="pre">1e-10)</span></code>
to be called. But instead, <code class="docutils literal notranslate"><span class="pre">approx(0.1).__lt__(0.1</span> <span class="pre">+</span> <span class="pre">1e-10)</span></code> is used to
comparison. This is because the call hierarchy of rich comparisons
follows a fixed behavior. More information: <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__ge__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__ge__()</span></code></a></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.7.1: </span><code class="docutils literal notranslate"><span class="pre">approx</span></code> raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when it encounters a dict value or
sequence element of nonnumeric type.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.1.0: </span><code class="docutils literal notranslate"><span class="pre">approx</span></code> falls back to strict equality for nonnumeric types instead
of raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nan_ok</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.python_api.ApproxBase</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-fail">
<h5><a class="toc-backref" href="#id9">pytest.fail</a><a class="headerlink" href="#pytest-fail" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#skipping"><span class="std std-ref">How to use skip and xfail to deal with tests that cannot succeed</span></a></p>
<dl class="py function">
<dt id="pytest.fail">
<code class="sig-name descname"><span class="pre">fail</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">reason</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">pytrace=True</span></em>, <em class="sig-param"><span class="pre">msg=None</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/outcomes.html#fail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fail" title="Permalink to this definition">¶</a></dt>
<dd><p>Explicitly fail an executing test with the given message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The message to show the user as reason for the failure.</p></li>
<li><p><strong>pytrace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If False, msg represents the full failure information and no
python traceback will be reported.</p></li>
<li><p><strong>msg</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Same as <code class="docutils literal notranslate"><span class="pre">reason</span></code>, but deprecated. Will be removed in a future version, use <code class="docutils literal notranslate"><span class="pre">reason</span></code> instead.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>NoReturn</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-skip">
<h5><a class="toc-backref" href="#id10">pytest.skip</a><a class="headerlink" href="#pytest-skip" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.skip">
<code class="sig-name descname"><span class="pre">skip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">reason</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">allow_module_level=False</span></em>, <em class="sig-param"><span class="pre">msg=None</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/outcomes.html#skip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip an executing test with the given message.</p>
<p>This function should be called only during testing (setup, call or teardown) or
during collection by using the <code class="docutils literal notranslate"><span class="pre">allow_module_level</span></code> flag.  This function can
be called in doctests as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The message to show the user as reason for the skip.</p></li>
<li><p><strong>allow_module_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Allows this function to be called at module level, skipping the rest
of the module. Defaults to False.</p></li>
<li><p><strong>msg</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Same as <code class="docutils literal notranslate"><span class="pre">reason</span></code>, but deprecated. Will be removed in a future version, use <code class="docutils literal notranslate"><span class="pre">reason</span></code> instead.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>NoReturn</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to use the <a class="reference internal" href="#pytest-mark-skipif-ref"><span class="std std-ref">pytest.mark.skipif</span></a> marker when
possible to declare a test to be skipped under certain conditions
like mismatching platforms or dependencies.
Similarly, use the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">doctest:</span> <span class="pre">+SKIP</span></code> directive (see <a class="reference external" href="https://docs.python.org/3/library/doctest.html#doctest.SKIP" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">doctest.SKIP</span></code></a>)
to skip a doctest statically.</p>
</div>
</dd></dl>

</div>
<div class="section" id="pytest-importorskip">
<span id="pytest-importorskip-ref"></span><h5><a class="toc-backref" href="#id11">pytest.importorskip</a><a class="headerlink" href="#pytest-importorskip" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.importorskip">
<code class="sig-name descname"><span class="pre">importorskip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minversion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/outcomes.html#importorskip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.importorskip" title="Permalink to this definition">¶</a></dt>
<dd><p>Import and return the requested module <code class="docutils literal notranslate"><span class="pre">modname</span></code>, or skip the
current test if the module cannot be imported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the module to import.</p></li>
<li><p><strong>minversion</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – If given, the imported module’s <code class="docutils literal notranslate"><span class="pre">__version__</span></code> attribute must be at
least this minimal version, otherwise the test is still skipped.</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – If given, this reason is shown as the message when the module cannot
be imported.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The imported module. This should be assigned to its canonical name.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docutils</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;docutils&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pytest-xfail">
<h5><a class="toc-backref" href="#id12">pytest.xfail</a><a class="headerlink" href="#pytest-xfail" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.xfail">
<code class="sig-name descname"><span class="pre">xfail</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/outcomes.html#xfail"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.xfail" title="Permalink to this definition">¶</a></dt>
<dd><p>Imperatively xfail an executing test or setup function with the given reason.</p>
<p>This function should be called only during testing (setup, call or teardown).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to use the <a class="reference internal" href="#pytest-mark-xfail-ref"><span class="std std-ref">pytest.mark.xfail</span></a> marker when
possible to declare a test to be xfailed under certain conditions
like known bugs or missing features.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>NoReturn</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-exit">
<h5><a class="toc-backref" href="#id13">pytest.exit</a><a class="headerlink" href="#pytest-exit" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.exit">
<code class="sig-name descname"><span class="pre">exit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">reason</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">returncode=False</span></em>, <em class="sig-param"><span class="pre">msg=None</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/outcomes.html#exit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit testing process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The message to show as the reason for exiting pytest.  reason has a default value
only because <code class="docutils literal notranslate"><span class="pre">msg</span></code> is deprecated.</p></li>
<li><p><strong>returncode</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – Return code to be used when exiting pytest.</p></li>
<li><p><strong>msg</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Same as <code class="docutils literal notranslate"><span class="pre">reason</span></code>, but deprecated. Will be removed in a future version, use <code class="docutils literal notranslate"><span class="pre">reason</span></code> instead.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>NoReturn</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-main">
<h5><a class="toc-backref" href="#id14">pytest.main</a><a class="headerlink" href="#pytest-main" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.main">
<code class="sig-name descname"><span class="pre">main</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an in-process test run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – List of command line arguments.</p></li>
<li><p><strong>plugins</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em><em>]</em>) – List of plugin objects to be auto-registered during initialization.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An exit code.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>, _pytest.config.ExitCode]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-param">
<h5><a class="toc-backref" href="#id15">pytest.param</a><a class="headerlink" href="#pytest-param" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.param">
<code class="sig-name descname"><span class="pre">param</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*values</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">id</span></em><span class="optional">]</span><span class="optional">[</span>, <em class="sig-param"><span class="pre">marks</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/mark.html#param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.param" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a parameter in <a class="reference internal" href="#pytest-mark-parametrize">pytest.mark.parametrize</a> calls or
<a class="reference internal" href="contents.html#fixture-parametrize-marks"><span class="std std-ref">parametrized fixtures</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – Variable args of the values of the parameter set, in order.</p></li>
<li><p><strong>marks</strong> (<em>Union</em><em>[</em><em>_pytest.mark.structures.MarkDecorator</em><em>, </em><em>Collection</em><em>[</em><em>Union</em><em>[</em><em>_pytest.mark.structures.MarkDecorator</em><em>, </em><em>_pytest.mark.structures.Mark</em><em>]</em><em>]</em><em>]</em>) – A single mark or a list of marks to be applied to this parameter set.</p></li>
<li><p><strong>id</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – The id to attribute to this parameter set.</p></li>
<li><p><strong>marks</strong> – </p></li>
<li><p><strong>id</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.mark.structures.ParameterSet</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-raises">
<h5><a class="toc-backref" href="#id16">pytest.raises</a><a class="headerlink" href="#pytest-raises" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#assertraises"><span class="std std-ref">Assertions about expected exceptions</span></a></p>
<dl class="py function">
<dt id="pytest.raises">
<em class="property"><span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">raises</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">expected_exception:</span> <span class="pre">Exception</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">match</span></em><span class="optional">]</span><span class="sig-paren">)</span><em class="property"><span class="pre"> as</span> <span class="pre">excinfo</span></em><a class="reference internal" href="_modules/_pytest/python_api.html#raises"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.raises" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that a code block/function call raises <code class="docutils literal notranslate"><span class="pre">expected_exception</span></code>
or raise a failure exception otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>match</strong> – <p>If specified, a string containing a regular expression,
or a regular expression object, that is tested against the string
representation of the exception using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.search()</span></code></a>. To match a literal
string that may contain <a class="reference external" href="https://docs.python.org/3/library/re.html#re-syntax" title="(in Python v3.10)"><span class="xref std std-ref">special characters</span></a>, the pattern can
first be escaped with <a class="reference external" href="https://docs.python.org/3/library/re.html#re.escape" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.escape()</span></code></a>.</p>
<p>(This is only used when <a class="reference internal" href="#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> is used as a context manager,
and passed through to the function otherwise.
When using <a class="reference internal" href="#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> as a function, you can use:
<code class="docutils literal notranslate"><span class="pre">pytest.raises(Exc,</span> <span class="pre">func,</span> <span class="pre">match=&quot;passed</span> <span class="pre">on&quot;).match(&quot;my</span> <span class="pre">pattern&quot;)</span></code>.)</p>
</p></li>
<li><p><strong>expected_exception</strong> (<em>Union</em><em>[</em><em>Type</em><em>[</em><em>E</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>Type</em><em>[</em><em>E</em><em>]</em><em>, </em><em>..</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>args</strong> (<em>Any</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[_pytest.python_api.RaisesContext[E], _pytest._code.code.ExceptionInfo[E]]</p>
</dd>
</dl>
<p>Use <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> as a context manager, which will capture the exception of the given
type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
<span class="gp">... </span>   <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
<p>If the code block does not raise the expected exception (<code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> in the example
above), or no exception at all, the check will fail instead.</p>
<p>You can also use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert that the
exception matches a text or regex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;must be 0 or None&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 0 or None&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The context manager produces an <code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> object which can be used to inspect the
details of the captured exception:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;value must be 42&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> as a context manager, it’s worthwhile to
note that normal context manager rules apply and that the exception
raised <em>must</em> be the final line in the scope of the context manager.
Lines of code after that, within the scope of the context manager will
not be executed. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be &lt;= 10&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>  <span class="c1"># this will not execute</span>
</pre></div>
</div>
<p>Instead, the following approach must be taken (note the difference in
scope):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;value must be &lt;= 10&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">exc_info</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ne">ValueError</span>
</pre></div>
</div>
</div>
<p><strong>Using with</strong> <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code></p>
<p>When using <a class="reference internal" href="#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a>
it is possible to parametrize tests such that
some runs raise an exception and others do not.</p>
<p>See <a class="reference internal" href="contents.html#parametrizing-conditional-raising"><span class="std std-ref">Parametrizing conditional raising</span></a> for an example.</p>
<p><strong>Legacy form</strong></p>
<p>It is possible to specify a callable by passing a to-be-called lambda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>or you can specify an arbitrary callable with arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>The form above is fully supported but discouraged for new code because the
context manager form is regarded as more readable and less error-prone.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similar to caught exception objects in Python, explicitly clearing
local references to returned <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> objects can
help the Python interpreter speed up its garbage collection.</p>
<p>Clearing those references breaks a reference cycle
(<code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> –&gt; caught exception –&gt; frame stack raising
the exception –&gt; current frame stack –&gt; local variables –&gt;
<code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code>) which makes Python keep all objects referenced
from that cycle (including all local variables in the current
frame) alive until the next cyclic garbage collection run.
More detailed information can be found in the official Python
documentation for <a class="reference external" href="https://docs.python.org/3/reference/compound_stmts.html#try" title="(in Python v3.10)"><span class="xref std std-ref">the try statement</span></a>.</p>
</div>
</dd></dl>

</div>
<div class="section" id="pytest-deprecated-call">
<h5><a class="toc-backref" href="#id17">pytest.deprecated_call</a><a class="headerlink" href="#pytest-deprecated-call" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#ensuring-function-triggers"><span class="std std-ref">Ensuring code triggers a deprecation warning</span></a></p>
<dl class="py function">
<dt id="pytest.deprecated_call">
<em class="property"><span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">deprecated_call</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/recwarn.html#deprecated_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.deprecated_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that code produces a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> or <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code>.</p>
<p>This function can be used as a context manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">api_call_v2</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;use v3 of this api&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="mi">200</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">deprecated_call</span><span class="p">():</span>
<span class="gp">... </span>   <span class="k">assert</span> <span class="n">api_call_v2</span><span class="p">()</span> <span class="o">==</span> <span class="mi">200</span>
</pre></div>
</div>
<p>It can also be used by passing a function and <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>,
in which case it will ensure calling <code class="docutils literal notranslate"><span class="pre">func(*args,</span> <span class="pre">**kwargs)</span></code> produces one of
the warnings types above. The return value is the return value of the function.</p>
<p>In the context manager form you may use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert
that the warning matches a text or regex.</p>
<p>The context manager produces a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code> objects,
one for each warning raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>[</em><em>[</em><em>..</em><em>]</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>args</strong> (<em>Any</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[_pytest.recwarn.WarningsRecorder, Any]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-register-assert-rewrite">
<h5><a class="toc-backref" href="#id18">pytest.register_assert_rewrite</a><a class="headerlink" href="#pytest-register-assert-rewrite" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#assertion-rewriting"><span class="std std-ref">Assertion Rewriting</span></a></p>
<dl class="py function">
<dt id="pytest.register_assert_rewrite">
<code class="sig-name descname"><span class="pre">register_assert_rewrite</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/assertion.html#register_assert_rewrite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.register_assert_rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Register one or more module names to be rewritten on import.</p>
<p>This function will make sure that this module or all modules inside
the package will get their assert statements rewritten.
Thus you should make sure to call this before the module is
actually imported, usually in your __init__.py if you are a plugin
using a package.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><strong>TypeError</strong></a> – If the given module names are not strings.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-warns">
<h5><a class="toc-backref" href="#id19">pytest.warns</a><a class="headerlink" href="#pytest-warns" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#assertwarnings"><span class="std std-ref">Asserting warnings with the warns function</span></a></p>
<dl class="py function">
<dt id="pytest.warns">
<em class="property"><span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">warns</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">expected_warning:</span> <span class="pre">Exception</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">match</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/recwarn.html#warns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.warns" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that code raises a particular class of warning.</p>
<p>Specifically, the parameter <code class="docutils literal notranslate"><span class="pre">expected_warning</span></code> can be a warning class or
sequence of warning classes, and the inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block must issue a warning of that class or
classes.</p>
<p>This helper produces a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code> objects,
one for each warning raised.</p>
<p>This function can be used as a context manager, or any of the other ways
<a class="reference internal" href="#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">RuntimeWarning</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;my warning&quot;</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">)</span>
</pre></div>
</div>
<p>In the context manager form you may use the keyword argument <code class="docutils literal notranslate"><span class="pre">match</span></code> to assert
that the warning matches a text or regex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s1">&#39;must be 0 or None&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 0 or None&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;value must be 42&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;must be \d+$&#39;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;this is not here&quot;</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">Failed</span>: <span class="n">DID NOT WARN. No warnings of type ...UserWarning... were emitted...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_warning</strong> (<em>Union</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><em>Warning</em></a><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><em>Warning</em></a><em>]</em><em>, </em><em>..</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>args</strong> (<em>Any</em>) – </p></li>
<li><p><strong>match</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Pattern</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[_pytest.recwarn.WarningsChecker, Any]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-freeze-includes">
<h5><a class="toc-backref" href="#id20">pytest.freeze_includes</a><a class="headerlink" href="#pytest-freeze-includes" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#freezing-pytest"><span class="std std-ref">Freezing pytest</span></a></p>
<dl class="py function">
<dt id="pytest.freeze_includes">
<code class="sig-name descname"><span class="pre">freeze_includes</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/freeze_support.html#freeze_includes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.freeze_includes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of module names used by pytest that should be
included by cx_freeze.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="marks">
<span id="marks-ref"></span><h4><a class="toc-backref" href="#id21">Marks</a><a class="headerlink" href="#marks" title="Permalink to this headline">¶</a></h4>
<p>Marks can be used apply meta data to <em>test functions</em> (but not fixtures), which can then be accessed by
fixtures or plugins.</p>
<div class="section" id="pytest-mark-filterwarnings">
<span id="pytest-mark-filterwarnings-ref"></span><h5><a class="toc-backref" href="#id22">pytest.mark.filterwarnings</a><a class="headerlink" href="#pytest-mark-filterwarnings" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#filterwarnings"><span class="std std-ref">&#64;pytest.mark.filterwarnings</span></a></p>
<p>Add warning filters to marked test items.</p>
<dl class="py function">
<dt id="pytest.mark.filterwarnings">
<code class="sig-prename descclassname"><span class="pre">pytest.mark.</span></code><code class="sig-name descname"><span class="pre">filterwarnings</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.filterwarnings" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <p>A <em>warning specification string</em>, which is composed of contents of the tuple <code class="docutils literal notranslate"><span class="pre">(action,</span> <span class="pre">message,</span> <span class="pre">category,</span> <span class="pre">module,</span> <span class="pre">lineno)</span></code>
as specified in <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warning-filter" title="(in Python v3.10)"><span>The Warnings Filter</span></a> section of
the Python documentation, separated by <code class="docutils literal notranslate"><span class="pre">&quot;:&quot;</span></code>. Optional fields can be omitted.
Module names passed for filtering are not regex-escaped.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore:.*usage will be deprecated.*:DeprecationWarning&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-mark-parametrize">
<span id="pytest-mark-parametrize-ref"></span><h5><a class="toc-backref" href="#id23">pytest.mark.parametrize</a><a class="headerlink" href="#pytest-mark-parametrize" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#parametrize"><span class="std std-ref">How to parametrize fixtures and test functions</span></a></p>
<p>This mark has the same signature as <a class="reference internal" href="#pytest.Metafunc.parametrize" title="pytest.Metafunc.parametrize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.Metafunc.parametrize()</span></code></a>; see there.</p>
</div>
<div class="section" id="pytest-mark-skip">
<span id="pytest-mark-skip-ref"></span><h5><a class="toc-backref" href="#id24">pytest.mark.skip</a><a class="headerlink" href="#pytest-mark-skip" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#skip"><span class="std std-ref">Skipping test functions</span></a></p>
<p>Unconditionally skip a test function.</p>
<dl class="py function">
<dt id="pytest.mark.skip">
<code class="sig-prename descclassname"><span class="pre">pytest.mark.</span></code><code class="sig-name descname"><span class="pre">skip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.skip" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Reason why the test function is being skipped.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-mark-skipif">
<span id="pytest-mark-skipif-ref"></span><h5><a class="toc-backref" href="#id25">pytest.mark.skipif</a><a class="headerlink" href="#pytest-mark-skipif" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#skipif"><span class="std std-ref">Skipping test functions</span></a></p>
<p>Skip a test function if a condition is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<dl class="py function">
<dt id="pytest.mark.skipif">
<code class="sig-prename descclassname"><span class="pre">pytest.mark.</span></code><code class="sig-name descname"><span class="pre">skipif</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.skipif" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <code class="docutils literal notranslate"><span class="pre">True/False</span></code> if the condition should be skipped or a <a class="reference internal" href="contents.html#string-conditions"><span class="std std-ref">condition string</span></a>.</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Reason why the test function is being skipped.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pytest-mark-usefixtures">
<span id="pytest-mark-usefixtures-ref"></span><h5><a class="toc-backref" href="#id26">pytest.mark.usefixtures</a><a class="headerlink" href="#pytest-mark-usefixtures" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#usefixtures"><span class="std std-ref">Use fixtures in classes and modules with usefixtures</span></a></p>
<p>Mark a test function as using the given fixture names.</p>
<dl class="py function">
<dt id="pytest.mark.usefixtures">
<code class="sig-prename descclassname"><span class="pre">pytest.mark.</span></code><code class="sig-name descname"><span class="pre">usefixtures</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.usefixtures" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> – The names of the fixture to use, as strings.</p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> in hooks, it can only load fixtures when applied to a test function before test setup
(for example in the <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code> hook).</p>
<p>Also note that this mark has no effect when applied to <strong>fixtures</strong>.</p>
</div>
</div>
<div class="section" id="pytest-mark-xfail">
<span id="pytest-mark-xfail-ref"></span><h5><a class="toc-backref" href="#id27">pytest.mark.xfail</a><a class="headerlink" href="#pytest-mark-xfail" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#xfail"><span class="std std-ref">XFail: mark test functions as expected to fail</span></a></p>
<p>Marks a test function as <em>expected to fail</em>.</p>
<dl class="py function">
<dt id="pytest.mark.xfail">
<code class="sig-prename descclassname"><span class="pre">pytest.mark.</span></code><code class="sig-name descname"><span class="pre">xfail</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raises</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.mark.xfail" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Condition for marking the test function as xfail (<code class="docutils literal notranslate"><span class="pre">True/False</span></code> or a
<a class="reference internal" href="contents.html#string-conditions"><span class="std std-ref">condition string</span></a>). If a bool, you also have
to specify <code class="docutils literal notranslate"><span class="pre">reason</span></code> (see <a class="reference internal" href="contents.html#string-conditions"><span class="std std-ref">condition string</span></a>).</p></li>
<li><p><strong>reason</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Reason why the test function is marked as xfail.</p></li>
<li><p><strong>raises</strong> (<em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><em>Exception</em></a><em>]</em>) – Exception subclass (or tuple of subclasses) expected to be raised by the test function; other exceptions will fail the test.</p></li>
<li><p><strong>run</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If the test function should actually be executed. If <code class="docutils literal notranslate"><span class="pre">False</span></code>, the function will always xfail and will
not be executed (useful if a function is segfaulting).</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – <ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code> (the default) the function will be shown in the terminal output as <code class="docutils literal notranslate"><span class="pre">xfailed</span></code> if it fails
and as <code class="docutils literal notranslate"><span class="pre">xpass</span></code> if it passes. In both cases this will not cause the test suite to fail as a whole. This
is particularly useful to mark <em>flaky</em> tests (tests that fail at random) to be tackled later.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the function will be shown in the terminal output as <code class="docutils literal notranslate"><span class="pre">xfailed</span></code> if it fails, but if it
unexpectedly passes then it will <strong>fail</strong> the test suite. This is particularly useful to mark functions
that are always failing and there should be a clear indication if they unexpectedly start to pass (for example
a new release of a library fixes a known bug).</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="custom-marks">
<h5><a class="toc-backref" href="#id28">Custom marks</a><a class="headerlink" href="#custom-marks" title="Permalink to this headline">¶</a></h5>
<p>Marks are created dynamically using the factory object <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> and applied as a decorator.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Will create and attach a <a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code></a> object to the collected
<a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a>, which can then be accessed by fixtures or hooks with
<a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a>. The <code class="docutils literal notranslate"><span class="pre">mark</span></code> object will have the following attributes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mark</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">)</span>
<span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;thread&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Example for using multiple custom markers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;slow&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;thread&quot;</span><span class="p">)</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>When <a class="reference internal" href="#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a> or <a class="reference internal" href="#pytest.nodes.Node.iter_markers_with_node" title="_pytest.nodes.Node.iter_markers_with_node"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.iter_markers</span></code></a> is used with multiple markers, the marker closest to the function will be iterated over first. The above example will result in <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.slow</span></code> followed by <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.timeout(...)</span></code>.</p>
</div>
</div>
<div class="section" id="fixtures">
<span id="fixtures-api"></span><h4><a class="toc-backref" href="#id29">Fixtures</a><a class="headerlink" href="#fixtures" title="Permalink to this headline">¶</a></h4>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">Fixtures reference</span></a></p>
<p>Fixtures are requested by test functions or other fixtures by declaring them as argument names.</p>
<p>Example of a test requiring a fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Example of a fixture requiring another fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">db_session</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">tmp_path</span> <span class="o">/</span> <span class="s2">&quot;db.file&quot;</span>
    <span class="k">return</span> <span class="n">connect</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details, consult the full <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixtures docs</span></a>.</p>
<div class="section" id="pytest-fixture">
<span id="pytest-fixture-api"></span><h5><a class="toc-backref" href="#id30">&#64;pytest.fixture</a><a class="headerlink" href="#pytest-fixture" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.fixture">
<code class="sig-prename descclassname"><span class="pre">&#64;</span></code><code class="sig-name descname"><span class="pre">fixture</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixture_function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'function'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autouse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#fixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to mark a fixture factory function.</p>
<p>This decorator can be used, with or without parameters, to define a
fixture function.</p>
<p>The name of the fixture function can later be referenced to cause its
invocation ahead of running tests: test modules or classes can use the
<code class="docutils literal notranslate"><span class="pre">pytest.mark.usefixtures(fixturename)</span></code> marker.</p>
<p>Test functions can directly use fixture names as input arguments in which
case the fixture instance returned from the fixture function will be
injected.</p>
<p>Fixtures can provide their values to test functions using <code class="docutils literal notranslate"><span class="pre">return</span></code> or
<code class="docutils literal notranslate"><span class="pre">yield</span></code> statements. When using <code class="docutils literal notranslate"><span class="pre">yield</span></code> the code block after the
<code class="docutils literal notranslate"><span class="pre">yield</span></code> statement is executed as teardown code regardless of the test
outcome, and must yield exactly once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scope</strong> (<em>Union</em><em>[</em><em>_ScopeName</em><em>, </em><em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>Config</em></a><em>]</em><em>, </em><em>_ScopeName</em><em>]</em><em>]</em>) – <p>The scope for which this fixture is shared; one of <code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code>
(default), <code class="docutils literal notranslate"><span class="pre">&quot;class&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;module&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;package&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;session&quot;</span></code>.</p>
<p>This parameter may also be a callable which receives <code class="docutils literal notranslate"><span class="pre">(fixture_name,</span> <span class="pre">config)</span></code>
as parameters, and must return a <code class="docutils literal notranslate"><span class="pre">str</span></code> with one of the values mentioned above.</p>
<p>See <a class="reference internal" href="contents.html#dynamic-scope"><span class="std std-ref">Dynamic scope</span></a> in the docs for more information.</p>
</p></li>
<li><p><strong>params</strong> (<em>Optional</em><em>[</em><em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em>) – An optional list of parameters which will cause multiple invocations
of the fixture function and all of the tests using it. The current
parameter is available in <code class="docutils literal notranslate"><span class="pre">request.param</span></code>.</p></li>
<li><p><strong>autouse</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, the fixture func is activated for all tests that can see it.
If False (the default), an explicit reference is needed to activate
the fixture.</p></li>
<li><p><strong>ids</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Sequence</em><em>[</em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em><em>, </em><em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em><em>]</em><em>]</em>) – Sequence of ids each corresponding to the params so that they are
part of the test id. If no ids are provided they will be generated
automatically from the params.</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – The name of the fixture. This defaults to the name of the decorated
function. If a fixture is used in the same module in which it is
defined, the function name of the fixture will be shadowed by the
function arg that requests the fixture; one way to resolve this is to
name the decorated function <code class="docutils literal notranslate"><span class="pre">fixture_&lt;fixturename&gt;</span></code> and then use
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture(name='&lt;fixturename&gt;')</span></code>.</p></li>
<li><p><strong>fixture_function</strong> (<em>Optional</em><em>[</em><em>FixtureFunction</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[_pytest.fixtures.FixtureFunctionMarker, FixtureFunction]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="config-cache">
<span id="std-fixture-cache"></span><span id="std:fixture-cache"></span><h5><a class="toc-backref" href="#id31">config.cache</a><a class="headerlink" href="#config-cache" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#cache"><span class="std std-ref">How to re-run failed tests and maintain state between test runs</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">config.cache</span></code> object allows other plugins and fixtures
to store and retrieve values across test runs. To access it from fixtures
request <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> into your fixture and get it with <code class="docutils literal notranslate"><span class="pre">pytestconfig.cache</span></code>.</p>
<p>Under the hood, the cache plugin uses the simple
<code class="docutils literal notranslate"><span class="pre">dumps</span></code>/<code class="docutils literal notranslate"><span class="pre">loads</span></code> API of the <a class="reference external" href="https://docs.python.org/3/library/json.html#module-json" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> stdlib module.</p>
<p><code class="docutils literal notranslate"><span class="pre">config.cache</span></code> is an instance of <a class="reference internal" href="#pytest.Cache" title="pytest.Cache"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Cache</span></code></a>:</p>
<dl class="py class">
<dt id="pytest.Cache">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Cache</span></code><a class="reference internal" href="_modules/_pytest/cacheprovider.html#Cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Cache" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="pytest.Cache.mkdir">
<code class="sig-name descname"><span class="pre">mkdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/cacheprovider.html#Cache.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Cache.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a directory path object with the given name.</p>
<p>If the directory does not yet exist, it will be created. You can use
it to manage files to e.g. store/retrieve database dumps across test
sessions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Must be a string not containing a <code class="docutils literal notranslate"><span class="pre">/</span></code> separator.
Make sure the name contains your plugin or application
identifiers to prevent clashes with other cache users.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Cache.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/cacheprovider.html#Cache.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Cache.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the cached value for the given key.</p>
<p>If no value was yet cached or the value cannot be read, the specified
default is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Must be a <code class="docutils literal notranslate"><span class="pre">/</span></code> separated value. Usually the first
name is the name of your plugin or your application.</p></li>
<li><p><strong>default</strong> – The value to return in case of a cache-miss or invalid cache value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Cache.set">
<code class="sig-name descname"><span class="pre">set</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/cacheprovider.html#Cache.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Cache.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Save value for the given key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Must be a <code class="docutils literal notranslate"><span class="pre">/</span></code> separated value. Usually the first
name is the name of your plugin or your application.</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – Must be of any combination of basic python types,
including nested types like lists of dictionaries.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="capsys">
<span id="std-fixture-capsys"></span><span id="std:fixture-capsys"></span><h5><a class="toc-backref" href="#id32">capsys</a><a class="headerlink" href="#capsys" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#captures"><span class="std std-ref">How to capture stdout/stderr output</span></a></p>
<dl class="py function">
<dt id="pytest.capture.capsys">
<span id="_pytest.capture.capsys"></span><code class="sig-name descname"><span class="pre">capsys</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#capsys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capsys" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable text capturing of writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capsys.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">text</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[str]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsys</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsys</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[_pytest.capture.CaptureFixture[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pytest.CaptureFixture">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">CaptureFixture</span></code><a class="reference internal" href="_modules/_pytest/capture.html#CaptureFixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Object returned by the <a class="reference internal" href="#std-fixture-capsys"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsys</span></code></a>, <a class="reference internal" href="#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span></code></a>,
<a class="reference internal" href="#std-fixture-capfd"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfd</span></code></a> and <a class="reference internal" href="#std-fixture-capfdbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfdbinary</span></code></a> fixtures.</p>
<dl class="py method">
<dt id="pytest.CaptureFixture.readouterr">
<code class="sig-name descname"><span class="pre">readouterr</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#CaptureFixture.readouterr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture.readouterr" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return the captured output so far, resetting the internal
buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The captured content as a namedtuple with <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code>
string attributes.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.capture.CaptureResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.CaptureFixture.disabled">
<em class="property"><span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">disabled</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#CaptureFixture.disabled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CaptureFixture.disabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily disable capturing while inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="capsysbinary">
<span id="std-fixture-capsysbinary"></span><span id="std:fixture-capsysbinary"></span><h5><a class="toc-backref" href="#id33">capsysbinary</a><a class="headerlink" href="#capsysbinary" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#captures"><span class="std std-ref">How to capture stdout/stderr output</span></a></p>
<dl class="py function">
<dt id="pytest.capture.capsysbinary">
<span id="_pytest.capture.capsysbinary"></span><code class="sig-name descname"><span class="pre">capsysbinary</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#capsysbinary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capsysbinary" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable bytes capturing of writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capsysbinary.readouterr()</span></code>
method calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">bytes</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[bytes]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="n">capsysbinary</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capsysbinary</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[_pytest.capture.CaptureFixture[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)">bytes</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="capfd">
<span id="std-fixture-capfd"></span><span id="std:fixture-capfd"></span><h5><a class="toc-backref" href="#id34">capfd</a><a class="headerlink" href="#capfd" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#captures"><span class="std std-ref">How to capture stdout/stderr output</span></a></p>
<dl class="py function">
<dt id="pytest.capture.capfd">
<span id="_pytest.capture.capfd"></span><code class="sig-name descname"><span class="pre">capfd</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#capfd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capfd" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable text capturing of writes to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capfd.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">text</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[str]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_system_echo</span><span class="p">(</span><span class="n">capfd</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;echo &quot;hello&quot;&#39;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capfd</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[_pytest.capture.CaptureFixture[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="capfdbinary">
<span id="std-fixture-capfdbinary"></span><span id="std:fixture-capfdbinary"></span><h5><a class="toc-backref" href="#id35">capfdbinary</a><a class="headerlink" href="#capfdbinary" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#captures"><span class="std std-ref">How to capture stdout/stderr output</span></a></p>
<dl class="py function">
<dt id="pytest.capture.capfdbinary">
<span id="_pytest.capture.capfdbinary"></span><code class="sig-name descname"><span class="pre">capfdbinary</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/capture.html#capfdbinary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.capture.capfdbinary" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable bytes capturing of writes to file descriptors <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<p>The captured output is made available via <code class="docutils literal notranslate"><span class="pre">capfd.readouterr()</span></code> method
calls, which return a <code class="docutils literal notranslate"><span class="pre">(out,</span> <span class="pre">err)</span></code> namedtuple.
<code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">err</span></code> will be <code class="docutils literal notranslate"><span class="pre">byte</span></code> objects.</p>
<p>Returns an instance of <a class="reference internal" href="#pytest.CaptureFixture" title="pytest.CaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">CaptureFixture[bytes]</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_system_echo</span><span class="p">(</span><span class="n">capfdbinary</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;echo &quot;hello&quot;&#39;</span><span class="p">)</span>
    <span class="n">captured</span> <span class="o">=</span> <span class="n">capfdbinary</span><span class="o">.</span><span class="n">readouterr</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">captured</span><span class="o">.</span><span class="n">out</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;hello</span><span class="se">\n</span><span class="s2">&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.SubRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[_pytest.capture.CaptureFixture[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)">bytes</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="doctest-namespace">
<span id="std-fixture-doctest_namespace"></span><span id="std:fixture-doctest_namespace"></span><h5><a class="toc-backref" href="#id36">doctest_namespace</a><a class="headerlink" href="#doctest-namespace" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#doctest"><span class="std std-ref">How to run doctests</span></a></p>
<dl class="py function">
<dt id="pytest.doctest.doctest_namespace">
<span id="_pytest.doctest.doctest_namespace"></span><code class="sig-name descname"><span class="pre">doctest_namespace</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/doctest.html#doctest_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.doctest.doctest_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixture that returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> that will be injected into the
namespace of doctests.</p>
<p>Usually this fixture is used in conjunction with another <code class="docutils literal notranslate"><span class="pre">autouse</span></code> fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add_np</span><span class="p">(</span><span class="n">doctest_namespace</span><span class="p">):</span>
    <span class="n">doctest_namespace</span><span class="p">[</span><span class="s2">&quot;np&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span>
</pre></div>
</div>
<p>For more details: <a class="reference internal" href="contents.html#doctest-namespace"><span class="std std-ref">‘doctest_namespace’ fixture</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Any]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="request">
<span id="std-fixture-request"></span><span id="std:fixture-request"></span><h5><a class="toc-backref" href="#id37">request</a><a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h5>
<p><strong>Example</strong>: <a class="reference internal" href="contents.html#request-example"><span class="std std-ref">Pass different values to a test function, depending on command line options</span></a></p>
<p>The <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture is a special fixture providing information of the requesting test function.</p>
<dl class="py class">
<dt id="pytest.FixtureRequest">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">FixtureRequest</span></code><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureRequest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>A request for a fixture from a test or fixture function.</p>
<p>A request object gives access to the requesting test context and has
an optional <code class="docutils literal notranslate"><span class="pre">param</span></code> attribute in case the fixture is parametrized
indirectly.</p>
<dl class="py attribute">
<dt id="pytest.FixtureRequest.fixturename">
<code class="sig-name descname"><span class="pre">fixturename</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.FixtureRequest.fixturename" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixture for which this request is being performed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.scope">
<code class="sig-name descname"><span class="pre">scope</span></code><a class="headerlink" href="#pytest.FixtureRequest.scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Scope string, one of “function”, “class”, “module”, “package”, “session”.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.fixturenames">
<code class="sig-name descname"><span class="pre">fixturenames</span></code><a class="headerlink" href="#pytest.FixtureRequest.fixturenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Names of all active fixtures in this request.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.node">
<code class="sig-name descname"><span class="pre">node</span></code><a class="headerlink" href="#pytest.FixtureRequest.node" title="Permalink to this definition">¶</a></dt>
<dd><p>Underlying collection node (depends on current request scope).</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.config">
<code class="sig-name descname"><span class="pre">config</span></code><a class="headerlink" href="#pytest.FixtureRequest.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The pytest config object associated with this request.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.function">
<code class="sig-name descname"><span class="pre">function</span></code><a class="headerlink" href="#pytest.FixtureRequest.function" title="Permalink to this definition">¶</a></dt>
<dd><p>Test function object if the request has a per-function scope.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.cls">
<code class="sig-name descname"><span class="pre">cls</span></code><a class="headerlink" href="#pytest.FixtureRequest.cls" title="Permalink to this definition">¶</a></dt>
<dd><p>Class (can be None) where the test function was collected.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.instance">
<code class="sig-name descname"><span class="pre">instance</span></code><a class="headerlink" href="#pytest.FixtureRequest.instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance (can be None) on which test function was collected.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.module">
<code class="sig-name descname"><span class="pre">module</span></code><a class="headerlink" href="#pytest.FixtureRequest.module" title="Permalink to this definition">¶</a></dt>
<dd><p>Python module object where the test function was collected.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.path">
<code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#pytest.FixtureRequest.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where the test function was collected.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.keywords">
<code class="sig-name descname"><span class="pre">keywords</span></code><a class="headerlink" href="#pytest.FixtureRequest.keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Keywords/markers dictionary for the underlying node.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.session">
<code class="sig-name descname"><span class="pre">session</span></code><a class="headerlink" href="#pytest.FixtureRequest.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Pytest session object.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.addfinalizer">
<code class="sig-name descname"><span class="pre">addfinalizer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">finalizer</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureRequest.addfinalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.addfinalizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Add finalizer/teardown function to be called after the last test
within the requesting test context finished execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>finalizer</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.applymarker">
<code class="sig-name descname"><span class="pre">applymarker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureRequest.applymarker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.applymarker" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a marker to a single test function invocation.</p>
<p>This method is useful if you don’t want to have a keyword/marker
on all function invocations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>marker</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>_pytest.mark.structures.MarkDecorator</em><em>]</em>) – A <a class="reference internal" href="#pytest.MarkDecorator" title="pytest.MarkDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.MarkDecorator</span></code></a> object created by a call
to <code class="docutils literal notranslate"><span class="pre">pytest.mark.NAME(...)</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.raiseerror">
<code class="sig-name descname"><span class="pre">raiseerror</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureRequest.raiseerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.raiseerror" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise a FixtureLookupError with the given message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>NoReturn</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.FixtureRequest.getfixturevalue">
<code class="sig-name descname"><span class="pre">getfixturevalue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureRequest.getfixturevalue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.FixtureRequest.getfixturevalue" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically run a named fixture function.</p>
<p>Declaring fixtures via function argument is recommended where possible.
But if you can only decide whether to use another fixture at test
setup time, you may use this function to retrieve it inside a fixture
or test function body.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>pytest.FixtureLookupError</strong> – If the given fixture could not be found.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pytestconfig">
<span id="std-fixture-pytestconfig"></span><span id="std:fixture-pytestconfig"></span><h5><a class="toc-backref" href="#id38">pytestconfig</a><a class="headerlink" href="#pytestconfig" title="Permalink to this headline">¶</a></h5>
<dl class="py function">
<dt id="pytest.fixtures.pytestconfig">
<span id="_pytest.fixtures.pytestconfig"></span><code class="sig-name descname"><span class="pre">pytestconfig</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/fixtures.html#pytestconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fixtures.pytestconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Session-scoped fixture that returns the session’s <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a>
object.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">pytestconfig</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">pytestconfig</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.FixtureRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="record-property">
<span id="std-fixture-record_property"></span><span id="std:fixture-record_property"></span><h5><a class="toc-backref" href="#id39">record_property</a><a class="headerlink" href="#record-property" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#record-property-example"><span class="std std-ref">record_property</span></a></p>
<dl class="py function">
<dt id="pytest.junitxml.record_property">
<span id="_pytest.junitxml.record_property"></span><code class="sig-name descname"><span class="pre">record_property</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/junitxml.html#record_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.junitxml.record_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Add extra properties to the calling test.</p>
<p>User properties become part of the test report and are available to the
configured reporters, like JUnit XML.</p>
<p>The fixture is callable with <code class="docutils literal notranslate"><span class="pre">name,</span> <span class="pre">value</span></code>. The value is automatically
XML-encoded.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">record_property</span><span class="p">):</span>
    <span class="n">record_property</span><span class="p">(</span><span class="s2">&quot;example_key&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.FixtureRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Callable[[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="record-testsuite-property">
<span id="std-fixture-record_testsuite_property"></span><span id="std:fixture-record_testsuite_property"></span><h5><a class="toc-backref" href="#id40">record_testsuite_property</a><a class="headerlink" href="#record-testsuite-property" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#record-testsuite-property-example"><span class="std std-ref">record_testsuite_property</span></a></p>
<dl class="py function">
<dt id="pytest.junitxml.record_testsuite_property">
<span id="_pytest.junitxml.record_testsuite_property"></span><code class="sig-name descname"><span class="pre">record_testsuite_property</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/junitxml.html#record_testsuite_property"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.junitxml.record_testsuite_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Record a new <code class="docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> tag as child of the root <code class="docutils literal notranslate"><span class="pre">&lt;testsuite&gt;</span></code>.</p>
<p>This is suitable to writing global information regarding the entire test
suite, and is compatible with <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> JUnit family.</p>
<p>This is a <code class="docutils literal notranslate"><span class="pre">session</span></code>-scoped fixture which is called with <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">value)</span></code>. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">record_testsuite_property</span><span class="p">):</span>
    <span class="n">record_testsuite_property</span><span class="p">(</span><span class="s2">&quot;ARCH&quot;</span><span class="p">,</span> <span class="s2">&quot;PPC&quot;</span><span class="p">)</span>
    <span class="n">record_testsuite_property</span><span class="p">(</span><span class="s2">&quot;STORAGE_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;CEPH&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> must be a string, <code class="docutils literal notranslate"><span class="pre">value</span></code> will be converted to a string and properly xml-escaped.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently this fixture <strong>does not work</strong> with the
<a class="reference external" href="https://github.com/pytest-dev/pytest-xdist">pytest-xdist</a> plugin. See
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7767">issue #7767</a> for details.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.FixtureRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Callable[[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="caplog">
<span id="std-fixture-caplog"></span><span id="std:fixture-caplog"></span><h5><a class="toc-backref" href="#id41">caplog</a><a class="headerlink" href="#caplog" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a></p>
<dl class="py function">
<dt id="pytest.logging.caplog">
<span id="_pytest.logging.caplog"></span><code class="sig-name descname"><span class="pre">caplog</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/logging.html#caplog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.logging.caplog" title="Permalink to this definition">¶</a></dt>
<dd><p>Access and control log capturing.</p>
<p>Captured logs are available through the following properties/methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">messages</span>        <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="nb">format</span><span class="o">-</span><span class="n">interpolated</span> <span class="n">log</span> <span class="n">messages</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">text</span>            <span class="o">-&gt;</span> <span class="n">string</span> <span class="n">containing</span> <span class="n">formatted</span> <span class="n">log</span> <span class="n">output</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">records</span>         <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">logging</span><span class="o">.</span><span class="n">LogRecord</span> <span class="n">instances</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">record_tuples</span>   <span class="o">-&gt;</span> <span class="nb">list</span> <span class="n">of</span> <span class="p">(</span><span class="n">logger_name</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="n">tuples</span>
<span class="o">*</span> <span class="n">caplog</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>         <span class="o">-&gt;</span> <span class="n">clear</span> <span class="n">captured</span> <span class="n">records</span> <span class="ow">and</span> <span class="n">formatted</span> <span class="n">log</span> <span class="n">output</span> <span class="n">string</span>
</pre></div>
</div>
<p>Returns a <a class="reference internal" href="#pytest.LogCaptureFixture" title="pytest.LogCaptureFixture"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.LogCaptureFixture</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>request</strong> (<em>_pytest.fixtures.FixtureRequest</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[_pytest.logging.LogCaptureFixture, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pytest.LogCaptureFixture">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">LogCaptureFixture</span></code><a class="reference internal" href="_modules/_pytest/logging.html#LogCaptureFixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides access and control of log capturing.</p>
<dl class="py method">
<dt id="pytest.LogCaptureFixture.handler">
<code class="sig-name descname"><span class="pre">handler</span></code><a class="headerlink" href="#pytest.LogCaptureFixture.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the logging handler used by the fixture.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>LogCaptureHandler</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.get_records">
<code class="sig-name descname"><span class="pre">get_records</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">when</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/logging.html#LogCaptureFixture.get_records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.get_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the logging records for one of the possible test phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Which test phase to obtain the records from. Valid values are: “setup”, “call” and “teardown”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of captured records at the given stage.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.LogRecord" title="(in Python v3.10)">logging.LogRecord</a>]</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.4.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.text">
<code class="sig-name descname"><span class="pre">text</span></code><a class="headerlink" href="#pytest.LogCaptureFixture.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The formatted log text.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.records">
<code class="sig-name descname"><span class="pre">records</span></code><a class="headerlink" href="#pytest.LogCaptureFixture.records" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of log records.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.record_tuples">
<code class="sig-name descname"><span class="pre">record_tuples</span></code><a class="headerlink" href="#pytest.LogCaptureFixture.record_tuples" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of a stripped down version of log records intended
for use in assertion comparison.</p>
<p>The format of the tuple is:</p>
<blockquote>
<div><p>(logger_name, log_level, message)</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.messages">
<code class="sig-name descname"><span class="pre">messages</span></code><a class="headerlink" href="#pytest.LogCaptureFixture.messages" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of format-interpolated log messages.</p>
<p>Unlike ‘records’, which contains the format string and parameters for
interpolation, log messages in this list are all interpolated.</p>
<p>Unlike ‘text’, which contains the output from the handler, log
messages in this list are unadorned with levels, timestamps, etc,
making exact comparisons more reliable.</p>
<p>Note that traceback or stack info (from <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.exception" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.exception()</span></code></a> or
the <code class="docutils literal notranslate"><span class="pre">exc_info</span></code> or <code class="docutils literal notranslate"><span class="pre">stack_info</span></code> arguments to the logging functions) is
not included, as this is added by the formatter in the handler.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.7.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.clear">
<code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/logging.html#LogCaptureFixture.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the list of log records and the captured log text.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.set_level">
<code class="sig-name descname"><span class="pre">set_level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/logging.html#LogCaptureFixture.set_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.set_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the level of a logger for the duration of a test.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.4: </span>The levels of the loggers changed by this function will be
restored to their initial values at the end of the test.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The level.</p></li>
<li><p><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The logger to update. If not given, the root logger.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LogCaptureFixture.at_level">
<em class="property"><span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">at_level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/logging.html#LogCaptureFixture.at_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LogCaptureFixture.at_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that sets the level for capturing of logs. After
the end of the ‘with’ statement the level is restored to its original
value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The level.</p></li>
<li><p><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The logger to update. If not given, the root logger.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Generator[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="monkeypatch">
<span id="std-fixture-monkeypatch"></span><span id="std:fixture-monkeypatch"></span><h5><a class="toc-backref" href="#id42">monkeypatch</a><a class="headerlink" href="#monkeypatch" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#monkeypatching"><span class="std std-ref">How to monkeypatch/mock modules and environments</span></a></p>
<dl class="py function">
<dt id="pytest.monkeypatch.monkeypatch">
<span id="_pytest.monkeypatch.monkeypatch"></span><code class="sig-name descname"><span class="pre">monkeypatch</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#monkeypatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.monkeypatch.monkeypatch" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenient fixture for monkey-patching.</p>
<p>The fixture provides these methods to modify objects, dictionaries, or
<a class="reference external" href="https://docs.python.org/3/library/os.html#os.environ" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setattr" title="pytest.MonkeyPatch.setattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setattr(obj,</span> <span class="pre">name,</span> <span class="pre">value,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delattr" title="pytest.MonkeyPatch.delattr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delattr(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setitem" title="pytest.MonkeyPatch.setitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setitem(mapping,</span> <span class="pre">name,</span> <span class="pre">value)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delitem" title="pytest.MonkeyPatch.delitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delitem(obj,</span> <span class="pre">name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.setenv" title="pytest.MonkeyPatch.setenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.setenv(name,</span> <span class="pre">value,</span> <span class="pre">prepend=None)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.delenv" title="pytest.MonkeyPatch.delenv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.delenv(name,</span> <span class="pre">raising=True)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.syspath_prepend" title="pytest.MonkeyPatch.syspath_prepend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.chdir" title="pytest.MonkeyPatch.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.chdir(path)</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">monkeypatch.context()</span></code></a></p></li>
</ul>
<p>All modifications will be undone after the requesting test function or
fixture has finished. The <code class="docutils literal notranslate"><span class="pre">raising</span></code> parameter determines if a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyError</span></code></a>
or <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code></a> will be raised if the set/deletion operation does not have the
specified target.</p>
<p>To undo modifications done by the fixture in a contained scope,
use <a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">context()</span></code></a>.</p>
<p>Returns a <a class="reference internal" href="#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator[_pytest.monkeypatch.MonkeyPatch, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pytest.MonkeyPatch">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">MonkeyPatch</span></code><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to conveniently monkeypatch attributes/items/environment
variables/syspath.</p>
<p>Returned by the <a class="reference internal" href="#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a> fixture.</p>
<dl class="field-list simple">
<dt class="field-odd">Versionchanged:</dt>
<dd class="field-odd"><p>6.2
Can now also be used directly as <code class="docutils literal notranslate"><span class="pre">pytest.MonkeyPatch()</span></code>, for when
the fixture is not available. In this case, use
<a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with</span> <span class="pre">MonkeyPatch.context()</span> <span class="pre">as</span> <span class="pre">mp:</span></code></a> or remember to call
<a class="reference internal" href="#pytest.MonkeyPatch.undo" title="pytest.MonkeyPatch.undo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">undo()</span></code></a> explicitly.</p>
</dd>
</dl>
<dl class="py method">
<dt id="pytest.MonkeyPatch.context">
<em class="property"><span class="pre">classmethod</span> <span class="pre">with</span> </em><code class="sig-name descname"><span class="pre">context</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.context" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that returns a new <a class="reference internal" href="#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> object
which undoes any patching done inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block upon exit.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">functools</span>


<span class="k">def</span> <span class="nf">test_partial</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">monkeypatch</span><span class="o">.</span><span class="n">context</span><span class="p">()</span> <span class="k">as</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">functools</span><span class="p">,</span> <span class="s2">&quot;partial&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Useful in situations where it is desired to undo some patches before the test ends,
such as mocking <code class="docutils literal notranslate"><span class="pre">stdlib</span></code> functions that might break pytest itself if mocked (for examples
of this see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3290">issue #3290</a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator[_pytest.monkeypatch.MonkeyPatch, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.setattr">
<code class="sig-name descname"><span class="pre">setattr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">target</span></em>, <em class="sig-param"><span class="pre">name</span></em>, <em class="sig-param"><span class="pre">value=&lt;notset&gt;</span></em>, <em class="sig-param"><span class="pre">raising=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.setattr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set attribute value on target, memorizing the old value.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">os</span><span class="p">,</span> <span class="s2">&quot;getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The code above replaces the <a class="reference external" href="https://docs.python.org/3/library/os.html#os.getcwd" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getcwd()</span></code></a> function by a <code class="docutils literal notranslate"><span class="pre">lambda</span></code> which
always returns <code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>.</p>
<p>For convenience, you can specify a string as <code class="docutils literal notranslate"><span class="pre">target</span></code> which
will be interpreted as a dotted import path, with the last part
being the attribute name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="s2">&quot;os.getcwd&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Raises <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code></a> if the attribute does not exist, unless
<code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to False.</p>
<p><strong>Where to patch</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code> works by (temporarily) changing the object that a name points to with another one.
There can be many names pointing to any individual object, so for patching to work you must ensure
that you patch the name used by the system under test.</p>
<p>See the section <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#where-to-patch" title="(in Python v3.10)"><span class="xref std std-ref">Where to patch</span></a> in the <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#module-unittest.mock" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest.mock</span></code></a>
docs for a complete explanation, which is meant for <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.mock.patch()</span></code></a> but
applies to <code class="docutils literal notranslate"><span class="pre">monkeypatch.setattr</span></code> as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>raising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.delattr">
<code class="sig-name descname"><span class="pre">delattr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">target</span></em>, <em class="sig-param"><span class="pre">name=&lt;notset&gt;</span></em>, <em class="sig-param"><span class="pre">raising=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.delattr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete attribute <code class="docutils literal notranslate"><span class="pre">name</span></code> from <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">name</span></code> is specified and <code class="docutils literal notranslate"><span class="pre">target</span></code> is a string
it will be interpreted as a dotted import path with the
last part being the attribute name.</p>
<p>Raises AttributeError it the attribute does not exist, unless
<code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>_pytest.monkeypatch.Notset</em><em>]</em>) – </p></li>
<li><p><strong>raising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.setitem">
<code class="sig-name descname"><span class="pre">setitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.setitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Set dictionary entry <code class="docutils literal notranslate"><span class="pre">name</span></code> to value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dic</strong> (<em>MutableMapping</em><em>[</em><em>K</em><em>, </em><em>V</em><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>K</em>) – </p></li>
<li><p><strong>value</strong> (<em>V</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.delitem">
<code class="sig-name descname"><span class="pre">delitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.delitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete <code class="docutils literal notranslate"><span class="pre">name</span></code> from dict.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if it doesn’t exist, unless <code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to
False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dic</strong> (<em>MutableMapping</em><em>[</em><em>K</em><em>, </em><em>V</em><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<em>K</em>) – </p></li>
<li><p><strong>raising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.setenv">
<code class="sig-name descname"><span class="pre">setenv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.setenv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.setenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Set environment variable <code class="docutils literal notranslate"><span class="pre">name</span></code> to <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">prepend</span></code> is a character, read the current environment variable
value and prepend the <code class="docutils literal notranslate"><span class="pre">value</span></code> adjoined with the <code class="docutils literal notranslate"><span class="pre">prepend</span></code>
character.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>prepend</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.delenv">
<code class="sig-name descname"><span class="pre">delenv</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raising</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.delenv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.delenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete <code class="docutils literal notranslate"><span class="pre">name</span></code> from the environment.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if it does not exist, unless <code class="docutils literal notranslate"><span class="pre">raising</span></code> is set to
False.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>raising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.syspath_prepend">
<code class="sig-name descname"><span class="pre">syspath_prepend</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.syspath_prepend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.syspath_prepend" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepend <code class="docutils literal notranslate"><span class="pre">path</span></code> to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> list of import locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.chdir">
<code class="sig-name descname"><span class="pre">chdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.chdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the current working directory to the specified path.</p>
<p>Path can be a string or a path object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.MonkeyPatch.undo">
<code class="sig-name descname"><span class="pre">undo</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/monkeypatch.html#MonkeyPatch.undo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MonkeyPatch.undo" title="Permalink to this definition">¶</a></dt>
<dd><p>Undo previous changes.</p>
<p>This call consumes the undo stack. Calling it a second time has no
effect unless you do more monkeypatching after the undo call.</p>
<p>There is generally no need to call <code class="docutils literal notranslate"><span class="pre">undo()</span></code>, since it is
called automatically during tear-down.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture is used across a
single test function invocation. If <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> is used both by
the test function itself and one of the test fixtures,
calling <code class="docutils literal notranslate"><span class="pre">undo()</span></code> will undo all of the changes made in
both functions.</p>
<p>Prefer to use <a class="reference internal" href="#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">context()</span></code></a> instead.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pytester">
<span id="std-fixture-pytester"></span><span id="std:fixture-pytester"></span><h5><a class="toc-backref" href="#id43">pytester</a><a class="headerlink" href="#pytester" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.2.</span></p>
</div>
<p>Provides a <a class="reference internal" href="#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> instance that can be used to run and test pytest itself.</p>
<p>It provides an empty directory where pytest can be executed in isolation, and contains facilities
to write tests, configuration files, and match against expected output.</p>
<p>To use it, include in your topmost <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;pytester&quot;</span>
</pre></div>
</div>
<dl class="py class">
<dt id="pytest.Pytester">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Pytester</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester" title="Permalink to this definition">¶</a></dt>
<dd><p>Facilities to write tests/configuration files, execute pytest in isolation, and match
against expected output, perfect for black-box testing of pytest plugins.</p>
<p>It attempts to isolate the test run from external factors as much as possible, modifying
the current working directory to <code class="docutils literal notranslate"><span class="pre">path</span></code> and environment variables during initialization.</p>
<p>Attributes:</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="contents.html#pytest.Pytester.path" title="pytest.Pytester.path"><strong>path</strong></a> (<em>Path</em>) – temporary directory path used to create files/run tests from, etc.</p></li>
<li><p><a class="reference internal" href="contents.html#pytest.Config.InvocationParams.plugins" title="pytest.Config.InvocationParams.plugins"><strong>plugins</strong></a> – A list of plugins to use with <a class="reference internal" href="#pytest.Pytester.parseconfig" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and
<a class="reference internal" href="#pytest.Pytester.runpytest" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.  Initially this is an empty list but plugins can
be added to the list.  The type of items to add to the list depends on
the method using them so refer to them for details.</p></li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt id="pytest.Pytester.TimeoutExpired">
<em class="property"><span class="pre">exception</span> </em><code class="sig-name descname"><span class="pre">TimeoutExpired</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.TimeoutExpired"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.TimeoutExpired" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.path">
<code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#pytest.Pytester.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporary directory where files are created and pytest is executed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.make_hook_recorder">
<code class="sig-name descname"><span class="pre">make_hook_recorder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.make_hook_recorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> for a PluginManager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pluginmanager</strong> (<em>_pytest.config.PytestPluginManager</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.HookRecorder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.chdir">
<code class="sig-name descname"><span class="pre">chdir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.chdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Cd into the temporary directory.</p>
<p>This is done automatically upon instantiation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.makefile">
<code class="sig-name descname"><span class="pre">makefile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new text file(s) in the test directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The extension the file(s) should use, including the dot, e.g. <code class="docutils literal notranslate"><span class="pre">.py</span></code>.</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – All args are treated as strings and joined using newlines.
The result is written as contents to the file.  The name of the
file is based on the test function requesting this fixture.</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Each keyword is the name of a file, while the value of it will
be written as contents of the file.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;line1&quot;</span><span class="p">,</span> <span class="s2">&quot;line2&quot;</span><span class="p">)</span>

<span class="n">pytester</span><span class="o">.</span><span class="n">makefile</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="n">pytest</span><span class="o">=</span><span class="s2">&quot;[pytest]</span><span class="se">\n</span><span class="s2">addopts=-rs</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To create binary files, use <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.write_bytes" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.write_bytes()</span></code></a> directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;foo.bin&quot;</span><span class="p">)</span>
<span class="n">filename</span><span class="o">.</span><span class="n">write_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.makeconftest">
<code class="sig-name descname"><span class="pre">makeconftest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makeconftest" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a contest.py file with ‘source’ as contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.makeini">
<code class="sig-name descname"><span class="pre">makeini</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makeini" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a tox.ini file with ‘source’ as contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getinicfg">
<code class="sig-name descname"><span class="pre">getinicfg</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getinicfg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the pytest section from the tox.ini config file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>iniconfig.SectionWrapper</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.makepyprojecttoml">
<code class="sig-name descname"><span class="pre">makepyprojecttoml</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makepyprojecttoml" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a pyproject.toml file with ‘source’ as contents.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.makepyfile">
<code class="sig-name descname"><span class="pre">makepyfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.makepyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .py extension.</p>
<p>Defaults to the test name with a ‘.py’ extension, e.g test_foobar.py, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.py.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.py&#39; &amp; &#39;custom.py&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.maketxtfile">
<code class="sig-name descname"><span class="pre">maketxtfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.maketxtfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for .makefile() with a .txt extension.</p>
<p>Defaults to the test name with a ‘.txt’ extension, e.g test_foobar.txt, overwriting
existing files.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="c1"># Initial file is created test_something.txt.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># To create multiple files, pass kwargs accordingly.</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">maketxtfile</span><span class="p">(</span><span class="n">custom</span><span class="o">=</span><span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
    <span class="c1"># At this point, both &#39;test_something.txt&#39; &amp; &#39;custom.txt&#39; exist in the test directory.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.syspathinsert">
<code class="sig-name descname"><span class="pre">syspathinsert</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.syspathinsert" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepend a directory to sys.path, defaults to <a class="reference internal" href="#pytest.Pytester.path" title="pytest.Pytester.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a>.</p>
<p>This is undone automatically when this object dies at the end of each
test.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.mkdir">
<code class="sig-name descname"><span class="pre">mkdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new (sub)directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.mkpydir">
<code class="sig-name descname"><span class="pre">mkpydir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.mkpydir" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new python package.</p>
<p>This creates a (sub)directory with an empty <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file so it
gets recognised as a Python package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.copy_example">
<code class="sig-name descname"><span class="pre">copy_example</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.copy_example" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy file from project’s directory into the testdir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the file to copy.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to the copied directory (inside <code class="docutils literal notranslate"><span class="pre">self.path</span></code>).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getnode">
<code class="sig-name descname"><span class="pre">getnode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getnode" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the collection node of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – A pytest config.
See <a class="reference internal" href="#pytest.Pytester.parseconfig" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a> and <a class="reference internal" href="#pytest.Pytester.parseconfigure" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> for creating it.</p></li>
<li><p><strong>arg</strong> (<a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Path to the file.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getpathnode">
<code class="sig-name descname"><span class="pre">getpathnode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getpathnode" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the collection node of a file.</p>
<p>This is like <a class="reference internal" href="#pytest.Pytester.getnode" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getnode()</span></code></a> but uses <a class="reference internal" href="#pytest.Pytester.parseconfigure" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a> to
create the (configured) pytest Config instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Path to the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.genitems">
<code class="sig-name descname"><span class="pre">genitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.genitems" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate all test items from a collection node.</p>
<p>This recurses into the collection node and returns a list of all the
test items contained within.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colitems</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>_pytest.nodes.Item</em><em>, </em><em>_pytest.nodes.Collector</em><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[_pytest.nodes.Item]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runitem">
<code class="sig-name descname"><span class="pre">runitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the “test_func” Item.</p>
<p>The calling test instance (class containing the test method) must
provide a <code class="docutils literal notranslate"><span class="pre">.getrunner()</span></code> method which should return a runner which
can run the test protocol for a single item, e.g.
<code class="xref py py-func docutils literal notranslate"><span class="pre">_pytest.runner.runtestprotocol()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.inline_runsource">
<code class="sig-name descname"><span class="pre">inline_runsource</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_runsource" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a test module in process using <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code>.</p>
<p>This run writes “source” into a temporary file and runs
<code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> on it, returning a <a class="reference internal" href="#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance
for the result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The source code of the test module.</p></li>
<li><p><strong>cmdlineargs</strong> – Any extra command line arguments to use.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.HookRecorder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.inline_genitems">
<code class="sig-name descname"><span class="pre">inline_genitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_genitems" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main(['--collectonly'])</span></code> in-process.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself like <a class="reference internal" href="#pytest.Pytester.inline_run" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inline_run()</span></code></a>, but returns a
tuple of the collected items and a <a class="reference internal" href="#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[List[_pytest.nodes.Item], _pytest.pytester.HookRecorder]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.inline_run">
<code class="sig-name descname"><span class="pre">inline_run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.inline_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> in-process, returning a HookRecorder.</p>
<p>Runs the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> function to run all of pytest inside
the test process itself.  This means it can return a
<a class="reference internal" href="#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> instance which gives more detailed results
from that run than can be done by matching stdout/stderr from
<a class="reference internal" href="#pytest.Pytester.runpytest" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runpytest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – Command line arguments to pass to <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p></li>
<li><p><strong>plugins</strong> – Extra plugin instances the <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> instance should use.</p></li>
<li><p><strong>no_reraise_ctrlc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Typically we reraise keyboard interrupts from the child run. If
True, the KeyboardInterrupt exception is captured.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.HookRecorder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runpytest_inprocess">
<code class="sig-name descname"><span class="pre">runpytest_inprocess</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest_inprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Return result of running pytest in-process, providing a similar
interface to what self.runpytest() provides.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runpytest">
<code class="sig-name descname"><span class="pre">runpytest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest" title="Permalink to this definition">¶</a></dt>
<dd><p>Run pytest inline or in a subprocess, depending on the command line
option “–runpytest” and return a <a class="reference internal" href="#pytest.RunResult" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.parseconfig">
<code class="sig-name descname"><span class="pre">parseconfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.parseconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new pytest Config instance from given commandline args.</p>
<p>This invokes the pytest bootstrapping code in _pytest.config to create
a new <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.core.PluginManager</span></code> and call the
pytest_cmdline_parse hook to create a new
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code> has been populated they should be plugin modules
to be registered with the PluginManager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.parseconfigure">
<code class="sig-name descname"><span class="pre">parseconfigure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.parseconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new pytest configured Config instance.</p>
<p>Returns a new <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> instance like
<a class="reference internal" href="#pytest.Pytester.parseconfig" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfig()</span></code></a>, but also calls the pytest_configure hook.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getitem">
<code class="sig-name descname"><span class="pre">getitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the test item for a test function.</p>
<p>Writes the source to a python file and runs pytest’s collection on
the resulting module, returning the test item for the requested
function name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – The module source.</p></li>
<li><p><strong>funcname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the test function for which to return a test item.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.nodes.Item</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getitems">
<code class="sig-name descname"><span class="pre">getitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getitems" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all test items collected from the module.</p>
<p>Writes the source to a Python file and runs pytest’s collection on
the resulting module, returning all test items contained within.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[_pytest.nodes.Item]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.getmodulecol">
<code class="sig-name descname"><span class="pre">getmodulecol</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.getmodulecol" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the module collection node for <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
<p>Writes <code class="docutils literal notranslate"><span class="pre">source</span></code> to a file using <a class="reference internal" href="#pytest.Pytester.makepyfile" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">makepyfile()</span></code></a> and then
runs the pytest collection on it, returning the collection node for the
test module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – The source code of the module to collect.</p></li>
<li><p><strong>configargs</strong> – Any extra arguments to pass to <a class="reference internal" href="#pytest.Pytester.parseconfigure" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseconfigure()</span></code></a>.</p></li>
<li><p><strong>withinit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Whether to also write an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file to the same
directory to ensure it is a package.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.collect_by_name">
<code class="sig-name descname"><span class="pre">collect_by_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.collect_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the collection node for name from the module collection.</p>
<p>Searches a module collection node for a collection node matching the
given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modcol</strong> (<em>_pytest.nodes.Collector</em>) – A module collection node; see <a class="reference internal" href="#pytest.Pytester.getmodulecol" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getmodulecol()</span></code></a>.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the node to return.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.popen">
<code class="sig-name descname"><span class="pre">popen</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmdargs</span></em>, <em class="sig-param"><span class="pre">stdout=-1</span></em>, <em class="sig-param"><span class="pre">stderr=-1</span></em>, <em class="sig-param"><span class="pre">stdin=&lt;NotSetType.token:</span> <span class="pre">0&gt;</span></em>, <em class="sig-param"><span class="pre">**kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.popen" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p>
<p>Calls <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> making sure the current working
directory is in <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>.</p>
<p>You probably want to use <a class="reference internal" href="#pytest.Pytester.run" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmdargs</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>stdout</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>TextIO</em><em>]</em>) – </p></li>
<li><p><strong>stderr</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>TextIO</em><em>]</em>) – </p></li>
<li><p><strong>stdin</strong> (<em>Union</em><em>[</em><em>_pytest.compat.NotSetType</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>, </em><em>IO</em><em>[</em><em>Any</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*cmdargs</span></em>, <em class="sig-param"><span class="pre">timeout=None</span></em>, <em class="sig-param"><span class="pre">stdin=&lt;NotSetType.token:</span> <span class="pre">0&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command with arguments.</p>
<p>Run a process using <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> saving the stdout and
stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmdargs</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – The sequence of arguments to pass to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>,
with path-like objects being converted to <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
automatically.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>]</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#pytest.Pytester.TimeoutExpired" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
<li><p><strong>stdin</strong> (<em>Union</em><em>[</em><em>_pytest.compat.NotSetType</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><em>bytes</em></a><em>, </em><em>IO</em><em>[</em><em>Any</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – <p>Optional standard input.</p>
<ul>
<li><p>If it is <code class="xref py py-attr docutils literal notranslate"><span class="pre">CLOSE_STDIN</span></code> (Default), then this method calls
<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> with <code class="docutils literal notranslate"><span class="pre">stdin=subprocess.PIPE</span></code>, and
the standard input is closed immediately after the new command is
started.</p></li>
<li><p>If it is of type <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, these bytes are sent to the
standard input of the command.</p></li>
<li><p>Otherwise, it is passed through to <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.
For further information in this case, consult the document of the
<code class="docutils literal notranslate"><span class="pre">stdin</span></code> parameter in <a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.Popen" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runpython">
<code class="sig-name descname"><span class="pre">runpython</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpython" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a python script using sys.executable as interpreter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>script</strong> (<a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runpython_c">
<code class="sig-name descname"><span class="pre">runpython_c</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpython_c" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;command&quot;</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.runpytest_subprocess">
<code class="sig-name descname"><span class="pre">runpytest_subprocess</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.runpytest_subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Run pytest as a subprocess with given arguments.</p>
<p>Any plugins added to the <code class="xref py py-attr docutils literal notranslate"><span class="pre">plugins</span></code> list will be added using the
<code class="docutils literal notranslate"><span class="pre">-p</span></code> command line option.  Additionally <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used to put
any temporary files and directories in a numbered directory prefixed
with “runpytest-” to not conflict with the normal numbered pytest
location for temporary files and directories.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – The sequence of arguments to pass to the pytest subprocess.</p></li>
<li><p><strong>timeout</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>]</em>) – The period in seconds after which to timeout and raise
<a class="reference internal" href="#pytest.Pytester.TimeoutExpired" title="pytest.Pytester.TimeoutExpired"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester.TimeoutExpired</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.spawn_pytest">
<code class="sig-name descname"><span class="pre">spawn_pytest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.spawn_pytest" title="Permalink to this definition">¶</a></dt>
<dd><p>Run pytest using pexpect.</p>
<p>This makes sure to use the right pytest and sets up the temporary
directory locations.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>expect_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pexpect.spawn</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Pytester.spawn">
<code class="sig-name descname"><span class="pre">spawn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#Pytester.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Pytester.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a command using pexpect.</p>
<p>The pexpect child is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>expect_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pexpect.spawn</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pytest.RunResult">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">RunResult</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#RunResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult" title="Permalink to this definition">¶</a></dt>
<dd><p>The result of running a command from <a class="reference internal" href="#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<dl class="py attribute">
<dt id="pytest.RunResult.ret">
<code class="sig-name descname"><span class="pre">ret</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">_pytest.config.ExitCode</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.RunResult.ret" title="Permalink to this definition">¶</a></dt>
<dd><p>The return value.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.RunResult.outlines">
<code class="sig-name descname"><span class="pre">outlines</span></code><a class="headerlink" href="#pytest.RunResult.outlines" title="Permalink to this definition">¶</a></dt>
<dd><p>List of lines captured from stdout.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.RunResult.errlines">
<code class="sig-name descname"><span class="pre">errlines</span></code><a class="headerlink" href="#pytest.RunResult.errlines" title="Permalink to this definition">¶</a></dt>
<dd><p>List of lines captured from stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.RunResult.stdout">
<code class="sig-name descname"><span class="pre">stdout</span></code><a class="headerlink" href="#pytest.RunResult.stdout" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pytest.LineMatcher" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stdout.</p>
<p>Use e.g. <a class="reference internal" href="#pytest.LineMatcher.__str__" title="pytest.LineMatcher.__str__"><code class="xref py py-func docutils literal notranslate"><span class="pre">str(stdout)</span></code></a> to reconstruct stdout, or the commonly used
<a class="reference internal" href="#pytest.LineMatcher.fnmatch_lines" title="pytest.LineMatcher.fnmatch_lines"><code class="xref py py-func docutils literal notranslate"><span class="pre">stdout.fnmatch_lines()</span></code></a> method.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.RunResult.stderr">
<code class="sig-name descname"><span class="pre">stderr</span></code><a class="headerlink" href="#pytest.RunResult.stderr" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#pytest.LineMatcher" title="pytest.LineMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> of stderr.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.RunResult.duration">
<code class="sig-name descname"><span class="pre">duration</span></code><a class="headerlink" href="#pytest.RunResult.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Duration in seconds.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.RunResult.parseoutcomes">
<code class="sig-name descname"><span class="pre">parseoutcomes</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#RunResult.parseoutcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.parseoutcomes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of outcome noun -&gt; count from parsing the terminal
output that the test process produced.</p>
<p>The returned nouns will always be in plural form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.RunResult.parse_summary_nouns">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">parse_summary_nouns</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#RunResult.parse_summary_nouns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.parse_summary_nouns" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the nouns from a pytest terminal summary line.</p>
<p>It always returns the plural noun for consistency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=======</span> <span class="mi">1</span> <span class="n">failed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">passed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span><span class="p">,</span> <span class="mi">1</span> <span class="n">error</span> <span class="ow">in</span> <span class="mf">0.13</span><span class="n">s</span> <span class="o">====</span>
</pre></div>
</div>
<p>Will return <code class="docutils literal notranslate"><span class="pre">{&quot;failed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;passed&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;warnings&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;errors&quot;:</span> <span class="pre">1}</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.RunResult.assert_outcomes">
<code class="sig-name descname"><span class="pre">assert_outcomes</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">passed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipped</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xpassed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xfailed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deselected</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#RunResult.assert_outcomes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RunResult.assert_outcomes" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that the specified outcomes appear with the respective
numbers (0 means it didn’t occur) in the text output from a test run.</p>
<p><code class="docutils literal notranslate"><span class="pre">warnings</span></code> and <code class="docutils literal notranslate"><span class="pre">deselected</span></code> are only checked if not None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>passed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>skipped</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>failed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>errors</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>xpassed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>xfailed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – </p></li>
<li><p><strong>warnings</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – </p></li>
<li><p><strong>deselected</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pytest.LineMatcher">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">LineMatcher</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Flexible matching of text.</p>
<p>This is a convenience class to test large texts like the output of
commands.</p>
<p>The constructor takes a list of lines without their trailing newlines, i.e.
<code class="docutils literal notranslate"><span class="pre">text.splitlines()</span></code>.</p>
<dl class="py method">
<dt id="pytest.LineMatcher.__str__">
<code class="sig-name descname"><span class="pre">__str__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.__str__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.2: </span>You can use <a class="reference internal" href="#pytest.LineMatcher.str" title="pytest.LineMatcher.str"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str()</span></code></a> in older versions.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.fnmatch_lines_random">
<code class="sig-name descname"><span class="pre">fnmatch_lines_random</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.fnmatch_lines_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lines2</strong> (<em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.re_match_lines_random">
<code class="sig-name descname"><span class="pre">re_match_lines_random</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.re_match_lines_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.re_match_lines_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Check lines exist in the output in any order (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>lines2</strong> (<em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.get_lines_after">
<code class="sig-name descname"><span class="pre">get_lines_after</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnline</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.get_lines_after"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.get_lines_after" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all lines following the given line in the text.</p>
<p>The given line can contain glob wildcards.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fnline</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Sequence[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.fnmatch_lines">
<code class="sig-name descname"><span class="pre">fnmatch_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.fnmatch_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.fnmatch_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch()</span></code></a>).</p>
<p>The argument is a list of lines which have to match and can use glob
wildcards.  If they do not match a pytest.fail() is called.  The
matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – String patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Match lines consecutively?</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.re_match_lines">
<code class="sig-name descname"><span class="pre">re_match_lines</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consecutive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.re_match_lines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.re_match_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Check lines exist in the output (using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>).</p>
<p>The argument is a list of lines which have to match using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.
If they do not match a pytest.fail() is called.</p>
<p>The matches and non-matches are also shown as part of the error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines2</strong> (<em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – string patterns to match.</p></li>
<li><p><strong>consecutive</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – match lines consecutively?</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.no_fnmatch_line">
<code class="sig-name descname"><span class="pre">no_fnmatch_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.no_fnmatch_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.no_fnmatch_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">fnmatch.fnmatch</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The pattern to match lines.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.no_re_match_line">
<code class="sig-name descname"><span class="pre">no_re_match_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.no_re_match_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.no_re_match_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure captured lines do not match the given pattern, using <code class="docutils literal notranslate"><span class="pre">re.match</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pat</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The regular expression to match lines.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.LineMatcher.str">
<code class="sig-name descname"><span class="pre">str</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#LineMatcher.str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.LineMatcher.str" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the entire original text.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pytest.HookRecorder">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">HookRecorder</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#HookRecorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Record all hooks called in a plugin manager.</p>
<p>Hook recorders are created by <a class="reference internal" href="#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p>
<p>This wraps all the hook calls in the plugin manager, recording each call
before propagating the normal calls.</p>
<dl class="py method">
<dt id="pytest.HookRecorder.getcalls">
<code class="sig-name descname"><span class="pre">getcalls</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#HookRecorder.getcalls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder.getcalls" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all recorded calls to hooks with the given names (or name).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>names</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[_pytest.pytester.RecordedHookCall]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.HookRecorder.matchreport">
<code class="sig-name descname"><span class="pre">matchreport</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inamepart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('pytest_runtest_logreport',</span> <span class="pre">'pytest_collectreport')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/pytester.html#HookRecorder.matchreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.HookRecorder.matchreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a testreport whose dotted import path matches.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inamepart</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>names</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Iterable</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>when</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[_pytest.reports.CollectReport, _pytest.reports.TestReport]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pytest.RecordedHookCall">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">RecordedHookCall</span></code><a class="reference internal" href="_modules/_pytest/pytester.html#RecordedHookCall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.RecordedHookCall" title="Permalink to this definition">¶</a></dt>
<dd><p>A recorded call to a hook.</p>
<p>The arguments to the hook call are set as attributes.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">calls</span> <span class="o">=</span> <span class="n">hook_recorder</span><span class="o">.</span><span class="n">getcalls</span><span class="p">(</span><span class="s2">&quot;pytest_runtest_setup&quot;</span><span class="p">)</span>
<span class="c1"># Suppose pytest_runtest_setup was called once with `item=an_item`.</span>
<span class="k">assert</span> <span class="n">calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span> <span class="ow">is</span> <span class="n">an_item</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="testdir">
<span id="std-fixture-testdir"></span><span id="std:fixture-testdir"></span><h5><a class="toc-backref" href="#id44">testdir</a><a class="headerlink" href="#testdir" title="Permalink to this headline">¶</a></h5>
<p>Identical to <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a>, but provides an instance whose methods return
legacy <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> objects instead when applicable.</p>
<p>New code should avoid using <a class="reference internal" href="#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a> in favor of <a class="reference internal" href="#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a>.</p>
<dl class="py class">
<dt id="pytest.Testdir">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Testdir</span></code><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>, but this class works with legacy legacy_path objects instead.</p>
<p>All methods just forward to an internal <a class="reference internal" href="#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a> instance, converting results
to <code class="docutils literal notranslate"><span class="pre">legacy_path</span></code> objects as necessary.</p>
<dl class="py exception">
<dt id="pytest.Testdir.TimeoutExpired">
<em class="property"><span class="pre">exception</span> </em><code class="sig-name descname"><span class="pre">TimeoutExpired</span></code><a class="headerlink" href="#pytest.Testdir.TimeoutExpired" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.tmpdir">
<code class="sig-name descname"><span class="pre">tmpdir</span></code><a class="headerlink" href="#pytest.Testdir.tmpdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporary directory where tests are executed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.make_hook_recorder">
<code class="sig-name descname"><span class="pre">make_hook_recorder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.make_hook_recorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.make_hook_recorder" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.make_hook_recorder" title="pytest.Pytester.make_hook_recorder"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.make_hook_recorder()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.HookRecorder</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.chdir">
<code class="sig-name descname"><span class="pre">chdir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.chdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.chdir" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.chdir" title="pytest.Pytester.chdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.chdir()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.finalize">
<code class="sig-name descname"><span class="pre">finalize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester._finalize()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.makefile">
<code class="sig-name descname"><span class="pre">makefile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.makefile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.makefile" title="pytest.Pytester.makefile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makefile()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.makeconftest">
<code class="sig-name descname"><span class="pre">makeconftest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.makeconftest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.makeconftest" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.makeconftest" title="pytest.Pytester.makeconftest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeconftest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.makeini">
<code class="sig-name descname"><span class="pre">makeini</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.makeini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.makeini" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.makeini" title="pytest.Pytester.makeini"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makeini()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getinicfg">
<code class="sig-name descname"><span class="pre">getinicfg</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getinicfg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getinicfg" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getinicfg" title="pytest.Pytester.getinicfg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getinicfg()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>iniconfig.SectionWrapper</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.makepyprojecttoml">
<code class="sig-name descname"><span class="pre">makepyprojecttoml</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.makepyprojecttoml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.makepyprojecttoml" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.makepyprojecttoml" title="pytest.Pytester.makepyprojecttoml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyprojecttoml()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.makepyfile">
<code class="sig-name descname"><span class="pre">makepyfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.makepyfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.makepyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.makepyfile" title="pytest.Pytester.makepyfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.makepyfile()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.maketxtfile">
<code class="sig-name descname"><span class="pre">maketxtfile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.maketxtfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.maketxtfile" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.maketxtfile" title="pytest.Pytester.maketxtfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.maketxtfile()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.syspathinsert">
<code class="sig-name descname"><span class="pre">syspathinsert</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.syspathinsert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.syspathinsert" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.syspathinsert" title="pytest.Pytester.syspathinsert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.syspathinsert()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.mkdir">
<code class="sig-name descname"><span class="pre">mkdir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.mkdir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.mkdir" title="pytest.Pytester.mkdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkdir()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.mkpydir">
<code class="sig-name descname"><span class="pre">mkpydir</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.mkpydir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.mkpydir" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.mkpydir" title="pytest.Pytester.mkpydir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.mkpydir()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.copy_example">
<code class="sig-name descname"><span class="pre">copy_example</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.copy_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.copy_example" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.copy_example" title="pytest.Pytester.copy_example"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.copy_example()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getnode">
<code class="sig-name descname"><span class="pre">getnode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getnode" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getnode" title="pytest.Pytester.getnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getnode()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<em>_pytest.config.Config</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getpathnode">
<code class="sig-name descname"><span class="pre">getpathnode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getpathnode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getpathnode" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getpathnode" title="pytest.Pytester.getpathnode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getpathnode()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.genitems">
<code class="sig-name descname"><span class="pre">genitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colitems</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.genitems" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.genitems" title="pytest.Pytester.genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.genitems()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>colitems</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><em>_pytest.nodes.Item</em><em>, </em><em>_pytest.nodes.Collector</em><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[_pytest.nodes.Item]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runitem">
<code class="sig-name descname"><span class="pre">runitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runitem" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runitem" title="pytest.Pytester.runitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.inline_runsource">
<code class="sig-name descname"><span class="pre">inline_runsource</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cmdlineargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.inline_runsource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.inline_runsource" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.inline_runsource" title="pytest.Pytester.inline_runsource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_runsource()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.inline_genitems">
<code class="sig-name descname"><span class="pre">inline_genitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.inline_genitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.inline_genitems" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.inline_genitems" title="pytest.Pytester.inline_genitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_genitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.inline_run">
<code class="sig-name descname"><span class="pre">inline_run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_reraise_ctrlc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.inline_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.inline_run" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.inline_run" title="pytest.Pytester.inline_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.inline_run()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>no_reraise_ctrlc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runpytest_inprocess">
<code class="sig-name descname"><span class="pre">runpytest_inprocess</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runpytest_inprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runpytest_inprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runpytest_inprocess" title="pytest.Pytester.runpytest_inprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_inprocess()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runpytest">
<code class="sig-name descname"><span class="pre">runpytest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runpytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runpytest" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runpytest" title="pytest.Pytester.runpytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.parseconfig">
<code class="sig-name descname"><span class="pre">parseconfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.parseconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.parseconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.parseconfig" title="pytest.Pytester.parseconfig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfig()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.parseconfigure">
<code class="sig-name descname"><span class="pre">parseconfigure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.parseconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.parseconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.parseconfigure" title="pytest.Pytester.parseconfigure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.parseconfigure()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getitem">
<code class="sig-name descname"><span class="pre">getitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'test_func'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getitem" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getitem" title="pytest.Pytester.getitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitem()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getitems">
<code class="sig-name descname"><span class="pre">getitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getitems" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getitems" title="pytest.Pytester.getitems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getitems()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.getmodulecol">
<code class="sig-name descname"><span class="pre">getmodulecol</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withinit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.getmodulecol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.getmodulecol" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.getmodulecol" title="pytest.Pytester.getmodulecol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.getmodulecol()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.collect_by_name">
<code class="sig-name descname"><span class="pre">collect_by_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modcol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.collect_by_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.collect_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.collect_by_name" title="pytest.Pytester.collect_by_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.collect_by_name()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modcol</strong> (<em>_pytest.nodes.Collector</em>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.popen">
<code class="sig-name descname"><span class="pre">popen</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmdargs</span></em>, <em class="sig-param"><span class="pre">stdout=-1</span></em>, <em class="sig-param"><span class="pre">stderr=-1</span></em>, <em class="sig-param"><span class="pre">stdin=&lt;NotSetType.token:</span> <span class="pre">0&gt;</span></em>, <em class="sig-param"><span class="pre">**kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.popen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.popen" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.popen" title="pytest.Pytester.popen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.popen()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*cmdargs</span></em>, <em class="sig-param"><span class="pre">timeout=None</span></em>, <em class="sig-param"><span class="pre">stdin=&lt;NotSetType.token:</span> <span class="pre">0&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.run" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.run" title="pytest.Pytester.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.run()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runpython">
<code class="sig-name descname"><span class="pre">runpython</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">script</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runpython"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runpython" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runpython" title="pytest.Pytester.runpython"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runpython_c">
<code class="sig-name descname"><span class="pre">runpython_c</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runpython_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runpython_c" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runpython_c" title="pytest.Pytester.runpython_c"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpython_c()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.runpytest_subprocess">
<code class="sig-name descname"><span class="pre">runpytest_subprocess</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.runpytest_subprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.runpytest_subprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.runpytest_subprocess" title="pytest.Pytester.runpytest_subprocess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.runpytest_subprocess()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.pytester.RunResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.spawn_pytest">
<code class="sig-name descname"><span class="pre">spawn_pytest</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.spawn_pytest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.spawn_pytest" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.spawn_pytest" title="pytest.Pytester.spawn_pytest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn_pytest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>expect_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pexpect.spawn</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Testdir.spawn">
<code class="sig-name descname"><span class="pre">spawn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#Testdir.spawn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Testdir.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#pytest.Pytester.spawn" title="pytest.Pytester.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pytester.spawn()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>expect_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pexpect.spawn</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="recwarn">
<span id="std-fixture-recwarn"></span><span id="std:fixture-recwarn"></span><h5><a class="toc-backref" href="#id45">recwarn</a><a class="headerlink" href="#recwarn" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#assertwarnings"><span class="std std-ref">Asserting warnings with the warns function</span></a></p>
<dl class="py function">
<dt id="pytest.recwarn.recwarn">
<span id="_pytest.recwarn.recwarn"></span><code class="sig-name descname"><span class="pre">recwarn</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/recwarn.html#recwarn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.recwarn.recwarn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">WarningsRecorder</span></code> instance that records all warnings emitted by test functions.</p>
<p>See <a class="reference external" href="https://docs.python.org/library/how-to/capture-warnings.html">https://docs.python.org/library/how-to/capture-warnings.html</a> for information
on warning categories.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Generator[_pytest.recwarn.WarningsRecorder, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="pytest.WarningsRecorder">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">WarningsRecorder</span></code><a class="reference internal" href="_modules/_pytest/recwarn.html#WarningsRecorder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager to record raised warnings.</p>
<p>Each recorded warning is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">warnings.WarningMessage</span></code>.</p>
<p>Adapted from <code class="docutils literal notranslate"><span class="pre">warnings.catch_warnings</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> are treated
differently; see <a class="reference internal" href="contents.html#ensuring-function-triggers"><span class="std std-ref">Ensuring code triggers a deprecation warning</span></a>.</p>
</div>
<dl class="py method">
<dt id="pytest.WarningsRecorder.list">
<code class="sig-name descname"><span class="pre">list</span></code><a class="headerlink" href="#pytest.WarningsRecorder.list" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of recorded warnings.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.WarningsRecorder.pop">
<code class="sig-name descname"><span class="pre">pop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cls=&lt;class</span> <span class="pre">'Warning'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/recwarn.html#WarningsRecorder.pop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pop the first recorded warning, raise exception if not exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><em>Warning</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>warnings.WarningMessage</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.WarningsRecorder.clear">
<code class="sig-name descname"><span class="pre">clear</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/recwarn.html#WarningsRecorder.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.WarningsRecorder.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the list of recorded warnings.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tmp-path">
<span id="std-fixture-tmp_path"></span><span id="std:fixture-tmp_path"></span><h5><a class="toc-backref" href="#id46">tmp_path</a><a class="headerlink" href="#tmp-path" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#tmp-path"><span class="std std-ref">How to use temporary directories and files in tests</span></a></p>
<dl class="py function">
<dt id="pytest.tmpdir.tmp_path">
<span id="_pytest.tmpdir.tmp_path"></span><code class="sig-name descname"><span class="pre">tmp_path</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/tmpdir.html#tmp_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.tmpdir.tmp_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a temporary directory path object which is unique to each test
function invocation, created as a sub directory of the base temporary
directory.</p>
<p>By default, a new base temporary directory is created each test session,
and old bases are removed after 3 sessions, to aid in debugging. If
<code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used then it is cleared each session. See <a class="reference internal" href="contents.html#base-temporary-directory"><span class="std std-ref">The default base temporary directory</span></a>.</p>
<p>The returned object is a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>_pytest.fixtures.FixtureRequest</em>) – </p></li>
<li><p><strong>tmp_path_factory</strong> (<em>_pytest.tmpdir.TempPathFactory</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tmp-path-factory">
<span id="std-fixture-tmp_path_factory"></span><span id="std:fixture-tmp_path_factory"></span><h5><a class="toc-backref" href="#id47">tmp_path_factory</a><a class="headerlink" href="#tmp-path-factory" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#tmp-path-factory-example"><span class="std std-ref">The tmp_path_factory fixture</span></a></p>
<p id="tmp-path-factory-factory-api"><code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> is an instance of <a class="reference internal" href="#pytest.TempPathFactory" title="pytest.TempPathFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempPathFactory</span></code></a>:</p>
<dl class="py class">
<dt id="pytest.TempPathFactory">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TempPathFactory</span></code><a class="reference internal" href="_modules/_pytest/tmpdir.html#TempPathFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for temporary directories under the common base temp directory.</p>
<p>The base directory can be configured using the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> option.</p>
<dl class="py method">
<dt id="pytest.TempPathFactory.mktemp">
<code class="sig-name descname"><span class="pre">mktemp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/tmpdir.html#TempPathFactory.mktemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory.mktemp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new temporary directory managed by the factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Directory base name, must be a relative path.</p></li>
<li><p><strong>numbered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, ensure the directory is unique by adding a numbered
suffix greater than any existing one: <code class="docutils literal notranslate"><span class="pre">basename=&quot;foo-&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">numbered=True</span></code>
means that this function will create directories named <code class="docutils literal notranslate"><span class="pre">&quot;foo-0&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;foo-1&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;foo-2&quot;</span></code> and so on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The path to the new directory.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.TempPathFactory.getbasetemp">
<code class="sig-name descname"><span class="pre">getbasetemp</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/tmpdir.html#TempPathFactory.getbasetemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempPathFactory.getbasetemp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the base temporary directory, creating it if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tmpdir">
<span id="std-fixture-tmpdir"></span><span id="std:fixture-tmpdir"></span><h5><a class="toc-backref" href="#id48">tmpdir</a><a class="headerlink" href="#tmpdir" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">The tmpdir and tmpdir_factory fixtures</span></a></p>
<dl class="py function">
<dt id="pytest.legacypath.LegacyTmpdirPlugin.tmpdir">
<span id="_pytest.legacypath.LegacyTmpdirPlugin.tmpdir"></span><code class="sig-name descname"><span class="pre">tmpdir</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.legacypath.LegacyTmpdirPlugin.tmpdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a temporary directory path object which is unique to each test
function invocation, created as a sub directory of the base temporary
directory.</p>
<p>By default, a new base temporary directory is created each test session,
and old bases are removed after 3 sessions, to aid in debugging. If
<code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is used then it is cleared each session. See <a class="reference internal" href="contents.html#base-temporary-directory"><span class="std std-ref">The default base temporary directory</span></a>.</p>
<p>The returned object is a <a class="reference external" href="https://py.readthedocs.io/en/latest/path.html">legacy_path</a> object.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>.</p>
<p><a class="reference internal" href="contents.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">About the tmpdir and tmpdir_factory fixtures</span></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tmp_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tmpdir-factory">
<span id="std-fixture-tmpdir_factory"></span><span id="std:fixture-tmpdir_factory"></span><h5><a class="toc-backref" href="#id49">tmpdir_factory</a><a class="headerlink" href="#tmpdir-factory" title="Permalink to this headline">¶</a></h5>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">The tmpdir and tmpdir_factory fixtures</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> is an instance of <a class="reference internal" href="#pytest.TempdirFactory" title="pytest.TempdirFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempdirFactory</span></code></a>:</p>
<dl class="py class">
<dt id="pytest.TempdirFactory">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TempdirFactory</span></code><a class="reference internal" href="_modules/_pytest/legacypath.html#TempdirFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Backward compatibility wrapper that implements <code class="xref py py-class docutils literal notranslate"><span class="pre">py.path.local</span></code>
for <a class="reference internal" href="#pytest.TempPathFactory" title="pytest.TempPathFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TempPathFactory</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These days, it is preferred to use <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code>.</p>
<p><a class="reference internal" href="contents.html#tmpdir-and-tmpdir-factory"><span class="std std-ref">About the tmpdir and tmpdir_factory fixtures</span></a>.</p>
</div>
<dl class="py method">
<dt id="pytest.TempdirFactory.mktemp">
<code class="sig-name descname"><span class="pre">mktemp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#TempdirFactory.mktemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory.mktemp" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.mktemp" title="pytest.TempPathFactory.mktemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.mktemp()</span></code></a>, but returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>numbered</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.TempdirFactory.getbasetemp">
<code class="sig-name descname"><span class="pre">getbasetemp</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/legacypath.html#TempdirFactory.getbasetemp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TempdirFactory.getbasetemp" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#pytest.TempPathFactory.getbasetemp" title="pytest.TempPathFactory.getbasetemp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TempPathFactory.getbasetemp()</span></code></a>, but returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">py.path.local</span></code> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>py._path.local.LocalPath</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="hooks">
<span id="hook-reference"></span><h4><a class="toc-backref" href="#id50">Hooks</a><a class="headerlink" href="#hooks" title="Permalink to this headline">¶</a></h4>
<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#writing-plugins"><span class="std std-ref">Writing plugins</span></a></p>
<p>Reference to all hooks which can be implemented by <a class="reference internal" href="contents.html#localplugin"><span class="std std-ref">conftest.py files</span></a> and <a class="reference internal" href="contents.html#plugins"><span class="std std-ref">plugins</span></a>.</p>
<div class="section" id="bootstrapping-hooks">
<h5><a class="toc-backref" href="#id51">Bootstrapping hooks</a><a class="headerlink" href="#bootstrapping-hooks" title="Permalink to this headline">¶</a></h5>
<p>Bootstrapping hooks called for plugins registered early enough (internal and setuptools plugins).</p>
<span class="target" id="std-hook-pytest_load_initial_conftests"><span id="std:hook-pytest_load_initial_conftests"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_load_initial_conftests">
<span id="_pytest.hookspec.pytest_load_initial_conftests"></span><code class="sig-name descname"><span class="pre">pytest_load_initial_conftests</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">early_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_load_initial_conftests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_load_initial_conftests" title="Permalink to this definition">¶</a></dt>
<dd><p>Called to implement the loading of initial conftest files ahead
of command line option parsing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook will not be called for <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files, only for setuptools plugins.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>early_config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>args</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Arguments passed on the command line.</p></li>
<li><p><strong>parser</strong> (<a class="reference internal" href="contents.html#pytest.Parser" title="pytest.Parser"><em>pytest.Parser</em></a>) – To add command line options.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_cmdline_preparse"><span id="std:hook-pytest_cmdline_preparse"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_cmdline_preparse">
<span id="_pytest.hookspec.pytest_cmdline_preparse"></span><code class="sig-name descname"><span class="pre">pytest_cmdline_preparse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_cmdline_preparse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_cmdline_preparse" title="Permalink to this definition">¶</a></dt>
<dd><p>(<strong>Deprecated</strong>) modify command line arguments before option parsing.</p>
<p>This hook is considered deprecated and will be removed in a future pytest version. Consider
using <a class="reference internal" href="#std-hook-pytest_load_initial_conftests"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_load_initial_conftests</span></code></a> instead.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook will not be called for <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files, only for setuptools plugins.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>args</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – Arguments passed on the command line.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_cmdline_parse"><span id="std:hook-pytest_cmdline_parse"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_cmdline_parse">
<span id="_pytest.hookspec.pytest_cmdline_parse"></span><code class="sig-name descname"><span class="pre">pytest_cmdline_parse</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_cmdline_parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_cmdline_parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an initialized config object, parsing the specified args.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook will only be called for plugin classes passed to the
<code class="docutils literal notranslate"><span class="pre">plugins</span></code> arg when using <a class="reference internal" href="#pytest-main">pytest.main</a> to perform an in-process
test run.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>pytest.PytestPluginManager</em></a>) – The pytest plugin manager.</p></li>
<li><p><strong>args</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – List of arguments passed on the command line.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config">Config</a>]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_cmdline_main"><span id="std:hook-pytest_cmdline_main"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_cmdline_main">
<span id="_pytest.hookspec.pytest_cmdline_main"></span><code class="sig-name descname"><span class="pre">pytest_cmdline_main</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_cmdline_main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_cmdline_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Called for performing the main command line action. The default
implementation will invoke the configure hooks and runtest_mainloop.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[<a class="reference internal" href="contents.html#pytest.ExitCode" title="pytest.ExitCode">ExitCode</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>]]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="initialization-hooks">
<span id="id2"></span><h5><a class="toc-backref" href="#id52">Initialization hooks</a><a class="headerlink" href="#initialization-hooks" title="Permalink to this headline">¶</a></h5>
<p>Initialization hooks called for plugins and <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p>
<span class="target" id="std-hook-pytest_addoption"><span id="std:hook-pytest_addoption"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_addoption">
<span id="_pytest.hookspec.pytest_addoption"></span><code class="sig-name descname"><span class="pre">pytest_addoption</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_addoption" title="Permalink to this definition">¶</a></dt>
<dd><p>Register argparse-style options and ini-style config values,
called once at the beginning of a test run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function should be implemented only in plugins or <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
files situated at the tests root directory due to how pytest
<a class="reference internal" href="contents.html#pluginorder"><span class="std std-ref">discovers plugins during startup</span></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> (<a class="reference internal" href="contents.html#pytest.Parser" title="pytest.Parser"><em>pytest.Parser</em></a>) – To add command line options, call
<a class="reference internal" href="#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addoption(...)</span></code></a>.
To add ini-file values call <a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini(...)</span></code></a>.</p></li>
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>pytest.PytestPluginManager</em></a>) – The pytest plugin manager, which can be used to install <code class="xref py py-func docutils literal notranslate"><span class="pre">hookspec()</span></code>’s
or <code class="xref py py-func docutils literal notranslate"><span class="pre">hookimpl()</span></code>’s and allow one plugin to call another plugin’s hooks
to change how command line options are added.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<p>Options can later be accessed through the
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">config</span></code></a> object, respectively:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pytest.Config.getoption" title="pytest.Config.getoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getoption(name)</span></code></a> to
retrieve the value of a command line option.</p></li>
<li><p><a class="reference internal" href="#pytest.Config.getini" title="pytest.Config.getini"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getini(name)</span></code></a> to retrieve
a value read from an ini-style file.</p></li>
</ul>
<p>The config object is passed around on many internal objects via the <code class="docutils literal notranslate"><span class="pre">.config</span></code>
attribute or can be retrieved as the <code class="docutils literal notranslate"><span class="pre">pytestconfig</span></code> fixture.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with <code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_addhooks"><span id="std:hook-pytest_addhooks"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_addhooks">
<span id="_pytest.hookspec.pytest_addhooks"></span><code class="sig-name descname"><span class="pre">pytest_addhooks</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pluginmanager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_addhooks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_addhooks" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at plugin registration time to allow adding new hooks via a call to
<code class="docutils literal notranslate"><span class="pre">pluginmanager.add_hookspecs(module_or_class,</span> <span class="pre">prefix)</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pluginmanager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>pytest.PytestPluginManager</em></a>) – The pytest plugin manager.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with <code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_configure"><span id="std:hook-pytest_configure"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_configure">
<span id="_pytest.hookspec.pytest_configure"></span><code class="sig-name descname"><span class="pre">pytest_configure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_configure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow plugins and conftest files to perform initial configuration.</p>
<p>This hook is called for every plugin and initial conftest file
after command line options have been parsed.</p>
<p>After that, the hook is called for other conftest files as they are
imported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with <code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_unconfigure"><span id="std:hook-pytest_unconfigure"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_unconfigure">
<span id="_pytest.hookspec.pytest_unconfigure"></span><code class="sig-name descname"><span class="pre">pytest_unconfigure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_unconfigure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_unconfigure" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before test process is exited.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_sessionstart"><span id="std:hook-pytest_sessionstart"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_sessionstart">
<span id="_pytest.hookspec.pytest_sessionstart"></span><code class="sig-name descname"><span class="pre">pytest_sessionstart</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_sessionstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_sessionstart" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the <code class="docutils literal notranslate"><span class="pre">Session</span></code> object has been created and before performing collection
and entering the run test loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_sessionfinish"><span id="std:hook-pytest_sessionfinish"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_sessionfinish">
<span id="_pytest.hookspec.pytest_sessionfinish"></span><code class="sig-name descname"><span class="pre">pytest_sessionfinish</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_sessionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_sessionfinish" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after whole test run finished, right before returning the exit status to the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The status which pytest will return to the system.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_plugin_registered"><span id="std:hook-pytest_plugin_registered"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_plugin_registered">
<span id="_pytest.hookspec.pytest_plugin_registered"></span><code class="sig-name descname"><span class="pre">pytest_plugin_registered</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manager</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_plugin_registered"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_plugin_registered" title="Permalink to this definition">¶</a></dt>
<dd><p>A new pytest plugin got registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plugin</strong> (<em>_PluggyPlugin</em>) – The plugin module or instance.</p></li>
<li><p><strong>manager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>pytest.PytestPluginManager</em></a>) – pytest plugin manager.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This hook is incompatible with <code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>.</p>
</div>
</dd></dl>

</div>
<div class="section" id="collection-hooks">
<h5><a class="toc-backref" href="#id53">Collection hooks</a><a class="headerlink" href="#collection-hooks" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> calls the following hooks for collecting files and directories:</p>
<span class="target" id="std-hook-pytest_collection"><span id="std:hook-pytest_collection"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_collection">
<span id="_pytest.hookspec.pytest_collection"></span><code class="sig-name descname"><span class="pre">pytest_collection</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the collection phase for the given session.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.
The return value is not used, but only stops further processing.</p>
<p>The default collection phase is this (see individual hooks for full details):</p>
<ol class="arabic simple">
<li><p>Starting from <code class="docutils literal notranslate"><span class="pre">session</span></code> as the initial collector:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectstart(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_make_collect_report(collector)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(collector,</span> <span class="pre">call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
<li><p>For each collected node:</p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>If an item, <code class="docutils literal notranslate"><span class="pre">pytest_itemcollected(item)</span></code></p></li>
<li><p>If a collector, recurse into it.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collectreport(report)</span></code></p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems(session,</span> <span class="pre">config,</span> <span class="pre">items)</span></code></p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_deselected(items)</span></code> for any deselected items (may be called multiple times)</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_collection_finish(session)</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.items</span></code> to the list of collected items</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">session.testscollected</span></code> to the number of collected items</p></li>
</ol>
<p>You can implement this hook to only perform some action before collection,
for example the terminal plugin uses it to start displaying the collection
counter (and returns <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_ignore_collect"><span id="std:hook-pytest_ignore_collect"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_ignore_collect">
<span id="_pytest.hookspec.pytest_ignore_collect"></span><code class="sig-name descname"><span class="pre">pytest_ignore_collect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_ignore_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_ignore_collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True to prevent considering this path for collection.</p>
<p>This hook is consulted for all files and directories prior to calling
more specific hooks.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<p>:param pathlib.Path collection_path : The path to analyze.
:param LEGACY_PATH path: The path to analyze (deprecated).
:param pytest.Config config: The pytest config object.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">collection_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a>) – </p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>Config</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a>]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_collect_file"><span id="std:hook-pytest_collect_file"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_collect_file">
<span id="_pytest.hookspec.pytest_collect_file"></span><code class="sig-name descname"><span class="pre">pytest_collect_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collect_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collect_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Collector for the given path, or None if not relevant.</p>
<p>The new node needs to have the specified <code class="docutils literal notranslate"><span class="pre">parent</span></code> as a parent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a>) – The path to analyze.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path to collect (deprecated).</p></li>
<li><p><strong>parent</strong> (<a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector">Collector</a>]</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">file_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter
has been deprecated.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_pycollect_makemodule"><span id="std:hook-pytest_pycollect_makemodule"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_pycollect_makemodule">
<span id="_pytest.hookspec.pytest_pycollect_makemodule"></span><code class="sig-name descname"><span class="pre">pytest_pycollect_makemodule</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_pycollect_makemodule"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pycollect_makemodule" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Module collector or None for the given path.</p>
<p>This hook will be called for each matching test module path.
The pytest_collect_file hook needs to be used if you want to
create test modules for files that do not match as a test module.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a>) – The path of the module to collect.</p></li>
<li><p><strong>path</strong> (<em>LEGACY_PATH</em>) – The path of the module to collect (deprecated).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="contents.html#pytest.Module" title="pytest.Module">Module</a>]</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">module_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">fspath</span></code>.</p>
</div>
</dd></dl>

<p>For influencing the collection of objects in Python modules
you can use the following hook:</p>
<span class="target" id="std-hook-pytest_pycollect_makeitem"><span id="std:hook-pytest_pycollect_makeitem"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_pycollect_makeitem">
<span id="_pytest.hookspec.pytest_pycollect_makeitem"></span><code class="sig-name descname"><span class="pre">pytest_pycollect_makeitem</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_pycollect_makeitem"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pycollect_makeitem" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a custom item/collector for a Python object in a module, or None.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collector</strong> (<em>Union</em><em>[</em><a class="reference internal" href="contents.html#pytest.Module" title="pytest.Module"><em>Module</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.Class" title="pytest.Class"><em>Class</em></a><em>]</em>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a>, <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item">Item</a>, <a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector">Collector</a>, List[Union[<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item">Item</a>, <a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector">Collector</a>]]]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_generate_tests"><span id="std:hook-pytest_generate_tests"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_generate_tests">
<span id="_pytest.hookspec.pytest_generate_tests"></span><code class="sig-name descname"><span class="pre">pytest_generate_tests</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metafunc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_generate_tests"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_generate_tests" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate (multiple) parametrized calls to a test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metafunc</strong> (<a class="reference internal" href="contents.html#pytest.Metafunc" title="pytest.Metafunc"><em>Metafunc</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_make_parametrize_id"><span id="std:hook-pytest_make_parametrize_id"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_make_parametrize_id">
<span id="_pytest.hookspec.pytest_make_parametrize_id"></span><code class="sig-name descname"><span class="pre">pytest_make_parametrize_id</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_make_parametrize_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_make_parametrize_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a user-friendly string representation of the given <code class="docutils literal notranslate"><span class="pre">val</span></code>
that will be used by &#64;pytest.mark.parametrize calls, or None if the hook
doesn’t know about <code class="docutils literal notranslate"><span class="pre">val</span></code>.</p>
<p>The parameter name is available as <code class="docutils literal notranslate"><span class="pre">argname</span></code>, if required.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – The parametrized value.</p></li>
<li><p><strong>argname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The automatic parameter name produced by pytest.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<p>Hooks for influencing test skipping:</p>
<span class="target" id="std-hook-pytest_markeval_namespace"><span id="std:hook-pytest_markeval_namespace"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_markeval_namespace">
<span id="_pytest.hookspec.pytest_markeval_namespace"></span><code class="sig-name descname"><span class="pre">pytest_markeval_namespace</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_markeval_namespace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_markeval_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when constructing the globals dictionary used for
evaluating string conditions in xfail/skipif markers.</p>
<p>This is useful when the condition for a marker requires
objects that are expensive or impossible to obtain during
collection time, which is required by normal boolean
conditions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of additional globals to add.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Any]</p>
</dd>
</dl>
</dd></dl>

<p>After collection is complete, you can modify the order of
items, delete or otherwise amend the test items:</p>
<span class="target" id="std-hook-pytest_collection_modifyitems"><span id="std:hook-pytest_collection_modifyitems"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_collection_modifyitems">
<span id="_pytest.hookspec.pytest_collection_modifyitems"></span><code class="sig-name descname"><span class="pre">pytest_collection_modifyitems</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collection_modifyitems"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection_modifyitems" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after collection has been performed. May filter or re-order
the items in-place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>items</strong> (<em>List</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>pytest.Item</em></a><em>]</em>) – List of item objects.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this hook is implemented in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files, it always receives all collected items, not only those
under the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> where it is implemented.</p>
</div>
<dl class="py function">
<dt id="pytest.hookspec.pytest_collection_finish">
<span id="_pytest.hookspec.pytest_collection_finish"></span><code class="sig-name descname"><span class="pre">pytest_collection_finish</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collection_finish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collection_finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after collection has been performed and modified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="test-running-runtest-hooks">
<h5><a class="toc-backref" href="#id54">Test running (runtest) hooks</a><a class="headerlink" href="#test-running-runtest-hooks" title="Permalink to this headline">¶</a></h5>
<p>All runtest related hooks receive a <a class="reference internal" href="#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> object.</p>
<span class="target" id="std-hook-pytest_runtestloop"><span id="std:hook-pytest_runtestloop"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtestloop">
<span id="_pytest.hookspec.pytest_runtestloop"></span><code class="sig-name descname"><span class="pre">pytest_runtestloop</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtestloop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtestloop" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the main runtest loop (after collection finished).</p>
<p>The default hook implementation performs the runtest protocol for all items
collected in the session (<code class="docutils literal notranslate"><span class="pre">session.items</span></code>), unless the collection failed
or the <code class="docutils literal notranslate"><span class="pre">collectonly</span></code> pytest option is set.</p>
<p>If at any point <a class="reference internal" href="#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a> is called, the loop is
terminated immediately.</p>
<p>If at any point <code class="docutils literal notranslate"><span class="pre">session.shouldfail</span></code> or <code class="docutils literal notranslate"><span class="pre">session.shouldstop</span></code> are set, the
loop is terminated after the runtest protocol for the current item is finished.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>session</strong> (<a class="reference internal" href="contents.html#pytest.Session" title="pytest.Session"><em>pytest.Session</em></a>) – The pytest session object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.
The return value is not used, but only stops further processing.</p>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_protocol"><span id="std:hook-pytest_runtest_protocol"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_protocol">
<span id="_pytest.hookspec.pytest_runtest_protocol"></span><code class="sig-name descname"><span class="pre">pytest_runtest_protocol</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_protocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the runtest protocol for a single test item.</p>
<p>The default runtest protocol is this (see individual hooks for full details):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logstart(nodeid,</span> <span class="pre">location)</span></code></p></li>
<li><dl class="simple">
<dt>Setup phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_setup(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;setup&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Call phase, if the the setup passed and the <code class="docutils literal notranslate"><span class="pre">setuponly</span></code> pytest option is not set:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_call(item)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;call&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Teardown phase:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span> <span class="pre">=</span> <span class="pre">pytest_runtest_teardown(item,</span> <span class="pre">nextitem)</span></code> (wrapped in <code class="docutils literal notranslate"><span class="pre">CallInfo(when=&quot;teardown&quot;)</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report</span> <span class="pre">=</span> <span class="pre">pytest_runtest_makereport(item,</span> <span class="pre">call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport(report)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(call,</span> <span class="pre">report)</span></code> if an interactive exception occurred</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_runtest_logfinish(nodeid,</span> <span class="pre">location)</span></code></p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – Test item for which the runtest protocol is performed.</p></li>
<li><p><strong>nextitem</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – The scheduled-to-be-next test item (or None if this is the end my friend).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.
The return value is not used, but only stops further processing.</p>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_logstart"><span id="std:hook-pytest_runtest_logstart"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_logstart">
<span id="_pytest.hookspec.pytest_runtest_logstart"></span><code class="sig-name descname"><span class="pre">pytest_runtest_logstart</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_logstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logstart" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the start of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std-hook-pytest_runtest_protocol"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_logfinish"><span id="std:hook-pytest_runtest_logfinish"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_logfinish">
<span id="_pytest.hookspec.pytest_runtest_logfinish"></span><code class="sig-name descname"><span class="pre">pytest_runtest_logfinish</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_logfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logfinish" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the end of running the runtest protocol for a single item.</p>
<p>See <a class="reference internal" href="#std-hook-pytest_runtest_protocol"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Full node ID of the item.</p></li>
<li><p><strong>location</strong> (<em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A tuple of <code class="docutils literal notranslate"><span class="pre">(filename,</span> <span class="pre">lineno,</span> <span class="pre">testname)</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_setup"><span id="std:hook-pytest_runtest_setup"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_setup">
<span id="_pytest.hookspec.pytest_runtest_setup"></span><code class="sig-name descname"><span class="pre">pytest_runtest_setup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called to perform the setup phase for a test item.</p>
<p>The default implementation runs <code class="docutils literal notranslate"><span class="pre">setup()</span></code> on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its
parents (which haven’t been setup yet). This includes obtaining the
values of fixtures required by the item (which haven’t been obtained
yet).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_call"><span id="std:hook-pytest_runtest_call"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_call">
<span id="_pytest.hookspec.pytest_runtest_call"></span><code class="sig-name descname"><span class="pre">pytest_runtest_call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Called to run the test for test item (the call phase).</p>
<p>The default implementation calls <code class="docutils literal notranslate"><span class="pre">item.runtest()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_teardown"><span id="std:hook-pytest_runtest_teardown"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_teardown">
<span id="_pytest.hookspec.pytest_runtest_teardown"></span><code class="sig-name descname"><span class="pre">pytest_runtest_teardown</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nextitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_teardown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_teardown" title="Permalink to this definition">¶</a></dt>
<dd><p>Called to perform the teardown phase for a test item.</p>
<p>The default implementation runs the finalizers and calls <code class="docutils literal notranslate"><span class="pre">teardown()</span></code>
on <code class="docutils literal notranslate"><span class="pre">item</span></code> and all of its parents (which need to be torn down). This
includes running the teardown phase of fixtures required by the item (if
they go out of scope).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nextitem</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – The scheduled-to-be-next test item (None if no further test item is
scheduled). This argument is used to perform exact teardowns, i.e.
calling just enough finalizers so that nextitem only needs to call
setup functions.</p></li>
<li><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_runtest_makereport"><span id="std:hook-pytest_runtest_makereport"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_makereport">
<span id="_pytest.hookspec.pytest_runtest_makereport"></span><code class="sig-name descname"><span class="pre">pytest_runtest_makereport</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_makereport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_makereport" title="Permalink to this definition">¶</a></dt>
<dd><p>Called to create a <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> for each of
the setup, call and teardown runtest phases of a test item.</p>
<p>See <a class="reference internal" href="#std-hook-pytest_runtest_protocol"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>call</strong> (<a class="reference internal" href="contents.html#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a><em>]</em>) – The <a class="reference internal" href="#pytest.CallInfo" title="pytest.CallInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">CallInfo</span></code></a> for the phase.</p></li>
<li><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport">TestReport</a>]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
</dd></dl>

<p>For deeper understanding you may look at the default implementation of
these hooks in <code class="docutils literal notranslate"><span class="pre">_pytest.runner</span></code> and maybe also
in <code class="docutils literal notranslate"><span class="pre">_pytest.pdb</span></code> which interacts with <code class="docutils literal notranslate"><span class="pre">_pytest.capture</span></code>
and its input/output capturing in order to immediately drop
into interactive debugging when a test failure occurs.</p>
<span class="target" id="std-hook-pytest_pyfunc_call"><span id="std:hook-pytest_pyfunc_call"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_pyfunc_call">
<span id="_pytest.hookspec.pytest_pyfunc_call"></span><code class="sig-name descname"><span class="pre">pytest_pyfunc_call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pyfuncitem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_pyfunc_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_pyfunc_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call underlying test function.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pyfuncitem</strong> (<a class="reference internal" href="contents.html#pytest.Function" title="pytest.Function"><em>Function</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="reporting-hooks">
<h5><a class="toc-backref" href="#id55">Reporting hooks</a><a class="headerlink" href="#reporting-hooks" title="Permalink to this headline">¶</a></h5>
<p>Session related reporting hooks:</p>
<span class="target" id="std-hook-pytest_collectstart"><span id="std:hook-pytest_collectstart"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_collectstart">
<span id="_pytest.hookspec.pytest_collectstart"></span><code class="sig-name descname"><span class="pre">pytest_collectstart</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collectstart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collectstart" title="Permalink to this definition">¶</a></dt>
<dd><p>Collector starts collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_make_collect_report"><span id="std:hook-pytest_make_collect_report"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_make_collect_report">
<span id="_pytest.hookspec.pytest_make_collect_report"></span><code class="sig-name descname"><span class="pre">pytest_make_collect_report</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_make_collect_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_make_collect_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform <a class="reference internal" href="#pytest.Collector.collect" title="pytest.Collector.collect"><code class="xref py py-func docutils literal notranslate"><span class="pre">collector.collect()</span></code></a> and return
a <a class="reference internal" href="#pytest.CollectReport" title="pytest.CollectReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code></a>.</p>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>collector</strong> (<a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><em>Collector</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport">CollectReport</a>]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_itemcollected"><span id="std:hook-pytest_itemcollected"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_itemcollected">
<span id="_pytest.hookspec.pytest_itemcollected"></span><code class="sig-name descname"><span class="pre">pytest_itemcollected</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_itemcollected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_itemcollected" title="Permalink to this definition">¶</a></dt>
<dd><p>We just collected a test item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_collectreport"><span id="std:hook-pytest_collectreport"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_collectreport">
<span id="_pytest.hookspec.pytest_collectreport"></span><code class="sig-name descname"><span class="pre">pytest_collectreport</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_collectreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_collectreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Collector finished collecting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>report</strong> (<a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_deselected"><span id="std:hook-pytest_deselected"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_deselected">
<span id="_pytest.hookspec.pytest_deselected"></span><code class="sig-name descname"><span class="pre">pytest_deselected</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_deselected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_deselected" title="Permalink to this definition">¶</a></dt>
<dd><p>Called for deselected test items, e.g. by keyword.</p>
<p>May be called multiple times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_report_header"><span id="std:hook-pytest_report_header"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_report_header">
<span id="_pytest.hookspec.pytest_report_header"></span><code class="sig-name descname"><span class="pre">pytest_report_header</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_report_header"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed as header info for terminal reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<em>Path</em>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="contents.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function should be implemented only in plugins or <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>
files situated at the tests root directory due to how pytest
<a class="reference internal" href="contents.html#pluginorder"><span class="std std-ref">discovers plugins during startup</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_report_collectionfinish"><span id="std:hook-pytest_report_collectionfinish"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_report_collectionfinish">
<span id="_pytest.hookspec.pytest_report_collectionfinish"></span><code class="sig-name descname"><span class="pre">pytest_report_collectionfinish</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_report_collectionfinish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_collectionfinish" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string or list of strings to be displayed after collection
has finished successfully.</p>
<p>These strings will be displayed after the standard “collected X items” message.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.2.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>start_path</strong> (<em>Path</em>) – The starting dir.</p></li>
<li><p><strong>startdir</strong> (<em>LEGACY_PATH</em>) – The starting dir (deprecated).</p></li>
<li><p><strong>items</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a><em>]</em>) – List of pytest items that are going to be executed; this list should not be modified.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lines returned by a plugin are displayed before those of plugins which
ran before it.
If you want to have your line(s) displayed first, use
<a class="reference internal" href="contents.html#plugin-hookorder"><span class="std std-ref">trylast=True</span></a>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 7.0.0: </span>The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter was added as a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
equivalent of the <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter
has been deprecated.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_report_teststatus"><span id="std:hook-pytest_report_teststatus"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_report_teststatus">
<span id="_pytest.hookspec.pytest_report_teststatus"></span><code class="sig-name descname"><span class="pre">pytest_report_teststatus</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_report_teststatus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_teststatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return result-category, shortletter and verbose word for status
reporting.</p>
<p>The result-category is a category in which to count the result, for
example “passed”, “skipped”, “error” or the empty string.</p>
<p>The shortletter is shown as testing progresses, for example “.”, “s”,
“E” or the empty string.</p>
<p>The verbose word is shown as testing progresses in verbose mode, for
example “PASSED”, “SKIPPED”, “ERROR” or the empty string.</p>
<p>pytest may style these implicitly according to the report outcome.
To provide explicit styling, return a tuple for the verbose word,
for example <code class="docutils literal notranslate"><span class="pre">&quot;rerun&quot;,</span> <span class="pre">&quot;R&quot;,</span> <span class="pre">(&quot;RERUN&quot;,</span> <span class="pre">{&quot;yellow&quot;:</span> <span class="pre">True})</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>report</strong> (<em>Union</em><em>[</em><a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a><em>]</em>) – The report object whose status is to be returned.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Mapping[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a>]]]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
</dd></dl>

<span class="target" id="std-hook-pytest_report_to_serializable"><span id="std:hook-pytest_report_to_serializable"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_report_to_serializable">
<span id="_pytest.hookspec.pytest_report_to_serializable"></span><code class="sig-name descname"><span class="pre">pytest_report_to_serializable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_report_to_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_to_serializable" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the given report object into a data structure suitable for
sending over the wire, e.g. converted to JSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>Config</em></a>) – </p></li>
<li><p><strong>report</strong> (<em>Union</em><em>[</em><a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Dict[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, Any]]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_report_from_serializable"><span id="std:hook-pytest_report_from_serializable"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_report_from_serializable">
<span id="_pytest.hookspec.pytest_report_from_serializable"></span><code class="sig-name descname"><span class="pre">pytest_report_from_serializable</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_report_from_serializable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_report_from_serializable" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore a report object previously serialized with
<a class="reference internal" href="#std-hook-pytest_report_to_serializable"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_to_serializable</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>Config</em></a>) – </p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Union[<a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport">CollectReport</a>, <a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport">TestReport</a>]]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_terminal_summary"><span id="std:hook-pytest_terminal_summary"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_terminal_summary">
<span id="_pytest.hookspec.pytest_terminal_summary"></span><code class="sig-name descname"><span class="pre">pytest_terminal_summary</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">terminalreporter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exitstatus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_terminal_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_terminal_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a section to terminal summary reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>terminalreporter</strong> (<em>_pytest.terminal.TerminalReporter</em>) – The internal terminal reporter object.</p></li>
<li><p><strong>exitstatus</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The exit status that will be reported back to the OS.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.2: </span>The <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_fixture_setup"><span id="std:hook-pytest_fixture_setup"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_fixture_setup">
<span id="_pytest.hookspec.pytest_fixture_setup"></span><code class="sig-name descname"><span class="pre">pytest_fixture_setup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_fixture_setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_fixture_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform fixture setup execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The return value of the call to the fixture function.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="contents.html#pytest.fixtures.FixtureDef" title="_pytest.fixtures.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a>]</p>
</dd>
</dl>
<p>Stops at first non-None result, see <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the fixture function returns None, other implementations of
this hook function will continue to be called, according to the
behavior of the <a class="reference internal" href="contents.html#firstresult"><span class="std std-ref">firstresult: stop at first non-None result</span></a> option.</p>
</div>
</dd></dl>

<span class="target" id="std-hook-pytest_fixture_post_finalizer"><span id="std:hook-pytest_fixture_post_finalizer"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_fixture_post_finalizer">
<span id="_pytest.hookspec.pytest_fixture_post_finalizer"></span><code class="sig-name descname"><span class="pre">pytest_fixture_post_finalizer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixturedef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_fixture_post_finalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_fixture_post_finalizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after fixture teardown, but before the cache is cleared, so
the fixture result <code class="docutils literal notranslate"><span class="pre">fixturedef.cached_result</span></code> is still available (not
<code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fixturedef</strong> (<a class="reference internal" href="contents.html#pytest.fixtures.FixtureDef" title="_pytest.fixtures.FixtureDef"><em>FixtureDef</em></a><em>[</em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>request</strong> (<em>SubRequest</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_warning_recorded"><span id="std:hook-pytest_warning_recorded"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_warning_recorded">
<span id="_pytest.hookspec.pytest_warning_recorded"></span><code class="sig-name descname"><span class="pre">pytest_warning_recorded</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning_message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodeid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_warning_recorded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_warning_recorded" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a warning captured by the internal pytest warnings plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warning_message</strong> (<em>warnings.WarningMessage</em>) – The captured warning. This is the same object produced by <code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.catch_warnings()</span></code>, and contains
the same attributes as the parameters of <a class="reference external" href="https://docs.python.org/3/library/warnings.html#warnings.showwarning" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">warnings.showwarning()</span></code></a>.</p></li>
<li><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <p>Indicates when the warning was captured. Possible values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;config&quot;</span></code>: during pytest configuration/initialization stage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;collect&quot;</span></code>: during test collection.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;runtest&quot;</span></code>: during test execution.</p></li>
</ul>
</p></li>
<li><p><strong>nodeid</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Full id of the item.</p></li>
<li><p><strong>location</strong> (<em>tuple|None</em>) – When available, holds information about the execution context of the captured
warning (filename, linenumber, function). <code class="docutils literal notranslate"><span class="pre">function</span></code> evaluates to &lt;module&gt;
when the execution context is at the module level.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.</span></p>
</div>
</dd></dl>

<p>Central hook for reporting about test execution:</p>
<span class="target" id="std-hook-pytest_runtest_logreport"><span id="std:hook-pytest_runtest_logreport"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_runtest_logreport">
<span id="_pytest.hookspec.pytest_runtest_logreport"></span><code class="sig-name descname"><span class="pre">pytest_runtest_logreport</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_runtest_logreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_runtest_logreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the <a class="reference internal" href="#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> produced for each
of the setup, call and teardown runtest phases of an item.</p>
<p>See <a class="reference internal" href="#std-hook-pytest_runtest_protocol"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a> for a description of the runtest protocol.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>report</strong> (<a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<p>Assertion related hooks:</p>
<span class="target" id="std-hook-pytest_assertrepr_compare"><span id="std:hook-pytest_assertrepr_compare"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_assertrepr_compare">
<span id="_pytest.hookspec.pytest_assertrepr_compare"></span><code class="sig-name descname"><span class="pre">pytest_assertrepr_compare</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_assertrepr_compare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_assertrepr_compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Return explanation for comparisons in failing assert expressions.</p>
<p>Return None for no custom explanation, otherwise return a list
of strings. The strings will be joined by newlines but any newlines
<em>in</em> a string will be escaped. Note that all but the first line will
be indented slightly, the intention is for the first line to be a summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>op</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>left</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>right</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_assertion_pass"><span id="std:hook-pytest_assertion_pass"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_assertion_pass">
<span id="_pytest.hookspec.pytest_assertion_pass"></span><code class="sig-name descname"><span class="pre">pytest_assertion_pass</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lineno</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expl</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_assertion_pass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_assertion_pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Called whenever an assertion passes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.0.</span></p>
</div>
<p>Use this hook to do some processing after a passing assertion.
The original assertion information is available in the <code class="docutils literal notranslate"><span class="pre">orig</span></code> string
and the pytest introspected assertion information is available in the
<code class="docutils literal notranslate"><span class="pre">expl</span></code> string.</p>
<p>This hook must be explicitly enabled by the <code class="docutils literal notranslate"><span class="pre">enable_assertion_pass_hook</span></code>
ini-file option:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">enable_assertion_pass_hook</span><span class="o">=</span><span class="s">true</span><span class="w"></span>
</pre></div>
</div>
<p>You need to <strong>clean the .pyc</strong> files in your project directory and interpreter libraries
when enabling this option, as assertions will require to be re-written.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>pytest.Item</em></a>) – pytest item object of current test.</p></li>
<li><p><strong>lineno</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Line number of the assert statement.</p></li>
<li><p><strong>orig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – String with the original assertion.</p></li>
<li><p><strong>expl</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – String with the assert explanation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="debugging-interaction-hooks">
<h5><a class="toc-backref" href="#id56">Debugging/Interaction hooks</a><a class="headerlink" href="#debugging-interaction-hooks" title="Permalink to this headline">¶</a></h5>
<p>There are few hooks which can be used for special
reporting or interaction with exceptions:</p>
<span class="target" id="std-hook-pytest_internalerror"><span id="std:hook-pytest_internalerror"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_internalerror">
<span id="_pytest.hookspec.pytest_internalerror"></span><code class="sig-name descname"><span class="pre">pytest_internalerror</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excrepr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_internalerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_internalerror" title="Permalink to this definition">¶</a></dt>
<dd><p>Called for internal errors.</p>
<p>Return True to suppress the fallback handling of printing an
INTERNALERROR message directly to sys.stderr.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>excrepr</strong> (<em>ExceptionRepr</em>) – </p></li>
<li><p><strong>excinfo</strong> (<a class="reference internal" href="contents.html#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a>]</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_keyboard_interrupt"><span id="std:hook-pytest_keyboard_interrupt"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_keyboard_interrupt">
<span id="_pytest.hookspec.pytest_keyboard_interrupt"></span><code class="sig-name descname"><span class="pre">pytest_keyboard_interrupt</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_keyboard_interrupt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_keyboard_interrupt" title="Permalink to this definition">¶</a></dt>
<dd><p>Called for keyboard interrupt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<a class="reference internal" href="contents.html#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><em>ExceptionInfo</em></a><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.10)"><em>KeyboardInterrupt</em></a><em>, </em><em>Exit</em><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_exception_interact"><span id="std:hook-pytest_exception_interact"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_exception_interact">
<span id="_pytest.hookspec.pytest_exception_interact"></span><code class="sig-name descname"><span class="pre">pytest_exception_interact</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_exception_interact"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_exception_interact" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an exception was raised which can potentially be
interactively handled.</p>
<p>May be called during collection (see <a class="reference internal" href="#std-hook-pytest_make_collect_report"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_make_collect_report</span></code></a>),
in which case <code class="docutils literal notranslate"><span class="pre">report</span></code> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code>.</p>
<p>May be called during runtest of an item (see <a class="reference internal" href="#std-hook-pytest_runtest_protocol"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_protocol</span></code></a>),
in which case <code class="docutils literal notranslate"><span class="pre">report</span></code> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code>.</p>
<p>This hook is not called if the exception that was raised is an internal
exception like <code class="docutils literal notranslate"><span class="pre">skip.Exception</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<em>Union</em><em>[</em><a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><em>Item</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><em>Collector</em></a><em>]</em>) – </p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="contents.html#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><em>Any</em><em>]</em>) – </p></li>
<li><p><strong>report</strong> (<em>Union</em><em>[</em><a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport"><em>CollectReport</em></a><em>, </em><a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport"><em>TestReport</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_enter_pdb"><span id="std:hook-pytest_enter_pdb"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_enter_pdb">
<span id="_pytest.hookspec.pytest_enter_pdb"></span><code class="sig-name descname"><span class="pre">pytest_enter_pdb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_enter_pdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_enter_pdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Called upon pdb.set_trace().</p>
<p>Can be used by plugins to take special action just before the python
debugger enters interactive mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>pdb</strong> (<a class="reference external" href="https://docs.python.org/3/library/pdb.html#pdb.Pdb" title="(in Python v3.10)"><em>pdb.Pdb</em></a>) – The Pdb instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="std-hook-pytest_leave_pdb"><span id="std:hook-pytest_leave_pdb"></span></span><dl class="py function">
<dt id="pytest.hookspec.pytest_leave_pdb">
<span id="_pytest.hookspec.pytest_leave_pdb"></span><code class="sig-name descname"><span class="pre">pytest_leave_pdb</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pdb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/hookspec.html#pytest_leave_pdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.hookspec.pytest_leave_pdb" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when leaving pdb (e.g. with continue after pdb.set_trace()).</p>
<p>Can be used by plugins to take special action just after the python
debugger leaves interactive mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><em>pytest.Config</em></a>) – The pytest config object.</p></li>
<li><p><strong>pdb</strong> (<a class="reference external" href="https://docs.python.org/3/library/pdb.html#pdb.Pdb" title="(in Python v3.10)"><em>pdb.Pdb</em></a>) – The Pdb instance.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="objects">
<h4><a class="toc-backref" href="#id57">Objects</a><a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h4>
<p>Full reference to objects accessible from <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixtures</span></a> or <a class="reference internal" href="#hook-reference"><span class="std std-ref">hooks</span></a>.</p>
<div class="section" id="callinfo">
<h5><a class="toc-backref" href="#id58">CallInfo</a><a class="headerlink" href="#callinfo" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.CallInfo">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">CallInfo</span></code><a class="reference internal" href="_modules/_pytest/runner.html#CallInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CallInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Result/Exception info of a function invocation.</p>
<dl class="py attribute">
<dt id="pytest.CallInfo.excinfo">
<code class="sig-name descname"><span class="pre">excinfo</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">_pytest._code.code.ExceptionInfo</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CallInfo.excinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>The captured exception of the call, if it raised.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CallInfo.start">
<code class="sig-name descname"><span class="pre">start</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.start" title="Permalink to this definition">¶</a></dt>
<dd><p>The system time when the call started, in seconds since the epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CallInfo.stop">
<code class="sig-name descname"><span class="pre">stop</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>The system time when the call ended, in seconds since the epoch.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CallInfo.duration">
<code class="sig-name descname"><span class="pre">duration</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></em><a class="headerlink" href="#pytest.CallInfo.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The call duration, in seconds.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CallInfo.when">
<code class="sig-name descname"><span class="pre">when</span></code><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">collect</span><span class="p"><span class="pre">,</span> </span><span class="pre">setup</span><span class="p"><span class="pre">,</span> </span><span class="pre">call</span><span class="p"><span class="pre">,</span> </span><span class="pre">teardown</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CallInfo.when" title="Permalink to this definition">¶</a></dt>
<dd><p>The context of invocation: “collect”, “setup”, “call” or “teardown”.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CallInfo.result">
<code class="sig-name descname"><span class="pre">result</span></code><a class="headerlink" href="#pytest.CallInfo.result" title="Permalink to this definition">¶</a></dt>
<dd><p>The return value of the call, if it didn’t raise.</p>
<p>Can only be accessed if excinfo is None.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CallInfo.from_call">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reraise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/runner.html#CallInfo.from_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CallInfo.from_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call func, wrapping the result in a CallInfo.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><em>TResult</em><em>]</em>) – The function to call. Called without arguments.</p></li>
<li><p><strong>when</strong> (<em>Literal</em><em>[</em><em>'collect'</em><em>, </em><em>'setup'</em><em>, </em><em>'call'</em><em>, </em><em>'teardown'</em><em>]</em>) – The phase in which the function is called.</p></li>
<li><p><strong>reraise</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em><em>, </em><em>..</em><em>]</em><em>]</em><em>]</em>) – Exception or exceptions that shall propagate if raised by the
function, instead of being wrapped in the CallInfo.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="contents.html#pytest.CallInfo" title="pytest.CallInfo">CallInfo</a>[TResult]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class">
<h5><a class="toc-backref" href="#id59">Class</a><a class="headerlink" href="#class" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Class">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Class</span></code><a class="reference internal" href="_modules/_pytest/python.html#Class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.PyCollector</span></code></p>
<p>Collector for test methods.</p>
<dl class="py method">
<dt id="pytest.Class.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_parent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Class.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class.from_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Class.collect">
<code class="sig-name descname"><span class="pre">collect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Class.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Class.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of children (items and collectors) for this
collection node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterable[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="collector">
<h5><a class="toc-backref" href="#id60">Collector</a><a class="headerlink" href="#collector" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Collector">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Collector</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#Collector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.Node</span></code></a></p>
<p>Collector instances create children through collect() and thus
iteratively build a tree.</p>
<dl class="py exception">
<dt id="pytest.Collector.CollectError">
<em class="property"><span class="pre">exception</span> </em><code class="sig-name descname"><span class="pre">CollectError</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#Collector.CollectError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.CollectError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>An error during collection, contains a custom message.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Collector.collect">
<code class="sig-name descname"><span class="pre">collect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Collector.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of children (items and collectors) for this
collection node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterable[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Collector.repr_failure">
<code class="sig-name descname"><span class="pre">repr_failure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Collector.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Collector.repr_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a representation of a collection failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<em>_pytest._code.code.ExceptionInfo</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, _pytest._code.code.TerminalRepr]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="collectreport">
<h5><a class="toc-backref" href="#id61">CollectReport</a><a class="headerlink" href="#collectreport" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.CollectReport">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">CollectReport</span></code><a class="reference internal" href="_modules/_pytest/reports.html#CollectReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.CollectReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.reports.BaseReport</span></code></p>
<p>Collection report object.</p>
<p>Reports can contain arbitrary extra attributes.</p>
<dl class="py attribute">
<dt id="pytest.CollectReport.nodeid">
<code class="sig-name descname"><span class="pre">nodeid</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.CollectReport.nodeid" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized collection nodeid.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CollectReport.outcome">
<code class="sig-name descname"><span class="pre">outcome</span></code><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="contents.html#pytest.CollectReport.passed" title="pytest.CollectReport.passed"><span class="pre">passed</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="contents.html#pytest.CollectReport.failed" title="pytest.CollectReport.failed"><span class="pre">failed</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="contents.html#pytest.CollectReport.skipped" title="pytest.CollectReport.skipped"><span class="pre">skipped</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CollectReport.outcome" title="Permalink to this definition">¶</a></dt>
<dd><p>Test outcome, always one of “passed”, “failed”, “skipped”.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CollectReport.longrepr">
<code class="sig-name descname"><span class="pre">longrepr</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">_pytest._code.code.ExceptionInfo</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">_pytest._code.code.TerminalRepr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CollectReport.longrepr" title="Permalink to this definition">¶</a></dt>
<dd><p>None or a failure representation.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CollectReport.result">
<code class="sig-name descname"><span class="pre">result</span></code><a class="headerlink" href="#pytest.CollectReport.result" title="Permalink to this definition">¶</a></dt>
<dd><p>The collected items and collection nodes.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.CollectReport.sections">
<code class="sig-name descname"><span class="pre">sections</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.CollectReport.sections" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuples of str <code class="docutils literal notranslate"><span class="pre">(heading,</span> <span class="pre">content)</span></code> with extra information
for the test report. Used by pytest to add text captured
from <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, and intercepted logging events. May
be used by other plugins to add arbitrary information to reports.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.caplog">
<code class="sig-name descname"><span class="pre">caplog</span></code><a class="headerlink" href="#pytest.CollectReport.caplog" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured log lines, if log capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.capstderr">
<code class="sig-name descname"><span class="pre">capstderr</span></code><a class="headerlink" href="#pytest.CollectReport.capstderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured text from stderr, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.capstdout">
<code class="sig-name descname"><span class="pre">capstdout</span></code><a class="headerlink" href="#pytest.CollectReport.capstdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured text from stdout, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.count_towards_summary">
<code class="sig-name descname"><span class="pre">count_towards_summary</span></code><a class="headerlink" href="#pytest.CollectReport.count_towards_summary" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> Whether this report should be counted towards the
totals shown at the end of the test session: “1 passed, 1 failure, etc”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.failed">
<code class="sig-name descname"><span class="pre">failed</span></code><a class="headerlink" href="#pytest.CollectReport.failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is failed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.fspath">
<code class="sig-name descname"><span class="pre">fspath</span></code><a class="headerlink" href="#pytest.CollectReport.fspath" title="Permalink to this definition">¶</a></dt>
<dd><p>The path portion of the reported node, as a string.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.head_line">
<code class="sig-name descname"><span class="pre">head_line</span></code><a class="headerlink" href="#pytest.CollectReport.head_line" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> The head line shown with longrepr output for this
report, more commonly during traceback representation during
failures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">________</span> <span class="n">Test</span><span class="o">.</span><span class="n">foo</span> <span class="n">________</span>
</pre></div>
</div>
<p>In the example above, the head_line is “Test.foo”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.longreprtext">
<code class="sig-name descname"><span class="pre">longreprtext</span></code><a class="headerlink" href="#pytest.CollectReport.longreprtext" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the full string representation of
<code class="docutils literal notranslate"><span class="pre">longrepr</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.passed">
<code class="sig-name descname"><span class="pre">passed</span></code><a class="headerlink" href="#pytest.CollectReport.passed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is passed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.CollectReport.skipped">
<code class="sig-name descname"><span class="pre">skipped</span></code><a class="headerlink" href="#pytest.CollectReport.skipped" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is skipped.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="config">
<h5><a class="toc-backref" href="#id62">Config</a><a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Config">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Config</span></code><a class="reference internal" href="_modules/_pytest/config.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to configuration values, pluginmanager and plugin hooks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pluginmanager</strong> (<a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><em>PytestPluginManager</em></a>) – A pytest PluginManager.</p></li>
<li><p><strong>invocation_params</strong> (<a class="reference internal" href="contents.html#pytest.Config.InvocationParams" title="pytest.Config.InvocationParams"><em>InvocationParams</em></a>) – Object containing parameters regarding the <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>
invocation.</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt id="pytest.Config.InvocationParams">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">InvocationParams</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plugins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.InvocationParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.InvocationParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds parameters passed during <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p>
<p>The object attributes are read-only.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.1.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the environment variable <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> and the <code class="docutils literal notranslate"><span class="pre">addopts</span></code>
ini option are handled by pytest, not being included in the <code class="docutils literal notranslate"><span class="pre">args</span></code> attribute.</p>
<p>Plugins accessing <code class="docutils literal notranslate"><span class="pre">InvocationParams</span></code> must be aware of that.</p>
</div>
<dl class="py attribute">
<dt id="pytest.Config.InvocationParams.args">
<code class="sig-name descname"><span class="pre">args</span></code><em class="property"><span class="pre">:</span> <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Config.InvocationParams.args" title="Permalink to this definition">¶</a></dt>
<dd><p>The command-line arguments as passed to <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.InvocationParams.plugins">
<code class="sig-name descname"><span class="pre">plugins</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Config.InvocationParams.plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra plugins, might be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.InvocationParams.dir">
<code class="sig-name descname"><span class="pre">dir</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><span class="pre">pathlib.Path</span></a></em><a class="headerlink" href="#pytest.Config.InvocationParams.dir" title="Permalink to this definition">¶</a></dt>
<dd><p>The directory from which <a class="reference internal" href="#pytest.main" title="pytest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.main()</span></code></a> was invoked.</p>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.option">
<code class="sig-name descname"><span class="pre">option</span></code><a class="headerlink" href="#pytest.Config.option" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to command line option as attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.10)">argparse.Namespace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.invocation_params">
<code class="sig-name descname"><span class="pre">invocation_params</span></code><a class="headerlink" href="#pytest.Config.invocation_params" title="Permalink to this definition">¶</a></dt>
<dd><p>The parameters with which pytest was invoked.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="contents.html#pytest.Config.InvocationParams" title="pytest.Config.InvocationParams">InvocationParams</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.pluginmanager">
<code class="sig-name descname"><span class="pre">pluginmanager</span></code><a class="headerlink" href="#pytest.Config.pluginmanager" title="Permalink to this definition">¶</a></dt>
<dd><p>The plugin manager handles plugin registration and hook invocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager">PytestPluginManager</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Config.stash">
<code class="sig-name descname"><span class="pre">stash</span></code><a class="headerlink" href="#pytest.Config.stash" title="Permalink to this definition">¶</a></dt>
<dd><p>A place where plugins can store information on the config for their
own use.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="contents.html#pytest.Stash" title="pytest.Stash">Stash</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.rootpath">
<code class="sig-name descname"><span class="pre">rootpath</span></code><a class="headerlink" href="#pytest.Config.rootpath" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the <a class="reference internal" href="contents.html#rootdir"><span class="std std-ref">rootdir</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.inipath">
<code class="sig-name descname"><span class="pre">inipath</span></code><a class="headerlink" href="#pytest.Config.inipath" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to the <a class="reference internal" href="contents.html#configfiles"><span class="std std-ref">configfile</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)">pathlib.Path</a>]</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.add_cleanup">
<code class="sig-name descname"><span class="pre">add_cleanup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.add_cleanup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.add_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a function to be called when the config object gets out of
use (usually coinciding with pytest_unconfigure).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.fromdictargs">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">fromdictargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.fromdictargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.fromdictargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor usable for subprocesses.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.config.Config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.issue_config_time_warning">
<code class="sig-name descname"><span class="pre">issue_config_time_warning</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacklevel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.issue_config_time_warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.issue_config_time_warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue and handle a warning during the “configure” stage.</p>
<p>During <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> we can’t capture warnings using the <code class="docutils literal notranslate"><span class="pre">catch_warnings_for_item</span></code>
function because it is not possible to have hookwrappers around <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code>.</p>
<p>This function is mainly intended for plugins that need to issue warnings during
<code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> (or similar stages).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>warning</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><em>Warning</em></a>) – The warning instance.</p></li>
<li><p><strong>stacklevel</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – stacklevel forwarded to warnings.warn.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.addinivalue_line">
<code class="sig-name descname"><span class="pre">addinivalue_line</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.addinivalue_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.addinivalue_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a line to an ini-file option. The option must have been
declared but might not yet be set in which case the line becomes
the first line in its value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>line</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.getini">
<code class="sig-name descname"><span class="pre">getini</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.getini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getini" title="Permalink to this definition">¶</a></dt>
<dd><p>Return configuration value from an <a class="reference internal" href="contents.html#configfiles"><span class="std std-ref">ini file</span></a>.</p>
<p>If the specified name hasn’t been registered through a prior
<a class="reference internal" href="#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addini</span></code></a> call (usually from a
plugin), a ValueError is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.getoption">
<code class="sig-name descname"><span class="pre">getoption</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">name</span></em>, <em class="sig-param"><span class="pre">default=&lt;NOTSET&gt;</span></em>, <em class="sig-param"><span class="pre">skip=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.getoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getoption" title="Permalink to this definition">¶</a></dt>
<dd><p>Return command line option value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Name of the option.  You may also specify
the literal <code class="docutils literal notranslate"><span class="pre">--OPT</span></code> option instead of the “dest” option name.</p></li>
<li><p><strong>default</strong> – Default value if no option of that name exists.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, raise pytest.skip if option does not exists
or has a None value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.getvalue">
<code class="sig-name descname"><span class="pre">getvalue</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.getvalue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getvalue" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated, use getoption() instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Config.getvalueorskip">
<code class="sig-name descname"><span class="pre">getvalueorskip</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#Config.getvalueorskip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Config.getvalueorskip" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated, use getoption(skip=True) instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exceptioninfo">
<h5><a class="toc-backref" href="#id63">ExceptionInfo</a><a class="headerlink" href="#exceptioninfo" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.ExceptionInfo">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ExceptionInfo</span></code><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps sys.exc_info() objects and offers help for navigating the traceback.</p>
<dl class="py method">
<dt id="pytest.ExceptionInfo.from_exc_info">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_exc_info</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exprinfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.from_exc_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.from_exc_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an ExceptionInfo for an existing exc_info tuple.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental API</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exprinfo</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A text string helping to determine if we should strip
<code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> from the output. Defaults to the exception
message/<code class="docutils literal notranslate"><span class="pre">__str__()</span></code>.</p></li>
<li><p><strong>exc_info</strong> (<em>Tuple</em><em>[</em><em>Type</em><em>[</em><em>E</em><em>]</em><em>, </em><em>E</em><em>, </em><em>traceback</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest._code.code.ExceptionInfo[E]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.from_current">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_current</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exprinfo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.from_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.from_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an ExceptionInfo matching the current traceback.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental API</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exprinfo</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – A text string helping to determine if we should strip
<code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> from the output. Defaults to the exception
message/<code class="docutils literal notranslate"><span class="pre">__str__()</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest._code.code.ExceptionInfo[<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)">BaseException</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.for_later">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">for_later</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.for_later"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.for_later" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an unfilled ExceptionInfo.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest._code.code.ExceptionInfo[E]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.fill_unfilled">
<code class="sig-name descname"><span class="pre">fill_unfilled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.fill_unfilled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.fill_unfilled" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill an unfilled ExceptionInfo created with <code class="docutils literal notranslate"><span class="pre">for_later()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exc_info</strong> (<em>Tuple</em><em>[</em><em>Type</em><em>[</em><em>E</em><em>]</em><em>, </em><em>E</em><em>, </em><em>traceback</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.type">
<code class="sig-name descname"><span class="pre">type</span></code><a class="headerlink" href="#pytest.ExceptionInfo.type" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception class.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.value">
<code class="sig-name descname"><span class="pre">value</span></code><a class="headerlink" href="#pytest.ExceptionInfo.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception value.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.tb">
<code class="sig-name descname"><span class="pre">tb</span></code><a class="headerlink" href="#pytest.ExceptionInfo.tb" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception raw traceback.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.typename">
<code class="sig-name descname"><span class="pre">typename</span></code><a class="headerlink" href="#pytest.ExceptionInfo.typename" title="Permalink to this definition">¶</a></dt>
<dd><p>The type name of the exception.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.traceback">
<code class="sig-name descname"><span class="pre">traceback</span></code><a class="headerlink" href="#pytest.ExceptionInfo.traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>The traceback.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.exconly">
<code class="sig-name descname"><span class="pre">exconly</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tryshort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.exconly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.exconly" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the exception as a string.</p>
<p>When ‘tryshort’ resolves to True, and the exception is an
AssertionError, only the actual exception part of the exception
representation is returned (so ‘AssertionError: ‘ is removed from
the beginning).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tryshort</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.errisinstance">
<code class="sig-name descname"><span class="pre">errisinstance</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.errisinstance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.errisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the exception is an instance of exc.</p>
<p>Consider using <code class="docutils literal notranslate"><span class="pre">isinstance(excinfo.value,</span> <span class="pre">exc)</span></code> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>exc</strong> (<em>Union</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>Type</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em><em>, </em><em>..</em><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.getrepr">
<code class="sig-name descname"><span class="pre">getrepr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">showlocals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'long'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tbfilter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">funcargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncate_locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.getrepr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.getrepr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return str()able representation of this exception info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>showlocals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Show locals per traceback entry.
Ignored if <code class="docutils literal notranslate"><span class="pre">style==&quot;native&quot;</span></code>.</p></li>
<li><p><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – long|short|no|native|value traceback style.</p></li>
<li><p><strong>abspath</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If paths should be changed to absolute or left unchanged.</p></li>
<li><p><strong>tbfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Hide entries that contain a local variable <code class="docutils literal notranslate"><span class="pre">__tracebackhide__==True</span></code>.
Ignored if <code class="docutils literal notranslate"><span class="pre">style==&quot;native&quot;</span></code>.</p></li>
<li><p><strong>funcargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Show fixtures (“funcargs” for legacy purposes) per traceback entry.</p></li>
<li><p><strong>truncate_locals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – With <code class="docutils literal notranslate"><span class="pre">showlocals==True</span></code>, make sure locals can be safely represented as strings.</p></li>
<li><p><strong>chain</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If chained exceptions in Python 3 should be shown.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[ReprExceptionInfo, ExceptionChainRepr]</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.9: </span>Added the <code class="docutils literal notranslate"><span class="pre">chain</span></code> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.ExceptionInfo.match">
<code class="sig-name descname"><span class="pre">match</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">regexp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/_code/code.html#ExceptionInfo.match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExceptionInfo.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the regular expression <code class="docutils literal notranslate"><span class="pre">regexp</span></code> matches the string
representation of the exception using <a class="reference external" href="https://docs.python.org/3/library/re.html#re.search" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">re.search()</span></code></a>.</p>
<p>If it matches <code class="docutils literal notranslate"><span class="pre">True</span></code> is returned, otherwise an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>regexp</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>Pattern</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Literal[True]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exitcode">
<h5><a class="toc-backref" href="#id64">ExitCode</a><a class="headerlink" href="#exitcode" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.ExitCode">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ExitCode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#ExitCode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.ExitCode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encodes the valid exit codes by pytest.</p>
<p>Currently users and plugins may supply other exit codes as well.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 5.0.</span></p>
</div>
<dl class="py attribute">
<dt id="pytest.ExitCode.OK">
<code class="sig-name descname"><span class="pre">OK</span></code><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#pytest.ExitCode.OK" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests passed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.ExitCode.TESTS_FAILED">
<code class="sig-name descname"><span class="pre">TESTS_FAILED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#pytest.ExitCode.TESTS_FAILED" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests failed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.ExitCode.INTERRUPTED">
<code class="sig-name descname"><span class="pre">INTERRUPTED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#pytest.ExitCode.INTERRUPTED" title="Permalink to this definition">¶</a></dt>
<dd><p>pytest was interrupted.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.ExitCode.INTERNAL_ERROR">
<code class="sig-name descname"><span class="pre">INTERNAL_ERROR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#pytest.ExitCode.INTERNAL_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal error got in the way.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.ExitCode.USAGE_ERROR">
<code class="sig-name descname"><span class="pre">USAGE_ERROR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#pytest.ExitCode.USAGE_ERROR" title="Permalink to this definition">¶</a></dt>
<dd><p>pytest was misused.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.ExitCode.NO_TESTS_COLLECTED">
<code class="sig-name descname"><span class="pre">NO_TESTS_COLLECTED</span></code><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#pytest.ExitCode.NO_TESTS_COLLECTED" title="Permalink to this definition">¶</a></dt>
<dd><p>pytest couldn’t find tests.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="file">
<h5><a class="toc-backref" href="#id65">File</a><a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.File">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">File</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#File"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.FSCollector" title="_pytest.nodes.FSCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.FSCollector</span></code></a></p>
<p>Base class for collecting tests from a file.</p>
<p><a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a>.</p>
</dd></dl>

</div>
<div class="section" id="fixturedef">
<h5><a class="toc-backref" href="#id66">FixtureDef</a><a class="headerlink" href="#fixturedef" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.fixtures.FixtureDef">
<span id="_pytest.fixtures.FixtureDef"></span><em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">FixtureDef</span></code><a class="reference internal" href="_modules/_pytest/fixtures.html#FixtureDef"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.fixtures.FixtureDef" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">_pytest.fixtures.FixtureValue</span></code>]</p>
<p>A container for a fixture definition.</p>
<dl class="py method">
<dt id="pytest.fixtures.FixtureDef.scope">
<span id="_pytest.fixtures.FixtureDef.scope"></span><code class="sig-name descname"><span class="pre">scope</span></code><a class="headerlink" href="#pytest.fixtures.FixtureDef.scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Scope string, one of “function”, “class”, “module”, “package”, “session”.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fscollector">
<h5><a class="toc-backref" href="#id67">FSCollector</a><a class="headerlink" href="#fscollector" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.nodes.FSCollector">
<span id="_pytest.nodes.FSCollector"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">FSCollector</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#FSCollector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.FSCollector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.Collector</span></code></p>
<dl class="py method">
<dt id="pytest.nodes.FSCollector.from_parent">
<span id="_pytest.nodes.FSCollector.from_parent"></span><em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_parent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fspath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#FSCollector.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.FSCollector.from_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fspath</strong> (<em>Optional</em><em>[</em><em>py._path.local.LocalPath</em><em>]</em>) – </p></li>
<li><p><strong>path</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><em>pathlib.Path</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="function">
<h5><a class="toc-backref" href="#id68">Function</a><a class="headerlink" href="#function" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Function">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Function</span></code><a class="reference internal" href="_modules/_pytest/python.html#Function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.PyobjMixin</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.Item</span></code></p>
<p>An Item responsible for setting up and executing a Python test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The full function name, including any decorations like those
added by parametrization (<code class="docutils literal notranslate"><span class="pre">my_func[my_param]</span></code>).</p></li>
<li><p><strong>parent</strong> – The parent Node.</p></li>
<li><p><strong>config</strong> – The pytest Config object.</p></li>
<li><p><strong>callspec</strong> – If given, this is function has been parametrized and the callspec contains
meta information about the parametrization.</p></li>
<li><p><strong>callobj</strong> – If given, the object which will be called when the Function is invoked,
otherwise the callobj will be obtained from <code class="docutils literal notranslate"><span class="pre">parent</span></code> using <code class="docutils literal notranslate"><span class="pre">originalname</span></code>.</p></li>
<li><p><strong>keywords</strong> – Keywords bound to the function object for “-k” matching.</p></li>
<li><p><strong>session</strong> – The pytest Session object.</p></li>
<li><p><strong>fixtureinfo</strong> – Fixture information already resolved at this fixture node..</p></li>
<li><p><strong>originalname</strong> – The attribute name to use for accessing the underlying function object.
Defaults to <code class="docutils literal notranslate"><span class="pre">name</span></code>. Set this if name is different from the original name,
for example when it contains decorations like those added by parametrization
(<code class="docutils literal notranslate"><span class="pre">my_func[my_param]</span></code>).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="pytest.Function.originalname">
<code class="sig-name descname"><span class="pre">originalname</span></code><a class="headerlink" href="#pytest.Function.originalname" title="Permalink to this definition">¶</a></dt>
<dd><p>Original function name, without any decorations (for example
parametrization adds a <code class="docutils literal notranslate"><span class="pre">&quot;[...]&quot;</span></code> suffix to function names), used to access
the underlying function object from <code class="docutils literal notranslate"><span class="pre">parent</span></code> (in case <code class="docutils literal notranslate"><span class="pre">callobj</span></code> is not given
explicitly).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.Function.from_parent">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_parent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Function.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.from_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>The public constructor.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Function.function">
<code class="sig-name descname"><span class="pre">function</span></code><a class="headerlink" href="#pytest.Function.function" title="Permalink to this definition">¶</a></dt>
<dd><p>Underlying python ‘function’ object.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Function.runtest">
<code class="sig-name descname"><span class="pre">runtest</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Function.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.runtest" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Function.repr_failure">
<code class="sig-name descname"><span class="pre">repr_failure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Function.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Function.repr_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a representation of a collection or test failure.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>excinfo</strong> (<em>_pytest._code.code.ExceptionInfo</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, _pytest._code.code.TerminalRepr]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functiondefinition">
<h5><a class="toc-backref" href="#id69">FunctionDefinition</a><a class="headerlink" href="#functiondefinition" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.python.FunctionDefinition">
<span id="_pytest.python.FunctionDefinition"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">FunctionDefinition</span></code><a class="reference internal" href="_modules/_pytest/python.html#FunctionDefinition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.python.FunctionDefinition" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.Function</span></code></p>
<p>This class is a step gap solution until we evolve to have actual function definition nodes
and manage to get rid of <code class="docutils literal notranslate"><span class="pre">metafunc</span></code>.</p>
<dl class="py method">
<dt id="pytest.python.FunctionDefinition.runtest">
<span id="_pytest.python.FunctionDefinition.runtest"></span><code class="sig-name descname"><span class="pre">runtest</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#FunctionDefinition.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.python.FunctionDefinition.runtest" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.python.FunctionDefinition.setup">
<span id="_pytest.python.FunctionDefinition.setup"></span><code class="sig-name descname"><span class="pre">setup</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.python.FunctionDefinition.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the underlying test function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="item">
<h5><a class="toc-backref" href="#id70">Item</a><a class="headerlink" href="#item" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Item">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Item</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#Item"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.Node</span></code></a></p>
<p>A basic test invocation item.</p>
<p>Note that for a single function there might be multiple test invocation items.</p>
<dl class="py attribute">
<dt id="pytest.Item.user_properties">
<code class="sig-name descname"><span class="pre">user_properties</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Item.user_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of tuples (name, value) that holds user defined properties
for this test.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Item.runtest">
<code class="sig-name descname"><span class="pre">runtest</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Item.runtest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.runtest" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the test case for this item.</p>
<p>Must be implemented by subclasses.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Item.add_report_section">
<code class="sig-name descname"><span class="pre">add_report_section</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">when</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Item.add_report_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.add_report_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new report section, similar to what’s done internally to add
stdout and stderr captured output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">item</span><span class="o">.</span><span class="n">add_report_section</span><span class="p">(</span><span class="s2">&quot;call&quot;</span><span class="p">,</span> <span class="s2">&quot;stdout&quot;</span><span class="p">,</span> <span class="s2">&quot;report section contents&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>when</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – One of the possible capture states, <code class="docutils literal notranslate"><span class="pre">&quot;setup&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;call&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;teardown&quot;</span></code>.</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Name of the section, can be customized at will. Pytest uses <code class="docutils literal notranslate"><span class="pre">&quot;stdout&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;stderr&quot;</span></code> internally.</p></li>
<li><p><strong>content</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The full contents as a string.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Item.reportinfo">
<code class="sig-name descname"><span class="pre">reportinfo</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Item.reportinfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Item.reportinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get location information for this item for test reports.</p>
<p>Returns a tuple with three elements:</p>
<ul class="simple">
<li><p>The path of the test (default <code class="docutils literal notranslate"><span class="pre">self.path</span></code>)</p></li>
<li><p>The line number of the test (default <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>A name of the test to be shown (default <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>)</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[Union[<a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)">os.PathLike</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>], <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>], Optional[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a>], <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="markdecorator">
<h5><a class="toc-backref" href="#id71">MarkDecorator</a><a class="headerlink" href="#markdecorator" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.MarkDecorator">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">MarkDecorator</span></code><a class="reference internal" href="_modules/_pytest/mark/structures.html#MarkDecorator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkDecorator" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for applying a mark on test functions and classes.</p>
<p><code class="docutils literal notranslate"><span class="pre">MarkDecorators</span></code> are created with <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mark1</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">NAME</span>              <span class="c1"># Simple MarkDecorator</span>
<span class="n">mark2</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">NAME</span><span class="p">(</span><span class="n">name1</span><span class="o">=</span><span class="n">value</span><span class="p">)</span> <span class="c1"># Parametrized MarkDecorator</span>
</pre></div>
</div>
<p>and can then be applied as decorators to test functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@mark2</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>When a <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code> is called, it does the following:</p>
<ol class="arabic simple">
<li><p>If called with a single class as its only positional argument and no
additional keyword arguments, it attaches the mark to the class so it
gets applied automatically to all test cases found in that class.</p></li>
<li><p>If called with a single function as its only positional argument and
no additional keyword arguments, it attaches the mark to the function,
containing all the arguments already stored internally in the
<code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>.</p></li>
<li><p>When called in any other case, it returns a new <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>
instance with the original <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>’s content updated with
the arguments passed to this call.</p></li>
</ol>
<p>Note: The rules above prevent a <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code> from storing only a
single function or class reference as its positional argument with no
additional keyword or positional arguments. You can work around this by
using <code class="docutils literal notranslate"><span class="pre">with_args()</span></code>.</p>
<dl class="py method">
<dt id="pytest.MarkDecorator.name">
<code class="sig-name descname"><span class="pre">name</span></code><a class="headerlink" href="#pytest.MarkDecorator.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for mark.name.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.MarkDecorator.args">
<code class="sig-name descname"><span class="pre">args</span></code><a class="headerlink" href="#pytest.MarkDecorator.args" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for mark.args.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.MarkDecorator.kwargs">
<code class="sig-name descname"><span class="pre">kwargs</span></code><a class="headerlink" href="#pytest.MarkDecorator.kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for mark.kwargs.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.MarkDecorator.with_args">
<code class="sig-name descname"><span class="pre">with_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/mark/structures.html#MarkDecorator.with_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkDecorator.with_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a MarkDecorator with extra arguments added.</p>
<p>Unlike calling the MarkDecorator, with_args() can be used even
if the sole argument is a callable/class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>_pytest.mark.structures.MarkDecorator</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="markgenerator">
<h5><a class="toc-backref" href="#id72">MarkGenerator</a><a class="headerlink" href="#markgenerator" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.MarkGenerator">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">MarkGenerator</span></code><a class="reference internal" href="_modules/_pytest/mark/structures.html#MarkGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.MarkGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory for <a class="reference internal" href="#pytest.MarkDecorator" title="pytest.MarkDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkDecorator</span></code></a> objects - exposed as
a <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> singleton instance.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slowtest</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
   <span class="k">pass</span>
</pre></div>
</div>
<p>applies a ‘slowtest’ <a class="reference internal" href="#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code></a> on <code class="docutils literal notranslate"><span class="pre">test_function</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="mark">
<h5><a class="toc-backref" href="#id73">Mark</a><a class="headerlink" href="#mark" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Mark">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Mark</span></code><a class="reference internal" href="_modules/_pytest/mark/structures.html#Mark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Mark" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="pytest.Mark.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.Mark.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the mark.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Mark.args">
<code class="sig-name descname"><span class="pre">args</span></code><em class="property"><span class="pre">:</span> <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span> </span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Mark.args" title="Permalink to this definition">¶</a></dt>
<dd><p>Positional arguments of the mark decorator.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Mark.kwargs">
<code class="sig-name descname"><span class="pre">kwargs</span></code><em class="property"><span class="pre">:</span> <span class="pre">Mapping</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.Mark.kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Keyword arguments of the mark decorator.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Mark.combined_with">
<code class="sig-name descname"><span class="pre">combined_with</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/mark/structures.html#Mark.combined_with"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Mark.combined_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Mark which is a combination of this
Mark and another Mark.</p>
<p>Combines by appending args and merging kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="contents.html#pytest.Mark" title="pytest.Mark"><em>Mark</em></a>) – The mark to combine with.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="contents.html#pytest.Mark" title="pytest.Mark">Mark</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="metafunc">
<h5><a class="toc-backref" href="#id74">Metafunc</a><a class="headerlink" href="#metafunc" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Metafunc">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Metafunc</span></code><a class="reference internal" href="_modules/_pytest/python.html#Metafunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Metafunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Objects passed to the <a class="reference internal" href="#std-hook-pytest_generate_tests"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code></a> hook.</p>
<p>They help to inspect a test function and to generate tests according to
test configuration or values specified in the class or module where a
test function is defined.</p>
<dl class="py attribute">
<dt id="pytest.Metafunc.definition">
<code class="sig-name descname"><span class="pre">definition</span></code><a class="headerlink" href="#pytest.Metafunc.definition" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to the underlying <a class="reference internal" href="#pytest.python.FunctionDefinition" title="_pytest.python.FunctionDefinition"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.FunctionDefinition</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Metafunc.config">
<code class="sig-name descname"><span class="pre">config</span></code><a class="headerlink" href="#pytest.Metafunc.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Access to the <a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Config</span></code></a> object for the test session.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Metafunc.module">
<code class="sig-name descname"><span class="pre">module</span></code><a class="headerlink" href="#pytest.Metafunc.module" title="Permalink to this definition">¶</a></dt>
<dd><p>The module object where the test function is defined in.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Metafunc.function">
<code class="sig-name descname"><span class="pre">function</span></code><a class="headerlink" href="#pytest.Metafunc.function" title="Permalink to this definition">¶</a></dt>
<dd><p>Underlying Python test function.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Metafunc.fixturenames">
<code class="sig-name descname"><span class="pre">fixturenames</span></code><a class="headerlink" href="#pytest.Metafunc.fixturenames" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of fixture names required by the test function.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.Metafunc.cls">
<code class="sig-name descname"><span class="pre">cls</span></code><a class="headerlink" href="#pytest.Metafunc.cls" title="Permalink to this definition">¶</a></dt>
<dd><p>Class object where the test function is defined in or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Metafunc.parametrize">
<code class="sig-name descname"><span class="pre">parametrize</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argnames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argvalues</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indirect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_param_mark</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Metafunc.parametrize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Metafunc.parametrize" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new invocations to the underlying test function using the list
of argvalues for the given argnames. Parametrization is performed
during the collection phase. If you need to setup expensive resources
see about setting indirect to do it rather than at test setup time.</p>
<p>Can be called multiple times, in which case each call parametrizes all
previous parametrizations, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unparametrized</span><span class="p">:</span>         <span class="n">t</span>
<span class="n">parametrize</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">]:</span> <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="n">parametrize</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>     <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="n">y</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>argnames</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>, </em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>..</em><em>]</em><em>]</em>) – A comma-separated string denoting one or more argument names, or
a list/tuple of argument strings.</p></li>
<li><p><strong>argvalues</strong> (<em>Iterable</em><em>[</em><em>Union</em><em>[</em><em>_pytest.mark.structures.ParameterSet</em><em>, </em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em>) – <p>The list of argvalues determines how often a test is invoked with
different argument values.</p>
<p>If only one argname was specified argvalues is a list of values.
If N argnames were specified, argvalues must be a list of
N-tuples, where each tuple-element specifies a value for its
respective argname.</p>
</p></li>
<li><p><strong>indirect</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – A list of arguments’ names (subset of argnames) or a boolean.
If True the list contains all names from the argnames. Each
argvalue corresponding to an argname in this list will
be passed as request.param to its respective argname fixture
function so that it can perform more expensive setups during the
setup phase of a test rather than at collection time.</p></li>
<li><p><strong>ids</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Iterable</em><em>[</em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em><em>, </em><em>Callable</em><em>[</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em><em>]</em><em>]</em><em>]</em>) – <p>Sequence of (or generator for) ids for <code class="docutils literal notranslate"><span class="pre">argvalues</span></code>,
or a callable to return part of the id for each argvalue.</p>
<p>With sequences (and generators like <code class="docutils literal notranslate"><span class="pre">itertools.count()</span></code>) the
returned ids should be of type <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>,
<code class="docutils literal notranslate"><span class="pre">bool</span></code>, or <code class="docutils literal notranslate"><span class="pre">None</span></code>.
They are mapped to the corresponding index in <code class="docutils literal notranslate"><span class="pre">argvalues</span></code>.
<code class="docutils literal notranslate"><span class="pre">None</span></code> means to use the auto-generated id.</p>
<p>If it is a callable it will be called for each entry in
<code class="docutils literal notranslate"><span class="pre">argvalues</span></code>, and the return value is used as part of the
auto-generated id for the whole set (where parts are joined with
dashes (“-“)).
This is useful to provide more specific ids for certain items, e.g.
dates.  Returning <code class="docutils literal notranslate"><span class="pre">None</span></code> will use an auto-generated id.</p>
<p>If no ids are provided they will be generated automatically from
the argvalues.</p>
</p></li>
<li><p><strong>scope</strong> (<em>Optional</em><em>[</em><em>_ScopeName</em><em>]</em>) – If specified it denotes the scope of the parameters.
The scope is used for grouping tests by parameter instances.
It will also override any fixture-function defined scope, allowing
to set a dynamic scope using test context or configuration.</p></li>
<li><p><strong>_param_mark</strong> (<em>Optional</em><em>[</em><em>_pytest.mark.structures.Mark</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module">
<h5><a class="toc-backref" href="#id75">Module</a><a class="headerlink" href="#module" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Module">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Module</span></code><a class="reference internal" href="_modules/_pytest/python.html#Module"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Module" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.File</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.python.PyCollector</span></code></p>
<p>Collector for test classes and functions.</p>
<dl class="py method">
<dt id="pytest.Module.collect">
<code class="sig-name descname"><span class="pre">collect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/python.html#Module.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Module.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of children (items and collectors) for this
collection node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterable[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="node">
<h5><a class="toc-backref" href="#id76">Node</a><a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.nodes.Node">
<span id="_pytest.nodes.Node"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Node</span></code><a class="reference internal" href="_modules/_pytest/nodes.html#Node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Collector and Item, the components of the test
collection tree.</p>
<p>Collector subclasses have children; Items are leaf nodes.</p>
<dl class="py attribute">
<dt id="pytest.nodes.Node.fspath">
<span id="_pytest.nodes.Node.fspath"></span><code class="sig-name descname"><span class="pre">fspath</span></code><em class="property"><span class="pre">:</span> <span class="pre">py._path.local.LocalPath</span></em><a class="headerlink" href="#pytest.nodes.Node.fspath" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">LEGACY_PATH</span></code> copy of the <a class="reference internal" href="#pytest.nodes.Node.path" title="_pytest.nodes.Node.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> attribute. Intended for usage
for methods not migrated to <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> yet, such as
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Item.reportinfo()</span></code>. Will be deprecated in a future release, prefer
using <a class="reference internal" href="#pytest.nodes.Node.path" title="_pytest.nodes.Node.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> instead.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.name">
<span id="_pytest.nodes.Node.name"></span><code class="sig-name descname"><span class="pre">name</span></code><a class="headerlink" href="#pytest.nodes.Node.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique name within the scope of the parent node.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.parent">
<span id="_pytest.nodes.Node.parent"></span><code class="sig-name descname"><span class="pre">parent</span></code><a class="headerlink" href="#pytest.nodes.Node.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent collector node.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.config">
<span id="_pytest.nodes.Node.config"></span><code class="sig-name descname"><span class="pre">config</span></code><a class="headerlink" href="#pytest.nodes.Node.config" title="Permalink to this definition">¶</a></dt>
<dd><p>The pytest config object.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.session">
<span id="_pytest.nodes.Node.session"></span><code class="sig-name descname"><span class="pre">session</span></code><a class="headerlink" href="#pytest.nodes.Node.session" title="Permalink to this definition">¶</a></dt>
<dd><p>The pytest session this node is part of.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.path">
<span id="_pytest.nodes.Node.path"></span><code class="sig-name descname"><span class="pre">path</span></code><a class="headerlink" href="#pytest.nodes.Node.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Filesystem path where this node was collected from (can be None).</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.keywords">
<span id="_pytest.nodes.Node.keywords"></span><code class="sig-name descname"><span class="pre">keywords</span></code><em class="property"><span class="pre">:</span> <span class="pre">MutableMapping</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Keywords/markers collected from all scopes.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.own_markers">
<span id="_pytest.nodes.Node.own_markers"></span><code class="sig-name descname"><span class="pre">own_markers</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">_pytest.mark.structures.Mark</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.own_markers" title="Permalink to this definition">¶</a></dt>
<dd><p>The marker objects belonging to this node.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.extra_keyword_matches">
<span id="_pytest.nodes.Node.extra_keyword_matches"></span><code class="sig-name descname"><span class="pre">extra_keyword_matches</span></code><em class="property"><span class="pre">:</span> <span class="pre">Set</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.nodes.Node.extra_keyword_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow adding of extra keywords to use for matching.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.nodes.Node.stash">
<span id="_pytest.nodes.Node.stash"></span><code class="sig-name descname"><span class="pre">stash</span></code><a class="headerlink" href="#pytest.nodes.Node.stash" title="Permalink to this definition">¶</a></dt>
<dd><p>A place where plugins can store information on the node for their
own use.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="contents.html#pytest.Stash" title="pytest.Stash">Stash</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.from_parent">
<span id="_pytest.nodes.Node.from_parent"></span><em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_parent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.from_parent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.from_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>Public constructor for Nodes.</p>
<p>This indirection got introduced in order to enable removing
the fragile logic from the node constructors.</p>
<p>Subclasses can use <code class="docutils literal notranslate"><span class="pre">super().from_parent(...)</span></code> when overriding the
construction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parent</strong> (<a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><em>_pytest.nodes.Node</em></a>) – The parent node of this Node.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.ihook">
<span id="_pytest.nodes.Node.ihook"></span><code class="sig-name descname"><span class="pre">ihook</span></code><a class="headerlink" href="#pytest.nodes.Node.ihook" title="Permalink to this definition">¶</a></dt>
<dd><p>fspath-sensitive hook proxy used to call pytest hooks.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.warn">
<span id="_pytest.nodes.Node.warn"></span><code class="sig-name descname"><span class="pre">warn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">warning</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.warn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a warning for this Node.</p>
<p>Warnings will be displayed after the test session, unless explicitly suppressed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>warning</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><em>Warning</em></a>) – The warning instance to issue.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><strong>ValueError</strong></a> – If <code class="docutils literal notranslate"><span class="pre">warning</span></code> instance is not a subclass of Warning.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">PytestWarning</span><span class="p">(</span><span class="s2">&quot;some message&quot;</span><span class="p">))</span>
<span class="n">node</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">(</span><span class="s2">&quot;some message&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.2: </span>Any subclass of <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Warning</span></code></a> is now accepted, rather than only
<a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a> subclasses.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.nodeid">
<span id="_pytest.nodes.Node.nodeid"></span><code class="sig-name descname"><span class="pre">nodeid</span></code><a class="headerlink" href="#pytest.nodes.Node.nodeid" title="Permalink to this definition">¶</a></dt>
<dd><p>A ::-separated string denoting its collection tree address.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.listchain">
<span id="_pytest.nodes.Node.listchain"></span><code class="sig-name descname"><span class="pre">listchain</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.listchain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.listchain" title="Permalink to this definition">¶</a></dt>
<dd><p>Return list of all parent collectors up to self, starting from
the root of collection tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node">_pytest.nodes.Node</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.add_marker">
<span id="_pytest.nodes.Node.add_marker"></span><code class="sig-name descname"><span class="pre">add_marker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">marker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.add_marker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.add_marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamically add a marker object to the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Whether to append the marker, or prepend it.</p></li>
<li><p><strong>marker</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>_pytest.mark.structures.MarkDecorator</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.iter_markers">
<span id="_pytest.nodes.Node.iter_markers"></span><code class="sig-name descname"><span class="pre">iter_markers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.iter_markers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.iter_markers" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all markers of the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – If given, filter the results by the name attribute.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Iterator[_pytest.mark.structures.Mark]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.iter_markers_with_node">
<span id="_pytest.nodes.Node.iter_markers_with_node"></span><em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><code class="sig-name descname"><span class="pre">iter_markers_with_node</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.iter_markers_with_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.iter_markers_with_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all markers of the node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – If given, filter the results by the name attribute.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterator of (node, mark) tuples.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Tuple[<a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node">_pytest.nodes.Node</a>, _pytest.mark.structures.Mark]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.get_closest_marker">
<span id="_pytest.nodes.Node.get_closest_marker"></span><code class="sig-name descname"><span class="pre">get_closest_marker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.get_closest_marker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.get_closest_marker" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first marker matching the name, from closest (for
example function) to farther level (for example module level).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>default</strong> (<em>Optional</em><em>[</em><em>_pytest.mark.structures.Mark</em><em>]</em>) – Fallback return value if no marker was found.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Name to filter by.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[_pytest.mark.structures.Mark]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.listextrakeywords">
<span id="_pytest.nodes.Node.listextrakeywords"></span><code class="sig-name descname"><span class="pre">listextrakeywords</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.listextrakeywords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.listextrakeywords" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of all extra keywords in self and any parents.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Set[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.addfinalizer">
<span id="_pytest.nodes.Node.addfinalizer"></span><code class="sig-name descname"><span class="pre">addfinalizer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fin</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.addfinalizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.addfinalizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a function to be called when this node is finalized.</p>
<p>This method can only be called when this node is active
in a setup chain, for example during self.setup().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fin</strong> (<em>Callable</em><em>[</em><em>[</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.getparent">
<span id="_pytest.nodes.Node.getparent"></span><code class="sig-name descname"><span class="pre">getparent</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.getparent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.getparent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next parent node (including self) which is an instance of
the given class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>Type</em><em>[</em><em>_NodeType</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[_NodeType]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.nodes.Node.repr_failure">
<span id="_pytest.nodes.Node.repr_failure"></span><code class="sig-name descname"><span class="pre">repr_failure</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excinfo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/nodes.html#Node.repr_failure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.nodes.Node.repr_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a representation of a collection or test failure.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>excinfo</strong> (<em>_pytest._code.code.ExceptionInfo</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><em>BaseException</em></a><em>]</em>) – Exception information for the failure.</p></li>
<li><p><strong>style</strong> (<em>Optional</em><em>[</em><em>_TracebackStyle</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>, _pytest._code.code.TerminalRepr]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="parser">
<h5><a class="toc-backref" href="#id77">Parser</a><a class="headerlink" href="#parser" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Parser">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Parser</span></code><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Parser for command line arguments and ini-file values.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><strong>extra_info</strong> – Dict of generic param -&gt; value to display in case
there’s an error processing the command line arguments.</p>
</dd>
</dl>
<dl class="py method">
<dt id="pytest.Parser.getgroup">
<code class="sig-name descname"><span class="pre">getgroup</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser.getgroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.getgroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get (or create) a named option Group.</p>
<dl class="field-list simple">
<dt class="field-odd">Name</dt>
<dd class="field-odd"><p>Name of the option group.</p>
</dd>
<dt class="field-even">Description</dt>
<dd class="field-even"><p>Long description for –help output.</p>
</dd>
<dt class="field-odd">After</dt>
<dd class="field-odd"><p>Name of another group, used for ordering –help output.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>after</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>_pytest.config.argparsing.OptionGroup</p>
</dd>
</dl>
<p>The returned group object has an <code class="docutils literal notranslate"><span class="pre">addoption</span></code> method with the same
signature as <a class="reference internal" href="#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addoption</span></code></a> but
will be shown in the respective group in the output of
<code class="docutils literal notranslate"><span class="pre">pytest.</span> <span class="pre">--help</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Parser.addoption">
<code class="sig-name descname"><span class="pre">addoption</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">opts</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser.addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.addoption" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a command line option.</p>
<dl class="field-list simple">
<dt class="field-odd">Opts</dt>
<dd class="field-odd"><p>Option names, can be short or long options.</p>
</dd>
<dt class="field-even">Attrs</dt>
<dd class="field-even"><p>Same attributes which the <code class="docutils literal notranslate"><span class="pre">add_argument()</span></code> function of the
<a class="reference external" href="https://docs.python.org/library/argparse.html">argparse library</a>
accepts.</p>
</dd>
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opts</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>attrs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<p>After command line parsing, options are available on the pytest config
object via <code class="docutils literal notranslate"><span class="pre">config.option.NAME</span></code> where <code class="docutils literal notranslate"><span class="pre">NAME</span></code> is usually set
by passing a <code class="docutils literal notranslate"><span class="pre">dest</span></code> attribute, for example
<code class="docutils literal notranslate"><span class="pre">addoption(&quot;--long&quot;,</span> <span class="pre">dest=&quot;NAME&quot;,</span> <span class="pre">...)</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Parser.parse_known_args">
<code class="sig-name descname"><span class="pre">parse_known_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser.parse_known_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.parse_known_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and return a namespace object with known arguments at this point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>namespace</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.10)"><em>argparse.Namespace</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.10)">argparse.Namespace</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Parser.parse_known_and_unknown_args">
<code class="sig-name descname"><span class="pre">parse_known_and_unknown_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser.parse_known_and_unknown_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.parse_known_and_unknown_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse and return a namespace object with known arguments, and
the remaining arguments unknown at this point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><em>os.PathLike</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em><em>]</em>) – </p></li>
<li><p><strong>namespace</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.10)"><em>argparse.Namespace</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Tuple[<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.10)">argparse.Namespace</a>, List[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Parser.addini">
<code class="sig-name descname"><span class="pre">addini</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">help</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#Parser.addini"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Parser.addini" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an ini-file option.</p>
<dl class="field-list">
<dt class="field-odd">Name</dt>
<dd class="field-odd"><p>Name of the ini-variable.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>Type of the variable. Can be:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code>: a string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: a boolean</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code>: a list of strings, separated as in a shell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linelist</span></code>: a list of strings, separated by line breaks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">paths</span></code>: a list of <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>, separated as in a shell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pathlist</span></code>: a list of <code class="docutils literal notranslate"><span class="pre">py.path</span></code>, separated as in a shell</p></li>
</ul>
</div></blockquote>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0: </span>The <code class="docutils literal notranslate"><span class="pre">paths</span></code> variable type.</p>
</div>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">string</span></code> if <code class="docutils literal notranslate"><span class="pre">None</span></code> or not passed.</p>
</dd>
<dt class="field-odd">Default</dt>
<dd class="field-odd"><p>Default value if no ini-file option exists but is queried.</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>help</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>type</strong> (<em>Optional</em><em>[</em><em>Literal</em><em>[</em><em>'string'</em><em>, </em><em>'paths'</em><em>, </em><em>'pathlist'</em><em>, </em><em>'args'</em><em>, </em><em>'linelist'</em><em>, </em><em>'bool'</em><em>]</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
<p>The value of ini-variables can be retrieved via a call to
<a class="reference internal" href="#pytest.Config.getini" title="pytest.Config.getini"><code class="xref py py-func docutils literal notranslate"><span class="pre">config.getini(name)</span></code></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="optiongroup">
<h5><a class="toc-backref" href="#id78">OptionGroup</a><a class="headerlink" href="#optiongroup" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.OptionGroup">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">OptionGroup</span></code><a class="reference internal" href="_modules/_pytest/config/argparsing.html#OptionGroup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.OptionGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>A group of options shown in its own section.</p>
<dl class="py method">
<dt id="pytest.OptionGroup.addoption">
<code class="sig-name descname"><span class="pre">addoption</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">optnames</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config/argparsing.html#OptionGroup.addoption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.OptionGroup.addoption" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an option to this group.</p>
<p>If a shortened version of a long option is specified, it will
be suppressed in the help. <code class="docutils literal notranslate"><span class="pre">addoption('--twowords',</span> <span class="pre">'--two-words')</span></code>
results in help showing <code class="docutils literal notranslate"><span class="pre">--two-words</span></code> only, but <code class="docutils literal notranslate"><span class="pre">--twowords</span></code> gets
accepted <strong>and</strong> the automatic destination is in <code class="docutils literal notranslate"><span class="pre">args.twowords</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optnames</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>attrs</strong> (<em>Any</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pytestpluginmanager">
<h5><a class="toc-backref" href="#id79">PytestPluginManager</a><a class="headerlink" href="#pytestpluginmanager" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.PytestPluginManager">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestPluginManager</span></code><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pluggy._manager.PluginManager</span></code></p>
<p>A <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy.PluginManager" title="(in pluggy v1.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pluggy.PluginManager</span></code></a> with
additional pytest-specific functionality:</p>
<ul class="simple">
<li><p>Loading plugins from the command line, <code class="docutils literal notranslate"><span class="pre">PYTEST_PLUGINS</span></code> env variable and
<code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> global variables found in plugins being loaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> loading during start-up.</p></li>
</ul>
<dl class="py method">
<dt id="pytest.PytestPluginManager.parse_hookimpl_opts">
<code class="sig-name descname"><span class="pre">parse_hookimpl_opts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.parse_hookimpl_opts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.parse_hookimpl_opts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plugin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.parse_hookspec_opts">
<code class="sig-name descname"><span class="pre">parse_hookspec_opts</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_or_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.parse_hookspec_opts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.parse_hookspec_opts" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.register">
<code class="sig-name descname"><span class="pre">register</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a plugin and return its canonical name or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the name
is blocked from registering.  Raise a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> if the plugin
is already registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plugin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – </p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.getplugin">
<code class="sig-name descname"><span class="pre">getplugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.getplugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.getplugin" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.hasplugin">
<code class="sig-name descname"><span class="pre">hasplugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.hasplugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.hasplugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether a plugin with the given name is registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.import_plugin">
<code class="sig-name descname"><span class="pre">import_plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consider_entry_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/config.html#PytestPluginManager.import_plugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.PytestPluginManager.import_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a plugin with <code class="docutils literal notranslate"><span class="pre">modname</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">consider_entry_points</span></code> is True, entry point names are also
considered to find a plugin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – </p></li>
<li><p><strong>consider_entry_points</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.add_hookcall_monitoring">
<code class="sig-name descname"><span class="pre">add_hookcall_monitoring</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">before</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.add_hookcall_monitoring" title="Permalink to this definition">¶</a></dt>
<dd><p>add before/after tracing functions for all hooks
and return an undo function which, when called,
will remove the added tracers.</p>
<p><code class="docutils literal notranslate"><span class="pre">before(hook_name,</span> <span class="pre">hook_impls,</span> <span class="pre">kwargs)</span></code> will be called ahead
of all hook calls and receive a hookcaller instance, a list
of HookImpl instances and the keyword arguments for the hook call.</p>
<p><code class="docutils literal notranslate"><span class="pre">after(outcome,</span> <span class="pre">hook_name,</span> <span class="pre">hook_impls,</span> <span class="pre">kwargs)</span></code> receives the
same arguments as <code class="docutils literal notranslate"><span class="pre">before</span></code> but also a <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy._callers._Result" title="(in pluggy v1.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pluggy._callers._Result</span></code></a> object
which represents the result of the overall hook call.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.add_hookspecs">
<code class="sig-name descname"><span class="pre">add_hookspecs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_or_class</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.add_hookspecs" title="Permalink to this definition">¶</a></dt>
<dd><p>add new hook specifications defined in the given <code class="docutils literal notranslate"><span class="pre">module_or_class</span></code>.
Functions are recognized if they have been decorated accordingly.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.check_pending">
<code class="sig-name descname"><span class="pre">check_pending</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.check_pending" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that all hooks which have not been verified against
a hook specification are optional, otherwise raise <code class="xref py py-class docutils literal notranslate"><span class="pre">PluginValidationError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.enable_tracing">
<code class="sig-name descname"><span class="pre">enable_tracing</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.enable_tracing" title="Permalink to this definition">¶</a></dt>
<dd><p>enable tracing of hook calls and return an undo function.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.get_canonical_name">
<code class="sig-name descname"><span class="pre">get_canonical_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_canonical_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return canonical name for a plugin object. Note that a plugin
may be registered under a different name which was specified
by the caller of <code class="xref py py-meth docutils literal notranslate"><span class="pre">register(plugin,</span> <span class="pre">name)</span></code>.
To obtain the name of an registered plugin use <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_name(plugin)</span></code> instead.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.get_hookcallers">
<code class="sig-name descname"><span class="pre">get_hookcallers</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_hookcallers" title="Permalink to this definition">¶</a></dt>
<dd><p>get all hook callers for the specified plugin.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.get_name">
<code class="sig-name descname"><span class="pre">get_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return name for registered plugin or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not registered.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.get_plugin">
<code class="sig-name descname"><span class="pre">get_plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a plugin or <code class="docutils literal notranslate"><span class="pre">None</span></code> for the given name.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.get_plugins">
<code class="sig-name descname"><span class="pre">get_plugins</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.get_plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>return the set of registered plugins.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.has_plugin">
<code class="sig-name descname"><span class="pre">has_plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.has_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if a plugin with the given name is registered.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.is_blocked">
<code class="sig-name descname"><span class="pre">is_blocked</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.is_blocked" title="Permalink to this definition">¶</a></dt>
<dd><p>return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given plugin name is blocked.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.is_registered">
<code class="sig-name descname"><span class="pre">is_registered</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.is_registered" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the plugin is already registered.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.list_name_plugin">
<code class="sig-name descname"><span class="pre">list_name_plugin</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.list_name_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>return list of name/plugin pairs.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.list_plugin_distinfo">
<code class="sig-name descname"><span class="pre">list_plugin_distinfo</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.list_plugin_distinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>return list of distinfo/plugin tuples for all setuptools registered
plugins.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.load_setuptools_entrypoints">
<code class="sig-name descname"><span class="pre">load_setuptools_entrypoints</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.load_setuptools_entrypoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Load modules from querying the specified setuptools <code class="docutils literal notranslate"><span class="pre">group</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – entry point group to load plugins</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – if given, loads only plugins with the given <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>return the number of loaded plugins by this call.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.set_blocked">
<code class="sig-name descname"><span class="pre">set_blocked</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.set_blocked" title="Permalink to this definition">¶</a></dt>
<dd><p>block registrations of the given name, unregister if already registered.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.subset_hook_caller">
<code class="sig-name descname"><span class="pre">subset_hook_caller</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_plugins</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.subset_hook_caller" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <code class="xref py py-class docutils literal notranslate"><span class="pre">_hooks._HookCaller</span></code> instance for the named method
which manages calls to all registered plugins except the
ones from remove_plugins.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.PytestPluginManager.unregister">
<code class="sig-name descname"><span class="pre">unregister</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plugin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pytest.PytestPluginManager.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>unregister a plugin object and all its contained hook implementations
from internal data structures.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="session">
<h5><a class="toc-backref" href="#id80">Session</a><a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Session">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Session</span></code><a class="reference internal" href="_modules/_pytest/main.html#Session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.nodes.FSCollector" title="_pytest.nodes.FSCollector"><code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.nodes.FSCollector</span></code></a></p>
<dl class="py exception">
<dt id="pytest.Session.Interrupted">
<em class="property"><span class="pre">exception</span> </em><code class="sig-name descname"><span class="pre">Interrupted</span></code><a class="headerlink" href="#pytest.Session.Interrupted" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a></p>
<p>Signals that the test run was interrupted.</p>
</dd></dl>

<dl class="py exception">
<dt id="pytest.Session.Failed">
<em class="property"><span class="pre">exception</span> </em><code class="sig-name descname"><span class="pre">Failed</span></code><a class="headerlink" href="#pytest.Session.Failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Signals a stop as failed test run.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.Session.startpath">
<code class="sig-name descname"><span class="pre">startpath</span></code><a class="headerlink" href="#pytest.Session.startpath" title="Permalink to this definition">¶</a></dt>
<dd><p>The path from which pytest was invoked.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.Session.perform_collect">
<code class="sig-name descname"><span class="pre">perform_collect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">genitems</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/main.html#Session.perform_collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session.perform_collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the collection phase for this session.</p>
<p>This is called by the default <a class="reference internal" href="#std-hook-pytest_collection"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collection</span></code></a> hook
implementation; see the documentation of this hook for more details.
For testing purposes, it may also be called directly on a fresh
<code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<p>This function normally recursively expands any collectors collected
from the session to their items, and only items are returned. For
testing purposes, this may be suppressed by passing <code class="docutils literal notranslate"><span class="pre">genitems=False</span></code>,
in which case the return value contains these collectors unexpanded,
and <code class="docutils literal notranslate"><span class="pre">session.items</span></code> is empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em><em>]</em>) – </p></li>
<li><p><strong>genitems</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Sequence[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Session.collect">
<em class="property"><span class="pre">for</span> <span class="pre">...</span> <span class="pre">in</span> </em><code class="sig-name descname"><span class="pre">collect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/main.html#Session.collect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Session.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of children (items and collectors) for this
collection node.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Union[_pytest.nodes.Item, _pytest.nodes.Collector]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="testreport">
<h5><a class="toc-backref" href="#id81">TestReport</a><a class="headerlink" href="#testreport" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.TestReport">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TestReport</span></code><a class="reference internal" href="_modules/_pytest/reports.html#TestReport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TestReport" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_pytest.reports.BaseReport</span></code></p>
<p>Basic test report object (also used for setup and teardown calls if
they fail).</p>
<p>Reports can contain arbitrary extra attributes.</p>
<dl class="py attribute">
<dt id="pytest.TestReport.nodeid">
<code class="sig-name descname"><span class="pre">nodeid</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#pytest.TestReport.nodeid" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized collection nodeid.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.location">
<code class="sig-name descname"><span class="pre">location</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.location" title="Permalink to this definition">¶</a></dt>
<dd><p>A (filesystempath, lineno, domaininfo) tuple indicating the
actual location of a test item - it might be different from the
collected one e.g. if a method is inherited from a different module.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.keywords">
<code class="sig-name descname"><span class="pre">keywords</span></code><a class="headerlink" href="#pytest.TestReport.keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>A name -&gt; value dictionary containing all keywords and
markers associated with a test invocation.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.outcome">
<code class="sig-name descname"><span class="pre">outcome</span></code><em class="property"><span class="pre">:</span> <span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="contents.html#pytest.TestReport.passed" title="pytest.TestReport.passed"><span class="pre">passed</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="contents.html#pytest.TestReport.failed" title="pytest.TestReport.failed"><span class="pre">failed</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="contents.html#pytest.TestReport.skipped" title="pytest.TestReport.skipped"><span class="pre">skipped</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.outcome" title="Permalink to this definition">¶</a></dt>
<dd><p>Test outcome, always one of “passed”, “failed”, “skipped”.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.longrepr">
<code class="sig-name descname"><span class="pre">longrepr</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">_pytest._code.code.ExceptionInfo</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#BaseException" title="(in Python v3.10)"><span class="pre">BaseException</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">_pytest._code.code.TerminalRepr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.longrepr" title="Permalink to this definition">¶</a></dt>
<dd><p>None or a failure representation.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.when">
<code class="sig-name descname"><span class="pre">when</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.when" title="Permalink to this definition">¶</a></dt>
<dd><p>One of ‘setup’, ‘call’, ‘teardown’ to indicate runtest phase.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.user_properties">
<code class="sig-name descname"><span class="pre">user_properties</span></code><a class="headerlink" href="#pytest.TestReport.user_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>User properties is a list of tuples (name, value) that holds user
defined properties of the test.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.sections">
<code class="sig-name descname"><span class="pre">sections</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#pytest.TestReport.sections" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuples of str <code class="docutils literal notranslate"><span class="pre">(heading,</span> <span class="pre">content)</span></code> with extra information
for the test report. Used by pytest to add text captured
from <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, and intercepted logging events. May
be used by other plugins to add arbitrary information to reports.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pytest.TestReport.duration">
<code class="sig-name descname"><span class="pre">duration</span></code><a class="headerlink" href="#pytest.TestReport.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Time it took to run just the test.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.from_item_and_call">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_item_and_call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/reports.html#TestReport.from_item_and_call"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.TestReport.from_item_and_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and fill a TestReport with standard item and call info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>_pytest.nodes.Item</em>) – </p></li>
<li><p><strong>call</strong> (<a class="reference internal" href="contents.html#pytest.CallInfo" title="pytest.CallInfo"><em>CallInfo</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport">TestReport</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.caplog">
<code class="sig-name descname"><span class="pre">caplog</span></code><a class="headerlink" href="#pytest.TestReport.caplog" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured log lines, if log capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.5.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.capstderr">
<code class="sig-name descname"><span class="pre">capstderr</span></code><a class="headerlink" href="#pytest.TestReport.capstderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured text from stderr, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.capstdout">
<code class="sig-name descname"><span class="pre">capstdout</span></code><a class="headerlink" href="#pytest.TestReport.capstdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return captured text from stdout, if capturing is enabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.count_towards_summary">
<code class="sig-name descname"><span class="pre">count_towards_summary</span></code><a class="headerlink" href="#pytest.TestReport.count_towards_summary" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> Whether this report should be counted towards the
totals shown at the end of the test session: “1 passed, 1 failure, etc”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.failed">
<code class="sig-name descname"><span class="pre">failed</span></code><a class="headerlink" href="#pytest.TestReport.failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is failed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.fspath">
<code class="sig-name descname"><span class="pre">fspath</span></code><a class="headerlink" href="#pytest.TestReport.fspath" title="Permalink to this definition">¶</a></dt>
<dd><p>The path portion of the reported node, as a string.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.head_line">
<code class="sig-name descname"><span class="pre">head_line</span></code><a class="headerlink" href="#pytest.TestReport.head_line" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Experimental</strong> The head line shown with longrepr output for this
report, more commonly during traceback representation during
failures:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">________</span> <span class="n">Test</span><span class="o">.</span><span class="n">foo</span> <span class="n">________</span>
</pre></div>
</div>
<p>In the example above, the head_line is “Test.foo”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is considered <strong>experimental</strong>, so beware that it is subject to changes
even in patch releases.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.longreprtext">
<code class="sig-name descname"><span class="pre">longreprtext</span></code><a class="headerlink" href="#pytest.TestReport.longreprtext" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the full string representation of
<code class="docutils literal notranslate"><span class="pre">longrepr</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.passed">
<code class="sig-name descname"><span class="pre">passed</span></code><a class="headerlink" href="#pytest.TestReport.passed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is passed.</p>
</dd></dl>

<dl class="py method">
<dt id="pytest.TestReport.skipped">
<code class="sig-name descname"><span class="pre">skipped</span></code><a class="headerlink" href="#pytest.TestReport.skipped" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the outcome is skipped.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="result">
<h5><a class="toc-backref" href="#id82">_Result</a><a class="headerlink" href="#result" title="Permalink to this headline">¶</a></h5>
<p>Result object used within <a class="reference internal" href="contents.html#hookwrapper"><span class="std std-ref">hook wrappers</span></a>, see <a class="reference external" href="https://pluggy.readthedocs.io/en/stable/api_reference.html#pluggy._callers._Result" title="(in pluggy v1.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">_Result</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">pluggy</span> <span class="pre">documentation</span></code></a> for more information.</p>
</div>
<div class="section" id="stash">
<h5><a class="toc-backref" href="#id83">Stash</a><a class="headerlink" href="#stash" title="Permalink to this headline">¶</a></h5>
<dl class="py class">
<dt id="pytest.Stash">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Stash</span></code><a class="reference internal" href="_modules/_pytest/stash.html#Stash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Stash</span></code> is a type-safe heterogeneous mutable mapping that
allows keys and value types to be defined separately from
where it (the <code class="docutils literal notranslate"><span class="pre">Stash</span></code>) is created.</p>
<p>Usually you will be given an object which has a <code class="docutils literal notranslate"><span class="pre">Stash</span></code>, for example
<a class="reference internal" href="#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> or a <a class="reference internal" href="#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stash</span><span class="p">:</span> <span class="n">Stash</span> <span class="o">=</span> <span class="n">some_object</span><span class="o">.</span><span class="n">stash</span>
</pre></div>
</div>
<p>If a module or plugin wants to store data in this <code class="docutils literal notranslate"><span class="pre">Stash</span></code>, it creates
<a class="reference internal" href="#pytest.StashKey" title="pytest.StashKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">StashKey</span></code></a>s for its keys (at the module level):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># At the top-level of the module</span>
<span class="n">some_str_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">str</span><span class="p">]()</span>
<span class="n">some_bool_key</span> <span class="o">=</span> <span class="n">StashKey</span><span class="p">[</span><span class="nb">bool</span><span class="p">]()</span>
</pre></div>
</div>
<p>To store information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Value type must match the key.</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>
<span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>To retrieve the information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The static type of some_str is str.</span>
<span class="n">some_str</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_str_key</span><span class="p">]</span>
<span class="c1"># The static type of some_bool is bool.</span>
<span class="n">some_bool</span> <span class="o">=</span> <span class="n">stash</span><span class="p">[</span><span class="n">some_bool_key</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pytest.Stash.__setitem__">
<code class="sig-name descname"><span class="pre">__setitem__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.__setitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a value for key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p></li>
<li><p><strong>value</strong> (<em>T</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.__getitem__">
<code class="sig-name descname"><span class="pre">__getitem__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value for key.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if the key wasn’t set before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>T</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value for key, or return default if the key wasn’t set
before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p></li>
<li><p><strong>default</strong> (<em>D</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Union[T, D]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.setdefault">
<code class="sig-name descname"><span class="pre">setdefault</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.setdefault"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of key if already set, otherwise set the value
of key to default and return default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p></li>
<li><p><strong>default</strong> (<em>T</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>T</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.__delitem__">
<code class="sig-name descname"><span class="pre">__delitem__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.__delitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__delitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the value for key.</p>
<p>Raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> if the key wasn’t set before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.__contains__">
<code class="sig-name descname"><span class="pre">__contains__</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.__contains__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether key was set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>_pytest.stash.StashKey</em><em>[</em><em>T</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pytest.Stash.__len__">
<code class="sig-name descname"><span class="pre">__len__</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/_pytest/stash.html#Stash.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.Stash.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return how many items exist in the stash.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)">int</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pytest.StashKey">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">StashKey</span></code><a class="reference internal" href="_modules/_pytest/stash.html#StashKey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.StashKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">_pytest.stash.T</span></code>]</p>
<p><code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is an object used as a key to a <a class="reference internal" href="#pytest.Stash" title="pytest.Stash"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stash</span></code></a>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is associated with the type <code class="docutils literal notranslate"><span class="pre">T</span></code> of the value of the key.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">StashKey</span></code> is unique and cannot conflict with another key.</p>
</dd></dl>

</div>
</div>
<div class="section" id="global-variables">
<h4><a class="toc-backref" href="#id84">Global Variables</a><a class="headerlink" href="#global-variables" title="Permalink to this headline">¶</a></h4>
<p>pytest treats some global variables in a special manner when defined in a test module or
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p>
<dl class="std globalvar">
<dt id="globalvar-collect_ignore">
<code class="sig-name descname"><span class="pre">collect_ignore</span></code><a class="headerlink" href="#globalvar-collect_ignore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#customizing-test-collection"><span class="std std-ref">Customizing test collection</span></a></p>
<p>Can be declared in <em>conftest.py files</em> to exclude test directories or modules.
Needs to be a list of paths (<code class="docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> or any <a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.PathLike</span></code></a>).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">collect_ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;setup.py&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="std globalvar">
<dt id="globalvar-collect_ignore_glob">
<code class="sig-name descname"><span class="pre">collect_ignore_glob</span></code><a class="headerlink" href="#globalvar-collect_ignore_glob" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#customizing-test-collection"><span class="std std-ref">Customizing test collection</span></a></p>
<p>Can be declared in <em>conftest.py files</em> to exclude test directories or modules
with Unix shell-style wildcards. Needs to be <code class="docutils literal notranslate"><span class="pre">list[str]</span></code> where <code class="docutils literal notranslate"><span class="pre">str</span></code> can
contain glob patterns.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">collect_ignore_glob</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;*_ignore.py&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="std globalvar">
<dt id="globalvar-pytest_plugins">
<code class="sig-name descname"><span class="pre">pytest_plugins</span></code><a class="headerlink" href="#globalvar-pytest_plugins" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#available-installable-plugins"><span class="std std-ref">Requiring/Loading plugins in a test module or conftest file</span></a></p>
<p>Can be declared at the <strong>global</strong> level in <em>test modules</em> and <em>conftest.py files</em> to register additional plugins.
Can be either a <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">Sequence[str]</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="s2">&quot;myapp.testsupport.myplugin&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest_plugins</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;myapp.testsupport.tools&quot;</span><span class="p">,</span> <span class="s2">&quot;myapp.testsupport.regression&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="std globalvar">
<dt id="globalvar-pytestmark">
<code class="sig-name descname"><span class="pre">pytestmark</span></code><a class="headerlink" href="#globalvar-pytestmark" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Tutorial</strong>: <a class="reference internal" href="contents.html#scoped-marking"><span class="std std-ref">Marking whole classes or modules</span></a></p>
<p>Can be declared at the <strong>global</strong> level in <em>test modules</em> to apply one or more <a class="reference internal" href="#marks-ref"><span class="std std-ref">marks</span></a> to all
test functions and methods. Can be either a single mark or a list of marks (applied in left-to-right order).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="environment-variables">
<h4><a class="toc-backref" href="#id85">Environment Variables</a><a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h4>
<p>Environment variables that can be used to change pytest’s behavior.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_ADDOPTS">
<code class="sig-name descname"><span class="pre">PYTEST_ADDOPTS</span></code><a class="headerlink" href="#envvar-PYTEST_ADDOPTS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This contains a command-line (parsed by the py:mod:<code class="docutils literal notranslate"><span class="pre">shlex</span></code> module) that will be <strong>prepended</strong> to the command line given
by the user, see <a class="reference internal" href="contents.html#adding-default-options"><span class="std std-ref">Builtin configuration file options</span></a> for more information.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_CURRENT_TEST">
<code class="sig-name descname"><span class="pre">PYTEST_CURRENT_TEST</span></code><a class="headerlink" href="#envvar-PYTEST_CURRENT_TEST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This is not meant to be set by users, but is set by pytest internally with the name of the current test so other
processes can inspect it, see <a class="reference internal" href="contents.html#pytest-current-test-env"><span class="std std-ref">PYTEST_CURRENT_TEST environment variable</span></a> for more information.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_DEBUG">
<code class="sig-name descname"><span class="pre">PYTEST_DEBUG</span></code><a class="headerlink" href="#envvar-PYTEST_DEBUG" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set, pytest will print tracing and debug information.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_DISABLE_PLUGIN_AUTOLOAD">
<code class="sig-name descname"><span class="pre">PYTEST_DISABLE_PLUGIN_AUTOLOAD</span></code><a class="headerlink" href="#envvar-PYTEST_DISABLE_PLUGIN_AUTOLOAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set, disables plugin auto-loading through setuptools entrypoints. Only explicitly specified plugins will be
loaded.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_PLUGINS">
<code class="sig-name descname"><span class="pre">PYTEST_PLUGINS</span></code><a class="headerlink" href="#envvar-PYTEST_PLUGINS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Contains comma-separated list of modules that should be loaded as plugins:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTEST_PLUGINS</span><span class="o">=</span>mymodule.plugin,xdist
</pre></div>
</div>
<dl class="std envvar">
<dt id="envvar-PYTEST_THEME">
<code class="sig-name descname"><span class="pre">PYTEST_THEME</span></code><a class="headerlink" href="#envvar-PYTEST_THEME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets a <a class="reference external" href="https://pygments.org/docs/styles/">pygment style</a> to use for the code output.</p>
<dl class="std envvar">
<dt id="envvar-PYTEST_THEME_MODE">
<code class="sig-name descname"><span class="pre">PYTEST_THEME_MODE</span></code><a class="headerlink" href="#envvar-PYTEST_THEME_MODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sets the <span class="target" id="index-0"></span><a class="reference internal" href="#envvar-PYTEST_THEME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME</span></code></a> to be either <em>dark</em> or <em>light</em>.</p>
<dl class="std envvar">
<dt id="envvar-PY_COLORS">
<code class="sig-name descname"><span class="pre">PY_COLORS</span></code><a class="headerlink" href="#envvar-PY_COLORS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set to <code class="docutils literal notranslate"><span class="pre">1</span></code>, pytest will use color in terminal output.
When set to <code class="docutils literal notranslate"><span class="pre">0</span></code>, pytest will not use color.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> takes precedence over <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> and <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.</p>
<dl class="std envvar">
<dt id="envvar-NO_COLOR">
<code class="sig-name descname"><span class="pre">NO_COLOR</span></code><a class="headerlink" href="#envvar-NO_COLOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set (regardless of value), pytest will not use color in terminal output.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> takes precedence over <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code>, which takes precedence over <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.
See <a class="reference external" href="https://no-color.org/">no-color.org</a> for other libraries supporting this community standard.</p>
<dl class="std envvar">
<dt id="envvar-FORCE_COLOR">
<code class="sig-name descname"><span class="pre">FORCE_COLOR</span></code><a class="headerlink" href="#envvar-FORCE_COLOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>When set (regardless of value), pytest will use color in terminal output.
<code class="docutils literal notranslate"><span class="pre">PY_COLORS</span></code> and <code class="docutils literal notranslate"><span class="pre">NO_COLOR</span></code> take precedence over <code class="docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code>.</p>
</div>
<div class="section" id="exceptions">
<h4><a class="toc-backref" href="#id86">Exceptions</a><a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="pytest.UsageError">
<em class="property"><span class="pre">final</span> <span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">UsageError</span></code><a class="reference internal" href="_modules/_pytest/config/exceptions.html#UsageError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pytest.UsageError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Error in pytest usage or invocation.</p>
</dd></dl>

</div>
<div class="section" id="warnings">
<span id="warnings-ref"></span><h4><a class="toc-backref" href="#id87">Warnings</a><a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h4>
<p>Custom warnings generated in some situations such as improper usage or deprecated features.</p>
<dl class="py class">
<dt id="pytest.PytestWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestWarning</span></code><a class="headerlink" href="#pytest.PytestWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a></p>
<p>Base class for all warnings emitted by pytest.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestAssertRewriteWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestAssertRewriteWarning</span></code><a class="headerlink" href="#pytest.PytestAssertRewriteWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted by the pytest assert rewrite module.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestCacheWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestCacheWarning</span></code><a class="headerlink" href="#pytest.PytestCacheWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted by the cache plugin in various situations.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestCollectionWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestCollectionWarning</span></code><a class="headerlink" href="#pytest.PytestCollectionWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted when pytest is not able to collect a file or symbol in a module.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestConfigWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestConfigWarning</span></code><a class="headerlink" href="#pytest.PytestConfigWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted for configuration issues.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestDeprecationWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestDeprecationWarning</span></code><a class="headerlink" href="#pytest.PytestDeprecationWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#DeprecationWarning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a></p>
<p>Warning class for features that will be removed in a future version.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestExperimentalApiWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestExperimentalApiWarning</span></code><a class="headerlink" href="#pytest.PytestExperimentalApiWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FutureWarning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FutureWarning</span></code></a></p>
<p>Warning category used to denote experiments in pytest.</p>
<p>Use sparingly as the API might change or even be removed completely in a
future version.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestUnhandledCoroutineWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestUnhandledCoroutineWarning</span></code><a class="headerlink" href="#pytest.PytestUnhandledCoroutineWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted for an unhandled coroutine.</p>
<p>A coroutine was encountered when collecting test functions, but was not
handled by any async-aware plugin.
Coroutine test functions are not natively supported.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestUnknownMarkWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestUnknownMarkWarning</span></code><a class="headerlink" href="#pytest.PytestUnknownMarkWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>Warning emitted on use of unknown markers.</p>
<p>See <a class="reference internal" href="contents.html#mark"><span class="std std-ref">How to mark test functions with attributes</span></a> for details.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestUnraisableExceptionWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestUnraisableExceptionWarning</span></code><a class="headerlink" href="#pytest.PytestUnraisableExceptionWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>An unraisable exception was reported.</p>
<p>Unraisable exceptions are exceptions raised in <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__del__" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__del__</span></code></a>
implementations and similar situations when the exception cannot be raised
as normal.</p>
</dd></dl>

<dl class="py class">
<dt id="pytest.PytestUnhandledThreadExceptionWarning">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PytestUnhandledThreadExceptionWarning</span></code><a class="headerlink" href="#pytest.PytestUnhandledThreadExceptionWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.PytestWarning</span></code></a></p>
<p>An unhandled exception occurred in a <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Thread" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></a>.</p>
<p>Such exceptions don’t propagate normally.</p>
</dd></dl>

<p>Consult the <a class="reference internal" href="contents.html#internal-warnings"><span class="std std-ref">Internal pytest warnings</span></a> section in the documentation for more information.</p>
</div>
<div class="section" id="configuration-options">
<span id="ini-options-ref"></span><h4><a class="toc-backref" href="#id88">Configuration Options</a><a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h4>
<p>Here is a list of builtin configuration options that may be written in a <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> or <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>
file, usually located at the root of your repository. To see each file format in details, see
<a class="reference internal" href="contents.html#config-file-formats"><span class="std std-ref">Configuration file formats</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Usage of <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> is not recommended except for very simple use cases. <code class="docutils literal notranslate"><span class="pre">.cfg</span></code>
files use a different parser than <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> and <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> which might cause hard to track
down problems.
When possible, it is recommended to use the latter files, or <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, to hold your pytest configuration.</p>
</div>
<p>Configuration options may be overwritten in the command-line by using <code class="docutils literal notranslate"><span class="pre">-o/--override-ini</span></code>, which can also be
passed multiple times. The expected format is <code class="docutils literal notranslate"><span class="pre">name=value</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">o</span> <span class="n">console_output_style</span><span class="o">=</span><span class="n">classic</span> <span class="o">-</span><span class="n">o</span> <span class="n">cache_dir</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mycache</span>
</pre></div>
</div>
<dl class="std confval">
<dt id="confval-addopts">
<code class="sig-name descname"><span class="pre">addopts</span></code><a class="headerlink" href="#confval-addopts" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the specified <code class="docutils literal notranslate"><span class="pre">OPTS</span></code> to the set of command line arguments as if they
had been specified by the user. Example: if you have this ini file content:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--maxfail=2 -rf  # exit after 2 failures, report fail info</span><span class="w"></span>
</pre></div>
</div>
<p>issuing <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">test_hello.py</span></code> actually means:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --maxfail<span class="o">=</span><span class="m">2</span> -rf test_hello.py
</pre></div>
</div>
<p>Default is to add no options.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-cache_dir">
<code class="sig-name descname"><span class="pre">cache_dir</span></code><a class="headerlink" href="#confval-cache_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a directory where stores content of cache plugin. Default directory is
<code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> which is created in <a class="reference internal" href="contents.html#rootdir"><span class="std std-ref">rootdir</span></a>. Directory may be
relative or absolute path. If setting relative path, then directory is created
relative to <a class="reference internal" href="contents.html#rootdir"><span class="std std-ref">rootdir</span></a>. Additionally path may contain environment
variables, that will be expanded. For more information about cache plugin
please refer to <a class="reference internal" href="contents.html#cache-provider"><span class="std std-ref">How to re-run failed tests and maintain state between test runs</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-console_output_style">
<code class="sig-name descname"><span class="pre">console_output_style</span></code><a class="headerlink" href="#confval-console_output_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the console output style while running tests:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">classic</span></code>: classic pytest output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress</span></code>: like classic pytest output, but with a progress indicator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: like progress, but shows progress as the number of tests completed instead of a percent.</p></li>
</ul>
<p>The default is <code class="docutils literal notranslate"><span class="pre">progress</span></code>, but you can fallback to <code class="docutils literal notranslate"><span class="pre">classic</span></code> if you prefer or
the new mode is causing unexpected problems:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">console_output_style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">classic</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-doctest_encoding">
<code class="sig-name descname"><span class="pre">doctest_encoding</span></code><a class="headerlink" href="#confval-doctest_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Default encoding to use to decode text files with docstrings.
<a class="reference internal" href="contents.html#doctest"><span class="std std-ref">See how pytest handles doctests</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-doctest_optionflags">
<code class="sig-name descname"><span class="pre">doctest_optionflags</span></code><a class="headerlink" href="#confval-doctest_optionflags" title="Permalink to this definition">¶</a></dt>
<dd><p>One or more doctest flag names from the standard <code class="docutils literal notranslate"><span class="pre">doctest</span></code> module.
<a class="reference internal" href="contents.html#doctest"><span class="std std-ref">See how pytest handles doctests</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-empty_parameter_set_mark">
<code class="sig-name descname"><span class="pre">empty_parameter_set_mark</span></code><a class="headerlink" href="#confval-empty_parameter_set_mark" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows to pick the action for empty parametersets in parameterization</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">skip</span></code> skips tests with an empty parameterset (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xfail</span></code> marks tests with an empty parameterset as xfail(run=False)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fail_at_collect</span></code> raises an exception if parametrize collects an empty parameter set</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">empty_parameter_set_mark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">xfail</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default value of this option is planned to change to <code class="docutils literal notranslate"><span class="pre">xfail</span></code> in future releases
as this is considered less error prone, see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3155">issue #3155</a> for more details.</p>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-faulthandler_timeout">
<code class="sig-name descname"><span class="pre">faulthandler_timeout</span></code><a class="headerlink" href="#confval-faulthandler_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps the tracebacks of all threads if a test takes longer than <code class="docutils literal notranslate"><span class="pre">X</span></code> seconds to run (including
fixture setup and teardown). Implemented using the <a class="reference external" href="https://docs.python.org/3/library/faulthandler.html#faulthandler.dump_traceback_later" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">faulthandler.dump_traceback_later()</span></code></a> function,
so all caveats there apply.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">faulthandler_timeout</span><span class="o">=</span><span class="s">5</span><span class="w"></span>
</pre></div>
</div>
<p>For more information please refer to <a class="reference internal" href="contents.html#faulthandler"><span class="std std-ref">Fault Handler</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-filterwarnings">
<code class="sig-name descname"><span class="pre">filterwarnings</span></code><a class="headerlink" href="#confval-filterwarnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a list of filters and actions that should be taken for matched
warnings. By default all warnings emitted during the test session
will be displayed in a summary at the end of the test session.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">error</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::DeprecationWarning</span><span class="w"></span>
</pre></div>
</div>
<p>This tells pytest to ignore deprecation warnings and turn all other warnings
into errors. For more information please refer to <a class="reference internal" href="contents.html#warnings"><span class="std std-ref">How to capture warnings</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-junit_duration_report">
<code class="sig-name descname"><span class="pre">junit_duration_report</span></code><a class="headerlink" href="#confval-junit_duration_report" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 4.1.</span></p>
</div>
<p>Configures how durations are recorded into the JUnit XML report:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> (the default): duration times reported include setup, call, and teardown times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call</span></code>: duration times reported include only call times, excluding setup and teardown.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_duration_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">call</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-junit_family">
<code class="sig-name descname"><span class="pre">junit_family</span></code><a class="headerlink" href="#confval-junit_family" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 4.2.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.1: </span>Default changed to <code class="docutils literal notranslate"><span class="pre">xunit2</span></code>.</p>
</div>
<p>Configures the format of the generated JUnit XML file. The possible options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xunit1</span></code> (or <code class="docutils literal notranslate"><span class="pre">legacy</span></code>): produces old style output, compatible with the xunit 1.0 format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xunit2</span></code>: produces <a class="reference external" href="https://github.com/jenkinsci/xunit-plugin/blob/xunit-2.3.2/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd">xunit 2.0 style output</a>, which should be more compatible with latest Jenkins versions.  <strong>This is the default</strong>.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">xunit2</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-junit_logging">
<code class="sig-name descname"><span class="pre">junit_logging</span></code><a class="headerlink" href="#confval-junit_logging" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 3.5.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 5.4: </span><code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">all</span></code>, <code class="docutils literal notranslate"><span class="pre">out-err</span></code> options added.</p>
</div>
<p>Configures if captured output should be written to the JUnit XML file. Valid values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>: write only <code class="docutils literal notranslate"><span class="pre">logging</span></code> captured output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-out</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">stdout</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">system-err</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out-err</span></code>: write both captured <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code>: write captured <code class="docutils literal notranslate"><span class="pre">logging</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> contents.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code> (the default): no captured output is written.</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">system-out</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-junit_log_passing_tests">
<code class="sig-name descname"><span class="pre">junit_log_passing_tests</span></code><a class="headerlink" href="#confval-junit_log_passing_tests" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">New in version 4.6.</span></p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">junit_logging</span> <span class="pre">!=</span> <span class="pre">&quot;no&quot;</span></code>, configures if the captured output should be written
to the JUnit XML file for <strong>passing</strong> tests. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_log_passing_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-junit_suite_name">
<code class="sig-name descname"><span class="pre">junit_suite_name</span></code><a class="headerlink" href="#confval-junit_suite_name" title="Permalink to this definition">¶</a></dt>
<dd><p>To set the name of the root test suite xml item, you can configure the <code class="docutils literal notranslate"><span class="pre">junit_suite_name</span></code> option in your config file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_suite_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_suite</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_auto_indent">
<code class="sig-name descname"><span class="pre">log_auto_indent</span></code><a class="headerlink" href="#confval-log_auto_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow selective auto-indentation of multiline log messages.</p>
<p>Supports command line option <code class="docutils literal notranslate"><span class="pre">--log-auto-indent</span> <span class="pre">[value]</span></code>
and config option <code class="docutils literal notranslate"><span class="pre">log_auto_indent</span> <span class="pre">=</span> <span class="pre">[value]</span></code> to set the
auto-indentation behavior for all logging.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">[value]</span></code> can be:</dt><dd><ul class="simple">
<li><p>True or “On” - Dynamically auto-indent multiline log messages</p></li>
<li><p>False or “Off” or 0 - Do not auto-indent multiline log messages (the default behavior)</p></li>
<li><p>[positive integer] - auto-indent multiline log messages by [value] spaces</p></li>
</ul>
</dd>
</dl>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_auto_indent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span><span class="w"></span>
</pre></div>
</div>
<p>Supports passing kwarg <code class="docutils literal notranslate"><span class="pre">extra={&quot;auto_indent&quot;:</span> <span class="pre">[value]}</span></code> to
calls to <code class="docutils literal notranslate"><span class="pre">logging.log()</span></code> to specify auto-indentation behavior for
a specific entry in the log. <code class="docutils literal notranslate"><span class="pre">extra</span></code> kwarg overrides the value specified
on the command line or in the config.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_cli">
<code class="sig-name descname"><span class="pre">log_cli</span></code><a class="headerlink" href="#confval-log_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable log display during test run (also known as <a class="reference internal" href="contents.html#live-logs"><span class="std std-ref">“live logging”</span></a>).
The default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_cli_date_format">
<code class="sig-name descname"><span class="pre">log_cli_date_format</span></code><a class="headerlink" href="#confval-log_cli_date_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for live logging.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_cli_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#live-logs"><span class="std std-ref">Live Logs</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_cli_format">
<code class="sig-name descname"><span class="pre">log_cli_format</span></code><a class="headerlink" href="#confval-log_cli_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format live logging messages.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_cli_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#live-logs"><span class="std std-ref">Live Logs</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_cli_level">
<code class="sig-name descname"><span class="pre">log_cli_level</span></code><a class="headerlink" href="#confval-log_cli_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for live logging. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_cli_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#live-logs"><span class="std std-ref">Live Logs</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_date_format">
<code class="sig-name descname"><span class="pre">log_date_format</span></code><a class="headerlink" href="#confval-log_date_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for logging capture.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_file">
<code class="sig-name descname"><span class="pre">log_file</span></code><a class="headerlink" href="#confval-log_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a file name relative to the current working directory where log messages should be written to, in addition
to the other logging facilities that are active.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logs/pytest-logs.txt</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_file_date_format">
<code class="sig-name descname"><span class="pre">log_file_date_format</span></code><a class="headerlink" href="#confval-log_file_date_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>-compatible string that will be used when formatting dates for the logging file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_file_date_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_file_format">
<code class="sig-name descname"><span class="pre">log_file_format</span></code><a class="headerlink" href="#confval-log_file_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format logging messages redirected to the logging file.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_file_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_file_level">
<code class="sig-name descname"><span class="pre">log_file_level</span></code><a class="headerlink" href="#confval-log_file_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for the logging file. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_file_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_format">
<code class="sig-name descname"><span class="pre">log_format</span></code><a class="headerlink" href="#confval-log_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a <a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>-compatible string used to format captured logging messages.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%(asctime)s %(levelname)s %(message)s</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-log_level">
<code class="sig-name descname"><span class="pre">log_level</span></code><a class="headerlink" href="#confval-log_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the minimum log message level that should be captured for logging capture. The integer value or
the names of the levels can be used.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span><span class="w"></span>
</pre></div>
</div>
<p>For more information, see <a class="reference internal" href="contents.html#logging"><span class="std std-ref">How to manage logging</span></a>.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-markers">
<code class="sig-name descname"><span class="pre">markers</span></code><a class="headerlink" href="#confval-markers" title="Permalink to this definition">¶</a></dt>
<dd><p>When the <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> or <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line arguments are used,
only known markers - defined in code by core pytest or some plugin - are allowed.</p>
<p>You can list additional markers in this setting to add them to the whitelist,
in which case you probably want to add <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> to <code class="docutils literal notranslate"><span class="pre">addopts</span></code>
to avoid future regressions:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--strict-markers</span><span class="w"></span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">slow</span><span class="w"></span>
<span class="w">    </span><span class="na">serial</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> is highly preferred. <code class="docutils literal notranslate"><span class="pre">--strict</span></code> was kept for
backward compatibility only and may be confusing for others as it only applies to
markers and not to other options.</p>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-minversion">
<code class="sig-name descname"><span class="pre">minversion</span></code><a class="headerlink" href="#confval-minversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies a minimal pytest version required for running tests.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3.0  # will fail if we run with pytest-2.8</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-norecursedirs">
<code class="sig-name descname"><span class="pre">norecursedirs</span></code><a class="headerlink" href="#confval-norecursedirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the directory basename patterns to avoid when recursing
for test discovery.  The individual (fnmatch-style) patterns are
applied to the basename of a directory to decide if to recurse into it.
Pattern matching characters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>*       matches everything
?       matches any single character
[seq]   matches any character in seq
[!seq]  matches any char not in seq
</pre></div>
</div>
<p>Default patterns are <code class="docutils literal notranslate"><span class="pre">'*.egg'</span></code>, <code class="docutils literal notranslate"><span class="pre">'.*'</span></code>, <code class="docutils literal notranslate"><span class="pre">'_darcs'</span></code>, <code class="docutils literal notranslate"><span class="pre">'build'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'CVS'</span></code>, <code class="docutils literal notranslate"><span class="pre">'dist'</span></code>, <code class="docutils literal notranslate"><span class="pre">'node_modules'</span></code>, <code class="docutils literal notranslate"><span class="pre">'venv'</span></code>, <code class="docutils literal notranslate"><span class="pre">'{arch}'</span></code>.
Setting a <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> replaces the default.  Here is an example of
how to avoid certain directories:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">norecursedirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">.svn _build tmp*</span><span class="w"></span>
</pre></div>
</div>
<p>This would tell <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to not look into typical subversion or
sphinx-build directories or into any <code class="docutils literal notranslate"><span class="pre">tmp</span></code> prefixed directory.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will attempt to intelligently identify and ignore a
virtualenv by the presence of an activation script.  Any directory deemed to
be the root of a virtual environment will not be considered during test
collection unless <code class="docutils literal notranslate"><span class="pre">‑‑collect‑in‑virtualenv</span></code> is given.  Note also that
<code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> takes precedence over <code class="docutils literal notranslate"><span class="pre">‑‑collect‑in‑virtualenv</span></code>; e.g. if
you intend to run tests in a virtualenv with a base directory that matches
<code class="docutils literal notranslate"><span class="pre">'.*'</span></code> you <em>must</em> override <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> in addition to using the
<code class="docutils literal notranslate"><span class="pre">‑‑collect‑in‑virtualenv</span></code> flag.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-python_classes">
<code class="sig-name descname"><span class="pre">python_classes</span></code><a class="headerlink" href="#confval-python_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>One or more name prefixes or glob-style patterns determining which classes
are considered for test collection. Search for multiple glob patterns by
adding a space between patterns. By default, pytest will consider any
class prefixed with <code class="docutils literal notranslate"><span class="pre">Test</span></code> as a test collection.  Here is an example of how
to collect tests from classes that end in <code class="docutils literal notranslate"><span class="pre">Suite</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*Suite</span><span class="w"></span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> derived classes are always collected
regardless of this option, as <code class="docutils literal notranslate"><span class="pre">unittest</span></code>’s own collection framework is used
to collect those tests.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-python_files">
<code class="sig-name descname"><span class="pre">python_files</span></code><a class="headerlink" href="#confval-python_files" title="Permalink to this definition">¶</a></dt>
<dd><p>One or more Glob-style file patterns determining which python files
are considered as test modules. Search for multiple glob patterns by
adding a space between patterns:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test_*.py check_*.py example_*.py</span><span class="w"></span>
</pre></div>
</div>
<p>Or one per line:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">test_*.py</span><span class="w"></span>
<span class="w">    </span><span class="na">check_*.py</span><span class="w"></span>
<span class="w">    </span><span class="na">example_*.py</span><span class="w"></span>
</pre></div>
</div>
<p>By default, files matching <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> and <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> will be considered
test modules.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-python_functions">
<code class="sig-name descname"><span class="pre">python_functions</span></code><a class="headerlink" href="#confval-python_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>One or more name prefixes or glob-patterns determining which test functions
and methods are considered tests. Search for multiple glob patterns by
adding a space between patterns. By default, pytest will consider any
function prefixed with <code class="docutils literal notranslate"><span class="pre">test</span></code> as a test.  Here is an example of how
to collect test functions and methods that end in <code class="docutils literal notranslate"><span class="pre">_test</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*_test</span><span class="w"></span>
</pre></div>
</div>
<p>Note that this has no effect on methods that live on a <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>
derived class, as <code class="docutils literal notranslate"><span class="pre">unittest</span></code>’s own collection framework is used
to collect those tests.</p>
<p>See <a class="reference internal" href="contents.html#change-naming-conventions"><span class="std std-ref">Changing naming conventions</span></a> for more detailed examples.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-pythonpath">
<code class="sig-name descname"><span class="pre">pythonpath</span></code><a class="headerlink" href="#confval-pythonpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets list of directories that should be added to the python search path.
Directories will be added to the head of <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>.
Similar to the <span class="target" id="index-1"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" title="(in Python v3.10)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> environment variable, the directories will be
included in where Python will look for imported modules.
Paths are relative to the <a class="reference internal" href="contents.html#rootdir"><span class="std std-ref">rootdir</span></a> directory.
Directories remain in path for the duration of the test session.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">pythonpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src1 src2</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-required_plugins">
<code class="sig-name descname"><span class="pre">required_plugins</span></code><a class="headerlink" href="#confval-required_plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>A space separated list of plugins that must be present for pytest to run.
Plugins can be listed with or without version specifiers directly following
their name. Whitespace between different version specifiers is not allowed.
If any one of the plugins is not found, emit an error.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">required_plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">pytest-django&gt;=3.0.0,&lt;4.0.0 pytest-html pytest-xdist&gt;=1.0.0</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-testpaths">
<code class="sig-name descname"><span class="pre">testpaths</span></code><a class="headerlink" href="#confval-testpaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets list of directories that should be searched for tests when
no specific directories, files or test ids are given in the command line when
executing pytest from the <a class="reference internal" href="contents.html#rootdir"><span class="std std-ref">rootdir</span></a> directory.
Useful when all project tests are in a known location to speed up
test collection and to avoid picking up undesired tests by accident.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">testing doc</span><span class="w"></span>
</pre></div>
</div>
<p>This tells pytest to only look for tests in <code class="docutils literal notranslate"><span class="pre">testing</span></code> and <code class="docutils literal notranslate"><span class="pre">doc</span></code>
directories when executing from the root directory.</p>
</dd></dl>

<dl class="std confval">
<dt id="confval-usefixtures">
<code class="sig-name descname"><span class="pre">usefixtures</span></code><a class="headerlink" href="#confval-usefixtures" title="Permalink to this definition">¶</a></dt>
<dd><p>List of fixtures that will be applied to all test functions; this is semantically the same to apply
the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.usefixtures</span></code> marker to all test functions.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">usefixtures</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">clean_db</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt id="confval-xfail_strict">
<code class="sig-name descname"><span class="pre">xfail_strict</span></code><a class="headerlink" href="#confval-xfail_strict" title="Permalink to this definition">¶</a></dt>
<dd><p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, tests marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code> that actually succeed will by default fail the
test suite.
For more information, see <a class="reference internal" href="contents.html#xfail-strict-tutorial"><span class="std std-ref">strict parameter</span></a>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">xfail_strict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="command-line-flags">
<span id="id3"></span><h4><a class="toc-backref" href="#id89">Command-line Flags</a><a class="headerlink" href="#command-line-flags" title="Permalink to this headline">¶</a></h4>
<p>All the command-line flags can be obtained by running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest --help
usage: pytest [options] [file_or_dir] [file_or_dir] [...]

positional arguments:
  file_or_dir

general:
  -k EXPRESSION         only run tests which match the given substring
                        expression. An expression is a python evaluatable
                        expression where all names are substring-matched
                        against test names and their parent classes.
                        Example: -k &#39;test_method or test_other&#39; matches all
                        test functions and classes whose name contains
                        &#39;test_method&#39; or &#39;test_other&#39;, while -k &#39;not
                        test_method&#39; matches those that don&#39;t contain
                        &#39;test_method&#39; in their names. -k &#39;not test_method
                        and not test_other&#39; will eliminate the matches.
                        Additionally keywords are matched to classes and
                        functions containing extra names in their
                        &#39;extra_keyword_matches&#39; set, as well as functions
                        which have names assigned directly to them. The
                        matching is case-insensitive.
  -m MARKEXPR           only run tests matching given mark expression.
                        For example: -m &#39;mark1 and not mark2&#39;.
  --markers             show markers (builtin, plugin and per-project ones).
  -x, --exitfirst       exit instantly on first error or failed test.
  --fixtures, --funcargs
                        show available fixtures, sorted by plugin appearance
                        (fixtures with leading &#39;_&#39; are only shown with &#39;-v&#39;)
  --fixtures-per-test   show fixtures per test
  --pdb                 start the interactive Python debugger on errors or
                        KeyboardInterrupt.
  --pdbcls=modulename:classname
                        specify a custom interactive Python debugger for use
                        with --pdb.For example:
                        --pdbcls=IPython.terminal.debugger:TerminalPdb
  --trace               Immediately break when running each test.
  --capture=method      per-test capturing method: one of fd|sys|no|tee-sys.
  -s                    shortcut for --capture=no.
  --runxfail            report the results of xfail tests as if they were
                        not marked
  --lf, --last-failed   rerun only the tests that failed at the last run (or
                        all if none failed)
  --ff, --failed-first  run all tests, but run the last failures first.
                        This may re-order tests and thus lead to repeated
                        fixture setup/teardown.
  --nf, --new-first     run tests from new files first, then the rest of the
                        tests sorted by file mtime
  --cache-show=[CACHESHOW]
                        show cache contents, don&#39;t perform collection or
                        tests. Optional argument: glob (default: &#39;*&#39;).
  --cache-clear         remove all cache contents at start of test run.
  --lfnf={all,none}, --last-failed-no-failures={all,none}
                        which tests to run with no previously (known)
                        failures.
  --sw, --stepwise      exit on test failure and continue from last failing
                        test next time
  --sw-skip, --stepwise-skip
                        ignore the first failing test but stop on the next
                        failing test.
                        implicitly enables --stepwise.

reporting:
  --durations=N         show N slowest setup/test durations (N=0 for all).
  --durations-min=N     Minimal duration in seconds for inclusion in slowest
                        list. Default 0.005
  -v, --verbose         increase verbosity.
  --no-header           disable header
  --no-summary          disable summary
  -q, --quiet           decrease verbosity.
  --verbosity=VERBOSE   set verbosity. Default is 0.
  -r chars              show extra test summary info as specified by chars:
                        (f)ailed, (E)rror, (s)kipped, (x)failed, (X)passed,
                        (p)assed, (P)assed with output, (a)ll except passed
                        (p/P), or (A)ll. (w)arnings are enabled by default
                        (see --disable-warnings), &#39;N&#39; can be used to reset
                        the list. (default: &#39;fE&#39;).
  --disable-warnings, --disable-pytest-warnings
                        disable warnings summary
  -l, --showlocals      show locals in tracebacks (disabled by default).
  --tb=style            traceback print mode
                        (auto/long/short/line/native/no).
  --show-capture={no,stdout,stderr,log,all}
                        Controls how captured stdout/stderr/log is shown on
                        failed tests. Default is &#39;all&#39;.
  --full-trace          don&#39;t cut any tracebacks (default is to cut).
  --color=color         color terminal output (yes/no/auto).
  --code-highlight={yes,no}
                        Whether code should be highlighted (only if --color
                        is also enabled)
  --pastebin=mode       send failed|all info to bpaste.net pastebin service.
  --junit-xml=path      create junit-xml style report file at given path.
  --junit-prefix=str    prepend prefix to classnames in junit-xml output

pytest-warnings:
  -W PYTHONWARNINGS, --pythonwarnings=PYTHONWARNINGS
                        set which warnings to report, see -W option of
                        python itself.
  --maxfail=num         exit after first num failures or errors.
  --strict-config       any warnings encountered while parsing the `pytest`
                        section of the configuration file raise errors.
  --strict-markers      markers not registered in the `markers` section of
                        the configuration file raise errors.
  --strict              (deprecated) alias to --strict-markers.
  -c file               load configuration from `file` instead of trying to
                        locate one of the implicit configuration files.
  --continue-on-collection-errors
                        Force test execution even if collection errors
                        occur.
  --rootdir=ROOTDIR     Define root directory for tests. Can be relative
                        path: &#39;root_dir&#39;, &#39;./root_dir&#39;,
                        &#39;root_dir/another_dir/&#39;; absolute path:
                        &#39;/home/user/root_dir&#39;; path with variables:
                        &#39;$HOME/root_dir&#39;.

collection:
  --collect-only, --co  only collect tests, don&#39;t execute them.
  --pyargs              try to interpret all arguments as python packages.
  --ignore=path         ignore path during collection (multi-allowed).
  --ignore-glob=path    ignore path pattern during collection (multi-
                        allowed).
  --deselect=nodeid_prefix
                        deselect item (via node id prefix) during collection
                        (multi-allowed).
  --confcutdir=dir      only load conftest.py&#39;s relative to specified dir.
  --noconftest          Don&#39;t load any conftest.py files.
  --keep-duplicates     Keep duplicate tests.
  --collect-in-virtualenv
                        Don&#39;t ignore tests in a local virtualenv directory
  --import-mode={prepend,append,importlib}
                        prepend/append to sys.path when importing test
                        modules and conftest files, default is to prepend.
  --doctest-modules     run doctests in all .py modules
  --doctest-report={none,cdiff,ndiff,udiff,only_first_failure}
                        choose another output format for diffs on doctest
                        failure
  --doctest-glob=pat    doctests file matching pattern, default: test*.txt
  --doctest-ignore-import-errors
                        ignore doctest ImportErrors
  --doctest-continue-on-failure
                        for a given doctest, continue to run after the first
                        failure

test session debugging and configuration:
  --basetemp=dir        base temporary directory for this test run.(warning:
                        this directory is removed if it exists)
  -V, --version         display pytest version and information about
                        plugins. When given twice, also display information
                        about plugins.
  -h, --help            show help message and configuration info
  -p name               early-load given plugin module name or entry point
                        (multi-allowed).
                        To avoid loading of plugins, use the `no:` prefix,
                        e.g. `no:doctest`.
  --trace-config        trace considerations of conftest.py files.
  --debug=[DEBUG_FILE_NAME]
                        store internal tracing debug information in this log
                        file.
                        This file is opened with &#39;w&#39; and truncated as a
                        result, care advised.
                        Defaults to &#39;pytestdebug.log&#39;.
  -o OVERRIDE_INI, --override-ini=OVERRIDE_INI
                        override ini option with &quot;option=value&quot; style, e.g.
                        `-o xfail_strict=True -o cache_dir=cache`.
  --assert=MODE         Control assertion debugging tools.
                        &#39;plain&#39; performs no assertion debugging.
                        &#39;rewrite&#39; (the default) rewrites assert statements
                        in test modules on import to provide assert
                        expression information.
  --setup-only          only setup fixtures, do not execute tests.
  --setup-show          show setup of fixtures while executing tests.
  --setup-plan          show what fixtures and tests would be executed but
                        don&#39;t execute anything.

logging:
  --log-level=LEVEL     level of messages to catch/display.
                        Not set by default, so it depends on the root/parent
                        log handler&#39;s effective level, where it is &quot;WARNING&quot;
                        by default.
  --log-format=LOG_FORMAT
                        log format as used by the logging module.
  --log-date-format=LOG_DATE_FORMAT
                        log date format as used by the logging module.
  --log-cli-level=LOG_CLI_LEVEL
                        cli logging level.
  --log-cli-format=LOG_CLI_FORMAT
                        log format as used by the logging module.
  --log-cli-date-format=LOG_CLI_DATE_FORMAT
                        log date format as used by the logging module.
  --log-file=LOG_FILE   path to a file when logging will be written to.
  --log-file-level=LOG_FILE_LEVEL
                        log file logging level.
  --log-file-format=LOG_FILE_FORMAT
                        log format as used by the logging module.
  --log-file-date-format=LOG_FILE_DATE_FORMAT
                        log date format as used by the logging module.
  --log-auto-indent=LOG_AUTO_INDENT
                        Auto-indent multiline messages passed to the logging
                        module. Accepts true|on, false|off or an integer.

[pytest] ini-options in the first pytest.ini|tox.ini|setup.cfg file found:

  markers (linelist):   markers for test functions
  empty_parameter_set_mark (string):
                        default marker for empty parametersets
  norecursedirs (args): directory patterns to avoid for recursion
  testpaths (args):     directories to search for tests when no files or
                        directories are given in the command line.
  filterwarnings (linelist):
                        Each line specifies a pattern for
                        warnings.filterwarnings. Processed after
                        -W/--pythonwarnings.
  usefixtures (args):   list of default fixtures to be used with this
                        project
  python_files (args):  glob-style file patterns for Python test module
                        discovery
  python_classes (args):
                        prefixes or glob names for Python test class
                        discovery
  python_functions (args):
                        prefixes or glob names for Python test function and
                        method discovery
  disable_test_id_escaping_and_forfeit_all_rights_to_community_support (bool):
                        disable string escape non-ascii characters, might
                        cause unwanted side effects(use at your own risk)
  console_output_style (string):
                        console output: &quot;classic&quot;, or with additional
                        progress information (&quot;progress&quot; (percentage) |
                        &quot;count&quot;).
  xfail_strict (bool):  default for the strict parameter of xfail markers
                        when not given explicitly (default: False)
  enable_assertion_pass_hook (bool):
                        Enables the pytest_assertion_pass hook.Make sure to
                        delete any previously generated pyc cache files.
  junit_suite_name (string):
                        Test suite name for JUnit report
  junit_logging (string):
                        Write captured log messages to JUnit report: one of
                        no|log|system-out|system-err|out-err|all
  junit_log_passing_tests (bool):
                        Capture log information for passing tests to JUnit
                        report:
  junit_duration_report (string):
                        Duration time to report: one of total|call
  junit_family (string):
                        Emit XML for schema: one of legacy|xunit1|xunit2
  doctest_optionflags (args):
                        option flags for doctests
  doctest_encoding (string):
                        encoding used for doctest files
  cache_dir (string):   cache directory path.
  log_level (string):   default value for --log-level
  log_format (string):  default value for --log-format
  log_date_format (string):
                        default value for --log-date-format
  log_cli (bool):       enable log display during test run (also known as
                        &quot;live logging&quot;).
  log_cli_level (string):
                        default value for --log-cli-level
  log_cli_format (string):
                        default value for --log-cli-format
  log_cli_date_format (string):
                        default value for --log-cli-date-format
  log_file (string):    default value for --log-file
  log_file_level (string):
                        default value for --log-file-level
  log_file_format (string):
                        default value for --log-file-format
  log_file_date_format (string):
                        default value for --log-file-date-format
  log_auto_indent (string):
                        default value for --log-auto-indent
  pythonpath (paths):   Add paths to sys.path
  faulthandler_timeout (string):
                        Dump the traceback of all threads if a test takes
                        more than TIMEOUT seconds to finish.
  addopts (args):       extra command line options
  minversion (string):  minimally required pytest version
  required_plugins (args):
                        plugins that must be present for pytest to run

environment variables:
  PYTEST_ADDOPTS           extra command line options
  PYTEST_PLUGINS           comma-separated plugins to load during startup
  PYTEST_DISABLE_PLUGIN_AUTOLOAD set to disable plugin auto-loading
  PYTEST_DEBUG             set to enable debug tracing of pytest&#39;s internals


to see available markers type: pytest --markers
to see available fixtures type: pytest --fixtures
(shown according to specified file_or_dir or current dir if not specified; fixtures with leading &#39;_&#39; are only shown with the &#39;-v&#39; option
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="explanation">
<h2>Explanation<a class="headerlink" href="#explanation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-explanation/anatomy"></span><div class="section" id="anatomy-of-a-test">
<span id="test-anatomy"></span><h3>Anatomy of a test<a class="headerlink" href="#anatomy-of-a-test" title="Permalink to this headline">¶</a></h3>
<p>In the simplest terms, a test is meant to look at the result of a particular
behavior, and make sure that result aligns with what you would expect.
Behavior is not something that can be empirically measured, which is why writing
tests can be challenging.</p>
<p>“Behavior” is the way in which some system <strong>acts in response</strong> to a particular
situation and/or stimuli. But exactly <em>how</em> or <em>why</em> something is done is not
quite as important as <em>what</em> was done.</p>
<p>You can think of a test as being broken down into four steps:</p>
<ol class="arabic simple">
<li><p><strong>Arrange</strong></p></li>
<li><p><strong>Act</strong></p></li>
<li><p><strong>Assert</strong></p></li>
<li><p><strong>Cleanup</strong></p></li>
</ol>
<p><strong>Arrange</strong> is where we prepare everything for our test. This means pretty
much everything except for the “<strong>act</strong>”. It’s lining up the dominoes so that
the <strong>act</strong> can do its thing in one, state-changing step. This can mean
preparing objects, starting/killing services, entering records into a database,
or even things like defining a URL to query, generating some credentials for a
user that doesn’t exist yet, or just waiting for some process to finish.</p>
<p><strong>Act</strong> is the singular, state-changing action that kicks off the <strong>behavior</strong>
we want to test. This behavior is what carries out the changing of the state of
the system under test (SUT), and it’s the resulting changed state that we can
look at to make a judgement about the behavior. This typically takes the form of
a function/method call.</p>
<p><strong>Assert</strong> is where we look at that resulting state and check if it looks how
we’d expect after the dust has settled. It’s where we gather evidence to say the
behavior does or does not aligns with what we expect. The <code class="docutils literal notranslate"><span class="pre">assert</span></code> in our test
is where we take that measurement/observation and apply our judgement to it. If
something should be green, we’d say <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">thing</span> <span class="pre">==</span> <span class="pre">&quot;green&quot;</span></code>.</p>
<p><strong>Cleanup</strong> is where the test picks up after itself, so other tests aren’t being
accidentally influenced by it.</p>
<p>At its core, the test is ultimately the <strong>act</strong> and <strong>assert</strong> steps, with the
<strong>arrange</strong> step only providing the context. <strong>Behavior</strong> exists between <strong>act</strong>
and <strong>assert</strong>.</p>
</div>
<span id="document-explanation/fixtures"></span><div class="section" id="about-fixtures">
<span id="id1"></span><h3>About fixtures<a class="headerlink" href="#about-fixtures" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#how-to-fixtures"><span class="std std-ref">How to use fixtures</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="contents.html#reference-fixtures"><span class="std std-ref">Fixtures reference</span></a></p>
</div>
<p>pytest fixtures are designed to be explicit, modular and scalable.</p>
<div class="section" id="what-fixtures-are">
<h4>What fixtures are<a class="headerlink" href="#what-fixtures-are" title="Permalink to this headline">¶</a></h4>
<p>In testing, a <a class="reference external" href="https://en.wikipedia.org/wiki/Test_fixture#Software">fixture</a>
provides a defined, reliable and consistent context for the tests. This could
include environment (for example a database configured with known parameters)
or content (such as a dataset).</p>
<p>Fixtures define the steps and data that constitute the <em>arrange</em> phase of a
test (see <a class="reference internal" href="contents.html#test-anatomy"><span class="std std-ref">Anatomy of a test</span></a>). In pytest, they are functions you define that
serve this purpose. They can also be used to define a test’s <em>act</em> phase; this
is a powerful technique for designing more complex tests.</p>
<p>The services, state, or other operating environments set up by fixtures are
accessed by test functions through arguments. For each fixture used by a test
function there is typically a parameter (named after the fixture) in the test
function’s definition.</p>
<p>We can tell pytest that a particular function is a fixture by decorating it with
<a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code></a>. Here’s a simple example of
what a fixture in pytest might look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">Fruit</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">my_fruit</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;apple&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fruit_basket</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Fruit</span><span class="p">(</span><span class="s2">&quot;banana&quot;</span><span class="p">),</span> <span class="n">my_fruit</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_my_fruit_in_basket</span><span class="p">(</span><span class="n">my_fruit</span><span class="p">,</span> <span class="n">fruit_basket</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">my_fruit</span> <span class="ow">in</span> <span class="n">fruit_basket</span>
</pre></div>
</div>
<p>Tests don’t have to be limited to a single fixture, either. They can depend on
as many fixtures as you want, and fixtures can use other fixtures, as well. This
is where pytest’s fixture system really shines.</p>
</div>
<div class="section" id="improvements-over-xunit-style-setup-teardown-functions">
<h4>Improvements over xUnit-style setup/teardown functions<a class="headerlink" href="#improvements-over-xunit-style-setup-teardown-functions" title="Permalink to this headline">¶</a></h4>
<p>pytest fixtures offer dramatic improvements over the classic xUnit
style of setup/teardown functions:</p>
<ul class="simple">
<li><p>fixtures have explicit names and are activated by declaring their use
from test functions, modules, classes or whole projects.</p></li>
<li><p>fixtures are implemented in a modular manner, as each fixture name
triggers a <em>fixture function</em> which can itself use other fixtures.</p></li>
<li><p>fixture management scales from simple unit to complex
functional testing, allowing to parametrize fixtures and tests according
to configuration and component options, or to re-use fixtures
across function, class, module or whole test session scopes.</p></li>
<li><p>teardown logic can be easily, and safely managed, no matter how many fixtures
are used, without the need to carefully handle errors by hand or micromanage
the order that cleanup steps are added.</p></li>
</ul>
<p>In addition, pytest continues to support <a class="reference internal" href="contents.html#xunitsetup"><span class="std std-ref">How to implement xunit-style set-up</span></a>.  You can mix
both styles, moving incrementally from classic to new style, as you
prefer.  You can also start out from existing <a class="reference internal" href="contents.html#unittest-testcase"><span class="std std-ref">unittest.TestCase
style</span></a> or <a class="reference internal" href="contents.html#nosestyle"><span class="std std-ref">nose based</span></a> projects.</p>
</div>
<div class="section" id="fixture-errors">
<h4>Fixture errors<a class="headerlink" href="#fixture-errors" title="Permalink to this headline">¶</a></h4>
<p>pytest does its best to put all the fixtures for a given test in a linear order
so that it can see which fixture happens first, second, third, and so on. If an
earlier fixture has a problem, though, and raises an exception, pytest will stop
executing fixtures for that test and mark the test as having an error.</p>
<p>When a test is marked as having an error, it doesn’t mean the test failed,
though. It just means the test couldn’t even be attempted because one of the
things it depends on had a problem.</p>
<p>This is one reason why it’s a good idea to cut out as many unnecessary
dependencies as possible for a given test. That way a problem in something
unrelated isn’t causing us to have an incomplete picture of what may or may not
have issues.</p>
<p>Here’s a quick example to help explain:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">order</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">append_first</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">append_second</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">append_first</span><span class="p">):</span>
    <span class="n">order</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">2</span><span class="p">])</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">append_third</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">append_second</span><span class="p">):</span>
    <span class="n">order</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">test_order</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">order</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>If, for whatever reason, <code class="docutils literal notranslate"><span class="pre">order.append(1)</span></code> had a bug and it raises an exception,
we wouldn’t be able to know if <code class="docutils literal notranslate"><span class="pre">order.extend([2])</span></code> or <code class="docutils literal notranslate"><span class="pre">order</span> <span class="pre">+=</span> <span class="pre">[3]</span></code> would
also have problems. After <code class="docutils literal notranslate"><span class="pre">append_first</span></code> throws an exception, pytest won’t run
any more fixtures for <code class="docutils literal notranslate"><span class="pre">test_order</span></code>, and it won’t even try to run
<code class="docutils literal notranslate"><span class="pre">test_order</span></code> itself. The only things that would’ve run would be <code class="docutils literal notranslate"><span class="pre">order</span></code> and
<code class="docutils literal notranslate"><span class="pre">append_first</span></code>.</p>
</div>
<div class="section" id="sharing-test-data">
<h4>Sharing test data<a class="headerlink" href="#sharing-test-data" title="Permalink to this headline">¶</a></h4>
<p>If you want to make test data from files available to your tests, a good way
to do this is by loading these data in a fixture for use by your tests.
This makes use of the automatic caching mechanisms of pytest.</p>
<p>Another good approach is by adding the data files in the <code class="docutils literal notranslate"><span class="pre">tests</span></code> folder.
There are also community plugins available to help to manage this aspect of
testing, e.g. <a class="reference external" href="https://pypi.org/project/pytest-datadir/">pytest-datadir</a> and <a class="reference external" href="https://pypi.org/project/pytest-datafiles/">pytest-datafiles</a>.</p>
</div>
<div class="section" id="a-note-about-fixture-cleanup">
<span id="fixtures-signal-cleanup"></span><h4>A note about fixture cleanup<a class="headerlink" href="#a-note-about-fixture-cleanup" title="Permalink to this headline">¶</a></h4>
<p>pytest does not do any special processing for <a class="reference external" href="https://docs.python.org/3/library/signal.html#signal.SIGTERM" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">SIGTERM</span></code></a> and
<code class="xref py py-data docutils literal notranslate"><span class="pre">SIGQUIT</span></code> signals (<a class="reference external" href="https://docs.python.org/3/library/signal.html#signal.SIGINT" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">SIGINT</span></code></a> is handled naturally
by the Python runtime via <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a>), so fixtures that manage external resources which are important
to be cleared when the Python process is terminated (by those signals) might leak resources.</p>
<p>The reason pytest does not handle those signals to perform fixture cleanup is that signal handlers are global,
and changing them might interfere with the code under execution.</p>
<p>If fixtures in your suite need special care regarding termination in those scenarios,
see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5243#issuecomment-491522595">this comment</a> in the issue
tracker for a possible workaround.</p>
</div>
</div>
<span id="document-explanation/goodpractices"></span><div class="section" id="good-integration-practices">
<span id="goodpractices"></span><h3>Good Integration Practices<a class="headerlink" href="#good-integration-practices" title="Permalink to this headline">¶</a></h3>
<div class="section" id="install-package-with-pip">
<h4>Install package with pip<a class="headerlink" href="#install-package-with-pip" title="Permalink to this headline">¶</a></h4>
<p>For development, we recommend you use <a class="reference external" href="https://docs.python.org/3/library/venv.html#module-venv" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> for virtual environments and
<a class="reference external" href="https://pip.pypa.io/en/stable/" title="(in pip v22.2)"><span>pip</span></a> for installing your application and any dependencies,
as well as the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> package itself.
This ensures your code and dependencies are isolated from your system Python installation.</p>
<p>Next, place a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file in the root of your package:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[build-system]</span><span class="w"></span>
<span class="n">requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;setuptools&gt;=42&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;wheel&quot;</span><span class="p">]</span><span class="w"></span>
<span class="n">build-backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setuptools.build_meta&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>and a <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file containing your package’s metadata with the following minimum content:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[metadata]</span><span class="w"></span>
<span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">PACKAGENAME</span><span class="w"></span>

<span class="k">[options]</span><span class="w"></span>
<span class="na">packages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">find:</span><span class="w"></span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">PACKAGENAME</span></code> is the name of your package.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your pip version is older than <code class="docutils literal notranslate"><span class="pre">21.3</span></code>, you’ll also need a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>You can then install your package in “editable” mode by running from the same directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -e .
</pre></div>
</div>
<p>which lets you change your source code (both tests and application) and rerun tests at will.</p>
</div>
<div class="section" id="conventions-for-python-test-discovery">
<span id="python-test-discovery"></span><span id="test-discovery"></span><h4>Conventions for Python test discovery<a class="headerlink" href="#conventions-for-python-test-discovery" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> implements the following standard test discovery:</p>
<ul class="simple">
<li><p>If no arguments are specified then collection starts from <a class="reference internal" href="contents.html#confval-testpaths"><code class="xref std std-confval docutils literal notranslate"><span class="pre">testpaths</span></code></a>
(if configured) or the current directory. Alternatively, command line arguments
can be used in any combination of directories, file names or node ids.</p></li>
<li><p>Recurse into directories, unless they match <a class="reference internal" href="contents.html#confval-norecursedirs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">norecursedirs</span></code></a>.</p></li>
<li><p>In those directories, search for <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> or <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> files, imported by their <a class="reference internal" href="#test-package-name">test package name</a>.</p></li>
<li><p>From those files, collect test items:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code> prefixed test functions or methods outside of class</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code> prefixed test functions or methods inside <code class="docutils literal notranslate"><span class="pre">Test</span></code> prefixed test classes (without an <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method)</p></li>
</ul>
</li>
</ul>
<p>For examples of how to customize your test discovery <a class="reference internal" href="contents.html#document-example/pythoncollection"><span class="doc">Changing standard (Python) test discovery</span></a>.</p>
<p>Within Python modules, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> also discovers tests using the standard
<a class="reference internal" href="contents.html#unittest-testcase"><span class="std std-ref">unittest.TestCase</span></a> subclassing technique.</p>
</div>
<div class="section" id="choosing-a-test-layout-import-rules">
<h4>Choosing a test layout / import rules<a class="headerlink" href="#choosing-a-test-layout-import-rules" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> supports two common test layouts:</p>
<div class="section" id="tests-outside-application-code">
<h5>Tests outside application code<a class="headerlink" href="#tests-outside-application-code" title="Permalink to this headline">¶</a></h5>
<p>Putting tests into an extra directory outside your actual application code
might be useful if you have many functional tests or for other reasons want
to keep tests separate from actual application code (often a good idea):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pyproject.toml
setup.cfg
mypkg/
    __init__.py
    app.py
    view.py
tests/
    test_app.py
    test_view.py
    ...
</pre></div>
</div>
<p>This has the following benefits:</p>
<ul class="simple">
<li><p>Your tests can run against an installed version after executing <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code>.</p></li>
<li><p>Your tests can run against the local copy with an editable install after executing <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--editable</span> <span class="pre">.</span></code>.</p></li>
<li><p>If you don’t use an editable install and are relying on the fact that Python by default puts the current
directory in <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> to import your package, you can execute <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code> to execute the tests against the
local copy directly, without using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="contents.html#pytest-vs-python-m-pytest"><span class="std std-ref">Invoking pytest versus python -m pytest</span></a> for more information about the difference between calling <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code>.</p>
</div>
<p>Note that this scheme has a drawback if you are using <code class="docutils literal notranslate"><span class="pre">prepend</span></code> <a class="reference internal" href="contents.html#import-modes"><span class="std std-ref">import mode</span></a>
(which is the default): your test files must have <strong>unique names</strong>, because
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> will import them as <em>top-level</em> modules since there are no packages
to derive a full package name from. In other words, the test files in the example above will
be imported as <code class="docutils literal notranslate"><span class="pre">test_app</span></code> and <code class="docutils literal notranslate"><span class="pre">test_view</span></code> top-level modules by adding <code class="docutils literal notranslate"><span class="pre">tests/</span></code> to
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.</p>
<p>If you need to have test modules with the same name, you might add <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files to your
<code class="docutils literal notranslate"><span class="pre">tests</span></code> folder and subfolders, changing them to packages:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pyproject.toml
setup.cfg
mypkg/
    ...
tests/
    __init__.py
    foo/
        __init__.py
        test_view.py
    bar/
        __init__.py
        test_view.py
</pre></div>
</div>
<p>Now pytest will load the modules as <code class="docutils literal notranslate"><span class="pre">tests.foo.test_view</span></code> and <code class="docutils literal notranslate"><span class="pre">tests.bar.test_view</span></code>, allowing
you to have modules with the same name. But now this introduces a subtle problem: in order to load
the test modules from the <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory, pytest prepends the root of the repository to
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, which adds the side-effect that now <code class="docutils literal notranslate"><span class="pre">mypkg</span></code> is also importable.</p>
<p>This is problematic if you are using a tool like <a class="reference internal" href="#tox">tox</a> to test your package in a virtual environment,
because you want to test the <em>installed</em> version of your package, not the local code from the repository.</p>
<p id="src-layout">In this situation, it is <strong>strongly</strong> suggested to use a <code class="docutils literal notranslate"><span class="pre">src</span></code> layout where application root package resides in a
sub-directory of your root:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pyproject.toml
setup.cfg
src/
    mypkg/
        __init__.py
        app.py
        view.py
tests/
    __init__.py
    foo/
        __init__.py
        test_view.py
    bar/
        __init__.py
        test_view.py
</pre></div>
</div>
<p>This layout prevents a lot of common pitfalls and has many benefits, which are better explained in this excellent
<a class="reference external" href="https://blog.ionelmc.ro/2014/05/25/python-packaging/#the-structure">blog post by Ionel Cristian Mărieș</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> option (see <a class="reference internal" href="contents.html#import-modes"><span class="std std-ref">Import modes</span></a>) does not have
any of the drawbacks above because <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> is not changed when importing
test modules, so users that run into this issue are strongly encouraged to try it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">src</span></code> directory layout is still strongly recommended however.</p>
</div>
</div>
<div class="section" id="tests-as-part-of-application-code">
<h5>Tests as part of application code<a class="headerlink" href="#tests-as-part-of-application-code" title="Permalink to this headline">¶</a></h5>
<p>Inlining test directories into your application package
is useful if you have direct relation between tests and application modules and
want to distribute them along with your application:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pyproject.toml
setup.cfg
mypkg/
    __init__.py
    app.py
    view.py
    test/
        __init__.py
        test_app.py
        test_view.py
        ...
</pre></div>
</div>
<p>In this scheme, it is easy to run your tests using the <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs mypkg
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> will discover where <code class="docutils literal notranslate"><span class="pre">mypkg</span></code> is installed and collect tests from there.</p>
<p>Note that this layout also works in conjunction with the <code class="docutils literal notranslate"><span class="pre">src</span></code> layout mentioned in the previous section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use namespace packages (PEP420) for your application
but pytest will still perform <a class="reference internal" href="#test-package-name">test package name</a> discovery based on the
presence of <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files.  If you use one of the
two recommended file system layouts above but leave away the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>
files from your directories, it should just work.  From
“inlined tests”, however, you will need to use absolute imports for
getting at your application code.</p>
</div>
<div class="admonition note" id="test-package-name">
<p class="admonition-title">Note</p>
<p>In <code class="docutils literal notranslate"><span class="pre">prepend</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code> import-modes, if pytest finds a <code class="docutils literal notranslate"><span class="pre">&quot;a/b/test_module.py&quot;</span></code>
test file while recursing into the filesystem it determines the import name
as follows:</p>
<ul class="simple">
<li><p>determine <code class="docutils literal notranslate"><span class="pre">basedir</span></code>: this is the first “upward” (towards the root)
directory not containing an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>.  If e.g. both <code class="docutils literal notranslate"><span class="pre">a</span></code>
and <code class="docutils literal notranslate"><span class="pre">b</span></code> contain an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file then the parent directory
of <code class="docutils literal notranslate"><span class="pre">a</span></code> will become the <code class="docutils literal notranslate"><span class="pre">basedir</span></code>.</p></li>
<li><p>perform <code class="docutils literal notranslate"><span class="pre">sys.path.insert(0,</span> <span class="pre">basedir)</span></code> to make the test module
importable under the fully qualified import name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">a.b.test_module</span></code> where the path is determined
by converting path separators <code class="docutils literal notranslate"><span class="pre">/</span></code> into “.” characters.  This means
you must follow the convention of having directory and file
names map directly to the import names.</p></li>
</ul>
<p>The reason for this somewhat evolved importing technique is
that in larger projects multiple test modules might import
from each other and thus deriving a canonical import name helps
to avoid surprises such as a test module getting imported twice.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> things are less convoluted because
pytest doesn’t need to change <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> or <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>, making things
much less surprising.</p>
</div>
</div>
</div>
<div class="section" id="tox">
<span id="use-tox"></span><h4>tox<a class="headerlink" href="#tox" title="Permalink to this headline">¶</a></h4>
<p>Once you are done with your work and want to make sure that your actual
package passes all tests you may want to look into <a class="reference external" href="https://tox.wiki/en/stable/index.html" title="(in tox v3.25)"><span class="xref std std-doc">tox</span></a>, the
virtualenv test automation tool and its <a class="reference external" href="https://tox.wiki/en/stable/example/pytest.html" title="(in tox v3.25)"><span class="xref std std-doc">pytest support</span></a>.
tox helps you to setup virtualenv environments with pre-defined
dependencies and then executing a pre-configured test command with
options.  It will run tests against the installed package and not
against your source code checkout, helping to detect packaging
glitches.</p>
</div>
<div class="section" id="do-not-run-via-setuptools">
<h4>Do not run via setuptools<a class="headerlink" href="#do-not-run-via-setuptools" title="Permalink to this headline">¶</a></h4>
<p>Integration with setuptools is <strong>not recommended</strong>,
i.e. you should not be using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest-runner</span></code>,
and may stop working in the future.</p>
<p>This is deprecated since it depends on deprecated features of setuptools
and relies on features that break security mechanisms in pip.
For example ‘setup_requires’ and ‘tests_require’ bypass <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">--require-hashes</span></code>.
For more information and migration instructions,
see the <a class="reference external" href="https://github.com/pytest-dev/pytest-runner#deprecation-notice">pytest-runner notice</a>.
See also <a class="reference external" href="https://github.com/pypa/setuptools/issues/1684">pypa/setuptools#1684</a>.</p>
<p>setuptools intends to
<a class="reference external" href="https://github.com/pypa/setuptools/issues/931">remove the test command</a>.</p>
</div>
</div>
<span id="document-explanation/flaky"></span><div class="section" id="flaky-tests">
<h3>Flaky tests<a class="headerlink" href="#flaky-tests" title="Permalink to this headline">¶</a></h3>
<p>A “flaky” test is one that exhibits intermittent or sporadic failure, that seems to have non-deterministic behaviour. Sometimes it passes, sometimes it fails, and it’s not clear why. This page discusses pytest features that can help and other general strategies for identifying, fixing or mitigating them.</p>
<div class="section" id="why-flaky-tests-are-a-problem">
<h4>Why flaky tests are a problem<a class="headerlink" href="#why-flaky-tests-are-a-problem" title="Permalink to this headline">¶</a></h4>
<p>Flaky tests are particularly troublesome when a continuous integration (CI) server is being used, so that all tests must pass before a new code change can be merged. If the test result is not a reliable signal – that a test failure means the code change broke the test – developers can become mistrustful of the test results, which can lead to overlooking genuine failures. It is also a source of wasted time as developers must re-run test suites and investigate spurious failures.</p>
</div>
<div class="section" id="potential-root-causes">
<h4>Potential root causes<a class="headerlink" href="#potential-root-causes" title="Permalink to this headline">¶</a></h4>
<div class="section" id="system-state">
<h5>System state<a class="headerlink" href="#system-state" title="Permalink to this headline">¶</a></h5>
<p>Broadly speaking, a flaky test indicates that the test relies on some system state that is not being appropriately controlled - the test environment is not sufficiently isolated. Higher level tests are more likely to be flaky as they rely on more state.</p>
<p>Flaky tests sometimes appear when a test suite is run in parallel (such as use of pytest-xdist). This can indicate a test is reliant on test ordering.</p>
<ul class="simple">
<li><p>Perhaps a different test is failing to clean up after itself and leaving behind data which causes the flaky test to fail.</p></li>
<li><p>The flaky test is reliant on data from a previous test that doesn’t clean up after itself, and in parallel runs that previous test is not always present</p></li>
<li><p>Tests that modify global state typically cannot be run in parallel.</p></li>
</ul>
</div>
<div class="section" id="overly-strict-assertion">
<h5>Overly strict assertion<a class="headerlink" href="#overly-strict-assertion" title="Permalink to this headline">¶</a></h5>
<p>Overly strict assertions can cause problems with floating point comparison as well as timing issues. <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> is useful here.</p>
</div>
</div>
<div class="section" id="pytest-features">
<h4>Pytest features<a class="headerlink" href="#pytest-features" title="Permalink to this headline">¶</a></h4>
<div class="section" id="xfail-strict">
<h5>Xfail strict<a class="headerlink" href="#xfail-strict" title="Permalink to this headline">¶</a></h5>
<p><a class="reference internal" href="contents.html#pytest-mark-xfail-ref"><span class="std std-ref">pytest.mark.xfail</span></a> with <code class="docutils literal notranslate"><span class="pre">strict=False</span></code> can be used to mark a test so that its failure does not cause the whole build to break. This could be considered like a manual quarantine, and is rather dangerous to use permanently.</p>
</div>
<div class="section" id="pytest-current-test">
<h5>PYTEST_CURRENT_TEST<a class="headerlink" href="#pytest-current-test" title="Permalink to this headline">¶</a></h5>
<p><span class="target" id="index-0"></span><a class="reference internal" href="contents.html#envvar-PYTEST_CURRENT_TEST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code></a> may be useful for figuring out “which test got stuck”.
See <a class="reference internal" href="contents.html#pytest-current-test-env"><span class="std std-ref">PYTEST_CURRENT_TEST environment variable</span></a> for more details.</p>
</div>
<div class="section" id="plugins">
<h5>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h5>
<p>Rerunning any failed tests can mitigate the negative effects of flaky tests by giving them additional chances to pass, so that the overall build does not fail. Several pytest plugins support this:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/box/flaky">flaky</a></p></li>
<li><p><a class="reference external" href="https://github.com/dropbox/pytest-flakefinder">pytest-flakefinder</a> - <a class="reference external" href="https://blogs.dropbox.com/tech/2016/03/open-sourcing-pytest-tools/">blog post</a></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest-rerunfailures">pytest-rerunfailures</a></p></li>
<li><p><a class="reference external" href="https://github.com/ESSS/pytest-replay">pytest-replay</a>: This plugin helps to reproduce locally crashes or flaky tests observed during CI runs.</p></li>
</ul>
<p>Plugins to deliberately randomize tests can help expose tests with state problems:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/jbasko/pytest-random-order">pytest-random-order</a></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest-randomly">pytest-randomly</a></p></li>
</ul>
</div>
</div>
<div class="section" id="other-general-strategies">
<h4>Other general strategies<a class="headerlink" href="#other-general-strategies" title="Permalink to this headline">¶</a></h4>
<div class="section" id="split-up-test-suites">
<h5>Split up test suites<a class="headerlink" href="#split-up-test-suites" title="Permalink to this headline">¶</a></h5>
<p>It can be common to split a single test suite into two, such as unit vs integration, and only use the unit test suite as a CI gate. This also helps keep build times manageable as high level tests tend to be slower. However, it means it does become possible for code that breaks the build to be merged, so extra vigilance is needed for monitoring the integration test results.</p>
</div>
<div class="section" id="video-screenshot-on-failure">
<h5>Video/screenshot on failure<a class="headerlink" href="#video-screenshot-on-failure" title="Permalink to this headline">¶</a></h5>
<p>For UI tests these are important for understanding what the state of the UI was when the test failed. pytest-splinter can be used with plugins like pytest-bdd and can <a class="reference external" href="https://pytest-splinter.readthedocs.io/en/latest/#automatic-screenshots-on-test-failure">save a screenshot on test failure</a>, which can help to isolate the cause.</p>
</div>
<div class="section" id="delete-or-rewrite-the-test">
<h5>Delete or rewrite the test<a class="headerlink" href="#delete-or-rewrite-the-test" title="Permalink to this headline">¶</a></h5>
<p>If the functionality is covered by other tests, perhaps the test can be removed. If not, perhaps it can be rewritten at a lower level which will remove the flakiness or make its source more apparent.</p>
</div>
<div class="section" id="quarantine">
<h5>Quarantine<a class="headerlink" href="#quarantine" title="Permalink to this headline">¶</a></h5>
<p>Mark Lapierre discusses the <a class="reference external" href="https://dev.to/mlapierre/pros-and-cons-of-quarantined-tests-2emj">Pros and Cons of Quarantined Tests</a> in a post from 2018.</p>
</div>
<div class="section" id="ci-tools-that-rerun-on-failure">
<h5>CI tools that rerun on failure<a class="headerlink" href="#ci-tools-that-rerun-on-failure" title="Permalink to this headline">¶</a></h5>
<p>Azure Pipelines (the Azure cloud CI/CD tool, formerly Visual Studio Team Services or VSTS) has a feature to <a class="reference external" href="https://docs.microsoft.com/en-us/azure/devops/release-notes/2017/dec-11-vsts#identify-flaky-tests">identify flaky tests</a> and rerun failed tests.</p>
</div>
</div>
<div class="section" id="research">
<h4>Research<a class="headerlink" href="#research" title="Permalink to this headline">¶</a></h4>
<p>This is a limited list, please submit an issue or pull request to expand it!</p>
<ul class="simple">
<li><p>Gao, Zebao, Yalan Liang, Myra B. Cohen, Atif M. Memon, and Zhen Wang. “Making system user interactive tests repeatable: When and what should we control?.” In <em>Software Engineering (ICSE), 2015 IEEE/ACM 37th IEEE International Conference on</em>, vol. 1, pp. 55-65. IEEE, 2015.  <a class="reference external" href="http://www.cs.umd.edu/~atif/pubs/gao-icse15.pdf">PDF</a></p></li>
<li><p>Palomba, Fabio, and Andy Zaidman. “Does refactoring of test smells induce fixing flaky tests?.” In <em>Software Maintenance and Evolution (ICSME), 2017 IEEE International Conference on</em>, pp. 1-12. IEEE, 2017. <a class="reference external" href="https://drive.google.com/file/d/10HdcCQiuQVgW3yYUJD-TSTq1NbYEprl0/view">PDF in Google Drive</a></p></li>
<li><p>Bell, Jonathan, Owolabi Legunsen, Michael Hilton, Lamyaa Eloussi, Tifany Yung, and Darko Marinov. “DeFlaker: Automatically detecting flaky tests.” In <em>Proceedings of the 2018 International Conference on Software Engineering</em>. 2018. <a class="reference external" href="https://www.jonbell.net/icse18-deflaker.pdf">PDF</a></p></li>
</ul>
</div>
<div class="section" id="resources">
<h4>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://martinfowler.com/articles/nonDeterminism.html">Eradicating Non-Determinism in Tests</a> by Martin Fowler, 2011</p></li>
<li><p><a class="reference external" href="https://www.thoughtworks.com/insights/blog/no-more-flaky-tests-go-team">No more flaky tests on the Go team</a> by Pavan Sudarshan, 2012</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/embed/VotJqV4n8ig">The Build That Cried Broken: Building Trust in your Continuous Integration Tests</a> talk (video) by <a class="reference external" href="https://angiejones.tech/">Angie Jones</a> at SeleniumConf Austin 2017</p></li>
<li><p><a class="reference external" href="https://testandcode.com/50">Test and Code Podcast: Flaky Tests and How to Deal with Them</a> by Brian Okken and Anthony Shaw, 2018</p></li>
<li><p>Microsoft:</p>
<ul>
<li><p><a class="reference external" href="https://blogs.msdn.microsoft.com/bharry/2017/06/28/testing-in-a-cloud-delivery-cadence/">How we approach testing VSTS to enable continuous delivery</a> by Brian Harry MS, 2017</p></li>
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/devops/learn/devops-at-microsoft/eliminating-flaky-tests">Eliminating Flaky Tests</a> blog and talk (video) by Munil Shah, 2017</p></li>
</ul>
</li>
<li><p>Google:</p>
<ul>
<li><p><a class="reference external" href="https://testing.googleblog.com/2016/05/flaky-tests-at-google-and-how-we.html">Flaky Tests at Google and How We Mitigate Them</a> by John Micco, 2016</p></li>
<li><p><a class="reference external" href="https://testing.googleblog.com/2017/04/where-do-our-flaky-tests-come-from.html">Where do Google’s flaky tests come from?</a>  by Jeff Listfield, 2017</p></li>
</ul>
</li>
</ul>
</div>
</div>
<span id="document-explanation/pythonpath"></span><div class="section" id="pytest-import-mechanisms-and-sys-path-pythonpath">
<span id="pythonpath"></span><h3>pytest import mechanisms and <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>/<code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code><a class="headerlink" href="#pytest-import-mechanisms-and-sys-path-pythonpath" title="Permalink to this headline">¶</a></h3>
<div class="section" id="import-modes">
<span id="id1"></span><h4>Import modes<a class="headerlink" href="#import-modes" title="Permalink to this headline">¶</a></h4>
<p>pytest as a testing framework needs to import test modules and <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files for execution.</p>
<p>Importing files in Python (at least until recently) is a non-trivial processes, often requiring
changing <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>. Some aspects of the
import process can be controlled through the <code class="docutils literal notranslate"><span class="pre">--import-mode</span></code> command-line flag, which can assume
these values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">prepend</span></code> (default): the directory path containing each module will be inserted into the <em>beginning</em>
of <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> if not already there, and then imported with the <a class="reference external" href="https://docs.python.org/3/library/functions.html#import__" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__</span></code></a> builtin.</p>
<p>This requires test module names to be unique when the test directory tree is not arranged in
packages, because the modules will put in <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.modules" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.modules</span></code></a> after importing.</p>
<p>This is the classic mechanism, dating back from the time Python 2 was still supported.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">append</span></code>: the directory containing each module is appended to the end of <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> if not already
there, and imported with <code class="docutils literal notranslate"><span class="pre">__import__</span></code>.</p>
<p>This better allows to run test modules against installed versions of a package even if the
package under test has the same import root. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">testing</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">testing</span><span class="o">/</span><span class="n">test_pkg_under_test</span><span class="o">.</span><span class="n">py</span>
<span class="n">pkg_under_test</span><span class="o">/</span>
</pre></div>
</div>
<p>the tests will run against the installed version
of <code class="docutils literal notranslate"><span class="pre">pkg_under_test</span></code> when <code class="docutils literal notranslate"><span class="pre">--import-mode=append</span></code> is used whereas
with <code class="docutils literal notranslate"><span class="pre">prepend</span></code> they would pick up the local version. This kind of confusion is why
we advocate for using <a class="reference internal" href="contents.html#src-layout"><span class="std std-ref">src</span></a> layouts.</p>
<p>Same as <code class="docutils literal notranslate"><span class="pre">prepend</span></code>, requires test module names to be unique when the test directory tree is
not arranged in packages, because the modules will put in <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.modules" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.modules</span></code></a> after importing.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">importlib</span></code>: new in pytest-6.0, this mode uses <a class="reference external" href="https://docs.python.org/3/library/importlib.html#module-importlib" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> to import test modules. This gives full control over the import process, and doesn’t require changing <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>.</p>
<p>For this reason this doesn’t require test module names to be unique.</p>
<p>One drawback however is that test modules are non-importable by each other. Also,  utility
modules in the tests directories are not automatically importable because the tests directory is no longer
added to <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>.</p>
<p>Initially we intended to make <code class="docutils literal notranslate"><span class="pre">importlib</span></code> the default in future releases, however it is clear now that
it has its own set of drawbacks so the default will remain <code class="docutils literal notranslate"><span class="pre">prepend</span></code> for the foreseeable future.</p>
</li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="contents.html#confval-pythonpath"><code class="xref std std-confval docutils literal notranslate"><span class="pre">pythonpath</span></code></a> configuration variable.</p>
</div>
</div>
<div class="section" id="prepend-and-append-import-modes-scenarios">
<h4><code class="docutils literal notranslate"><span class="pre">prepend</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code> import modes scenarios<a class="headerlink" href="#prepend-and-append-import-modes-scenarios" title="Permalink to this headline">¶</a></h4>
<p>Here’s a list of scenarios when using <code class="docutils literal notranslate"><span class="pre">prepend</span></code> or <code class="docutils literal notranslate"><span class="pre">append</span></code> import modes where pytest needs to
change <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> in order to import test modules or <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files, and the issues users
might encounter because of that.</p>
<div class="section" id="test-modules-conftest-py-files-inside-packages">
<h5>Test modules / <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files inside packages<a class="headerlink" href="#test-modules-conftest-py-files-inside-packages" title="Permalink to this headline">¶</a></h5>
<p>Consider this file and directory layout:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">/</span>
<span class="o">|-</span> <span class="n">foo</span><span class="o">/</span>
   <span class="o">|-</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
   <span class="o">|-</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
   <span class="o">|-</span> <span class="n">bar</span><span class="o">/</span>
      <span class="o">|-</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
      <span class="o">|-</span> <span class="n">tests</span><span class="o">/</span>
         <span class="o">|-</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="o">|-</span> <span class="n">test_foo</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>When executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest root/
</pre></div>
</div>
<p>pytest will find <code class="docutils literal notranslate"><span class="pre">foo/bar/tests/test_foo.py</span></code> and realize it is part of a package given that
there’s an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file in the same folder. It will then search upwards until it can find the
last folder which still contains an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file in order to find the package <em>root</em> (in
this case <code class="docutils literal notranslate"><span class="pre">foo/</span></code>). To load the module, it will insert <code class="docutils literal notranslate"><span class="pre">root/</span></code>  to the front of
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> (if not there already) in order to load
<code class="docutils literal notranslate"><span class="pre">test_foo.py</span></code> as the <em>module</em> <code class="docutils literal notranslate"><span class="pre">foo.bar.tests.test_foo</span></code>.</p>
<p>The same logic applies to the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file: it will be imported as <code class="docutils literal notranslate"><span class="pre">foo.conftest</span></code> module.</p>
<p>Preserving the full package name is important when tests live in a package to avoid problems
and allow test modules to have duplicated names. This is also discussed in details in
<a class="reference internal" href="contents.html#test-discovery"><span class="std std-ref">Conventions for Python test discovery</span></a>.</p>
</div>
<div class="section" id="standalone-test-modules-conftest-py-files">
<h5>Standalone test modules / <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files<a class="headerlink" href="#standalone-test-modules-conftest-py-files" title="Permalink to this headline">¶</a></h5>
<p>Consider this file and directory layout:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="o">/</span>
<span class="o">|-</span> <span class="n">foo</span><span class="o">/</span>
   <span class="o">|-</span> <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>
   <span class="o">|-</span> <span class="n">bar</span><span class="o">/</span>
      <span class="o">|-</span> <span class="n">tests</span><span class="o">/</span>
         <span class="o">|-</span> <span class="n">test_foo</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>When executing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest root/
</pre></div>
</div>
<p>pytest will find <code class="docutils literal notranslate"><span class="pre">foo/bar/tests/test_foo.py</span></code> and realize it is NOT part of a package given that
there’s no <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file in the same folder. It will then add <code class="docutils literal notranslate"><span class="pre">root/foo/bar/tests</span></code> to
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> in order to import <code class="docutils literal notranslate"><span class="pre">test_foo.py</span></code> as the <em>module</em> <code class="docutils literal notranslate"><span class="pre">test_foo</span></code>. The same is done
with the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file by adding <code class="docutils literal notranslate"><span class="pre">root/foo</span></code> to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> to import it as <code class="docutils literal notranslate"><span class="pre">conftest</span></code>.</p>
<p>For this reason this layout cannot have test modules with the same name, as they all will be
imported in the global import namespace.</p>
<p>This is also discussed in details in <a class="reference internal" href="contents.html#test-discovery"><span class="std std-ref">Conventions for Python test discovery</span></a>.</p>
</div>
</div>
<div class="section" id="invoking-pytest-versus-python-m-pytest">
<span id="pytest-vs-python-m-pytest"></span><h4>Invoking <code class="docutils literal notranslate"><span class="pre">pytest</span></code> versus <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code><a class="headerlink" href="#invoking-pytest-versus-python-m-pytest" title="Permalink to this headline">¶</a></h4>
<p>Running pytest with <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">[...]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span> <span class="pre">[...]</span></code> yields nearly
equivalent behaviour, except that the latter will add the current directory to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, which
is standard <code class="docutils literal notranslate"><span class="pre">python</span></code> behavior.</p>
<p>See also <a class="reference internal" href="contents.html#invoke-python"><span class="std std-ref">Calling pytest through python -m pytest</span></a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="further-topics">
<h2>Further topics<a class="headerlink" href="#further-topics" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-example/index"></span><div class="section" id="examples-and-customization-tricks">
<span id="examples"></span><h3>Examples and customization tricks<a class="headerlink" href="#examples-and-customization-tricks" title="Permalink to this headline">¶</a></h3>
<p>Here is a (growing) list of examples. <a class="reference internal" href="contents.html#contact"><span class="std std-ref">Contact</span></a> us if you
need more examples or have questions. Also take a look at the
<a class="reference internal" href="contents.html#toc"><span class="std std-ref">comprehensive documentation</span></a> which contains many example
snippets as well.  Also, <a class="reference external" href="http://stackoverflow.com/search?q=pytest">pytest on stackoverflow.com</a> often comes with example
answers.</p>
<p>For basic examples, see</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#get-started"><span class="std std-ref">Get Started</span></a> for basic introductory examples</p></li>
<li><p><a class="reference internal" href="contents.html#assert"><span class="std std-ref">How to write and report assertions in tests</span></a> for basic assertion examples</p></li>
<li><p><a class="reference internal" href="contents.html#fixtures"><span class="std std-ref">Fixtures</span></a> for basic fixture/setup examples</p></li>
<li><p><a class="reference internal" href="contents.html#parametrize"><span class="std std-ref">How to parametrize fixtures and test functions</span></a> for basic test function parametrization</p></li>
<li><p><a class="reference internal" href="contents.html#unittest"><span class="std std-ref">How to use unittest-based tests with pytest</span></a> for basic unittest integration</p></li>
<li><p><a class="reference internal" href="contents.html#noseintegration"><span class="std std-ref">How to run tests written for nose</span></a> for basic nosetests integration</p></li>
</ul>
<p>The following examples aim at various use cases you might encounter.</p>
<div class="toctree-wrapper compound">
<span id="document-example/reportingdemo"></span><div class="section" id="demo-of-python-failure-reports-with-pytest">
<span id="tbreportdemo"></span><h4>Demo of Python failure reports with pytest<a class="headerlink" href="#demo-of-python-failure-reports-with-pytest" title="Permalink to this headline">¶</a></h4>
<p>Here is a nice run of several failures and how <code class="docutils literal notranslate"><span class="pre">pytest</span></code> presents things:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>assertion $ pytest failure_demo.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project/assertion
collected 44 items

failure_demo.py <span class=" -Color -Color-Red">FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span>         <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ test_generative[3-6] ___________________________</span>

param1 = 3, param2 = 6

    @pytest.mark.parametrize(&quot;param1, param2&quot;, [(3, 6)])
    def test_generative(param1, param2):
&gt;       assert param1 * 2 &lt; param2
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert (3 * 2) &lt; 6</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:19: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________ TestFailing.test_simple __________________________</span>

self = &lt;failure_demo.TestFailing object at 0xdeadbeef0001&gt;

    def test_simple(self):
        def f():
            return 42

        def g():
            return 43

&gt;       assert f() == g()
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 42 == 43</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 42 = &lt;function TestFailing.test_simple.&lt;locals&gt;.f at 0xdeadbeef0002&gt;()</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  and   43 = &lt;function TestFailing.test_simple.&lt;locals&gt;.g at 0xdeadbeef0003&gt;()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:30: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestFailing.test_simple_multiline _____________________</span>

self = &lt;failure_demo.TestFailing object at 0xdeadbeef0004&gt;

    def test_simple_multiline(self):
&gt;       otherfunc_multi(42, 6 * 9)

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:33:
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>

a = 42, b = 54

    def otherfunc_multi(a, b):
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 42 == 54</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:14: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________________ TestFailing.test_not ___________________________</span>

self = &lt;failure_demo.TestFailing object at 0xdeadbeef0005&gt;

    def test_not(self):
        def f():
            return 42

&gt;       assert not f()
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert not 42</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 42 = &lt;function TestFailing.test_not.&lt;locals&gt;.f at 0xdeadbeef0006&gt;()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:39: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________ TestSpecialisedExplanations.test_eq_text _________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0007&gt;

    def test_eq_text(self):
&gt;       assert &quot;spam&quot; == &quot;eggs&quot;
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;spam&#39; == &#39;eggs&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         - eggs</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         + spam</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:44: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________ TestSpecialisedExplanations.test_eq_similar_text _____________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0008&gt;

    def test_eq_similar_text(self):
&gt;       assert &quot;foo 1 bar&quot; == &quot;foo 2 bar&quot;
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;foo 1 bar&#39; == &#39;foo 2 bar&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         - foo 2 bar</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?     ^</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         + foo 1 bar</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?     ^</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:47: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________ TestSpecialisedExplanations.test_eq_multiline_text ____________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0009&gt;

    def test_eq_multiline_text(self):
&gt;       assert &quot;foo\nspam\nbar&quot; == &quot;foo\neggs\nbar&quot;
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;foo\nspam\nbar&#39; == &#39;foo\neggs\nbar&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           foo</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         - eggs</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         + spam</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           bar</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:50: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________ TestSpecialisedExplanations.test_eq_long_text _______________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000a&gt;

    def test_eq_long_text(self):
        a = &quot;1&quot; * 100 + &quot;a&quot; + &quot;2&quot; * 100
        b = &quot;1&quot; * 100 + &quot;b&quot; + &quot;2&quot; * 100
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;111111111111...2222222222222&#39; == &#39;111111111111...2222222222222&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Skipping 90 identical leading characters in diff, use -v to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Skipping 91 identical trailing characters in diff, use -v to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         - 1111111111b222222222</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?           ^</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         + 1111111111a222222222</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?           ^</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:55: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________ TestSpecialisedExplanations.test_eq_long_text_multiline __________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000b&gt;

    def test_eq_long_text_multiline(self):
        a = &quot;1\n&quot; * 100 + &quot;a&quot; + &quot;2\n&quot; * 100
        b = &quot;1\n&quot; * 100 + &quot;b&quot; + &quot;2\n&quot; * 100
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;1\n1\n1\n1\n...n2\n2\n2\n2\n&#39; == &#39;1\n1\n1\n1\n...n2\n2\n2\n2\n&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Skipping 190 identical leading characters in diff, use -v to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Skipping 191 identical trailing characters in diff, use -v to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           1</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           1</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           1</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           1</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           1...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (7 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:60: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________ TestSpecialisedExplanations.test_eq_list _________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000c&gt;

    def test_eq_list(self):
&gt;       assert [0, 1, 2] == [0, 1, 3]
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert [0, 1, 2] == [0, 1, 3]</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         At index 2 diff: 2 != 3</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Use -v to get more diff</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:63: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________ TestSpecialisedExplanations.test_eq_list_long _______________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000d&gt;

    def test_eq_list_long(self):
        a = [0] * 100 + [1] + [3] * 100
        b = [0] * 100 + [2] + [3] * 100
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert [0, 0, 0, 0, 0, 0, ...] == [0, 0, 0, 0, 0, 0, ...]</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         At index 100 diff: 1 != 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Use -v to get more diff</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:68: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________ TestSpecialisedExplanations.test_eq_dict _________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000e&gt;

    def test_eq_dict(self):
&gt;       assert {&quot;a&quot;: 0, &quot;b&quot;: 1, &quot;c&quot;: 0} == {&quot;a&quot;: 0, &quot;b&quot;: 2, &quot;d&quot;: 0}
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert {&#39;a&#39;: 0, &#39;b&#39;: 1, &#39;c&#39;: 0} == {&#39;a&#39;: 0, &#39;b&#39;: 2, &#39;d&#39;: 0}</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Omitting 1 identical items, use -vv to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Differing items:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         {&#39;b&#39;: 1} != {&#39;b&#39;: 2}</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Left contains 1 more item:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         {&#39;c&#39;: 0}</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Right contains 1 more item:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         {&#39;d&#39;: 0}...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (2 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:71: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________ TestSpecialisedExplanations.test_eq_set __________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef000f&gt;

    def test_eq_set(self):
&gt;       assert {0, 10, 11, 12} == {0, 20, 21}
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert {0, 10, 11, 12} == {0, 20, 21}</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Extra items in the left set:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         10</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         11</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         12</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Extra items in the right set:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         20</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         21...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (2 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:74: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________ TestSpecialisedExplanations.test_eq_longer_list ______________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0010&gt;

    def test_eq_longer_list(self):
&gt;       assert [1, 2] == [1, 2, 3]
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert [1, 2] == [1, 2, 3]</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Right contains one more item: 3</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Use -v to get more diff</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:77: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________ TestSpecialisedExplanations.test_in_list _________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0011&gt;

    def test_in_list(self):
&gt;       assert 1 in [0, 2, 3, 4, 5]
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 in [0, 2, 3, 4, 5]</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:80: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">__________ TestSpecialisedExplanations.test_not_in_text_multiline __________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0012&gt;

    def test_not_in_text_multiline(self):
        text = &quot;some multiline\ntext\nwhich\nincludes foo\nand a\ntail&quot;
&gt;       assert &quot;foo&quot; not in text
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;foo&#39; not in &#39;some multil...nand a\ntail&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;foo&#39; is contained here:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           some multiline</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           text</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           which</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           includes foo</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?          +++</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           and a...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (2 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:84: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________ TestSpecialisedExplanations.test_not_in_text_single ____________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0013&gt;

    def test_not_in_text_single(self):
        text = &quot;single foo line&quot;
&gt;       assert &quot;foo&quot; not in text
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;foo&#39; not in &#39;single foo line&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;foo&#39; is contained here:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           single foo line</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?        +++</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:88: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________ TestSpecialisedExplanations.test_not_in_text_single_long _________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0014&gt;

    def test_not_in_text_single_long(self):
        text = &quot;head &quot; * 50 + &quot;foo &quot; + &quot;tail &quot; * 20
&gt;       assert &quot;foo&quot; not in text
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;foo&#39; not in &#39;head head h...l tail tail &#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;foo&#39; is contained here:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           head head foo tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?           +++</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:92: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">______ TestSpecialisedExplanations.test_not_in_text_single_long_term _______</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0015&gt;

    def test_not_in_text_single_long_term(self):
        text = &quot;head &quot; * 50 + &quot;f&quot; * 70 + &quot;tail &quot; * 20
&gt;       assert &quot;f&quot; * 70 not in text
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert &#39;fffffffffff...ffffffffffff&#39; not in &#39;head head h...l tail tail &#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         &#39;ffffffffffffffffff...fffffffffffffffffff&#39; is contained here:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           head head fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffftail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail tail</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ?           ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:96: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________ TestSpecialisedExplanations.test_eq_dataclass _______________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0016&gt;

    def test_eq_dataclass(self):
        from dataclasses import dataclass

        @dataclass
        class Foo:
            a: int
            b: str

        left = Foo(1, &quot;b&quot;)
        right = Foo(1, &quot;c&quot;)
&gt;       assert left == right
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert TestSpecialis...oo(a=1, b=&#39;b&#39;) == TestSpecialis...oo(a=1, b=&#39;c&#39;)</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Omitting 1 identical items, use -vv to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Differing attributes:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         [&#39;b&#39;]</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Drill down into differing attribute b:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           b: &#39;b&#39; != &#39;c&#39;...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (3 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:108: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________ TestSpecialisedExplanations.test_eq_attrs _________________</span>

self = &lt;failure_demo.TestSpecialisedExplanations object at 0xdeadbeef0017&gt;

    def test_eq_attrs(self):
        import attr

        @attr.s
        class Foo:
            a = attr.ib()
            b = attr.ib()

        left = Foo(1, &quot;b&quot;)
        right = Foo(1, &quot;c&quot;)
&gt;       assert left == right
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert Foo(a=1, b=&#39;b&#39;) == Foo(a=1, b=&#39;c&#39;)</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Omitting 1 identical items, use -vv to show</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Differing attributes:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         [&#39;b&#39;]</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         Drill down into differing attribute b:</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           b: &#39;b&#39; != &#39;c&#39;...</span>
E
<span class=" -Color -Color-Bold -Color-Bold-Red">E         ...Full output truncated (3 lines hidden), use &#39;-vv&#39; to show</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:120: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_attribute ______________________________</span>

    def test_attribute():
        class Foo:
            b = 1

        i = Foo()
&gt;       assert i.b == 2
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = &lt;failure_demo.test_attribute.&lt;locals&gt;.Foo object at 0xdeadbeef0018&gt;.b</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:128: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________ test_attribute_instance __________________________</span>

    def test_attribute_instance():
        class Foo:
            b = 1

&gt;       assert Foo().b == 2
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = &lt;failure_demo.test_attribute_instance.&lt;locals&gt;.Foo object at 0xdeadbeef0019&gt;.b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;failure_demo.test_attribute_instance.&lt;locals&gt;.Foo object at 0xdeadbeef0019&gt; = &lt;class &#39;failure_demo.test_attribute_instance.&lt;locals&gt;.Foo&#39;&gt;()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:135: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ test_attribute_failure __________________________</span>

    def test_attribute_failure():
        class Foo:
            def _get_b(self):
                raise Exception(&quot;Failed to get attrib&quot;)

            b = property(_get_b)

        i = Foo()
&gt;       assert i.b == 2

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:146:
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>

self = &lt;failure_demo.test_attribute_failure.&lt;locals&gt;.Foo object at 0xdeadbeef001a&gt;

    def _get_b(self):
&gt;       raise Exception(&quot;Failed to get attrib&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       Exception: Failed to get attrib</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:141: Exception
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________ test_attribute_multiple __________________________</span>

    def test_attribute_multiple():
        class Foo:
            b = 1

        class Bar:
            b = 2

&gt;       assert Foo().b == Bar().b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = &lt;failure_demo.test_attribute_multiple.&lt;locals&gt;.Foo object at 0xdeadbeef001b&gt;.b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;failure_demo.test_attribute_multiple.&lt;locals&gt;.Foo object at 0xdeadbeef001b&gt; = &lt;class &#39;failure_demo.test_attribute_multiple.&lt;locals&gt;.Foo&#39;&gt;()</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  and   2 = &lt;failure_demo.test_attribute_multiple.&lt;locals&gt;.Bar object at 0xdeadbeef001c&gt;.b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;failure_demo.test_attribute_multiple.&lt;locals&gt;.Bar object at 0xdeadbeef001c&gt; = &lt;class &#39;failure_demo.test_attribute_multiple.&lt;locals&gt;.Bar&#39;&gt;()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:156: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ TestRaises.test_raises __________________________</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef001d&gt;

    def test_raises(self):
        s = &quot;qwe&quot;
&gt;       raises(TypeError, int, s)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       ValueError: invalid literal for int() with base 10: &#39;qwe&#39;</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:166: ValueError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________ TestRaises.test_raises_doesnt _______________________</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef001e&gt;

    def test_raises_doesnt(self):
&gt;       raises(OSError, int, &quot;3&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       Failed: DID NOT RAISE &lt;class &#39;OSError&#39;&gt;</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:169: Failed
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ TestRaises.test_raise ___________________________</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef001f&gt;

    def test_raise(self):
&gt;       raise ValueError(&quot;demo error&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       ValueError: demo error</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:172: ValueError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ TestRaises.test_tupleerror ________________________</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef0020&gt;

    def test_tupleerror(self):
&gt;       a, b = [1]  # NOQA
<span class=" -Color -Color-Bold -Color-Bold-Red">E       ValueError: not enough values to unpack (expected 2, got 1)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:175: ValueError
<span class=" -Color -Color-Bold -Color-Bold-Red">______ TestRaises.test_reinterpret_fails_with_print_for_the_fun_of_it ______</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef0021&gt;

    def test_reinterpret_fails_with_print_for_the_fun_of_it(self):
        items = [1, 2, 3]
        print(f&quot;items is {items!r}&quot;)
&gt;       a, b = items.pop()
<span class=" -Color -Color-Bold -Color-Bold-Red">E       TypeError: cannot unpack non-iterable int object</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:180: TypeError
--------------------------- Captured stdout call ---------------------------
items is [1, 2, 3]
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ TestRaises.test_some_error ________________________</span>

self = &lt;failure_demo.TestRaises object at 0xdeadbeef0022&gt;

    def test_some_error(self):
&gt;       if namenotexi:  # NOQA
<span class=" -Color -Color-Bold -Color-Bold-Red">E       NameError: name &#39;namenotexi&#39; is not defined</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:183: NameError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ test_dynamic_compile_shows_nicely _____________________</span>

    def test_dynamic_compile_shows_nicely():
        import importlib.util
        import sys

        src = &quot;def foo():\n assert 1 == 0\n&quot;
        name = &quot;abc-123&quot;
        spec = importlib.util.spec_from_loader(name, loader=None)
        module = importlib.util.module_from_spec(spec)
        code = compile(src, name, &quot;exec&quot;)
        exec(code, module.__dict__)
        sys.modules[name] = module
&gt;       module.foo()

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:202:
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>

&gt;   ???
<span class=" -Color -Color-Bold -Color-Bold-Red">E   AssertionError</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">abc-123</span>:2: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestMoreErrors.test_complex_error _____________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef0023&gt;

    def test_complex_error(self):
        def f():
            return 44

        def g():
            return 43

&gt;       somefunc(f(), g())

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:213:
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:10: in somefunc
    otherfunc(x, y)
<span class=" -Color -Color-Bold -Color-Bold-Red">_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _</span>

a = 44, b = 43

    def otherfunc(a, b):
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 44 == 43</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:6: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________ TestMoreErrors.test_z1_unpack_error ____________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef0024&gt;

    def test_z1_unpack_error(self):
        items = []
&gt;       a, b = items
<span class=" -Color -Color-Bold -Color-Bold-Red">E       ValueError: not enough values to unpack (expected 2, got 0)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:217: ValueError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestMoreErrors.test_z2_type_error _____________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef0025&gt;

    def test_z2_type_error(self):
        items = 3
&gt;       a, b = items
<span class=" -Color -Color-Bold -Color-Bold-Red">E       TypeError: cannot unpack non-iterable int object</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:221: TypeError
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________ TestMoreErrors.test_startswith ______________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef0026&gt;

    def test_startswith(self):
        s = &quot;123&quot;
        g = &quot;456&quot;
&gt;       assert s.startswith(g)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert False</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where False = &lt;built-in method startswith of str object at 0xdeadbeef0027&gt;(&#39;456&#39;)</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;built-in method startswith of str object at 0xdeadbeef0027&gt; = &#39;123&#39;.startswith</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:226: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________ TestMoreErrors.test_startswith_nested ___________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef0028&gt;

    def test_startswith_nested(self):
        def f():
            return &quot;123&quot;

        def g():
            return &quot;456&quot;

&gt;       assert f().startswith(g())
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: assert False</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where False = &lt;built-in method startswith of str object at 0xdeadbeef0027&gt;(&#39;456&#39;)</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where &lt;built-in method startswith of str object at 0xdeadbeef0027&gt; = &#39;123&#39;.startswith</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +      where &#39;123&#39; = &lt;function TestMoreErrors.test_startswith_nested.&lt;locals&gt;.f at 0xdeadbeef0029&gt;()</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    and   &#39;456&#39; = &lt;function TestMoreErrors.test_startswith_nested.&lt;locals&gt;.g at 0xdeadbeef002a&gt;()</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:235: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________ TestMoreErrors.test_global_func ______________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef002b&gt;

    def test_global_func(self):
&gt;       assert isinstance(globf(42), float)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert False</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where False = isinstance(43, float)</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +    where 43 = globf(42)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:238: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________ TestMoreErrors.test_instance _______________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef002c&gt;

    def test_instance(self):
        self.x = 6 * 7
&gt;       assert self.x != 42
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 42 != 42</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 42 = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef002c&gt;.x</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:242: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________ TestMoreErrors.test_compare ________________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef002d&gt;

    def test_compare(self):
&gt;       assert globf(10) &lt; 5
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 11 &lt; 5</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 11 = globf(10)</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:245: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________ TestMoreErrors.test_try_finally ______________________</span>

self = &lt;failure_demo.TestMoreErrors object at 0xdeadbeef002e&gt;

    def test_try_finally(self):
        x = 1
        try:
&gt;           assert x == 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E           assert 1 == 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:250: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________ TestCustomAssertMsg.test_single_line ___________________</span>

self = &lt;failure_demo.TestCustomAssertMsg object at 0xdeadbeef002f&gt;

    def test_single_line(self):
        class A:
            a = 1

        b = 2
&gt;       assert A.a == b, &quot;A.a appears not to be b&quot;
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: A.a appears not to be b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = &lt;class &#39;failure_demo.TestCustomAssertMsg.test_single_line.&lt;locals&gt;.A&#39;&gt;.a</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:261: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestCustomAssertMsg.test_multiline ____________________</span>

self = &lt;failure_demo.TestCustomAssertMsg object at 0xdeadbeef0030&gt;

    def test_multiline(self):
        class A:
            a = 1

        b = 2
&gt;       assert (
            A.a == b
        ), &quot;A.a appears not to be b\nor does not appear to be b\none of those&quot;
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: A.a appears not to be b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         or does not appear to be b</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         one of those</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = &lt;class &#39;failure_demo.TestCustomAssertMsg.test_multiline.&lt;locals&gt;.A&#39;&gt;.a</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:268: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">___________________ TestCustomAssertMsg.test_custom_repr ___________________</span>

self = &lt;failure_demo.TestCustomAssertMsg object at 0xdeadbeef0031&gt;

    def test_custom_repr(self):
        class JSON:
            a = 1

            def __repr__(self):
                return &quot;This is JSON\n{\n  &#39;foo&#39;: &#39;bar&#39;\n}&quot;

        a = JSON()
        b = 2
&gt;       assert a.a == b, a
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: This is JSON</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         {</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E           &#39;foo&#39;: &#39;bar&#39;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E         }</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 == 2</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E        +  where 1 = This is JSON\n{\n  &#39;foo&#39;: &#39;bar&#39;\n}.a</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">failure_demo.py</span>:281: AssertionError
========================= short test summary info ==========================
FAILED failure_demo.py::test_generative[3-6] - assert (3 * 2) &lt; 6
FAILED failure_demo.py::TestFailing::test_simple - assert 42 == 43
FAILED failure_demo.py::TestFailing::test_simple_multiline - assert 42 == 54
FAILED failure_demo.py::TestFailing::test_not - assert not 42
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_text - Asser...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_similar_text
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_multiline_text
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_long_text - ...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_long_text_multiline
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_list - asser...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_list_long - ...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_dict - Asser...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_set - Assert...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_longer_list
FAILED failure_demo.py::TestSpecialisedExplanations::test_in_list - asser...
FAILED failure_demo.py::TestSpecialisedExplanations::test_not_in_text_multiline
FAILED failure_demo.py::TestSpecialisedExplanations::test_not_in_text_single
FAILED failure_demo.py::TestSpecialisedExplanations::test_not_in_text_single_long
FAILED failure_demo.py::TestSpecialisedExplanations::test_not_in_text_single_long_term
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_dataclass - ...
FAILED failure_demo.py::TestSpecialisedExplanations::test_eq_attrs - Asse...
FAILED failure_demo.py::test_attribute - assert 1 == 2
FAILED failure_demo.py::test_attribute_instance - AssertionError: assert ...
FAILED failure_demo.py::test_attribute_failure - Exception: Failed to get...
FAILED failure_demo.py::test_attribute_multiple - AssertionError: assert ...
FAILED failure_demo.py::TestRaises::test_raises - ValueError: invalid lit...
FAILED failure_demo.py::TestRaises::test_raises_doesnt - Failed: DID NOT ...
FAILED failure_demo.py::TestRaises::test_raise - ValueError: demo error
FAILED failure_demo.py::TestRaises::test_tupleerror - ValueError: not eno...
FAILED failure_demo.py::TestRaises::test_reinterpret_fails_with_print_for_the_fun_of_it
FAILED failure_demo.py::TestRaises::test_some_error - NameError: name &#39;na...
FAILED failure_demo.py::test_dynamic_compile_shows_nicely - AssertionError
FAILED failure_demo.py::TestMoreErrors::test_complex_error - assert 44 == 43
FAILED failure_demo.py::TestMoreErrors::test_z1_unpack_error - ValueError...
FAILED failure_demo.py::TestMoreErrors::test_z2_type_error - TypeError: c...
FAILED failure_demo.py::TestMoreErrors::test_startswith - AssertionError:...
FAILED failure_demo.py::TestMoreErrors::test_startswith_nested - Assertio...
FAILED failure_demo.py::TestMoreErrors::test_global_func - assert False
FAILED failure_demo.py::TestMoreErrors::test_instance - assert 42 != 42
FAILED failure_demo.py::TestMoreErrors::test_compare - assert 11 &lt; 5
FAILED failure_demo.py::TestMoreErrors::test_try_finally - assert 1 == 0
FAILED failure_demo.py::TestCustomAssertMsg::test_single_line - Assertion...
FAILED failure_demo.py::TestCustomAssertMsg::test_multiline - AssertionEr...
FAILED failure_demo.py::TestCustomAssertMsg::test_custom_repr - Assertion...
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">44 failed</span><span class=" -Color -Color-Red"> in 0.12s ============================</span>
</pre></div>
</div>
</div>
<span id="document-example/simple"></span><div class="section" id="basic-patterns-and-examples">
<h4>Basic patterns and examples<a class="headerlink" href="#basic-patterns-and-examples" title="Permalink to this headline">¶</a></h4>
<div class="section" id="how-to-change-command-line-options-defaults">
<h5>How to change command line options defaults<a class="headerlink" href="#how-to-change-command-line-options-defaults" title="Permalink to this headline">¶</a></h5>
<p>It can be tedious to type the same series of command line options
every time you use <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.  For example, if you always want to see
detailed info on skipped and xfailed tests, as well as have terser “dot”
progress output, you can write it into a configuration file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-ra -q</span><span class="w"></span>
</pre></div>
</div>
<p>Alternatively, you can set a <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> environment variable to add command
line options while the environment is in use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTEST_ADDOPTS</span><span class="o">=</span><span class="s2">&quot;-v&quot;</span>
</pre></div>
</div>
<p>Here’s how the command-line is built in the presence of <code class="docutils literal notranslate"><span class="pre">addopts</span></code> or the environment variable:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&lt;pytest.ini:addopts&gt; $PYTEST_ADDOPTS &lt;extra command-line arguments&gt;
</pre></div>
</div>
<p>So if the user executes in the command-line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -m slow
</pre></div>
</div>
<p>The actual command line executed is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest -ra -q -v -m slow
</pre></div>
</div>
<p>Note that as usual for other command-line applications, in case of conflicting options the last one wins, so the example
above will show verbose output because <code class="docutils literal notranslate"><span class="pre">-v</span></code> overwrites <code class="docutils literal notranslate"><span class="pre">-q</span></code>.</p>
</div>
<div class="section" id="pass-different-values-to-a-test-function-depending-on-command-line-options">
<span id="request-example"></span><h5>Pass different values to a test function, depending on command line options<a class="headerlink" href="#pass-different-values-to-a-test-function-depending-on-command-line-options" title="Permalink to this headline">¶</a></h5>
<p>Suppose we want to write a test that depends on a command line option.
Here is a basic pattern to achieve this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_sample.py</span>
<span class="k">def</span> <span class="nf">test_answer</span><span class="p">(</span><span class="n">cmdopt</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cmdopt</span> <span class="o">==</span> <span class="s2">&quot;type1&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">cmdopt</span> <span class="o">==</span> <span class="s2">&quot;type2&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="mi">0</span>  <span class="c1"># to see what was printed</span>
</pre></div>
</div>
<p>For this to work we need to add a command line option and
provide the <code class="docutils literal notranslate"><span class="pre">cmdopt</span></code> through a <a class="reference internal" href="contents.html#fixture"><span class="std std-ref">fixture function</span></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--cmdopt&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;type1&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;my option: type1 or type2&quot;</span>
    <span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">cmdopt</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--cmdopt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s run this without supplying our new option:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_sample.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_answer ________________________________</span>

cmdopt = &#39;type1&#39;

    def test_answer(cmdopt):
        if cmdopt == &quot;type1&quot;:
            print(&quot;first&quot;)
        elif cmdopt == &quot;type2&quot;:
            print(&quot;second&quot;)
&gt;       assert 0  # to see what was printed
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_sample.py</span>:6: AssertionError
--------------------------- Captured stdout call ---------------------------
first
========================= short test summary info ==========================
FAILED test_sample.py::test_answer - assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>And now with supplying a command line option:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q --cmdopt=type2
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________________ test_answer ________________________________</span>

cmdopt = &#39;type2&#39;

    def test_answer(cmdopt):
        if cmdopt == &quot;type1&quot;:
            print(&quot;first&quot;)
        elif cmdopt == &quot;type2&quot;:
            print(&quot;second&quot;)
&gt;       assert 0  # to see what was printed
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_sample.py</span>:6: AssertionError
--------------------------- Captured stdout call ---------------------------
second
========================= short test summary info ==========================
FAILED test_sample.py::test_answer - assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>You can see that the command line option arrived in our test.</p>
<p>We could add simple validation for the input by listing the choices:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--cmdopt&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;type1&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;my option: type1 or type2&quot;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;type1&quot;</span><span class="p">,</span> <span class="s2">&quot;type2&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Now we’ll get feedback on a bad argument:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q --cmdopt=type3
ERROR: usage: pytest [options] [file_or_dir] [file_or_dir] [...]
pytest: error: argument --cmdopt: invalid choice: &#39;type3&#39; (choose from &#39;type1&#39;, &#39;type2&#39;)
</pre></div>
</div>
<p>If you need to provide more detailed error messages, you can use the
<code class="docutils literal notranslate"><span class="pre">type</span></code> parameter and raise <code class="docutils literal notranslate"><span class="pre">pytest.UsageError</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">type_checker</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;cmdopt must specify a numeric type as typeNNN&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">pytest</span><span class="o">.</span><span class="n">UsageError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">4</span><span class="p">:])</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">pytest</span><span class="o">.</span><span class="n">UsageError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">value</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--cmdopt&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;type1&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;my option: type1 or type2&quot;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="n">type_checker</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>This completes the basic pattern.  However, one often rather wants to
process command line options outside of the test and rather pass in
different or more complex objects.</p>
</div>
<div class="section" id="dynamically-adding-command-line-options">
<h5>Dynamically adding command line options<a class="headerlink" href="#dynamically-adding-command-line-options" title="Permalink to this headline">¶</a></h5>
<p>Through <a class="reference internal" href="contents.html#confval-addopts"><code class="xref std std-confval docutils literal notranslate"><span class="pre">addopts</span></code></a> you can statically add command line
options for your project.  You can also dynamically modify
the command line arguments before they get processed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># setuptools plugin</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">pytest_load_initial_conftests</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;xdist&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>  <span class="c1"># pytest-xdist plugin</span>
        <span class="kn">import</span> <span class="nn">multiprocessing</span>

        <span class="n">num</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">args</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)]</span> <span class="o">+</span> <span class="n">args</span>
</pre></div>
</div>
<p>If you have the <a class="reference external" href="https://pypi.org/project/pytest-xdist/">xdist plugin</a> installed
you will now always perform test runs using a number
of subprocesses close to your CPU. Running in an empty
directory with the above conftest.py:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 0 items

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
</div>
<div class="section" id="control-skipping-of-tests-according-to-command-line-option">
<span id="excontrolskip"></span><h5>Control skipping of tests according to command line option<a class="headerlink" href="#control-skipping-of-tests-according-to-command-line-option" title="Permalink to this headline">¶</a></h5>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file adding a <code class="docutils literal notranslate"><span class="pre">--runslow</span></code> command
line option to control skipping of <code class="docutils literal notranslate"><span class="pre">pytest.mark.slow</span></code> marked tests:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;--runslow&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;run slow tests&quot;</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span><span class="s2">&quot;markers&quot;</span><span class="p">,</span> <span class="s2">&quot;slow: mark test as slow to run&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;--runslow&quot;</span><span class="p">):</span>
        <span class="c1"># --runslow given in cli: do not skip slow tests</span>
        <span class="k">return</span>
    <span class="n">skip_slow</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;need --runslow option to run&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;slow&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">skip_slow</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now write a test module like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_func_fast</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slow</span>
<span class="k">def</span> <span class="nf">test_func_slow</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>and when running it will see a skipped “slow” test:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -rs    # &quot;-rs&quot; means report details on the little &#39;s&#39;
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Yellow">s</span>                                                    <span class=" -Color -Color-Yellow">[100%]</span>

========================= short test summary info ==========================
SKIPPED [1] test_module.py:8: need --runslow option to run
<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">1 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
<p>Or run it including the <code class="docutils literal notranslate"><span class="pre">slow</span></code> marked test:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --runslow
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Green">..</span>                                                    <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-well-integrated-assertion-helpers">
<span id="tracebackhide"></span><h5>Writing well integrated assertion helpers<a class="headerlink" href="#writing-well-integrated-assertion-helpers" title="Permalink to this headline">¶</a></h5>
<p>If you have a test helper function called from a test you can
use the <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> marker to fail a test with a certain message.
The test support function will not show up in the traceback if you
set the <code class="docutils literal notranslate"><span class="pre">__tracebackhide__</span></code> option somewhere in the helper function.
Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_checkconfig.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">checkconfig</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">):</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;not configured: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">test_something</span><span class="p">():</span>
    <span class="n">checkconfig</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">__tracebackhide__</span></code> setting influences <code class="docutils literal notranslate"><span class="pre">pytest</span></code> showing
of tracebacks: the <code class="docutils literal notranslate"><span class="pre">checkconfig</span></code> function will not be shown
unless the <code class="docutils literal notranslate"><span class="pre">--full-trace</span></code> command line option is specified.
Let’s run our little function:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_checkconfig.py
<span class=" -Color -Color-Red">F</span>                                                                    <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ test_something ______________________________</span>

    def test_something():
&gt;       checkconfig(42)
<span class=" -Color -Color-Bold -Color-Bold-Red">E       Failed: not configured: 42</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_checkconfig.py</span>:11: Failed
========================= short test summary info ==========================
FAILED test_checkconfig.py::test_something - Failed: not configured: 42
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>If you only want to hide certain exceptions, you can set <code class="docutils literal notranslate"><span class="pre">__tracebackhide__</span></code>
to a callable which gets the <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> object. You can for example use
this to make sure unexpected exception types aren’t hidden:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">ConfigException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">checkconfig</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">__tracebackhide__</span> <span class="o">=</span> <span class="n">operator</span><span class="o">.</span><span class="n">methodcaller</span><span class="p">(</span><span class="s2">&quot;errisinstance&quot;</span><span class="p">,</span> <span class="n">ConfigException</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConfigException</span><span class="p">(</span><span class="s2">&quot;not configured: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">test_something</span><span class="p">():</span>
    <span class="n">checkconfig</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>This will avoid hiding the exception traceback on unrelated exceptions (i.e.
bugs in assertion helpers).</p>
</div>
<div class="section" id="detect-if-running-from-within-a-pytest-run">
<h5>Detect if running from within a pytest run<a class="headerlink" href="#detect-if-running-from-within-a-pytest-run" title="Permalink to this headline">¶</a></h5>
<p>Usually it is a bad idea to make application code
behave differently if called from a test.  But if you
absolutely must find out if your application code is
running from a test you can do something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of your_module.py</span>


<span class="n">_called_from_test</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>


<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="n">your_module</span><span class="o">.</span><span class="n">_called_from_test</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>and then check for the <code class="docutils literal notranslate"><span class="pre">your_module._called_from_test</span></code> flag:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">your_module</span><span class="o">.</span><span class="n">_called_from_test</span><span class="p">:</span>
    <span class="c1"># called from within a test run</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># called &quot;normally&quot;</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>accordingly in your application.</p>
</div>
<div class="section" id="adding-info-to-test-report-header">
<h5>Adding info to test report header<a class="headerlink" href="#adding-info-to-test-report-header" title="Permalink to this headline">¶</a></h5>
<p>It’s easy to present extra information in a <code class="docutils literal notranslate"><span class="pre">pytest</span></code> run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>


<span class="k">def</span> <span class="nf">pytest_report_header</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;project deps: mylib-1.1&quot;</span>
</pre></div>
</div>
<p>which will add the string to the test header accordingly:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
project deps: mylib-1.1
rootdir: /home/sweet/project
collected 0 items

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
<p>It is also possible to return a list of strings which will be considered as several
lines of information. You may consider <code class="docutils literal notranslate"><span class="pre">config.getoption('verbose')</span></code> in order to
display more information if applicable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>


<span class="k">def</span> <span class="nf">pytest_report_header</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;verbose&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;info1: did you know that ...&quot;</span><span class="p">,</span> <span class="s2">&quot;did you?&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>which will add info only when run with “–v”:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
info1: did you know that ...
did you?
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 0 items

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
<p>and nothing when run plainly:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 0 items

<span class=" -Color -Color-Yellow">========================== no tests ran in 0.12s ===========================</span>
</pre></div>
</div>
</div>
<div class="section" id="profiling-test-duration">
<h5>Profiling test duration<a class="headerlink" href="#profiling-test-duration" title="Permalink to this headline">¶</a></h5>
<p>If you have a slow running large test suite you might want to find
out which tests are the slowest. Let’s make an artificial test suite:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_some_are_slow.py</span>
<span class="kn">import</span> <span class="nn">time</span>


<span class="k">def</span> <span class="nf">test_funcfast</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_funcslow1</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_funcslow2</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can profile which test functions execute the slowest:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --durations=3
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 3 items

test_some_are_slow.py <span class=" -Color -Color-Green">...</span>                                            <span class=" -Color -Color-Green">[100%]</span>

=========================== slowest 3 durations ============================
0.30s call     test_some_are_slow.py::test_funcslow2
0.20s call     test_some_are_slow.py::test_funcslow1
0.10s call     test_some_are_slow.py::test_funcfast
<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">3 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
</div>
<div class="section" id="incremental-testing-test-steps">
<h5>Incremental testing - test steps<a class="headerlink" href="#incremental-testing-test-steps" title="Permalink to this headline">¶</a></h5>
<p>Sometimes you may have a testing situation which consists of a series
of test steps.  If one step fails it makes no sense to execute further
steps as they are all expected to fail anyway and their tracebacks
add no insight.  Here is a simple <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file which introduces
an <code class="docutils literal notranslate"><span class="pre">incremental</span></code> marker which is to be used on classes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c1"># store history of failures per test class name and per index in parametrize (if parametrize used)</span>
<span class="n">_test_failed_incremental</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>


<span class="k">def</span> <span class="nf">pytest_runtest_makereport</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">call</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;incremental&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
        <span class="c1"># incremental marker is used</span>
        <span class="k">if</span> <span class="n">call</span><span class="o">.</span><span class="n">excinfo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># the test has failed</span>
            <span class="c1"># retrieve the class name of the test</span>
            <span class="n">cls_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>
            <span class="c1"># retrieve the index of the test (if parametrize is used in combination with incremental)</span>
            <span class="n">parametrize_index</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">callspec</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;callspec&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">()</span>
            <span class="p">)</span>
            <span class="c1"># retrieve the name of the test function</span>
            <span class="n">test_name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">originalname</span> <span class="ow">or</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span>
            <span class="c1"># store in _test_failed_incremental the original name of the failed test</span>
            <span class="n">_test_failed_incremental</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">cls_name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
                <span class="n">parametrize_index</span><span class="p">,</span> <span class="n">test_name</span>
            <span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;incremental&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
        <span class="c1"># retrieve the class name of the test</span>
        <span class="n">cls_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">cls</span><span class="p">)</span>
        <span class="c1"># check if a previous test has failed for this class</span>
        <span class="k">if</span> <span class="n">cls_name</span> <span class="ow">in</span> <span class="n">_test_failed_incremental</span><span class="p">:</span>
            <span class="c1"># retrieve the index of the test (if parametrize is used in combination with incremental)</span>
            <span class="n">parametrize_index</span> <span class="o">=</span> <span class="p">(</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">callspec</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;callspec&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">()</span>
            <span class="p">)</span>
            <span class="c1"># retrieve the name of the first test function to fail for this class name and index</span>
            <span class="n">test_name</span> <span class="o">=</span> <span class="n">_test_failed_incremental</span><span class="p">[</span><span class="n">cls_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parametrize_index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="c1"># if name found, test has failed for the combination of class name &amp; test name</span>
            <span class="k">if</span> <span class="n">test_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pytest</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="s2">&quot;previous test failed (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">test_name</span><span class="p">))</span>
</pre></div>
</div>
<p>These two hook implementations work together to abort incremental-marked
tests in a class.  Here is a test module example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_step.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">incremental</span>
<span class="k">class</span> <span class="nc">TestUserHandling</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_modification</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">test_deletion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">def</span> <span class="nf">test_normal</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>If we run this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -rx
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items

test_step.py <span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Yellow">x</span><span class=" -Color -Color-Green">.</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestUserHandling.test_modification ____________________</span>

self = &lt;test_step.TestUserHandling object at 0xdeadbeef0001&gt;

    def test_modification(self):
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_step.py</span>:11: AssertionError
========================= short test summary info ==========================
XFAIL test_step.py::TestUserHandling::test_deletion
  reason: previous test failed (test_modification)
<span class=" -Color -Color-Red">================== </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Yellow">1 xfailed</span><span class=" -Color -Color-Red"> in 0.12s ==================</span>
</pre></div>
</div>
<p>We’ll see that <code class="docutils literal notranslate"><span class="pre">test_deletion</span></code> was not executed because <code class="docutils literal notranslate"><span class="pre">test_modification</span></code>
failed.  It is reported as an “expected failure”.</p>
</div>
<div class="section" id="package-directory-level-fixtures-setups">
<h5>Package/Directory-level fixtures (setups)<a class="headerlink" href="#package-directory-level-fixtures-setups" title="Permalink to this headline">¶</a></h5>
<p>If you have nested test directories, you can have per-directory fixture scopes
by placing fixture functions in a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file in that directory.
You can use all types of fixtures including <a class="reference internal" href="contents.html#autouse-fixtures"><span class="std std-ref">autouse fixtures</span></a> which are the equivalent of xUnit’s setup/teardown
concept.  It’s however recommended to have explicit fixture references in your
tests or test classes rather than relying on implicitly executing
setup/teardown functions, especially if they are far away from the actual tests.</p>
<p>Here is an example for making a <code class="docutils literal notranslate"><span class="pre">db</span></code> fixture available in a directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of a/conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">DB</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">db</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">DB</span><span class="p">()</span>
</pre></div>
</div>
<p>and then a test module in that directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of a/test_db.py</span>
<span class="k">def</span> <span class="nf">test_a1</span><span class="p">(</span><span class="n">db</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="n">db</span>  <span class="c1"># to show value</span>
</pre></div>
</div>
<p>another test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of a/test_db2.py</span>
<span class="k">def</span> <span class="nf">test_a2</span><span class="p">(</span><span class="n">db</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="n">db</span>  <span class="c1"># to show value</span>
</pre></div>
</div>
<p>and then a module in a sister directory which will not see
the <code class="docutils literal notranslate"><span class="pre">db</span></code> fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of b/test_error.py</span>
<span class="k">def</span> <span class="nf">test_root</span><span class="p">(</span><span class="n">db</span><span class="p">):</span>  <span class="c1"># no db here, will error out</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>We can run this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 7 items

test_step.py <span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Yellow">x</span><span class=" -Color -Color-Green">.</span>                                                    <span class=" -Color -Color-Red">[ 57%]</span>
a/test_db.py <span class=" -Color -Color-Red">F</span>                                                       <span class=" -Color -Color-Red">[ 71%]</span>
a/test_db2.py <span class=" -Color -Color-Red">F</span>                                                      <span class=" -Color -Color-Red">[ 85%]</span>
b/test_error.py <span class=" -Color -Color-Red">E</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================== ERRORS ==================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_______________________ ERROR at setup of test_root ________________________</span>
file /home/sweet/project/b/test_error.py, line 1
  def test_root(db):  # no db here, will error out
<span class=" -Color -Color-Bold -Color-Bold-Red">E       fixture &#39;db&#39; not found</span>
&gt;       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
&gt;       use &#39;pytest --fixtures [testpath]&#39; for help on them.

/home/sweet/project/b/test_error.py:1
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ TestUserHandling.test_modification ____________________</span>

self = &lt;test_step.TestUserHandling object at 0xdeadbeef0002&gt;

    def test_modification(self):
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_step.py</span>:11: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________________ test_a1 __________________________________</span>

db = &lt;conftest.DB object at 0xdeadbeef0003&gt;

    def test_a1(db):
&gt;       assert 0, db  # to show value
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: &lt;conftest.DB object at 0xdeadbeef0003&gt;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">a/test_db.py</span>:2: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________________ test_a2 __________________________________</span>

db = &lt;conftest.DB object at 0xdeadbeef0003&gt;

    def test_a2(db):
&gt;       assert 0, db  # to show value
<span class=" -Color -Color-Bold -Color-Bold-Red">E       AssertionError: &lt;conftest.DB object at 0xdeadbeef0003&gt;</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">a/test_db2.py</span>:2: AssertionError
========================= short test summary info ==========================
FAILED test_step.py::TestUserHandling::test_modification - assert 0
FAILED a/test_db.py::test_a1 - AssertionError: &lt;conftest.DB object at 0x7...
FAILED a/test_db2.py::test_a2 - AssertionError: &lt;conftest.DB object at 0x...
ERROR b/test_error.py::test_root
<span class=" -Color -Color-Red">============= </span><span class=" -Color -Color-Bold -Color-Bold-Red">3 failed</span>, <span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Yellow">1 xfailed</span>, <span class=" -Color -Color-Bold -Color-Bold-Red">1 error</span><span class=" -Color -Color-Red"> in 0.12s ==============</span>
</pre></div>
</div>
<p>The two test modules in the <code class="docutils literal notranslate"><span class="pre">a</span></code> directory see the same <code class="docutils literal notranslate"><span class="pre">db</span></code> fixture instance
while the one test in the sister-directory <code class="docutils literal notranslate"><span class="pre">b</span></code> doesn’t see it.  We could of course
also define a <code class="docutils literal notranslate"><span class="pre">db</span></code> fixture in that sister directory’s <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file.
Note that each fixture is only instantiated if there is a test actually needing
it (unless you use “autouse” fixture which are always executed ahead of the first test
executing).</p>
</div>
<div class="section" id="post-process-test-reports-failures">
<h5>Post-process test reports / failures<a class="headerlink" href="#post-process-test-reports-failures" title="Permalink to this headline">¶</a></h5>
<p>If you want to postprocess test reports and need access to the executing
environment you can implement a hook that gets called when the test
“report” object is about to be created.  Here we write out all failing
test calls and also access a fixture (if it was used by the test) in
case you want to query/look at it during your post processing.  In our
case we just write some information out to a <code class="docutils literal notranslate"><span class="pre">failures</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">os.path</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hookwrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_runtest_makereport</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">call</span><span class="p">):</span>
    <span class="c1"># execute all other hooks to obtain the report object</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="k">yield</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">outcome</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>

    <span class="c1"># we only look at actual failing test calls, not setup/teardown</span>
    <span class="k">if</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span> <span class="o">==</span> <span class="s2">&quot;call&quot;</span> <span class="ow">and</span> <span class="n">rep</span><span class="o">.</span><span class="n">failed</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;failures&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;w&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;failures&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="c1"># let&#39;s also access a fixture for the fun of it</span>
            <span class="k">if</span> <span class="s2">&quot;tmp_path&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="s2">&quot; (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">funcargs</span><span class="p">[</span><span class="s2">&quot;tmp_path&quot;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">extra</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rep</span><span class="o">.</span><span class="n">nodeid</span> <span class="o">+</span> <span class="n">extra</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>if you then have failing tests:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>
<span class="k">def</span> <span class="nf">test_fail1</span><span class="p">(</span><span class="n">tmp_path</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_fail2</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>
</pre></div>
</div>
<p>and run them:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_module.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Red">FF</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_fail1 ________________________________</span>

tmp_path = PosixPath(&#39;PYTEST_TMPDIR/test_fail10&#39;)

    def test_fail1(tmp_path):
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:2: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_fail2 ________________________________</span>

    def test_fail2():
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:6: AssertionError
========================= short test summary info ==========================
FAILED test_module.py::test_fail1 - assert 0
FAILED test_module.py::test_fail2 - assert 0
<span class=" -Color -Color-Red">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span><span class=" -Color -Color-Red"> in 0.12s =============================</span>
</pre></div>
</div>
<p>you will have a “failures” file which contains the failing test ids:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat failures
test_module.py::test_fail1 <span class="o">(</span>PYTEST_TMPDIR/test_fail10<span class="o">)</span>
test_module.py::test_fail2
</pre></div>
</div>
</div>
<div class="section" id="making-test-result-information-available-in-fixtures">
<h5>Making test result information available in fixtures<a class="headerlink" href="#making-test-result-information-available-in-fixtures" title="Permalink to this headline">¶</a></h5>
<p>If you want to make test result reports available in fixture finalizers
here is a little example implemented via a local plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">hookimpl</span><span class="p">(</span><span class="n">tryfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hookwrapper</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pytest_runtest_makereport</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">call</span><span class="p">):</span>
    <span class="c1"># execute all other hooks to obtain the report object</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="k">yield</span>
    <span class="n">rep</span> <span class="o">=</span> <span class="n">outcome</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>

    <span class="c1"># set a report attribute for each phase of a call, which can</span>
    <span class="c1"># be &quot;setup&quot;, &quot;call&quot;, &quot;teardown&quot;</span>

    <span class="nb">setattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;rep_&quot;</span> <span class="o">+</span> <span class="n">rep</span><span class="o">.</span><span class="n">when</span><span class="p">,</span> <span class="n">rep</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">something</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">yield</span>
    <span class="c1"># request.node is an &quot;item&quot; because we use the default</span>
    <span class="c1"># &quot;function&quot; scope</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">rep_setup</span><span class="o">.</span><span class="n">failed</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setting up a test failed!&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">nodeid</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">rep_setup</span><span class="o">.</span><span class="n">passed</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">rep_call</span><span class="o">.</span><span class="n">failed</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;executing test failed&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">nodeid</span><span class="p">)</span>
</pre></div>
</div>
<p>if you then have failing tests:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">other</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_setup_fails</span><span class="p">(</span><span class="n">something</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">test_call_fails</span><span class="p">(</span><span class="n">something</span><span class="p">):</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_fail2</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>
</pre></div>
</div>
<p>and run it:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -s test_module.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 3 items

test_module.py Esetting up a test failed! test_module.py::test_setup_fails
Fexecuting test failed test_module.py::test_call_fails
F

================================== ERRORS ==================================
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________ ERROR at setup of test_setup_fails ____________________</span>

    @pytest.fixture
    def other():
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:7: AssertionError
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________________ test_call_fails ______________________________</span>

something = None

    def test_call_fails(something):
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:15: AssertionError
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________________ test_fail2 ________________________________</span>

    def test_fail2():
&gt;       assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 0</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:19: AssertionError
========================= short test summary info ==========================
FAILED test_module.py::test_call_fails - assert 0
FAILED test_module.py::test_fail2 - assert 0
ERROR test_module.py::test_setup_fails - assert 0
<span class=" -Color -Color-Red">======================== </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span>, <span class=" -Color -Color-Bold -Color-Bold-Red">1 error</span><span class=" -Color -Color-Red"> in 0.12s ========================</span>
</pre></div>
</div>
<p>You’ll see that the fixture finalizers could use the precise reporting
information.</p>
</div>
<div class="section" id="pytest-current-test-environment-variable">
<span id="pytest-current-test-env"></span><h5><code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> environment variable<a class="headerlink" href="#pytest-current-test-environment-variable" title="Permalink to this headline">¶</a></h5>
<p>Sometimes a test session might get stuck and there might be no easy way to figure out
which test got stuck, for example if pytest was run in quiet mode (<code class="docutils literal notranslate"><span class="pre">-q</span></code>) or you don’t have access to the console
output. This is particularly a problem if the problem happens only sporadically, the famous “flaky” kind of tests.</p>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> sets the <span class="target" id="index-0"></span><a class="reference internal" href="contents.html#envvar-PYTEST_CURRENT_TEST"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code></a> environment variable when running tests, which can be inspected
by process monitoring utilities or libraries like <a class="reference external" href="https://pypi.org/project/psutil/">psutil</a> to discover which test got stuck if necessary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psutil</span>

<span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">psutil</span><span class="o">.</span><span class="n">pids</span><span class="p">():</span>
    <span class="n">environ</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span><span class="o">.</span><span class="n">environ</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;PYTEST_CURRENT_TEST&quot;</span> <span class="ow">in</span> <span class="n">environ</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;pytest process </span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> running: </span><span class="si">{</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PYTEST_CURRENT_TEST&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>During the test session pytest will set <code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> to the current test
<a class="reference internal" href="contents.html#nodeids"><span class="std std-ref">nodeid</span></a> and the current stage, which can be <code class="docutils literal notranslate"><span class="pre">setup</span></code>, <code class="docutils literal notranslate"><span class="pre">call</span></code>,
or <code class="docutils literal notranslate"><span class="pre">teardown</span></code>.</p>
<p>For example, when running a single test function named <code class="docutils literal notranslate"><span class="pre">test_foo</span></code> from <code class="docutils literal notranslate"><span class="pre">foo_module.py</span></code>,
<code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> will be set to:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">foo_module.py::test_foo</span> <span class="pre">(setup)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foo_module.py::test_foo</span> <span class="pre">(call)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">foo_module.py::test_foo</span> <span class="pre">(teardown)</span></code></p></li>
</ol>
<p>In that order.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> is meant to be human readable and the actual format
can be changed between releases (even bug fixes) so it shouldn’t be relied on for scripting
or automation.</p>
</div>
</div>
<div class="section" id="freezing-pytest">
<span id="id1"></span><h5>Freezing pytest<a class="headerlink" href="#freezing-pytest" title="Permalink to this headline">¶</a></h5>
<p>If you freeze your application using a tool like
<a class="reference external" href="https://pyinstaller.readthedocs.io">PyInstaller</a>
in order to distribute it to your end-users, it is a good idea to also package
your test runner and run your tests using the frozen application. This way packaging
errors such as dependencies not being included into the executable can be detected early
while also allowing you to send test files to users so they can run them in their
machines, which can be useful to obtain more information about a hard to reproduce bug.</p>
<p>Fortunately recent <code class="docutils literal notranslate"><span class="pre">PyInstaller</span></code> releases already have a custom hook
for pytest, but if you are using another tool to freeze executables
such as <code class="docutils literal notranslate"><span class="pre">cx_freeze</span></code> or <code class="docutils literal notranslate"><span class="pre">py2exe</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">pytest.freeze_includes()</span></code>
to obtain the full list of internal pytest modules. How to configure the tools
to find the internal modules varies from tool to tool, however.</p>
<p>Instead of freezing the pytest runner as a separate executable, you can make
your frozen program work as the pytest runner by some clever
argument handling during program startup. This allows you to
have a single executable, which is usually more convenient.
Please note that the mechanism for plugin discovery used by pytest
(setuptools entry points) doesn’t work with frozen executables so pytest
can’t find any third party plugins automatically. To include third party plugins
like <code class="docutils literal notranslate"><span class="pre">pytest-timeout</span></code> they must be imported explicitly and passed on to pytest.main.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># contents of app_main.py</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pytest_timeout</span>  <span class="c1"># Third party plugin</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;--pytest&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pytest</span>

    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">pytest_timeout</span><span class="p">]))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># normal application execution: at this point argv can be parsed</span>
    <span class="c1"># by your argument-parsing library of choice as usual</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This allows you to execute tests using the frozen
application with standard <code class="docutils literal notranslate"><span class="pre">pytest</span></code> command-line options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./app_main --pytest --verbose --tb<span class="o">=</span>long --junitxml<span class="o">=</span>results.xml test-suite/
</pre></div>
</div>
</div>
</div>
<span id="document-example/parametrize"></span><div class="section" id="parametrizing-tests">
<span id="paramexamples"></span><h4>Parametrizing tests<a class="headerlink" href="#parametrizing-tests" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> allows to easily parametrize test functions.
For basic docs, see <a class="reference internal" href="contents.html#parametrize-basics"><span class="std std-ref">How to parametrize fixtures and test functions</span></a>.</p>
<p>In the following we provide some examples using
the builtin mechanisms.</p>
<div class="section" id="generating-parameters-combinations-depending-on-command-line">
<h5>Generating parameters combinations, depending on command line<a class="headerlink" href="#generating-parameters-combinations-depending-on-command-line" title="Permalink to this headline">¶</a></h5>
<p>Let’s say we want to execute a test with different computation
parameters and the parameter range shall be determined by a command
line argument.  Let’s first write a simple (do-nothing) computation test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_compute.py</span>


<span class="k">def</span> <span class="nf">test_compute</span><span class="p">(</span><span class="n">param1</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">param1</span> <span class="o">&lt;</span> <span class="mi">4</span>
</pre></div>
</div>
<p>Now we add a test configuration like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span><span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;run all combinations&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;param1&quot;</span> <span class="ow">in</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">):</span>
            <span class="n">end</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;param1&quot;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">end</span><span class="p">))</span>
</pre></div>
</div>
<p>This means that we only run 2 tests if we do not pass <code class="docutils literal notranslate"><span class="pre">--all</span></code>:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_compute.py
<span class=" -Color -Color-Green">..</span>                                                                   <span class=" -Color -Color-Green">[100%]</span>
<span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<p>We run only two computations, so we see two dots.
let’s run the full monty:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q --all
<span class=" -Color -Color-Green">....</span><span class=" -Color -Color-Red">F</span>                                                                <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_____________________________ test_compute[4] ______________________________</span>

param1 = 4

    def test_compute(param1):
&gt;       assert param1 &lt; 4
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 4 &lt; 4</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_compute.py</span>:4: AssertionError
========================= short test summary info ==========================
FAILED test_compute.py::test_compute[4] - assert 4 &lt; 4
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">4 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>As expected when running the full range of <code class="docutils literal notranslate"><span class="pre">param1</span></code> values
we’ll get an error on the last one.</p>
</div>
<div class="section" id="different-options-for-test-ids">
<h5>Different options for test IDs<a class="headerlink" href="#different-options-for-test-ids" title="Permalink to this headline">¶</a></h5>
<p>pytest will build a string that is the test ID for each set of values in a
parametrized test. These IDs can be used with <code class="docutils literal notranslate"><span class="pre">-k</span></code> to select specific cases
to run, and they will also identify the specific case when one is failing.
Running pytest with <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code> will show the generated IDs.</p>
<p>Numbers, strings, booleans and None will have their usual string representation
used in the test ID. For other objects, pytest will make a string based on
the argument name:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_time.py</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">testdata</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span>
    <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
<span class="p">]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;a,b,expected&quot;</span><span class="p">,</span> <span class="n">testdata</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_timedistance_v0</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">assert</span> <span class="n">diff</span> <span class="o">==</span> <span class="n">expected</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;a,b,expected&quot;</span><span class="p">,</span> <span class="n">testdata</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;forward&quot;</span><span class="p">,</span> <span class="s2">&quot;backward&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_timedistance_v1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">assert</span> <span class="n">diff</span> <span class="o">==</span> <span class="n">expected</span>


<span class="k">def</span> <span class="nf">idfn</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="n">datetime</span><span class="p">,)):</span>
        <span class="c1"># note this wouldn&#39;t show any hours/minutes/seconds</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;a,b,expected&quot;</span><span class="p">,</span> <span class="n">testdata</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="n">idfn</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_timedistance_v2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">assert</span> <span class="n">diff</span> <span class="o">==</span> <span class="n">expected</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;a,b,expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;forward&quot;</span>
        <span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">timedelta</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;backward&quot;</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_timedistance_v3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
    <span class="k">assert</span> <span class="n">diff</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">test_timedistance_v0</span></code>, we let pytest generate the test IDs.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">test_timedistance_v1</span></code>, we specified <code class="docutils literal notranslate"><span class="pre">ids</span></code> as a list of strings which were
used as the test IDs. These are succinct, but can be a pain to maintain.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">test_timedistance_v2</span></code>, we specified <code class="docutils literal notranslate"><span class="pre">ids</span></code> as a function that can generate a
string representation to make part of the test ID. So our <code class="docutils literal notranslate"><span class="pre">datetime</span></code> values use the
label generated by <code class="docutils literal notranslate"><span class="pre">idfn</span></code>, but because we didn’t generate a label for <code class="docutils literal notranslate"><span class="pre">timedelta</span></code>
objects, they are still using the default pytest representation:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_time.py --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 8 items

&lt;Module test_time.py&gt;
  &lt;Function test_timedistance_v0[a0-b0-expected0]&gt;
  &lt;Function test_timedistance_v0[a1-b1-expected1]&gt;
  &lt;Function test_timedistance_v1[forward]&gt;
  &lt;Function test_timedistance_v1[backward]&gt;
  &lt;Function test_timedistance_v2[20011212-20011211-expected0]&gt;
  &lt;Function test_timedistance_v2[20011211-20011212-expected1]&gt;
  &lt;Function test_timedistance_v3[forward]&gt;
  &lt;Function test_timedistance_v3[backward]&gt;

======================== 8 tests collected in 0.12s ========================
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">test_timedistance_v3</span></code>, we used <code class="docutils literal notranslate"><span class="pre">pytest.param</span></code> to specify the test IDs
together with the actual data, instead of listing them separately.</p>
</div>
<div class="section" id="a-quick-port-of-testscenarios">
<h5>A quick port of “testscenarios”<a class="headerlink" href="#a-quick-port-of-testscenarios" title="Permalink to this headline">¶</a></h5>
<p>Here is a quick port to run tests configured with <a class="reference external" href="https://pypi.org/project/testscenarios/">testscenarios</a>,
an add-on from Robert Collins for the standard unittest framework. We
only have to work a bit to construct the correct arguments for pytest’s
<code class="xref py py-func docutils literal notranslate"><span class="pre">Metafunc.parametrize()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_scenarios.py</span>


<span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="n">idlist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">argvalues</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">scenario</span> <span class="ow">in</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">scenarios</span><span class="p">:</span>
        <span class="n">idlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scenario</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">items</span> <span class="o">=</span> <span class="n">scenario</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="n">argnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
        <span class="n">argvalues</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span><span class="p">])</span>
    <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="n">argnames</span><span class="p">,</span> <span class="n">argvalues</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="n">idlist</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>


<span class="n">scenario1</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;basic&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">})</span>
<span class="n">scenario2</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;advanced&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;value2&quot;</span><span class="p">})</span>


<span class="k">class</span> <span class="nc">TestSampleWithScenarios</span><span class="p">:</span>
    <span class="n">scenarios</span> <span class="o">=</span> <span class="p">[</span><span class="n">scenario1</span><span class="p">,</span> <span class="n">scenario2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">test_demo1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_demo2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
<p>this is a fully self-contained example which you can run with:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_scenarios.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items

test_scenarios.py <span class=" -Color -Color-Green">....</span>                                               <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">4 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>If you just collect tests you’ll also nicely see ‘advanced’ and ‘basic’ as variants for the test function:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --collect-only test_scenarios.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items

&lt;Module test_scenarios.py&gt;
  &lt;Class TestSampleWithScenarios&gt;
    &lt;Function test_demo1[basic]&gt;
    &lt;Function test_demo2[basic]&gt;
    &lt;Function test_demo1[advanced]&gt;
    &lt;Function test_demo2[advanced]&gt;

======================== 4 tests collected in 0.12s ========================
</pre></div>
</div>
<p>Note that we told <code class="docutils literal notranslate"><span class="pre">metafunc.parametrize()</span></code> that your scenario values
should be considered class-scoped.  With pytest-2.3 this leads to a
resource-based ordering.</p>
</div>
<div class="section" id="deferring-the-setup-of-parametrized-resources">
<h5>Deferring the setup of parametrized resources<a class="headerlink" href="#deferring-the-setup-of-parametrized-resources" title="Permalink to this headline">¶</a></h5>
<p>The parametrization of test functions happens at collection
time.  It is a good idea to setup expensive resources like DB
connections or subprocess only when the actual test is run.
Here is a simple example how you can achieve that. This test
requires a <code class="docutils literal notranslate"><span class="pre">db</span></code> object fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_backends.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_db_initialized</span><span class="p">(</span><span class="n">db</span><span class="p">):</span>
    <span class="c1"># a dummy test</span>
    <span class="k">if</span> <span class="n">db</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;DB2&quot;</span><span class="p">:</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;deliberately failing for demo purposes&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now add a test configuration that generates two invocations of
the <code class="docutils literal notranslate"><span class="pre">test_db_initialized</span></code> function and also implements a factory that
creates a database object for the actual test invocations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;db&quot;</span> <span class="ow">in</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">fixturenames</span><span class="p">:</span>
        <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;db&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;d1&quot;</span><span class="p">,</span> <span class="s2">&quot;d2&quot;</span><span class="p">],</span> <span class="n">indirect</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DB1</span><span class="p">:</span>
    <span class="s2">&quot;one database object&quot;</span>


<span class="k">class</span> <span class="nc">DB2</span><span class="p">:</span>
    <span class="s2">&quot;alternative database object&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">db</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span> <span class="o">==</span> <span class="s2">&quot;d1&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DB1</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span> <span class="o">==</span> <span class="s2">&quot;d2&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DB2</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid internal test config&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let’s first see how it looks like at collection time:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest test_backends.py --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

&lt;Module test_backends.py&gt;
  &lt;Function test_db_initialized[d1]&gt;
  &lt;Function test_db_initialized[d2]&gt;

======================== 2 tests collected in 0.12s ========================
</pre></div>
</div>
<p>And then when we run the test:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q test_backends.py
<span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Red">F</span>                                                                   <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">_________________________ test_db_initialized[d2] __________________________</span>

db = &lt;conftest.DB2 object at 0xdeadbeef0001&gt;

    def test_db_initialized(db):
        # a dummy test
        if db.__class__.__name__ == &quot;DB2&quot;:
&gt;           pytest.fail(&quot;deliberately failing for demo purposes&quot;)
<span class=" -Color -Color-Bold -Color-Bold-Red">E           Failed: deliberately failing for demo purposes</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_backends.py</span>:8: Failed
========================= short test summary info ==========================
FAILED test_backends.py::test_db_initialized[d2] - Failed: deliberately f...
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
<p>The first invocation with <code class="docutils literal notranslate"><span class="pre">db</span> <span class="pre">==</span> <span class="pre">&quot;DB1&quot;</span></code> passed while the second with <code class="docutils literal notranslate"><span class="pre">db</span> <span class="pre">==</span> <span class="pre">&quot;DB2&quot;</span></code> failed.  Our <code class="docutils literal notranslate"><span class="pre">db</span></code> fixture function has instantiated each of the DB values during the setup phase while the <code class="docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code> generated two according calls to the <code class="docutils literal notranslate"><span class="pre">test_db_initialized</span></code> during the collection phase.</p>
</div>
<div class="section" id="indirect-parametrization">
<h5>Indirect parametrization<a class="headerlink" href="#indirect-parametrization" title="Permalink to this headline">¶</a></h5>
<p>Using the <code class="docutils literal notranslate"><span class="pre">indirect=True</span></code> parameter when parametrizing a test allows to
parametrize a test with a fixture receiving the values before passing them to a
test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">fixt</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span> <span class="o">*</span> <span class="mi">3</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;fixt&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">indirect</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_indirect</span><span class="p">(</span><span class="n">fixt</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fixt</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<p>This can be used, for example, to do more expensive setup at test run time in
the fixture, rather than having to run those setup steps at collection time.</p>
</div>
<div class="section" id="apply-indirect-on-particular-arguments">
<h5>Apply indirect on particular arguments<a class="headerlink" href="#apply-indirect-on-particular-arguments" title="Permalink to this headline">¶</a></h5>
<p>Very often parametrization uses more than one argument name. There is opportunity to apply <code class="docutils literal notranslate"><span class="pre">indirect</span></code>
parameter on particular arguments. It can be done by passing list or tuple of
arguments’ names to <code class="docutils literal notranslate"><span class="pre">indirect</span></code>. In the example below there is a function <code class="docutils literal notranslate"><span class="pre">test_indirect</span></code> which uses
two fixtures: <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. Here we give to indirect the list, which contains the name of the
fixture <code class="docutils literal notranslate"><span class="pre">x</span></code>. The indirect parameter will be applied to this argument only, and the value <code class="docutils literal notranslate"><span class="pre">a</span></code>
will be passed to respective fixture function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_indirect_list.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span> <span class="o">*</span> <span class="mi">3</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;function&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span> <span class="o">*</span> <span class="mi">2</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;x, y&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)],</span> <span class="n">indirect</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">test_indirect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;aaa&quot;</span>
    <span class="k">assert</span> <span class="n">y</span> <span class="o">==</span> <span class="s2">&quot;b&quot;</span>
</pre></div>
</div>
<p>The result of this test will be successful:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v test_indirect_list.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 1 item

test_indirect_list.py::test_indirect[a-b] <span class=" -Color -Color-Green">PASSED</span>                     <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
</div>
<div class="section" id="parametrizing-test-methods-through-per-class-configuration">
<h5>Parametrizing test methods through per-class configuration<a class="headerlink" href="#parametrizing-test-methods-through-per-class-configuration" title="Permalink to this headline">¶</a></h5>
<p>Here is an example <code class="docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code> function implementing a
parametrization scheme similar to Michael Foord’s <a class="reference external" href="https://github.com/testing-cabal/unittest-ext/blob/master/params.py">unittest
parametrizer</a> but in a lot less code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of ./test_parametrize.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="c1"># called once per each test function</span>
    <span class="n">funcarglist</span> <span class="o">=</span> <span class="n">metafunc</span><span class="o">.</span><span class="n">cls</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">metafunc</span><span class="o">.</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span>
    <span class="n">argnames</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">funcarglist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
        <span class="n">argnames</span><span class="p">,</span> <span class="p">[[</span><span class="n">funcargs</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">argnames</span><span class="p">]</span> <span class="k">for</span> <span class="n">funcargs</span> <span class="ow">in</span> <span class="n">funcarglist</span><span class="p">]</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="c1"># a map specifying multiple argument sets for a test method</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;test_equals&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">)],</span>
        <span class="s2">&quot;test_zerodivision&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">)],</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">test_equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">test_zerodivision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
            <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
</pre></div>
</div>
<p>Our test generator looks up a class-level definition which specifies which
argument sets to use for each test function.  Let’s run it:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q
<span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Green">..</span>                                                                  <span class=" -Color -Color-Red">[100%]</span>
================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">________________________ TestClass.test_equals[1-2] ________________________</span>

self = &lt;test_parametrize.TestClass object at 0xdeadbeef0002&gt;, a = 1, b = 2

    def test_equals(self, a, b):
&gt;       assert a == b
<span class=" -Color -Color-Bold -Color-Bold-Red">E       assert 1 == 2</span>

<span class=" -Color -Color-Bold -Color-Bold-Red">test_parametrize.py</span>:21: AssertionError
========================= short test summary info ==========================
FAILED test_parametrize.py::TestClass::test_equals[1-2] - assert 1 == 2
<span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">2 passed</span><span class=" -Color -Color-Red"> in 0.12s</span>
</pre></div>
</div>
</div>
<div class="section" id="indirect-parametrization-with-multiple-fixtures">
<h5>Indirect parametrization with multiple fixtures<a class="headerlink" href="#indirect-parametrization-with-multiple-fixtures" title="Permalink to this headline">¶</a></h5>
<p>Here is a stripped down real-life example of using parametrized
testing for testing serialization of objects between different python
interpreters.  We define a <code class="docutils literal notranslate"><span class="pre">test_basic_objects</span></code> function which
is to be run with different sets of arguments for its three arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">python1</span></code>: first python interpreter, run to pickle-dump an object to a file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python2</span></code>: second interpreter, run to pickle-load an object from a file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj</span></code>: object to be dumped/loaded</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">module containing a parametrized tests testing cross-python</span>
<span class="sd">serialization via the pickle module.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">textwrap</span>

<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pythonlist</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;python3.5&quot;</span><span class="p">,</span> <span class="s2">&quot;python3.6&quot;</span><span class="p">,</span> <span class="s2">&quot;python3.7&quot;</span><span class="p">]</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">pythonlist</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">python1</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">tmp_path</span><span class="p">):</span>
    <span class="n">picklefile</span> <span class="o">=</span> <span class="n">tmp_path</span> <span class="o">/</span> <span class="s2">&quot;data.pickle&quot;</span>
    <span class="k">return</span> <span class="n">Python</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">param</span><span class="p">,</span> <span class="n">picklefile</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">pythonlist</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">python2</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">python1</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Python</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">param</span><span class="p">,</span> <span class="n">python1</span><span class="o">.</span><span class="n">picklefile</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Python</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">picklefile</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pythonpath</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">which</span><span class="p">(</span><span class="n">version</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pythonpath</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">version</span><span class="si">!r}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picklefile</span> <span class="o">=</span> <span class="n">picklefile</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">dumpfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">picklefile</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="s2">&quot;dump.py&quot;</span><span class="p">)</span>
        <span class="n">dumpfile</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span>
            <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span>
                <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                import pickle</span>
<span class="sd">                f = open({!r}, &#39;wb&#39;)</span>
<span class="sd">                s = pickle.dump({!r}, f, protocol=2)</span>
<span class="sd">                f.close()</span>
<span class="sd">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">picklefile</span><span class="p">),</span> <span class="n">obj</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">pythonpath</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">dumpfile</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">load_and_is_true</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
        <span class="n">loadfile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">picklefile</span><span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="s2">&quot;load.py&quot;</span><span class="p">)</span>
        <span class="n">loadfile</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span>
            <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span>
                <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                import pickle</span>
<span class="sd">                f = open({!r}, &#39;rb&#39;)</span>
<span class="sd">                obj = pickle.load(f)</span>
<span class="sd">                f.close()</span>
<span class="sd">                res = eval({!r})</span>
<span class="sd">                if not res:</span>
<span class="sd">                    raise SystemExit(1)</span>
<span class="sd">                &quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">picklefile</span><span class="p">),</span> <span class="n">expression</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">loadfile</span><span class="p">)</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">pythonpath</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">loadfile</span><span class="p">)))</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;obj&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">3</span><span class="p">}])</span>
<span class="k">def</span> <span class="nf">test_basic_objects</span><span class="p">(</span><span class="n">python1</span><span class="p">,</span> <span class="n">python2</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="n">python1</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="n">python2</span><span class="o">.</span><span class="n">load_and_is_true</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;obj == </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Running it results in some skips if we don’t have all the python interpreters installed and otherwise runs all combinations (3 interpreters times 3 interpreters times 3 objects to serialize/deserialize):</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>. $ pytest -rs -q multipython.py
<span class=" -Color -Color-Yellow">sssssssssssssssssssssssssss</span>                                          <span class=" -Color -Color-Yellow">[100%]</span>
========================= short test summary info ==========================
SKIPPED [9] multipython.py:29: &#39;python3.5&#39; not found
SKIPPED [9] multipython.py:29: &#39;python3.6&#39; not found
SKIPPED [9] multipython.py:29: &#39;python3.7&#39; not found
<span class=" -Color -Color-Bold -Color-Bold-Yellow">27 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s</span>
</pre></div>
</div>
</div>
<div class="section" id="indirect-parametrization-of-optional-implementations-imports">
<h5>Indirect parametrization of optional implementations/imports<a class="headerlink" href="#indirect-parametrization-of-optional-implementations-imports" title="Permalink to this headline">¶</a></h5>
<p>If you want to compare the outcomes of several implementations of a given
API, you can write test functions that receive the already imported implementations
and get skipped in case the implementation is not importable/available.  Let’s
say we have a “base” implementation and the other (possibly optimized ones)
need to provide similar results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">basemod</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="s2">&quot;base&quot;</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;opt1&quot;</span><span class="p">,</span> <span class="s2">&quot;opt2&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">optmod</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">pytest</span><span class="o">.</span><span class="n">importorskip</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">param</span><span class="p">)</span>
</pre></div>
</div>
<p>And then a base implementation of a simple function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of base.py</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="k">return</span> <span class="mi">1</span>
</pre></div>
</div>
<p>And an optimized version:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of opt1.py</span>
<span class="k">def</span> <span class="nf">func1</span><span class="p">():</span>
    <span class="k">return</span> <span class="mf">1.0001</span>
</pre></div>
</div>
<p>And finally a little test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>


<span class="k">def</span> <span class="nf">test_func1</span><span class="p">(</span><span class="n">basemod</span><span class="p">,</span> <span class="n">optmod</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">round</span><span class="p">(</span><span class="n">basemod</span><span class="o">.</span><span class="n">func1</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="nb">round</span><span class="p">(</span><span class="n">optmod</span><span class="o">.</span><span class="n">func1</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>If you run this with reporting for skips enabled:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -rs test_module.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 2 items

test_module.py <span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Yellow">s</span>                                                    <span class=" -Color -Color-Yellow">[100%]</span>

========================= short test summary info ==========================
SKIPPED [1] conftest.py:12: could not import &#39;opt2&#39;: No module named &#39;opt2&#39;
<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">1 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
<p>You’ll see that we don’t have an <code class="docutils literal notranslate"><span class="pre">opt2</span></code> module and thus the second test run
of our <code class="docutils literal notranslate"><span class="pre">test_func1</span></code> was skipped.  A few notes:</p>
<ul class="simple">
<li><p>the fixture functions in the <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file are “session-scoped” because we
don’t need to import more than once</p></li>
<li><p>if you have multiple test functions and a skipped import, you will see
the <code class="docutils literal notranslate"><span class="pre">[1]</span></code> count increasing in the report</p></li>
<li><p>you can put <a class="reference internal" href="contents.html#pytest-mark-parametrize"><span class="std std-ref">&#64;pytest.mark.parametrize</span></a> style
parametrization on the test functions to parametrize input/output
values as well.</p></li>
</ul>
</div>
<div class="section" id="set-marks-or-test-id-for-individual-parametrized-test">
<h5>Set marks or test ID for individual parametrized test<a class="headerlink" href="#set-marks-or-test-id-for-individual-parametrized-test" title="Permalink to this headline">¶</a></h5>
<p>Use <code class="docutils literal notranslate"><span class="pre">pytest.param</span></code> to apply marks or set test ID to individual parametrized test.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_pytest_param_example.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">&quot;1+7&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">basic</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s2">&quot;2+4&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">basic</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;basic_2+4&quot;</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
            <span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="p">[</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">basic</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">],</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;basic_6*9&quot;</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>In this example, we have 4 parametrized tests. Except for the first test,
we mark the rest three parametrized tests with the custom marker <code class="docutils literal notranslate"><span class="pre">basic</span></code>,
and for the fourth test we also use the built-in mark <code class="docutils literal notranslate"><span class="pre">xfail</span></code> to indicate this
test is expected to fail. For explicitness, we set test ids for some tests.</p>
<p>Then run <code class="docutils literal notranslate"><span class="pre">pytest</span></code> with verbose mode and with only the <code class="docutils literal notranslate"><span class="pre">basic</span></code> marker:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v -m basic
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 24 items / 21 deselected / 3 selected

test_pytest_param_example.py::test_eval[1+7-8] <span class=" -Color -Color-Green">PASSED</span>                <span class=" -Color -Color-Green">[ 33%]</span>
test_pytest_param_example.py::test_eval[basic_2+4] <span class=" -Color -Color-Green">PASSED</span>            <span class=" -Color -Color-Green">[ 66%]</span>
test_pytest_param_example.py::test_eval[basic_6*9] <span class=" -Color -Color-Yellow">XFAIL</span>             <span class=" -Color -Color-Yellow">[100%]</span>

<span class=" -Color -Color-Yellow">=============== </span><span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">21 deselected</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">1 xfailed</span><span class=" -Color -Color-Yellow"> in 0.12s ================</span>
</pre></div>
</div>
<p>As the result:</p>
<ul class="simple">
<li><p>Four tests were collected</p></li>
<li><p>One test was deselected because it doesn’t have the <code class="docutils literal notranslate"><span class="pre">basic</span></code> mark.</p></li>
<li><p>Three tests with the <code class="docutils literal notranslate"><span class="pre">basic</span></code> mark was selected.</p></li>
<li><p>The test <code class="docutils literal notranslate"><span class="pre">test_eval[1+7-8]</span></code> passed, but the name is autogenerated and confusing.</p></li>
<li><p>The test <code class="docutils literal notranslate"><span class="pre">test_eval[basic_2+4]</span></code> passed.</p></li>
<li><p>The test <code class="docutils literal notranslate"><span class="pre">test_eval[basic_6*9]</span></code> was expected to fail and did fail.</p></li>
</ul>
</div>
<div class="section" id="parametrizing-conditional-raising">
<span id="id1"></span><h5>Parametrizing conditional raising<a class="headerlink" href="#parametrizing-conditional-raising" title="Permalink to this headline">¶</a></h5>
<p>Use <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> with the
<a class="reference internal" href="contents.html#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a> decorator to write parametrized tests
in which some tests raise exceptions and others do not.</p>
<p>It may be helpful to use <code class="docutils literal notranslate"><span class="pre">nullcontext</span></code> as a complement to <code class="docutils literal notranslate"><span class="pre">raises</span></code>.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">nullcontext</span> <span class="k">as</span> <span class="n">does_not_raise</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;example_input,expectation&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">does_not_raise</span><span class="p">()),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">does_not_raise</span><span class="p">()),</span>
        <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">does_not_raise</span><span class="p">()),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">)),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_division</span><span class="p">(</span><span class="n">example_input</span><span class="p">,</span> <span class="n">expectation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Test how much I know division.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">expectation</span><span class="p">:</span>
        <span class="k">assert</span> <span class="p">(</span><span class="mi">6</span> <span class="o">/</span> <span class="n">example_input</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</pre></div>
</div>
<p>In the example above, the first three test cases should run unexceptionally,
while the fourth should raise <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code>.</p>
</div>
</div>
<span id="document-example/markers"></span><div class="section" id="working-with-custom-markers">
<span id="mark-examples"></span><h4>Working with custom markers<a class="headerlink" href="#working-with-custom-markers" title="Permalink to this headline">¶</a></h4>
<p>Here are some examples using the <a class="reference internal" href="contents.html#mark"><span class="std std-ref">How to mark test functions with attributes</span></a> mechanism.</p>
<div class="section" id="marking-test-functions-and-selecting-them-for-a-run">
<span id="mark-run"></span><h5>Marking test functions and selecting them for a run<a class="headerlink" href="#marking-test-functions-and-selecting-them-for-a-run" title="Permalink to this headline">¶</a></h5>
<p>You can “mark” a test function with custom metadata like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_server.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
<span class="k">def</span> <span class="nf">test_send_http</span><span class="p">():</span>
    <span class="k">pass</span>  <span class="c1"># perform some webtest test for your app</span>


<span class="k">def</span> <span class="nf">test_something_quick</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">test_another</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>You can then restrict a test run to only run tests marked with <code class="docutils literal notranslate"><span class="pre">webtest</span></code>:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v -m webtest
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 4 items / 3 deselected / 1 selected

test_server.py::test_send_http <span class=" -Color -Color-Green">PASSED</span>                                <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span>, <span class=" -Color -Color-Yellow">3 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
<p>Or the inverse, running all tests except the webtest ones:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v -m &quot;not webtest&quot;
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 4 items / 1 deselected / 3 selected

test_server.py::test_something_quick <span class=" -Color -Color-Green">PASSED</span>                          <span class=" -Color -Color-Green">[ 33%]</span>
test_server.py::test_another <span class=" -Color -Color-Green">PASSED</span>                                  <span class=" -Color -Color-Green">[ 66%]</span>
test_server.py::TestClass::test_method <span class=" -Color -Color-Green">PASSED</span>                        <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">3 passed</span>, <span class=" -Color -Color-Yellow">1 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
</div>
<div class="section" id="selecting-tests-based-on-their-node-id">
<h5>Selecting tests based on their node ID<a class="headerlink" href="#selecting-tests-based-on-their-node-id" title="Permalink to this headline">¶</a></h5>
<p>You can provide one or more <a class="reference internal" href="#node-id"><span class="std std-ref">node IDs</span></a> as positional
arguments to select only specified tests. This makes it easy to select
tests based on their module, class, method, or function name:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v test_server.py::TestClass::test_method
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 1 item

test_server.py::TestClass::test_method <span class=" -Color -Color-Green">PASSED</span>                        <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>You can also select on the class:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v test_server.py::TestClass
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 1 item

test_server.py::TestClass::test_method <span class=" -Color -Color-Green">PASSED</span>                        <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>Or select multiple nodes:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v test_server.py::TestClass test_server.py::test_send_http
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 2 items

test_server.py::TestClass::test_method <span class=" -Color -Color-Green">PASSED</span>                        <span class=" -Color -Color-Green">[ 50%]</span>
test_server.py::test_send_http <span class=" -Color -Color-Green">PASSED</span>                                <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<div class="admonition note" id="node-id">
<p class="admonition-title">Note</p>
<p>Node IDs are of the form <code class="docutils literal notranslate"><span class="pre">module.py::class::method</span></code> or
<code class="docutils literal notranslate"><span class="pre">module.py::function</span></code>.  Node IDs control which tests are
collected, so <code class="docutils literal notranslate"><span class="pre">module.py::class</span></code> will select all test methods
on the class.  Nodes are also created for each parameter of a
parametrized fixture or test, so selecting a parametrized test
must include the parameter value, e.g.
<code class="docutils literal notranslate"><span class="pre">module.py::function[param]</span></code>.</p>
<p>Node IDs for failing tests are displayed in the test summary info
when running pytest with the <code class="docutils literal notranslate"><span class="pre">-rf</span></code> option.  You can also
construct Node IDs from the output of <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--collectonly</span></code>.</p>
</div>
</div>
<div class="section" id="using-k-expr-to-select-tests-based-on-their-name">
<h5>Using <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">expr</span></code> to select tests based on their name<a class="headerlink" href="#using-k-expr-to-select-tests-based-on-their-name" title="Permalink to this headline">¶</a></h5>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0/2.3.4.</span></p>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">-k</span></code> command line option to specify an expression
which implements a substring match on the test names instead of the
exact match on markers that <code class="docutils literal notranslate"><span class="pre">-m</span></code> provides.  This makes it easy to
select tests based on their names:</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 5.4.</span></p>
</div>
<p>The expression matching is now case-insensitive.</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -v -k http  # running with the above defined example module
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 4 items / 3 deselected / 1 selected

test_server.py::test_send_http <span class=" -Color -Color-Green">PASSED</span>                                <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span>, <span class=" -Color -Color-Yellow">3 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
<p>And you can also run all tests except the ones that match the keyword:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -k &quot;not send_http&quot; -v
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 4 items / 1 deselected / 3 selected

test_server.py::test_something_quick <span class=" -Color -Color-Green">PASSED</span>                          <span class=" -Color -Color-Green">[ 33%]</span>
test_server.py::test_another <span class=" -Color -Color-Green">PASSED</span>                                  <span class=" -Color -Color-Green">[ 66%]</span>
test_server.py::TestClass::test_method <span class=" -Color -Color-Green">PASSED</span>                        <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">3 passed</span>, <span class=" -Color -Color-Yellow">1 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
<p>Or to select “http” and “quick” tests:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -k &quot;http or quick&quot; -v
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project
<span class=" -Color -Color-Bold">collecting ...</span> collected 4 items / 2 deselected / 2 selected

test_server.py::test_send_http <span class=" -Color -Color-Green">PASSED</span>                                <span class=" -Color -Color-Green">[ 50%]</span>
test_server.py::test_something_quick <span class=" -Color -Color-Green">PASSED</span>                          <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">2 passed</span>, <span class=" -Color -Color-Yellow">2 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">or</span></code>, <code class="docutils literal notranslate"><span class="pre">not</span></code> and parentheses.</p>
<p>In addition to the test’s name, <code class="docutils literal notranslate"><span class="pre">-k</span></code> also matches the names of the test’s parents (usually, the name of the file and class it’s in),
attributes set on the test function, markers applied to it or its parents and any <a class="reference internal" href="contents.html#pytest.nodes.Node.extra_keyword_matches" title="_pytest.nodes.Node.extra_keyword_matches"><code class="xref py py-attr docutils literal notranslate"><span class="pre">extra</span> <span class="pre">keywords</span></code></a>
explicitly added to it or its parents.</p>
</div>
<div class="section" id="registering-markers">
<h5>Registering markers<a class="headerlink" href="#registering-markers" title="Permalink to this headline">¶</a></h5>
<p>Registering markers for your test suite is simple:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">markers</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">webtest: mark a test as a webtest.</span><span class="w"></span>
<span class="w">    </span><span class="na">slow: mark test as slow.</span><span class="w"></span>
</pre></div>
</div>
<p>Multiple custom markers can be registered, by defining each one in its own line, as shown in above example.</p>
<p>You can ask which markers exist for your test suite - the list includes our just defined <code class="docutils literal notranslate"><span class="pre">webtest</span></code> and <code class="docutils literal notranslate"><span class="pre">slow</span></code> markers:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --markers
@pytest.mark.webtest: mark a test as a webtest.

@pytest.mark.slow: mark test as slow.

@pytest.mark.filterwarnings(warning): add a warning filter to the given test. see https://docs.pytest.org/en/stable/how-to/capture-warnings.html#pytest-mark-filterwarnings

@pytest.mark.skip(reason=None): skip the given test function with an optional reason. Example: skip(reason=&quot;no way of currently testing this&quot;) skips the test.

@pytest.mark.skipif(condition, ..., *, reason=...): skip the given test function if any of the conditions evaluate to True. Example: skipif(sys.platform == &#39;win32&#39;) skips the test if we are on the win32 platform. See https://docs.pytest.org/en/stable/reference/reference.html#pytest-mark-skipif

@pytest.mark.xfail(condition, ..., *, reason=..., run=True, raises=None, strict=xfail_strict): mark the test function as an expected failure if any of the conditions evaluate to True. Optionally specify a reason for better reporting and run=False if you don&#39;t even want to execute the test function. If only specific exception(s) are expected, you can list them in raises, and if the test fails in other ways, it will be reported as a true failure. See https://docs.pytest.org/en/stable/reference/reference.html#pytest-mark-xfail

@pytest.mark.parametrize(argnames, argvalues): call a test function multiple times passing in different arguments in turn. argvalues generally needs to be a list of values if argnames specifies only one name or a list of tuples of values if argnames specifies multiple names. Example: @parametrize(&#39;arg1&#39;, [1,2]) would lead to two calls of the decorated test function, one with arg1=1 and another with arg1=2.see https://docs.pytest.org/en/stable/how-to/parametrize.html for more info and examples.

@pytest.mark.usefixtures(fixturename1, fixturename2, ...): mark tests as needing all of the specified fixtures. see https://docs.pytest.org/en/stable/explanation/fixtures.html#usefixtures

@pytest.mark.tryfirst: mark a hook implementation function such that the plugin machinery will try to call it first/as early as possible.

@pytest.mark.trylast: mark a hook implementation function such that the plugin machinery will try to call it last/as late as possible.
</pre></div>
</div>
<p>For an example on how to add and work with markers from a plugin, see
<a class="reference internal" href="#adding-a-custom-marker-from-a-plugin"><span class="std std-ref">Custom marker and command line option to control test runs</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to explicitly register markers so that:</p>
<ul class="simple">
<li><p>There is one place in your test suite defining your markers</p></li>
<li><p>Asking for existing markers via <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--markers</span></code> gives good output</p></li>
<li><p>Typos in function markers are treated as an error if you use
the <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> option.</p></li>
</ul>
</div>
</div>
<div class="section" id="marking-whole-classes-or-modules">
<span id="scoped-marking"></span><h5>Marking whole classes or modules<a class="headerlink" href="#marking-whole-classes-or-modules" title="Permalink to this headline">¶</a></h5>
<p>You may use <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> decorators with classes to apply markers to all of
its test methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_mark_classlevel.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test_startup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">test_startup_and_more</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>This is equivalent to directly applying the decorator to the
two test functions.</p>
<p>To apply marks at the module level, use the <a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a> global variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
</pre></div>
</div>
<p>or multiple markers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytestmark</span> <span class="o">=</span> <span class="p">[</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span><span class="p">,</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">slowtest</span><span class="p">]</span>
</pre></div>
</div>
<p>Due to legacy reasons, before class decorators were introduced, it is possible to set the
<a class="reference internal" href="contents.html#globalvar-pytestmark"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytestmark</span></code></a> attribute on a test class like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">webtest</span>
</pre></div>
</div>
</div>
<div class="section" id="marking-individual-tests-when-using-parametrize">
<span id="id1"></span><h5>Marking individual tests when using parametrize<a class="headerlink" href="#marking-individual-tests-when-using-parametrize" title="Permalink to this headline">¶</a></h5>
<p>When using parametrize, applying a mark will make it apply
to each individual test. However it is also possible to
apply a marker to an individual test instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">foo</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;expected&quot;</span><span class="p">),</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">bar</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_increment</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>In this example the mark “foo” will apply to each of the three
tests, whereas the “bar” mark is only applied to the second test.
Skip and xfail marks can also be applied in this way, see <a class="reference internal" href="contents.html#skip-xfail-with-parametrize"><span class="std std-ref">Skip/xfail with parametrize</span></a>.</p>
</div>
<div class="section" id="custom-marker-and-command-line-option-to-control-test-runs">
<span id="adding-a-custom-marker-from-a-plugin"></span><h5>Custom marker and command line option to control test runs<a class="headerlink" href="#custom-marker-and-command-line-option-to-control-test-runs" title="Permalink to this headline">¶</a></h5>
<p>Plugins can provide custom markers and implement specific behaviour
based on it. This is a self-contained example which adds a command
line option and a parametrized test function marker to run tests
specifies via named environments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_addoption</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">addoption</span><span class="p">(</span>
        <span class="s2">&quot;-E&quot;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store&quot;</span><span class="p">,</span>
        <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;only run tests matching the environment NAME.&quot;</span><span class="p">,</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">(</span><span class="n">config</span><span class="p">):</span>
    <span class="c1"># register an additional marker</span>
    <span class="n">config</span><span class="o">.</span><span class="n">addinivalue_line</span><span class="p">(</span>
        <span class="s2">&quot;markers&quot;</span><span class="p">,</span> <span class="s2">&quot;env(name): mark test to run only on named environment&quot;</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="n">envnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">mark</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;env&quot;</span><span class="p">)]</span>
    <span class="k">if</span> <span class="n">envnames</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getoption</span><span class="p">(</span><span class="s2">&quot;-E&quot;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">envnames</span><span class="p">:</span>
            <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;test requires env in </span><span class="si">{!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">envnames</span><span class="p">))</span>
</pre></div>
</div>
<p>A test file using this local plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_someenv.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">env</span><span class="p">(</span><span class="s2">&quot;stage1&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_basic_db_operation</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>and an example invocations specifying a different environment than what
the test needs:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -E stage2
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_someenv.py <span class=" -Color -Color-Yellow">s</span>                                                    <span class=" -Color -Color-Yellow">[100%]</span>

<span class=" -Color -Color-Yellow">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Yellow">1 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s ============================</span>
</pre></div>
</div>
<p>and here is one that specifies exactly the environment needed:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -E stage1
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 1 item

test_someenv.py <span class=" -Color -Color-Green">.</span>                                                    <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">============================ </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s =============================</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--markers</span></code> option always gives you a list of available markers:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --markers
@pytest.mark.env(name): mark test to run only on named environment

@pytest.mark.filterwarnings(warning): add a warning filter to the given test. see https://docs.pytest.org/en/stable/how-to/capture-warnings.html#pytest-mark-filterwarnings

@pytest.mark.skip(reason=None): skip the given test function with an optional reason. Example: skip(reason=&quot;no way of currently testing this&quot;) skips the test.

@pytest.mark.skipif(condition, ..., *, reason=...): skip the given test function if any of the conditions evaluate to True. Example: skipif(sys.platform == &#39;win32&#39;) skips the test if we are on the win32 platform. See https://docs.pytest.org/en/stable/reference/reference.html#pytest-mark-skipif

@pytest.mark.xfail(condition, ..., *, reason=..., run=True, raises=None, strict=xfail_strict): mark the test function as an expected failure if any of the conditions evaluate to True. Optionally specify a reason for better reporting and run=False if you don&#39;t even want to execute the test function. If only specific exception(s) are expected, you can list them in raises, and if the test fails in other ways, it will be reported as a true failure. See https://docs.pytest.org/en/stable/reference/reference.html#pytest-mark-xfail

@pytest.mark.parametrize(argnames, argvalues): call a test function multiple times passing in different arguments in turn. argvalues generally needs to be a list of values if argnames specifies only one name or a list of tuples of values if argnames specifies multiple names. Example: @parametrize(&#39;arg1&#39;, [1,2]) would lead to two calls of the decorated test function, one with arg1=1 and another with arg1=2.see https://docs.pytest.org/en/stable/how-to/parametrize.html for more info and examples.

@pytest.mark.usefixtures(fixturename1, fixturename2, ...): mark tests as needing all of the specified fixtures. see https://docs.pytest.org/en/stable/explanation/fixtures.html#usefixtures

@pytest.mark.tryfirst: mark a hook implementation function such that the plugin machinery will try to call it first/as early as possible.

@pytest.mark.trylast: mark a hook implementation function such that the plugin machinery will try to call it last/as late as possible.
</pre></div>
</div>
</div>
<div class="section" id="passing-a-callable-to-custom-markers">
<span id="passing-callables-to-custom-markers"></span><h5>Passing a callable to custom markers<a class="headerlink" href="#passing-a-callable-to-custom-markers" title="Permalink to this headline">¶</a></h5>
<p>Below is the config file that will be used in the next examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_marker&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>
</div>
<p>A custom marker can have its argument set, i.e. <code class="docutils literal notranslate"><span class="pre">args</span></code> and <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> properties, defined by either invoking it as a callable or using <code class="docutils literal notranslate"><span class="pre">pytest.mark.MARKER_NAME.with_args</span></code>. These two methods achieve the same effect most of the time.</p>
<p>However, if there is a callable as the single positional argument with no keyword arguments, using the <code class="docutils literal notranslate"><span class="pre">pytest.mark.MARKER_NAME(c)</span></code> will not pass <code class="docutils literal notranslate"><span class="pre">c</span></code> as a positional argument but decorate <code class="docutils literal notranslate"><span class="pre">c</span></code> with the custom marker (see <a class="reference internal" href="contents.html#mark"><span class="std std-ref">MarkDecorator</span></a>). Fortunately, <code class="docutils literal notranslate"><span class="pre">pytest.mark.MARKER_NAME.with_args</span></code> comes to the rescue:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_custom_marker.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Hello World&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">my_marker</span><span class="o">.</span><span class="n">with_args</span><span class="p">(</span><span class="n">hello_world</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_with_args</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The output is as follows:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q -s
Mark(name=&#39;my_marker&#39;, args=(&lt;function hello_world at 0xdeadbeef0001&gt;,), kwargs={})
.
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
<p>We can see that the custom marker has its argument set extended with the function <code class="docutils literal notranslate"><span class="pre">hello_world</span></code>. This is the key difference between creating a custom marker as a callable, which invokes <code class="docutils literal notranslate"><span class="pre">__call__</span></code> behind the scenes, and using <code class="docutils literal notranslate"><span class="pre">with_args</span></code>.</p>
</div>
<div class="section" id="reading-markers-which-were-set-from-multiple-places">
<h5>Reading markers which were set from multiple places<a class="headerlink" href="#reading-markers-which-were-set-from-multiple-places" title="Permalink to this headline">¶</a></h5>
<p>If you are heavily using markers in your test suite you may encounter the case where a marker is applied several times to a test function.  From plugin
code you can read over all such settings.  Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_mark_three_times.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">pytestmark</span> <span class="o">=</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;module&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>Here we have the marker “glob” applied three times to the same
test function.  From a conftest file we can read it like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;glob&quot;</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;glob args=</span><span class="si">{}</span><span class="s2"> kwargs=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mark</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">mark</span><span class="o">.</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>
</div>
<p>Let’s run this without capturing output and see what we get:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q -s
glob args=(&#39;function&#39;,) kwargs={&#39;x&#39;: 3}
glob args=(&#39;class&#39;,) kwargs={&#39;x&#39;: 2}
glob args=(&#39;module&#39;,) kwargs={&#39;x&#39;: 1}
.
<span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
</div>
<div class="section" id="marking-platform-specific-tests-with-pytest">
<h5>Marking platform specific tests with pytest<a class="headerlink" href="#marking-platform-specific-tests-with-pytest" title="Permalink to this headline">¶</a></h5>
<p>Consider you have a test suite which marks tests for particular platforms,
namely <code class="docutils literal notranslate"><span class="pre">pytest.mark.darwin</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.mark.win32</span></code> etc. and you
also have tests that run on all platforms and have no specific
marker.  If you now want to have a way to only run the tests
for your particular platform, you could use the following plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="c1">#</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">ALL</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s2">&quot;darwin linux win32&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>


<span class="k">def</span> <span class="nf">pytest_runtest_setup</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="n">supported_platforms</span> <span class="o">=</span> <span class="n">ALL</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">mark</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">mark</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">())</span>
    <span class="n">plat</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span>
    <span class="k">if</span> <span class="n">supported_platforms</span> <span class="ow">and</span> <span class="n">plat</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">supported_platforms</span><span class="p">:</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s2">&quot;cannot run on platform </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plat</span><span class="p">))</span>
</pre></div>
</div>
<p>then tests will be skipped if they were specified for a different platform.
Let’s do a little test file to show how this looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_plat.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">darwin</span>
<span class="k">def</span> <span class="nf">test_if_apple_is_evil</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">linux</span>
<span class="k">def</span> <span class="nf">test_if_linux_works</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">win32</span>
<span class="k">def</span> <span class="nf">test_if_win32_crashes</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">test_runs_everywhere</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>then you will see two tests skipped and two executed tests as expected:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -rs # this option reports skip reasons
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items

test_plat.py <span class=" -Color -Color-Yellow">s</span><span class=" -Color -Color-Green">.</span><span class=" -Color -Color-Yellow">s</span><span class=" -Color -Color-Green">.</span>                                                    <span class=" -Color -Color-Yellow">[100%]</span>

========================= short test summary info ==========================
SKIPPED [2] conftest.py:12: cannot run on platform linux
<span class=" -Color -Color-Yellow">======================= </span><span class=" -Color -Color-Green">2 passed</span>, <span class=" -Color -Color-Bold -Color-Bold-Yellow">2 skipped</span><span class=" -Color -Color-Yellow"> in 0.12s =======================</span>
</pre></div>
</div>
<p>Note that if you specify a platform via the marker-command line option like this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -m linux
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items / 3 deselected / 1 selected

test_plat.py <span class=" -Color -Color-Green">.</span>                                                       <span class=" -Color -Color-Green">[100%]</span>

<span class=" -Color -Color-Green">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Green">1 passed</span>, <span class=" -Color -Color-Yellow">3 deselected</span><span class=" -Color -Color-Green"> in 0.12s ======================</span>
</pre></div>
</div>
<p>then the unmarked-tests will not be run.  It is thus a way to restrict the run to the specific tests.</p>
</div>
<div class="section" id="automatically-adding-markers-based-on-test-names">
<h5>Automatically adding markers based on test names<a class="headerlink" href="#automatically-adding-markers-based-on-test-names" title="Permalink to this headline">¶</a></h5>
<p>If you have a test suite where test function names indicate a certain
type of test, you can implement a hook that automatically defines
markers so that you can use the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option with it. Let’s look
at this test module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>


<span class="k">def</span> <span class="nf">test_interface_simple</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_interface_complex</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_event_simple</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_something_else</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">0</span>
</pre></div>
</div>
<p>We want to dynamically define two markers and can do it in a
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_collection_modifyitems</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;interface&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">nodeid</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">interface</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;event&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">nodeid</span><span class="p">:</span>
            <span class="n">item</span><span class="o">.</span><span class="n">add_marker</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now use the <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">option</span></code> to select one set:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -m interface --tb=short
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items / 2 deselected / 2 selected

test_module.py <span class=" -Color -Color-Red">FF</span>                                                    <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ test_interface_simple ___________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:4: in test_interface_simple
    assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ test_interface_complex __________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:8: in test_interface_complex
    assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
========================= short test summary info ==========================
FAILED test_module.py::test_interface_simple - assert 0
FAILED test_module.py::test_interface_complex - assert 0
<span class=" -Color -Color-Red">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Red">2 failed</span>, <span class=" -Color -Color-Yellow">2 deselected</span><span class=" -Color -Color-Red"> in 0.12s ======================</span>
</pre></div>
</div>
<p>or to select both “event” and “interface” tests:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -m &quot;interface or event&quot; --tb=short
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project
collected 4 items / 1 deselected / 3 selected

test_module.py <span class=" -Color -Color-Red">FFF</span>                                                   <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ test_interface_simple ___________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:4: in test_interface_simple
    assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">__________________________ test_interface_complex __________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:8: in test_interface_complex
    assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">____________________________ test_event_simple _____________________________</span>
<span class=" -Color -Color-Bold -Color-Bold-Red">test_module.py</span>:12: in test_event_simple
    assert 0
<span class=" -Color -Color-Bold -Color-Bold-Red">E   assert 0</span>
========================= short test summary info ==========================
FAILED test_module.py::test_interface_simple - assert 0
FAILED test_module.py::test_interface_complex - assert 0
FAILED test_module.py::test_event_simple - assert 0
<span class=" -Color -Color-Red">===================== </span><span class=" -Color -Color-Bold -Color-Bold-Red">3 failed</span>, <span class=" -Color -Color-Yellow">1 deselected</span><span class=" -Color -Color-Red"> in 0.12s ======================</span>
</pre></div>
</div>
</div>
</div>
<span id="document-example/special"></span><div class="section" id="a-session-fixture-which-can-look-at-all-collected-tests">
<h4>A session-fixture which can look at all collected tests<a class="headerlink" href="#a-session-fixture-which-can-look-at-all-collected-tests" title="Permalink to this headline">¶</a></h4>
<p>A session-scoped fixture effectively has access to all
collected test items.  Here is an example of a fixture
function which walks all collected tests and looks
if their test class defines a <code class="docutils literal notranslate"><span class="pre">callme</span></code> method and
calls it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>

<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="n">autouse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">callattr_ahead_of_alltests</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;callattr_ahead_of_alltests called&quot;</span><span class="p">)</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="p">{</span><span class="kc">None</span><span class="p">}</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">node</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">session</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">getparent</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">Class</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;callme&quot;</span><span class="p">):</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">callme</span><span class="p">()</span>
            <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</pre></div>
</div>
<p>test classes may now define a <code class="docutils literal notranslate"><span class="pre">callme</span></code> method which
will be called ahead of running any tests:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of test_module.py</span>


<span class="k">class</span> <span class="nc">TestHello</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">callme</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;callme called!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_method1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test_method1 called&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_method2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test_method2 called&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">TestOther</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">callme</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;callme other called&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_other</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test other&quot;</span><span class="p">)</span>


<span class="c1"># works with unittest as well ...</span>
<span class="kn">import</span> <span class="nn">unittest</span>


<span class="k">class</span> <span class="nc">SomeTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">callme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SomeTest callme called&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_unit1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;test_unit1 method called&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you run this without output capturing:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest -q -s test_module.py
callattr_ahead_of_alltests called
callme called!
callme other called
SomeTest callme called
test_method1 called
.test_method2 called
.test other
.test_unit1 method called
.
<span class=" -Color -Color-Bold -Color-Bold-Green">4 passed</span><span class=" -Color -Color-Green"> in 0.12s</span>
</pre></div>
</div>
</div>
<span id="document-example/pythoncollection"></span><div class="section" id="changing-standard-python-test-discovery">
<h4>Changing standard (Python) test discovery<a class="headerlink" href="#changing-standard-python-test-discovery" title="Permalink to this headline">¶</a></h4>
<div class="section" id="ignore-paths-during-test-collection">
<h5>Ignore paths during test collection<a class="headerlink" href="#ignore-paths-during-test-collection" title="Permalink to this headline">¶</a></h5>
<p>You can easily ignore certain test directories and modules during collection
by passing the <code class="docutils literal notranslate"><span class="pre">--ignore=path</span></code> option on the cli. <code class="docutils literal notranslate"><span class="pre">pytest</span></code> allows multiple
<code class="docutils literal notranslate"><span class="pre">--ignore</span></code> options. Example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>tests/
|-- example
|   |-- test_example_01.py
|   |-- test_example_02.py
|   &#39;-- test_example_03.py
|-- foobar
|   |-- test_foobar_01.py
|   |-- test_foobar_02.py
|   &#39;-- test_foobar_03.py
&#39;-- hello
    &#39;-- world
        |-- test_world_01.py
        |-- test_world_02.py
        &#39;-- test_world_03.py
</pre></div>
</div>
<p>Now if you invoke <code class="docutils literal notranslate"><span class="pre">pytest</span></code> with <code class="docutils literal notranslate"><span class="pre">--ignore=tests/foobar/test_foobar_03.py</span> <span class="pre">--ignore=tests/hello/</span></code>,
you will see that <code class="docutils literal notranslate"><span class="pre">pytest</span></code> only collects test-modules, which do not match the patterns specified:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-5.x.y, py-1.x.y, pluggy-0.x.y
rootdir: $REGENDOC_TMPDIR, inifile:
collected 5 items

tests/example/test_example_01.py <span class=" -Color -Color-Green">.</span>                                   <span class=" -Color -Color-Green">[ 20%]</span>
tests/example/test_example_02.py <span class=" -Color -Color-Green">.</span>                                   <span class=" -Color -Color-Green">[ 40%]</span>
tests/example/test_example_03.py <span class=" -Color -Color-Green">.</span>                                   <span class=" -Color -Color-Green">[ 60%]</span>
tests/foobar/test_foobar_01.py <span class=" -Color -Color-Green">.</span>                                     <span class=" -Color -Color-Green">[ 80%]</span>
tests/foobar/test_foobar_02.py <span class=" -Color -Color-Green">.</span>                                     <span class=" -Color -Color-Green">[100%]</span>

========================= 5 passed in 0.02 seconds =========================
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--ignore-glob</span></code> option allows to ignore test file paths based on Unix shell-style wildcards.
If you want to exclude test-modules that end with <code class="docutils literal notranslate"><span class="pre">_01.py</span></code>, execute <code class="docutils literal notranslate"><span class="pre">pytest</span></code> with <code class="docutils literal notranslate"><span class="pre">--ignore-glob='*_01.py'</span></code>.</p>
</div>
<div class="section" id="deselect-tests-during-test-collection">
<h5>Deselect tests during test collection<a class="headerlink" href="#deselect-tests-during-test-collection" title="Permalink to this headline">¶</a></h5>
<p>Tests can individually be deselected during collection by passing the <code class="docutils literal notranslate"><span class="pre">--deselect=item</span></code> option.
For example, say <code class="docutils literal notranslate"><span class="pre">tests/foobar/test_foobar_01.py</span></code> contains <code class="docutils literal notranslate"><span class="pre">test_a</span></code> and <code class="docutils literal notranslate"><span class="pre">test_b</span></code>.
You can run all of the tests within <code class="docutils literal notranslate"><span class="pre">tests/</span></code> <em>except</em> for <code class="docutils literal notranslate"><span class="pre">tests/foobar/test_foobar_01.py::test_a</span></code>
by invoking <code class="docutils literal notranslate"><span class="pre">pytest</span></code> with <code class="docutils literal notranslate"><span class="pre">--deselect</span> <span class="pre">tests/foobar/test_foobar_01.py::test_a</span></code>.
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> allows multiple <code class="docutils literal notranslate"><span class="pre">--deselect</span></code> options.</p>
</div>
<div class="section" id="keeping-duplicate-paths-specified-from-command-line">
<h5>Keeping duplicate paths specified from command line<a class="headerlink" href="#keeping-duplicate-paths-specified-from-command-line" title="Permalink to this headline">¶</a></h5>
<p>Default behavior of <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is to ignore duplicate paths specified from the command line.
Example:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>pytest path_a path_a

...
collected 1 item
...
</pre></div>
</div>
<p>Just collect tests once.</p>
<p>To collect duplicate tests, use the <code class="docutils literal notranslate"><span class="pre">--keep-duplicates</span></code> option on the cli.
Example:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>pytest --keep-duplicates path_a path_a

...
collected 2 items
...
</pre></div>
</div>
<p>As the collector just works on directories, if you specify twice a single test file, <code class="docutils literal notranslate"><span class="pre">pytest</span></code> will
still collect it twice, no matter if the <code class="docutils literal notranslate"><span class="pre">--keep-duplicates</span></code> is not specified.
Example:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>pytest test_a.py test_a.py

...
collected 2 items
...
</pre></div>
</div>
</div>
<div class="section" id="changing-directory-recursion">
<h5>Changing directory recursion<a class="headerlink" href="#changing-directory-recursion" title="Permalink to this headline">¶</a></h5>
<p>You can set the <a class="reference internal" href="contents.html#confval-norecursedirs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">norecursedirs</span></code></a> option in an ini-file, for example your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> in the project root directory:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">norecursedirs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">.svn _build tmp*</span><span class="w"></span>
</pre></div>
</div>
<p>This would tell <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to not recurse into typical subversion or sphinx-build directories or into any <code class="docutils literal notranslate"><span class="pre">tmp</span></code> prefixed directory.</p>
</div>
<div class="section" id="changing-naming-conventions">
<span id="change-naming-conventions"></span><h5>Changing naming conventions<a class="headerlink" href="#changing-naming-conventions" title="Permalink to this headline">¶</a></h5>
<p>You can configure different naming conventions by setting
the <a class="reference internal" href="contents.html#confval-python_files"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_files</span></code></a>, <a class="reference internal" href="contents.html#confval-python_classes"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_classes</span></code></a> and
<a class="reference internal" href="contents.html#confval-python_functions"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_functions</span></code></a> in your <a class="reference internal" href="contents.html#config-file-formats"><span class="std std-ref">configuration file</span></a>.
Here is an example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="c1"># Example 1: have pytest look for &quot;check&quot; instead of &quot;test&quot;</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">check_*.py</span><span class="w"></span>
<span class="na">python_classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Check</span><span class="w"></span>
<span class="na">python_functions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*_check</span><span class="w"></span>
</pre></div>
</div>
<p>This would make <code class="docutils literal notranslate"><span class="pre">pytest</span></code> look for tests in files that match the <code class="docutils literal notranslate"><span class="pre">check_*</span>
<span class="pre">.py</span></code> glob-pattern, <code class="docutils literal notranslate"><span class="pre">Check</span></code> prefixes in classes, and functions and methods
that match <code class="docutils literal notranslate"><span class="pre">*_check</span></code>. For example, if we have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of check_myapp.py</span>
<span class="k">class</span> <span class="nc">CheckMyApp</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">simple_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">complex_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The test collection would look like this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project, configfile: pytest.ini
collected 2 items

&lt;Module check_myapp.py&gt;
  &lt;Class CheckMyApp&gt;
    &lt;Function simple_check&gt;
    &lt;Function complex_check&gt;

======================== 2 tests collected in 0.12s ========================
</pre></div>
</div>
<p>You can check for multiple glob patterns by adding a space between the patterns:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example 2: have pytest look for files with &quot;test&quot; and &quot;example&quot;</span><span class="w"></span>
<span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test_*.py example_*.py</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>the <code class="docutils literal notranslate"><span class="pre">python_functions</span></code> and <code class="docutils literal notranslate"><span class="pre">python_classes</span></code> options has no effect
for <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> test discovery because pytest delegates
discovery of test case methods to unittest code.</p>
</div>
</div>
<div class="section" id="interpreting-cmdline-arguments-as-python-packages">
<h5>Interpreting cmdline arguments as Python packages<a class="headerlink" href="#interpreting-cmdline-arguments-as-python-packages" title="Permalink to this headline">¶</a></h5>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code> option to make <code class="docutils literal notranslate"><span class="pre">pytest</span></code> try
interpreting arguments as python package names, deriving
their file system path and then running the test. For
example if you have unittest2 installed you can type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest --pyargs unittest2.test.test_skipping -q
</pre></div>
</div>
<p>which would run the respective test module.  Like with
other options, through an ini-file and the <a class="reference internal" href="contents.html#confval-addopts"><code class="xref std std-confval docutils literal notranslate"><span class="pre">addopts</span></code></a> option you
can make this change more permanently:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">--pyargs</span><span class="w"></span>
</pre></div>
</div>
<p>Now a simple invocation of <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">NAME</span></code> will check
if NAME exists as an importable package/module and otherwise
treat it as a filesystem path.</p>
</div>
<div class="section" id="finding-out-what-is-collected">
<h5>Finding out what is collected<a class="headerlink" href="#finding-out-what-is-collected" title="Permalink to this headline">¶</a></h5>
<p>You can always peek at the collection tree without running tests like this:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>. $ pytest --collect-only pythoncollection.py
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project, configfile: pytest.ini
collected 3 items

&lt;Module CWD/pythoncollection.py&gt;
  &lt;Function test_function&gt;
  &lt;Class TestClass&gt;
    &lt;Function test_method&gt;
    &lt;Function test_anothermethod&gt;

======================== 3 tests collected in 0.12s ========================
</pre></div>
</div>
</div>
<div class="section" id="customizing-test-collection">
<span id="id1"></span><h5>Customizing test collection<a class="headerlink" href="#customizing-test-collection" title="Permalink to this headline">¶</a></h5>
<p>You can easily instruct <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to discover tests from every Python file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pytest.ini</span><span class="w"></span>
<span class="k">[pytest]</span><span class="w"></span>
<span class="na">python_files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*.py</span><span class="w"></span>
</pre></div>
</div>
<p>However, many projects will have a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> which they don’t want to be
imported. Moreover, there may files only importable by a specific python
version. For such cases you can dynamically define files to be ignored by
listing them in a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">collect_ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;setup.py&quot;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">collect_ignore</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;pkg/module_py2.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and then if you have a module file like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of pkg/module_py2.py</span>
<span class="k">def</span> <span class="nf">test_only_on_python2</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">assert</span> <span class="mi">0</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>and a <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> dummy file like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of setup.py</span>
<span class="mi">0</span> <span class="o">/</span> <span class="mi">0</span>  <span class="c1"># will raise exception if imported</span>
</pre></div>
</div>
<p>If you run with a Python 2 interpreter then you will find the one test and will
leave out the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>#$ pytest --collect-only
<span class=" -Color -Color-Bold">====== test session starts ======</span>
platform linux2 -- Python 2.7.10, pytest-2.9.1, py-1.4.31, pluggy-0.3.1
rootdir: $REGENDOC_TMPDIR, inifile: pytest.ini
collected 1 items
&lt;Module &#39;pkg/module_py2.py&#39;&gt;
  &lt;Function &#39;test_only_on_python2&#39;&gt;

====== 1 tests found in 0.04 seconds ======
</pre></div>
</div>
<p>If you run with a Python 3 interpreter both the one test and the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>
file will be left out:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>$ pytest --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project, configfile: pytest.ini
collected 0 items

======================= no tests collected in 0.12s ========================
</pre></div>
</div>
<p>It’s also possible to ignore files based on Unix shell-style wildcards by adding
patterns to <a class="reference internal" href="contents.html#globalvar-collect_ignore_glob"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">collect_ignore_glob</span></code></a>.</p>
<p>The following example <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> ignores the file <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> and in
addition all files that end with <code class="docutils literal notranslate"><span class="pre">*_py2.py</span></code> when executed with a Python 3
interpreter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">collect_ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;setup.py&quot;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">collect_ignore_glob</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;*_py2.py&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Since Pytest 2.6, users can prevent pytest from discovering classes that start
with <code class="docutils literal notranslate"><span class="pre">Test</span></code> by setting a boolean <code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Will not be discovered as a test</span>
<span class="k">class</span> <span class="nc">TestClass</span><span class="p">:</span>
    <span class="n">__test__</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<span id="document-example/nonpython"></span><div class="section" id="working-with-non-python-tests">
<span id="non-python-tests"></span><h4>Working with non-python tests<a class="headerlink" href="#working-with-non-python-tests" title="Permalink to this headline">¶</a></h4>
<div class="section" id="a-basic-example-for-specifying-tests-in-yaml-files">
<span id="yaml-plugin"></span><h5>A basic example for specifying tests in Yaml files<a class="headerlink" href="#a-basic-example-for-specifying-tests-in-yaml-files" title="Permalink to this headline">¶</a></h5>
<p>Here is an example <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> (extracted from Ali Afshar’s special purpose <a class="reference external" href="http://bitbucket.org/aafshar/pytest-yamlwsgi/src/tip/pytest_yamlwsgi.py">pytest-yamlwsgi</a> plugin).   This <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> will  collect <code class="docutils literal notranslate"><span class="pre">test*.yaml</span></code> files and will execute the yaml-formatted content as custom tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># content of conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_collect_file</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">file_path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;.yaml&quot;</span> <span class="ow">and</span> <span class="n">file_path</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">YamlFile</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">file_path</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">YamlFile</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">File</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># We need a yaml parser, e.g. PyYAML.</span>
        <span class="kn">import</span> <span class="nn">yaml</span>

        <span class="n">raw</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">spec</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">yield</span> <span class="n">YamlItem</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">spec</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">YamlItem</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">spec</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span>

    <span class="k">def</span> <span class="nf">runtest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="c1"># Some custom test execution (dumb example follows).</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">YamlException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">repr_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">excinfo</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when self.runtest() raises an exception.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">YamlException</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;usecase execution failed&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;   spec failed: </span><span class="si">{1!r}</span><span class="s2">: </span><span class="si">{2!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">excinfo</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">args</span><span class="p">),</span>
                    <span class="s2">&quot;   no further details known at this point.&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">reportinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;usecase: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>


<span class="k">class</span> <span class="nc">YamlException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom exception for error reporting.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>You can create a simple example file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># test_simple.yaml</span>
<span class="n">ok</span><span class="p">:</span>
    <span class="n">sub1</span><span class="p">:</span> <span class="n">sub1</span>

<span class="n">hello</span><span class="p">:</span>
    <span class="n">world</span><span class="p">:</span> <span class="n">world</span>
    <span class="n">some</span><span class="p">:</span> <span class="n">other</span>
</pre></div>
</div>
<p>and if you installed <a class="reference external" href="https://pypi.org/project/PyYAML/">PyYAML</a> or a compatible YAML-parser you can
now execute the test specification:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>nonpython $ pytest test_simple.yaml
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project/nonpython
collected 2 items

test_simple.yaml <span class=" -Color -Color-Red">F</span><span class=" -Color -Color-Green">.</span>                                                  <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ usecase: hello ______________________________</span>
usecase execution failed
   spec failed: &#39;some&#39;: &#39;other&#39;
   no further details known at this point.
========================= short test summary info ==========================
FAILED test_simple.yaml::hello
<span class=" -Color -Color-Red">======================= </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s ========================</span>
</pre></div>
</div>
<p>You get one dot for the passing <code class="docutils literal notranslate"><span class="pre">sub1:</span> <span class="pre">sub1</span></code> check and one failure.
Obviously in the above <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> you’ll want to implement a more
interesting interpretation of the yaml-values.  You can easily write
your own domain specific testing language this way.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">repr_failure(excinfo)</span></code> is called for representing test failures.
If you create custom collection nodes you can return an error
representation string of your choice.  It
will be reported as a (red) string.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">reportinfo()</span></code> is used for representing the test location and is also
consulted when reporting in <code class="docutils literal notranslate"><span class="pre">verbose</span></code> mode:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>nonpython $ pytest -v
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y -- $PYTHON_PREFIX/bin/python
cachedir: .pytest_cache
rootdir: /home/sweet/project/nonpython
<span class=" -Color -Color-Bold">collecting ...</span> collected 2 items

test_simple.yaml::hello <span class=" -Color -Color-Red">FAILED</span>                                       <span class=" -Color -Color-Red">[ 50%]</span>
test_simple.yaml::ok <span class=" -Color -Color-Green">PASSED</span>                                          <span class=" -Color -Color-Red">[100%]</span>

================================= FAILURES =================================
<span class=" -Color -Color-Bold -Color-Bold-Red">______________________________ usecase: hello ______________________________</span>
usecase execution failed
   spec failed: &#39;some&#39;: &#39;other&#39;
   no further details known at this point.
========================= short test summary info ==========================
FAILED test_simple.yaml::hello
<span class=" -Color -Color-Red">======================= </span><span class=" -Color -Color-Bold -Color-Bold-Red">1 failed</span>, <span class=" -Color -Color-Green">1 passed</span><span class=" -Color -Color-Red"> in 0.12s ========================</span>
</pre></div>
</div>
<p>While developing your custom test collection and execution it’s also
interesting to just look at the collection tree:</p>
<div class="highlight-pytest notranslate"><div class="highlight"><pre><span></span>nonpython $ pytest --collect-only
<span class=" -Color -Color-Bold">=========================== test session starts ============================</span>
platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y
rootdir: /home/sweet/project/nonpython
collected 2 items

&lt;Package nonpython&gt;
  &lt;YamlFile test_simple.yaml&gt;
    &lt;YamlItem hello&gt;
    &lt;YamlItem ok&gt;

======================== 2 tests collected in 0.12s ========================
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-backwards-compatibility"></span><div class="section" id="backwards-compatibility-policy">
<span id="backwards-compatibility"></span><h3>Backwards Compatibility Policy<a class="headerlink" href="#backwards-compatibility-policy" title="Permalink to this headline">¶</a></h3>
<p>pytest is actively evolving and is a project that has been decades in the making,
we keep learning about new and better structures to express different details about testing.</p>
<p>While we implement those modifications we try to ensure an easy transition and don’t want to impose unnecessary churn on our users and community/plugin authors.</p>
<p>As of now, pytest considers multiple types of backward compatibility transitions:</p>
<ol class="loweralpha">
<li><p>trivial: APIs which trivially translate to the new mechanism,
and do not cause problematic changes.</p>
<p>We try to support those indefinitely while encouraging users to switch to newer/better mechanisms through documentation.</p>
</li>
<li><p>transitional: the old and new API don’t conflict
and we can help users transition by using warnings, while supporting both for a prolonged time.</p>
<p>We will only start the removal of deprecated functionality in major releases (e.g. if we deprecate something in 3.0 we will start to remove it in 4.0), and keep it around for at least two minor releases (e.g. if we deprecate something in 3.9 and 4.0 is the next release, we start to remove it in 5.0, not in 4.0).</p>
<p>A deprecated feature scheduled to be removed in major version X will use the warning class <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning</span></code> (a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">PytestDeprecationwarning</span></code>).</p>
<p>When the deprecation expires (e.g. 4.0 is released), we won’t remove the deprecated functionality immediately, but will use the standard warning filters to turn <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">PytestRemovedIn4Warning</span></code>) into <strong>errors</strong> by default. This approach makes it explicit that removal is imminent, and still gives you time to turn the deprecated feature into a warning instead of an error so it can be dealt with in your own time. In the next minor release (e.g. 4.1), the feature will be effectively removed.</p>
</li>
<li><p>true breakage: should only be considered when normal transition is unreasonably unsustainable and would offset important development/features by years.
In addition, they should be limited to APIs where the number of actual users is very small (for example only impacting some plugins), and can be coordinated with the community in advance.</p>
<p>Examples for such upcoming changes:</p>
<ul class="simple">
<li><p>removal of <code class="docutils literal notranslate"><span class="pre">pytest_runtest_protocol/nextitem</span></code> - <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">issue #895</a></p></li>
<li><p>rearranging of the node tree to include <code class="docutils literal notranslate"><span class="pre">FunctionDefinition</span></code></p></li>
<li><p>rearranging of <code class="docutils literal notranslate"><span class="pre">SetupState</span></code> <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">issue #895</a></p></li>
</ul>
<p>True breakages must be announced first in an issue containing:</p>
<ul class="simple">
<li><p>Detailed description of the change</p></li>
<li><p>Rationale</p></li>
<li><p>Expected impact on users and plugin authors (example in <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/895">issue #895</a>)</p></li>
</ul>
<p>After there’s no hard <em>-1</em> on the issue it should be followed up by an initial proof-of-concept Pull Request.</p>
<p>This POC serves as both a coordination point to assess impact and potential inspiration to come up with a transitional solution after all.</p>
<p>After a reasonable amount of time the PR can be merged to base a new major release.</p>
<p>For the PR to mature from POC to acceptance, it must contain:
* Setup of deprecation errors/warnings that help users fix and port their code. If it is possible to introduce a deprecation period under the current series, before the true breakage, it should be introduced in a separate PR and be part of the current release stream.
* Detailed description of the rationale and examples on how to port code in <code class="docutils literal notranslate"><span class="pre">doc/en/deprecations.rst</span></code>.</p>
</li>
</ol>
</div>
<div class="section" id="history">
<h3>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<div class="section" id="focus-primary-on-smooth-transition-stance-pre-6-0">
<h4>Focus primary on smooth transition - stance (pre 6.0)<a class="headerlink" href="#focus-primary-on-smooth-transition-stance-pre-6-0" title="Permalink to this headline">¶</a></h4>
<p>Keeping backwards compatibility has a very high priority in the pytest project. Although we have deprecated functionality over the years, most of it is still supported. All deprecations in pytest were done because simpler or more efficient ways of accomplishing the same tasks have emerged, making the old way of doing things unnecessary.</p>
<p>With the pytest 3.0 release we introduced a clear communication scheme for when we will actually remove the old busted joint and politely ask you to use the new hotness instead, while giving you enough time to adjust your tests or raise concerns if there are valid reasons to keep deprecated functionality around.</p>
<p>To communicate changes we issue deprecation warnings using a custom warning hierarchy (see <a class="reference internal" href="contents.html#internal-warnings"><span class="std std-ref">Internal pytest warnings</span></a>). These warnings may be suppressed using the standard means: <code class="docutils literal notranslate"><span class="pre">-W</span></code> command-line flag or <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> ini options (see <a class="reference internal" href="contents.html#warnings"><span class="std std-ref">How to capture warnings</span></a>), but we suggest to use these sparingly and temporarily, and heed the warnings when possible.</p>
<p>We will only start the removal of deprecated functionality in major releases (e.g. if we deprecate something in 3.0 we will start to remove it in 4.0), and keep it around for at least two minor releases (e.g. if we deprecate something in 3.9 and 4.0 is the next release, we start to remove it in 5.0, not in 4.0).</p>
<p>When the deprecation expires (e.g. 4.0 is released), we won’t remove the deprecated functionality immediately, but will use the standard warning filters to turn them into <strong>errors</strong> by default. This approach makes it explicit that removal is imminent, and still gives you time to turn the deprecated feature into a warning instead of an error so it can be dealt with in your own time. In the next minor release (e.g. 4.1), the feature will be effectively removed.</p>
<div class="section" id="deprecation-roadmap">
<h5>Deprecation Roadmap<a class="headerlink" href="#deprecation-roadmap" title="Permalink to this headline">¶</a></h5>
<p>Features currently deprecated and removed in previous releases can be found in <a class="reference internal" href="contents.html#deprecations"><span class="std std-ref">Deprecations and Removals</span></a>.</p>
<p>We track future deprecation and removal of features using milestones and the <a class="reference external" href="https://github.com/pytest-dev/pytest/issues?q=label%3A%22type%3A+deprecation%22">deprecation</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/type%3A%20removal">removal</a> labels on GitHub.</p>
</div>
</div>
</div>
<div class="section" id="python-version-support">
<h3>Python version support<a class="headerlink" href="#python-version-support" title="Permalink to this headline">¶</a></h3>
<p>Released pytest versions support all Python versions that are actively maintained at the time of the release:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 42%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>pytest version</p></th>
<th class="head"><p>min. Python version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7.1+</p></td>
<td><p>3.7+</p></td>
</tr>
<tr class="row-odd"><td><p>6.2 - 7.0</p></td>
<td><p>3.6+</p></td>
</tr>
<tr class="row-even"><td><p>5.0 - 6.1</p></td>
<td><p>3.5+</p></td>
</tr>
<tr class="row-odd"><td><p>3.3 - 4.6</p></td>
<td><p>2.7, 3.4+</p></td>
</tr>
</tbody>
</table>
</div>
<span id="document-deprecations"></span><div class="section" id="deprecations-and-removals">
<span id="deprecations"></span><h3>Deprecations and Removals<a class="headerlink" href="#deprecations-and-removals" title="Permalink to this headline">¶</a></h3>
<p>This page lists all pytest features that are currently deprecated or have been removed in past major releases.
The objective is to give users a clear rationale why a certain feature has been removed, and what alternatives
should be used instead.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#deprecated-features" id="id1">Deprecated Features</a></p>
<ul>
<li><p><a class="reference internal" href="#the-pytest-instance-collector" id="id2">The <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> collector</a></p></li>
<li><p><a class="reference internal" href="#fspath-argument-for-node-constructors-replaced-with-pathlib-path" id="id3"><code class="docutils literal notranslate"><span class="pre">fspath</span></code> argument for Node constructors replaced with <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a></p></li>
<li><p><a class="reference internal" href="#py-path-local-arguments-for-hooks-replaced-with-pathlib-path" id="id4"><code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> arguments for hooks replaced with <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a></p></li>
<li><p><a class="reference internal" href="#directly-constructing-internal-classes" id="id5">Directly constructing internal classes</a></p></li>
<li><p><a class="reference internal" href="#passing-msg-to-pytest-skip-pytest-fail-or-pytest-exit" id="id6">Passing <code class="docutils literal notranslate"><span class="pre">msg=</span></code> to <code class="docutils literal notranslate"><span class="pre">pytest.skip</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest.exit</span></code></a></p></li>
<li><p><a class="reference internal" href="#implementing-the-pytest-cmdline-preparse-hook" id="id7">Implementing the <code class="docutils literal notranslate"><span class="pre">pytest_cmdline_preparse</span></code> hook</a></p></li>
<li><p><a class="reference internal" href="#diamond-inheritance-between-pytest-collector-and-pytest-item" id="id8">Diamond inheritance between <a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Collector</span></code></a> and <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a></a></p></li>
<li><p><a class="reference internal" href="#constructors-of-custom-pytest-node-subclasses-should-take-kwargs" id="id9">Constructors of custom <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Node</span></code> subclasses should take <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code></a></p></li>
<li><p><a class="reference internal" href="#backward-compatibilities-in-parser-addoption" id="id10">Backward compatibilities in <code class="docutils literal notranslate"><span class="pre">Parser.addoption</span></code></a></p></li>
<li><p><a class="reference internal" href="#using-pytest-warns-none" id="id11">Using <code class="docutils literal notranslate"><span class="pre">pytest.warns(None)</span></code></a></p></li>
<li><p><a class="reference internal" href="#the-strict-command-line-option" id="id12">The <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line option</a></p></li>
<li><p><a class="reference internal" href="#the-yield-fixture-function-decorator" id="id13">The <code class="docutils literal notranslate"><span class="pre">yield_fixture</span></code> function/decorator</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#removed-features" id="id14">Removed Features</a></p>
<ul>
<li><p><a class="reference internal" href="#the-pytest-collect-module" id="id15">The <code class="docutils literal notranslate"><span class="pre">pytest.collect</span></code> module</a></p></li>
<li><p><a class="reference internal" href="#the-pytest-warning-captured-hook" id="id16">The <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook</a></p></li>
<li><p><a class="reference internal" href="#the-pytest-fillfuncargs-function" id="id17">The <code class="docutils literal notranslate"><span class="pre">pytest._fillfuncargs</span></code> function</a></p></li>
<li><p><a class="reference internal" href="#no-print-logs-command-line-option" id="id18"><code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code> command-line option</a></p></li>
<li><p><a class="reference internal" href="#result-log-result-log" id="id19">Result log (<code class="docutils literal notranslate"><span class="pre">--result-log</span></code>)</a></p></li>
<li><p><a class="reference internal" href="#pytest-collect-directory-hook" id="id20"><code class="docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code> hook</a></p></li>
<li><p><a class="reference internal" href="#terminalreporter-writer" id="id21">TerminalReporter.writer</a></p></li>
<li><p><a class="reference internal" href="#junit-family-default-value-change-to-xunit2" id="id22"><code class="docutils literal notranslate"><span class="pre">junit_family</span></code> default value change to “xunit2”</a></p></li>
<li><p><a class="reference internal" href="#node-construction-changed-to-node-from-parent" id="id23">Node Construction changed to <code class="docutils literal notranslate"><span class="pre">Node.from_parent</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest-fixture-arguments-are-keyword-only" id="id24"><code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code> arguments are keyword only</a></p></li>
<li><p><a class="reference internal" href="#funcargnames-alias-for-fixturenames" id="id25"><code class="docutils literal notranslate"><span class="pre">funcargnames</span></code> alias for <code class="docutils literal notranslate"><span class="pre">fixturenames</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest-config-global" id="id26"><code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> global</a></p></li>
<li><p><a class="reference internal" href="#message-parameter-of-pytest-raises" id="id27"><code class="docutils literal notranslate"><span class="pre">&quot;message&quot;</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code></a></p></li>
<li><p><a class="reference internal" href="#raises-warns-with-a-string-as-the-second-argument" id="id28"><code class="docutils literal notranslate"><span class="pre">raises</span></code> / <code class="docutils literal notranslate"><span class="pre">warns</span></code> with a string as the second argument</a></p></li>
<li><p><a class="reference internal" href="#using-class-in-custom-collectors" id="id29">Using <code class="docutils literal notranslate"><span class="pre">Class</span></code> in custom Collectors</a></p></li>
<li><p><a class="reference internal" href="#marks-in-pytest-mark-parametrize" id="id30">marks in <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest-funcarg-prefix" id="id31"><code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code> prefix</a></p></li>
<li><p><a class="reference internal" href="#pytest-section-in-setup-cfg-files" id="id32">[pytest] section in setup.cfg files</a></p></li>
<li><p><a class="reference internal" href="#metafunc-addcall" id="id33">Metafunc.addcall</a></p></li>
<li><p><a class="reference internal" href="#cached-setup" id="id34"><code class="docutils literal notranslate"><span class="pre">cached_setup</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest-plugins-in-non-top-level-conftest-files" id="id35">pytest_plugins in non-top-level conftest files</a></p></li>
<li><p><a class="reference internal" href="#config-warn-and-node-warn" id="id36"><code class="docutils literal notranslate"><span class="pre">Config.warn</span></code> and <code class="docutils literal notranslate"><span class="pre">Node.warn</span></code></a></p></li>
<li><p><a class="reference internal" href="#record-xml-property" id="id37">record_xml_property</a></p></li>
<li><p><a class="reference internal" href="#passing-command-line-string-to-pytest-main" id="id38">Passing command-line string to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code></a></p></li>
<li><p><a class="reference internal" href="#calling-fixtures-directly" id="id39">Calling fixtures directly</a></p></li>
<li><p><a class="reference internal" href="#yield-tests" id="id40"><code class="docutils literal notranslate"><span class="pre">yield</span></code> tests</a></p></li>
<li><p><a class="reference internal" href="#internal-classes-accessed-through-node" id="id41">Internal classes accessed through <code class="docutils literal notranslate"><span class="pre">Node</span></code></a></p></li>
<li><p><a class="reference internal" href="#node-get-marker" id="id42"><code class="docutils literal notranslate"><span class="pre">Node.get_marker</span></code></a></p></li>
<li><p><a class="reference internal" href="#somefunction-markname" id="id43"><code class="docutils literal notranslate"><span class="pre">somefunction.markname</span></code></a></p></li>
<li><p><a class="reference internal" href="#pytest-namespace" id="id44"><code class="docutils literal notranslate"><span class="pre">pytest_namespace</span></code></a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="deprecated-features">
<h4><a class="toc-backref" href="#id1">Deprecated Features</a><a class="headerlink" href="#deprecated-features" title="Permalink to this headline">¶</a></h4>
<p>Below is a complete list of all pytest features which are considered deprecated. Using those features will issue
<a class="reference internal" href="contents.html#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a> or subclasses, which can be filtered using <a class="reference internal" href="contents.html#warnings"><span class="std std-ref">standard warning filters</span></a>.</p>
<div class="section" id="the-pytest-instance-collector">
<span id="instance-collector-deprecation"></span><h5><a class="toc-backref" href="#id2">The <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> collector</a><a class="headerlink" href="#the-pytest-instance-collector" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 7.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> collector type has been removed.</p>
<p>Previously, Python test methods were collected as <a class="reference internal" href="contents.html#pytest.Class" title="pytest.Class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Class</span></code></a> -&gt; <code class="docutils literal notranslate"><span class="pre">Instance</span></code> -&gt; <a class="reference internal" href="contents.html#pytest.Function" title="pytest.Function"><code class="xref py py-class docutils literal notranslate"><span class="pre">Function</span></code></a>.
Now <a class="reference internal" href="contents.html#pytest.Class" title="pytest.Class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Class</span></code></a> collects the test methods directly.</p>
<p>Most plugins which reference <code class="docutils literal notranslate"><span class="pre">Instance</span></code> do so in order to ignore or skip it,
using a check such as <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">isinstance(node,</span> <span class="pre">Instance):</span> <span class="pre">return</span></code>.
Such plugins should simply remove consideration of <code class="docutils literal notranslate"><span class="pre">Instance</span></code> on pytest&gt;=7.
However, to keep such uses working, a dummy type has been instanted in <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> and <code class="docutils literal notranslate"><span class="pre">_pytest.python.Instance</span></code>,
and importing it emits a deprecation warning. This will be removed in pytest 8.</p>
</div>
<div class="section" id="fspath-argument-for-node-constructors-replaced-with-pathlib-path">
<span id="node-ctor-fspath-deprecation"></span><h5><a class="toc-backref" href="#id3"><code class="docutils literal notranslate"><span class="pre">fspath</span></code> argument for Node constructors replaced with <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a><a class="headerlink" href="#fspath-argument-for-node-constructors-replaced-with-pathlib-path" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>In order to support the transition from <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> to <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a>,
the <code class="docutils literal notranslate"><span class="pre">fspath</span></code> argument to <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> constructors like
<a class="reference internal" href="contents.html#pytest.Function.from_parent" title="pytest.Function.from_parent"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.Function.from_parent()</span></code></a> and <a class="reference internal" href="contents.html#pytest.Class.from_parent" title="pytest.Class.from_parent"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.Class.from_parent()</span></code></a>
is now deprecated.</p>
<p>Plugins which construct nodes should pass the <code class="docutils literal notranslate"><span class="pre">path</span></code> argument, of type
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>, instead of the <code class="docutils literal notranslate"><span class="pre">fspath</span></code> argument.</p>
<p>Plugins which implement custom items and collectors are encouraged to replace
<code class="docutils literal notranslate"><span class="pre">fspath</span></code> parameters (<code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>) with <code class="docutils literal notranslate"><span class="pre">path</span></code> parameters
(<code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>), and drop any other usage of the <code class="docutils literal notranslate"><span class="pre">py</span></code> library if possible.</p>
<p>If possible, plugins with custom items should use <a class="reference internal" href="#uncooperative-constructors-deprecated"><span class="std std-ref">cooperative
constructors</span></a> to avoid hardcoding
arguments they only pass on to the superclass.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> arguments and attributes (the
new attribute being <code class="docutils literal notranslate"><span class="pre">path</span></code>) is <strong>the opposite</strong> of the situation for
hooks, <a class="reference internal" href="#legacy-path-hooks-deprecated"><span class="std std-ref">outlined below</span></a> (the old
argument being <code class="docutils literal notranslate"><span class="pre">path</span></code>).</p>
<p>This is an unfortunate artifact due to historical reasons, which should be
resolved in future versions as we slowly get rid of the <a class="reference external" href="https://pypi.org/project/py/">py</a>
dependency (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9283">issue #9283</a> for a longer discussion).</p>
</div>
<p>Due to the ongoing migration of methods like <code class="xref py py-meth docutils literal notranslate"><span class="pre">reportinfo()</span></code>
which still is expected to return a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> object, nodes still have
both <code class="docutils literal notranslate"><span class="pre">fspath</span></code> (<code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>) and <code class="docutils literal notranslate"><span class="pre">path</span></code> (<code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>) attributes,
no matter what argument was used in the constructor. We expect to deprecate the
<code class="docutils literal notranslate"><span class="pre">fspath</span></code> attribute in a future release.</p>
</div>
<div class="section" id="py-path-local-arguments-for-hooks-replaced-with-pathlib-path">
<span id="legacy-path-hooks-deprecated"></span><h5><a class="toc-backref" href="#id4"><code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> arguments for hooks replaced with <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a><a class="headerlink" href="#py-path-local-arguments-for-hooks-replaced-with-pathlib-path" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>In order to support the transition from <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> to <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a>, the following hooks now receive additional arguments:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_ignore_collect"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_ignore_collect(collection_path:</span> <span class="pre">pathlib.Path)</span></code></a> as equivalent to <code class="docutils literal notranslate"><span class="pre">path</span></code></p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_collect_file"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_file(file_path:</span> <span class="pre">pathlib.Path)</span></code></a> as equivalent to <code class="docutils literal notranslate"><span class="pre">path</span></code></p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_pycollect_makemodule"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_pycollect_makemodule(module_path:</span> <span class="pre">pathlib.Path)</span></code></a> as equivalent to <code class="docutils literal notranslate"><span class="pre">path</span></code></p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_report_header"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_header(start_path:</span> <span class="pre">pathlib.Path)</span></code></a> as equivalent to <code class="docutils literal notranslate"><span class="pre">startdir</span></code></p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_report_collectionfinish"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_collectionfinish(start_path:</span> <span class="pre">pathlib.Path)</span></code></a> as equivalent to <code class="docutils literal notranslate"><span class="pre">startdir</span></code></p></li>
</ul>
<p>The accompanying <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> based paths have been deprecated: plugins which manually invoke those hooks should only pass the new <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> arguments, and users should change their hook implementations to use the new <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> arguments.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> arguments and attributes,
<a class="reference internal" href="#node-ctor-fspath-deprecation"><span class="std std-ref">outlined above</span></a> (the new attribute
being <code class="docutils literal notranslate"><span class="pre">path</span></code>) is <strong>the opposite</strong> of the situation for hooks (the old
argument being <code class="docutils literal notranslate"><span class="pre">path</span></code>).</p>
<p>This is an unfortunate artifact due to historical reasons, which should be
resolved in future versions as we slowly get rid of the <a class="reference external" href="https://pypi.org/project/py/">py</a>
dependency (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9283">issue #9283</a> for a longer discussion).</p>
</div>
</div>
<div class="section" id="directly-constructing-internal-classes">
<h5><a class="toc-backref" href="#id5">Directly constructing internal classes</a><a class="headerlink" href="#directly-constructing-internal-classes" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>Directly constructing the following classes is now deprecated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.Mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.MarkDecorator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.MarkGenerator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.python.Metafunc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.runner.CallInfo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest._code.ExceptionInfo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.config.argparsing.Parser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.config.argparsing.OptionGroup</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.pytester.HookRecorder</span></code></p></li>
</ul>
<p>These constructors have always been considered private, but now issue a deprecation warning, which may become a hard error in pytest 8.</p>
</div>
<div class="section" id="passing-msg-to-pytest-skip-pytest-fail-or-pytest-exit">
<span id="cmdline-preparse-deprecated"></span><h5><a class="toc-backref" href="#id6">Passing <code class="docutils literal notranslate"><span class="pre">msg=</span></code> to <code class="docutils literal notranslate"><span class="pre">pytest.skip</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest.exit</span></code></a><a class="headerlink" href="#passing-msg-to-pytest-skip-pytest-fail-or-pytest-exit" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>Passing the keyword argument <code class="docutils literal notranslate"><span class="pre">msg</span></code> to <a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a>, <a class="reference internal" href="contents.html#pytest.fail" title="pytest.fail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fail()</span></code></a> or <a class="reference internal" href="contents.html#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a>
is now deprecated and <code class="docutils literal notranslate"><span class="pre">reason</span></code> should be used instead.  This change is to bring consistency between these
functions and the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code> markers which already accept a <code class="docutils literal notranslate"><span class="pre">reason</span></code> argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_fail_example</span><span class="p">():</span>
    <span class="c1"># old</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="c1"># new</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_skip_example</span><span class="p">():</span>
    <span class="c1"># old</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="c1"># new</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_exit_example</span><span class="p">():</span>
    <span class="c1"># old</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
    <span class="c1"># new</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="implementing-the-pytest-cmdline-preparse-hook">
<h5><a class="toc-backref" href="#id7">Implementing the <code class="docutils literal notranslate"><span class="pre">pytest_cmdline_preparse</span></code> hook</a><a class="headerlink" href="#implementing-the-pytest-cmdline-preparse-hook" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>Implementing the <a class="reference internal" href="contents.html#std-hook-pytest_cmdline_preparse"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_cmdline_preparse</span></code></a> hook has been officially deprecated.
Implement the <a class="reference internal" href="contents.html#std-hook-pytest_load_initial_conftests"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_load_initial_conftests</span></code></a> hook instead.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_cmdline_preparse</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>


<span class="c1"># becomes:</span>


<span class="k">def</span> <span class="nf">pytest_load_initial_conftests</span><span class="p">(</span>
    <span class="n">early_config</span><span class="p">:</span> <span class="n">Config</span><span class="p">,</span> <span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="diamond-inheritance-between-pytest-collector-and-pytest-item">
<span id="diamond-inheritance-deprecated"></span><h5><a class="toc-backref" href="#id8">Diamond inheritance between <a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Collector</span></code></a> and <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a></a><a class="headerlink" href="#diamond-inheritance-between-pytest-collector-and-pytest-item" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>Defining a custom pytest node type which is both an <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code> and a <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Collector</span></code> (e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.File</span></code>) now issues a warning.
It was never sanely supported and triggers hard to debug errors.</p>
<p>Some plugins providing linting/code analysis have been using this as a hack.
Instead, a separate collector node should be used, which collects the item. See
<a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a> for an example, as well as an <a class="reference external" href="https://github.com/asmeurer/pytest-flakes/pull/40/files">example pr fixing inheritance</a>.</p>
</div>
<div class="section" id="constructors-of-custom-pytest-node-subclasses-should-take-kwargs">
<span id="uncooperative-constructors-deprecated"></span><h5><a class="toc-backref" href="#id9">Constructors of custom <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Node</span></code> subclasses should take <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code></a><a class="headerlink" href="#constructors-of-custom-pytest-node-subclasses-should-take-kwargs" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p>If custom subclasses of nodes like <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> override the
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, they should take <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>. Thus,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomItem</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">additional_arg</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_arg</span> <span class="o">=</span> <span class="n">additional_arg</span>
</pre></div>
</div>
<p>should be turned into:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CustomItem</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">Item</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">additional_arg</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">additional_arg</span> <span class="o">=</span> <span class="n">additional_arg</span>
</pre></div>
</div>
<p>to avoid hard-coding the arguments pytest can pass to the superclass.
See <a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a> for a full example.</p>
<p>For cases without conflicts, no deprecation warning is emitted. For cases with
conflicts (such as <a class="reference internal" href="contents.html#pytest.File" title="pytest.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.File</span></code></a> now taking <code class="docutils literal notranslate"><span class="pre">path</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">fspath</span></code>, as <a class="reference internal" href="#node-ctor-fspath-deprecation"><span class="std std-ref">outlined above</span></a>), a
deprecation warning is now raised.</p>
</div>
<div class="section" id="backward-compatibilities-in-parser-addoption">
<h5><a class="toc-backref" href="#id10">Backward compatibilities in <code class="docutils literal notranslate"><span class="pre">Parser.addoption</span></code></a><a class="headerlink" href="#backward-compatibilities-in-parser-addoption" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 2.4.</span></p>
</div>
<p>Several behaviors of <a class="reference internal" href="contents.html#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Parser.addoption</span></code></a> are now
scheduled for removal in pytest 8 (deprecated since pytest 2.4.0):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parser.addoption(...,</span> <span class="pre">help=&quot;..</span> <span class="pre">%default</span> <span class="pre">..&quot;)</span></code> - use <code class="docutils literal notranslate"><span class="pre">%(default)s</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parser.addoption(...,</span> <span class="pre">type=&quot;int/string/float/complex&quot;)</span></code> - use <code class="docutils literal notranslate"><span class="pre">type=int</span></code> etc. instead.</p></li>
</ul>
</div>
<div class="section" id="using-pytest-warns-none">
<h5><a class="toc-backref" href="#id11">Using <code class="docutils literal notranslate"><span class="pre">pytest.warns(None)</span></code></a><a class="headerlink" href="#using-pytest-warns-none" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 7.0.</span></p>
</div>
<p><a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns(None)</span></code></a> is now deprecated because it was frequently misused.
Its correct usage was checking that the code emits at least one warning of any type - like <code class="docutils literal notranslate"><span class="pre">pytest.warns()</span></code>
or <code class="docutils literal notranslate"><span class="pre">pytest.warns(Warning)</span></code>.</p>
<p>See <a class="reference internal" href="contents.html#warns-use-cases"><span class="std std-ref">Additional use cases of warnings in tests</span></a> for examples.</p>
</div>
<div class="section" id="the-strict-command-line-option">
<h5><a class="toc-backref" href="#id12">The <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line option</a><a class="headerlink" href="#the-strict-command-line-option" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.2.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line option has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code>, which
better conveys what the option does.</p>
<p>We have plans to maybe in the future to reintroduce <code class="docutils literal notranslate"><span class="pre">--strict</span></code> and make it an encompassing
flag for all strictness related options (<code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> and <code class="docutils literal notranslate"><span class="pre">--strict-config</span></code>
at the moment, more might be introduced in the future).</p>
</div>
<div class="section" id="the-yield-fixture-function-decorator">
<h5><a class="toc-backref" href="#id13">The <code class="docutils literal notranslate"><span class="pre">yield_fixture</span></code> function/decorator</a><a class="headerlink" href="#the-yield-fixture-function-decorator" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.2.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pytest.yield_fixture</span></code> is a deprecated alias for <a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fixture()</span></code></a>.</p>
<p>It has been so for a very long time, so can be search/replaced safely.</p>
</div>
</div>
<div class="section" id="removed-features">
<h4><a class="toc-backref" href="#id14">Removed Features</a><a class="headerlink" href="#removed-features" title="Permalink to this headline">¶</a></h4>
<p>As stated in our <a class="reference internal" href="contents.html#backwards-compatibility"><span class="std std-ref">Backwards Compatibility Policy</span></a> policy, deprecated features are removed only in major releases after
an appropriate period of deprecation has passed.</p>
<div class="section" id="the-pytest-collect-module">
<h5><a class="toc-backref" href="#id15">The <code class="docutils literal notranslate"><span class="pre">pytest.collect</span></code> module</a><a class="headerlink" href="#the-pytest-collect-module" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.</span></p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 7.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest.collect</span></code> module is no longer part of the public API, all its names
should now be imported from <code class="docutils literal notranslate"><span class="pre">pytest</span></code> directly instead.</p>
</div>
<div class="section" id="the-pytest-warning-captured-hook">
<h5><a class="toc-backref" href="#id16">The <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook</a><a class="headerlink" href="#the-pytest-warning-captured-hook" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.</span></p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 7.0.</span></p>
</div>
<p>This hook has an <code class="docutils literal notranslate"><span class="pre">item</span></code> parameter which cannot be serialized by <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">pytest_warning_recorded</span></code> hook instead, which replaces the <code class="docutils literal notranslate"><span class="pre">item</span></code> parameter
by a <code class="docutils literal notranslate"><span class="pre">nodeid</span></code> parameter.</p>
</div>
<div class="section" id="the-pytest-fillfuncargs-function">
<h5><a class="toc-backref" href="#id17">The <code class="docutils literal notranslate"><span class="pre">pytest._fillfuncargs</span></code> function</a><a class="headerlink" href="#the-pytest-fillfuncargs-function" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.</span></p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 7.0.</span></p>
</div>
<p>This function was kept for backward compatibility with an older plugin.</p>
<p>It’s functionality is not meant to be used directly, but if you must replace
it, use <code class="docutils literal notranslate"><span class="pre">function._request._fillfixtures()</span></code> instead, though note this is not
a public API and may break in the future.</p>
</div>
<div class="section" id="no-print-logs-command-line-option">
<h5><a class="toc-backref" href="#id18"><code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code> command-line option</a><a class="headerlink" href="#no-print-logs-command-line-option" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 5.4.</span></p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code> option and <code class="docutils literal notranslate"><span class="pre">log_print</span></code> ini setting are removed. If
you used them, please use <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> instead.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> command-line option was added in <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">3.5.0</span></code> which allows to specify how to
display captured output when tests fail: <code class="docutils literal notranslate"><span class="pre">no</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code> or <code class="docutils literal notranslate"><span class="pre">all</span></code> (the default).</p>
</div>
<div class="section" id="result-log-result-log">
<span id="resultlog-deprecated"></span><h5><a class="toc-backref" href="#id19">Result log (<code class="docutils literal notranslate"><span class="pre">--result-log</span></code>)</a><a class="headerlink" href="#result-log-result-log" title="Permalink to this headline">¶</a></h5>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 4.0.</span></p>
</div>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--result-log</span></code> option produces a stream of test reports which can be
analysed at runtime, but it uses a custom format which requires users to implement their own
parser.</p>
<p>The  <a class="reference external" href="https://github.com/pytest-dev/pytest-reportlog">pytest-reportlog</a> plugin provides a <code class="docutils literal notranslate"><span class="pre">--report-log</span></code> option, a more standard and extensible alternative, producing
one JSON object per-line, and should cover the same use cases. Please try it out and provide feedback.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest-reportlog</span></code> plugin might even be merged into the core
at some point, depending on the plans for the plugins and number of users using it.</p>
</div>
<div class="section" id="pytest-collect-directory-hook">
<h5><a class="toc-backref" href="#id20"><code class="docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code> hook</a><a class="headerlink" href="#pytest-collect-directory-hook" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code> hook has not worked properly for years (it was called
but the results were ignored). Users may consider using <a class="reference internal" href="contents.html#std-hook-pytest_collection_modifyitems"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collection_modifyitems</span></code></a> instead.</p>
</div>
<div class="section" id="terminalreporter-writer">
<h5><a class="toc-backref" href="#id21">TerminalReporter.writer</a><a class="headerlink" href="#terminalreporter-writer" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> attribute has been deprecated and should no longer be used. This
was inadvertently exposed as part of the public API of that plugin and ties it too much
with <code class="docutils literal notranslate"><span class="pre">py.io.TerminalWriter</span></code>.</p>
<p>Plugins that used <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> directly should instead use <code class="docutils literal notranslate"><span class="pre">TerminalReporter</span></code>
methods that provide the same functionality.</p>
</div>
<div class="section" id="junit-family-default-value-change-to-xunit2">
<span id="junit-family-changed-default-value"></span><h5><a class="toc-backref" href="#id22"><code class="docutils literal notranslate"><span class="pre">junit_family</span></code> default value change to “xunit2”</a><a class="headerlink" href="#junit-family-default-value-change-to-xunit2" title="Permalink to this headline">¶</a></h5>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.0.</span></p>
</div>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">junit_family</span></code> option will change to <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> in pytest 6.0, which
is an update of the old <code class="docutils literal notranslate"><span class="pre">xunit1</span></code> format and is supported by default in modern tools
that manipulate this type of file (for example, Jenkins, Azure Pipelines, etc.).</p>
<p>Users are recommended to try the new <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> format and see if their tooling that consumes the JUnit
XML file supports it.</p>
<p>To use the new format, update your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_family</span><span class="o">=</span><span class="s">xunit2</span><span class="w"></span>
</pre></div>
</div>
<p>If you discover that your tooling does not support the new format, and want to keep using the
legacy version, set the option to <code class="docutils literal notranslate"><span class="pre">legacy</span></code> instead:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_family</span><span class="o">=</span><span class="s">legacy</span><span class="w"></span>
</pre></div>
</div>
<p>By using <code class="docutils literal notranslate"><span class="pre">legacy</span></code> you will keep using the legacy/xunit1 format when upgrading to
pytest 6.0, where the default format will be <code class="docutils literal notranslate"><span class="pre">xunit2</span></code>.</p>
<p>In order to let users know about the transition, pytest will issue a warning in case
the <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> option is given in the command line but <code class="docutils literal notranslate"><span class="pre">junit_family</span></code> is not explicitly
configured in <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>.</p>
<p>Services known to support the <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> format:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.jenkins.io/">Jenkins</a> with the <a class="reference external" href="https://plugins.jenkins.io/junit">JUnit</a> plugin.</p></li>
<li><p><a class="reference external" href="https://azure.microsoft.com/en-us/services/devops/pipelines">Azure Pipelines</a>.</p></li>
</ul>
</div>
<div class="section" id="node-construction-changed-to-node-from-parent">
<h5><a class="toc-backref" href="#id23">Node Construction changed to <code class="docutils literal notranslate"><span class="pre">Node.from_parent</span></code></a><a class="headerlink" href="#node-construction-changed-to-node-from-parent" title="Permalink to this headline">¶</a></h5>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 6.0.</span></p>
</div>
<p>The construction of nodes now should use the named constructor <code class="docutils literal notranslate"><span class="pre">from_parent</span></code>.
This limitation in api surface intends to enable better/simpler refactoring of the collection tree.</p>
<p>This means that instead of <code class="code docutils literal notranslate"><span class="pre">MyItem(name=&quot;foo&quot;,</span> <span class="pre">parent=collector,</span> <span class="pre">obj=42)</span></code>
one now has to invoke <code class="code docutils literal notranslate"><span class="pre">MyItem.from_parent(collector,</span> <span class="pre">name=&quot;foo&quot;)</span></code>.</p>
<p>Plugins that wish to support older versions of pytest and suppress the warning can use
<code class="docutils literal notranslate"><span class="pre">hasattr</span></code> to check if <code class="docutils literal notranslate"><span class="pre">from_parent</span></code> exists in that version:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_pycollect_makeitem</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">MyItem</span><span class="p">,</span> <span class="s2">&quot;from_parent&quot;</span><span class="p">):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">MyItem</span><span class="o">.</span><span class="n">from_parent</span><span class="p">(</span><span class="n">collector</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
        <span class="n">item</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="mi">42</span>
        <span class="k">return</span> <span class="n">item</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">MyItem</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">collector</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">from_parent</span></code> should only be called with keyword arguments for the parameters.</p>
</div>
<div class="section" id="pytest-fixture-arguments-are-keyword-only">
<h5><a class="toc-backref" href="#id24"><code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code> arguments are keyword only</a><a class="headerlink" href="#pytest-fixture-arguments-are-keyword-only" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>Passing arguments to pytest.fixture() as positional arguments has been removed - pass them by keyword instead.</p>
</div>
<div class="section" id="funcargnames-alias-for-fixturenames">
<h5><a class="toc-backref" href="#id25"><code class="docutils literal notranslate"><span class="pre">funcargnames</span></code> alias for <code class="docutils literal notranslate"><span class="pre">fixturenames</span></code></a><a class="headerlink" href="#funcargnames-alias-for-fixturenames" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 6.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">FixtureRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">Metafunc</span></code>, and <code class="docutils literal notranslate"><span class="pre">Function</span></code> classes track the names of
their associated fixtures, with the aptly-named <code class="docutils literal notranslate"><span class="pre">fixturenames</span></code> attribute.</p>
<p>Prior to pytest 2.3, this attribute was named <code class="docutils literal notranslate"><span class="pre">funcargnames</span></code>, and we have kept
that as an alias since.  It is finally due for removal, as it is often confusing
in places where we or plugin authors must distinguish between fixture names and
names supplied by non-fixture things such as <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>.</p>
</div>
<div class="section" id="pytest-config-global">
<span id="pytest-config-global-deprecated"></span><h5><a class="toc-backref" href="#id26"><code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> global</a><a class="headerlink" href="#pytest-config-global" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 5.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> global object is deprecated.  Instead use
<code class="docutils literal notranslate"><span class="pre">request.config</span></code> (via the <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture) or if you are a plugin author
use the <code class="docutils literal notranslate"><span class="pre">pytest_configure(config)</span></code> hook. Note that many hooks can also access
the <code class="docutils literal notranslate"><span class="pre">config</span></code> object indirectly, through <code class="docutils literal notranslate"><span class="pre">session.config</span></code> or <code class="docutils literal notranslate"><span class="pre">item.config</span></code> for example.</p>
</div>
<div class="section" id="message-parameter-of-pytest-raises">
<span id="raises-message-deprecated"></span><h5><a class="toc-backref" href="#id27"><code class="docutils literal notranslate"><span class="pre">&quot;message&quot;</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code></a><a class="headerlink" href="#message-parameter-of-pytest-raises" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 5.0.</span></p>
</div>
<p>It is a common mistake to think this parameter will match the exception message, while in fact
it only serves to provide a custom message in case the <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> check fails. To prevent
users from making this mistake, and because it is believed to be little used, pytest is
deprecating it without providing an alternative for the moment.</p>
<p>If you have a valid use case for this parameter, consider that to obtain the same results
you can just call <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> manually at the end of the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TimeoutError</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Client got unexpected message&quot;</span><span class="p">):</span>
    <span class="n">wait_for</span><span class="p">(</span><span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TimeoutError</span><span class="p">):</span>
    <span class="n">wait_for</span><span class="p">(</span><span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">(),</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Client got unexpected message&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you still have concerns about this deprecation and future removal, please comment on
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3974">issue #3974</a>.</p>
</div>
<div class="section" id="raises-warns-with-a-string-as-the-second-argument">
<span id="raises-warns-exec"></span><h5><a class="toc-backref" href="#id28"><code class="docutils literal notranslate"><span class="pre">raises</span></code> / <code class="docutils literal notranslate"><span class="pre">warns</span></code> with a string as the second argument</a><a class="headerlink" href="#raises-warns-with-a-string-as-the-second-argument" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 5.0.</span></p>
</div>
<p>Use the context manager form of these instead.  When necessary, invoke <code class="docutils literal notranslate"><span class="pre">exec</span></code>
directly.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="s2">&quot;1 / 0&quot;</span><span class="p">)</span>
<span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">,</span> <span class="s2">&quot;a $ b&quot;</span><span class="p">)</span>

<span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="s2">&quot;my_function()&quot;</span><span class="p">)</span>
<span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">SyntaxWarning</span><span class="p">,</span> <span class="s2">&quot;assert(1, 2)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">SyntaxError</span><span class="p">):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s2">&quot;a $ b&quot;</span><span class="p">)</span>  <span class="c1"># exec is required for invalid syntax</span>

<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">DeprecationWarning</span><span class="p">):</span>
    <span class="n">my_function</span><span class="p">()</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">warns</span><span class="p">(</span><span class="ne">SyntaxWarning</span><span class="p">):</span>
    <span class="n">exec</span><span class="p">(</span><span class="s2">&quot;assert(1, 2)&quot;</span><span class="p">)</span>  <span class="c1"># exec is used to avoid a top-level warning</span>
</pre></div>
</div>
</div>
<div class="section" id="using-class-in-custom-collectors">
<h5><a class="toc-backref" href="#id29">Using <code class="docutils literal notranslate"><span class="pre">Class</span></code> in custom Collectors</a><a class="headerlink" href="#using-class-in-custom-collectors" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Using objects named <code class="docutils literal notranslate"><span class="pre">&quot;Class&quot;</span></code> as a way to customize the type of nodes that are collected in <code class="docutils literal notranslate"><span class="pre">Collector</span></code>
subclasses has been deprecated. Users instead should use <code class="docutils literal notranslate"><span class="pre">pytest_pycollect_makeitem</span></code> to customize node types during
collection.</p>
<p>This issue should affect only advanced plugins who create new collection types, so if you see this warning
message please contact the authors so they can change the code.</p>
</div>
<div class="section" id="marks-in-pytest-mark-parametrize">
<span id="marks-in-pytest-parametrize-deprecated"></span><h5><a class="toc-backref" href="#id30">marks in <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code></a><a class="headerlink" href="#marks-in-pytest-mark-parametrize" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Applying marks to values of a <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> call is now deprecated. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;a, b&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;flaky&quot;</span><span class="p">)(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">36</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This code applies the <code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail(reason=&quot;flaky&quot;)</span></code> mark to the <code class="docutils literal notranslate"><span class="pre">(6,</span> <span class="pre">36)</span></code> value of the above parametrization
call.</p>
<p>This was considered hard to read and understand, and also its implementation presented problems to the code preventing
further internal improvements in the marks architecture.</p>
<p>To update the code, use <code class="docutils literal notranslate"><span class="pre">pytest.param</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;a, b&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
        <span class="n">pytest</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="n">marks</span><span class="o">=</span><span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;flaky&quot;</span><span class="p">)),</span>
        <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">400</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">500</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="pytest-funcarg-prefix">
<span id="pytest-funcarg-prefix-deprecated"></span><h5><a class="toc-backref" href="#id31"><code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code> prefix</a><a class="headerlink" href="#pytest-funcarg-prefix" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>In very early pytest versions fixtures could be defined using the <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code> prefix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_funcarg__data</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SomeData</span><span class="p">()</span>
</pre></div>
</div>
<p>Switch over to the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> decorator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">data</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SomeData</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="pytest-section-in-setup-cfg-files">
<h5><a class="toc-backref" href="#id32">[pytest] section in setup.cfg files</a><a class="headerlink" href="#pytest-section-in-setup-cfg-files" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> sections in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files should now be named <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code>
to avoid conflicts with other distutils commands.</p>
</div>
<div class="section" id="metafunc-addcall">
<span id="metafunc-addcall-deprecated"></span><h5><a class="toc-backref" href="#id33">Metafunc.addcall</a><a class="headerlink" href="#metafunc-addcall" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Metafunc.addcall</span></code> was a precursor to the current parametrized mechanism. Users should use
<a class="reference internal" href="contents.html#pytest.Metafunc.parametrize" title="pytest.Metafunc.parametrize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.Metafunc.parametrize()</span></code></a> instead.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="n">metafunc</span><span class="o">.</span><span class="n">addcall</span><span class="p">({</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
    <span class="n">metafunc</span><span class="o">.</span><span class="n">addcall</span><span class="p">({</span><span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_generate_tests</span><span class="p">(</span><span class="n">metafunc</span><span class="p">):</span>
    <span class="n">metafunc</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="cached-setup">
<span id="cached-setup-deprecated"></span><h5><a class="toc-backref" href="#id34"><code class="docutils literal notranslate"><span class="pre">cached_setup</span></code></a><a class="headerlink" href="#cached-setup" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">request.cached_setup</span></code> was the precursor of the setup/teardown mechanism available to fixtures.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">db_session</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">cached_setup</span><span class="p">(</span>
        <span class="n">setup</span><span class="o">=</span><span class="n">Session</span><span class="o">.</span><span class="n">create</span><span class="p">,</span> <span class="n">teardown</span><span class="o">=</span><span class="k">lambda</span> <span class="n">session</span><span class="p">:</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">(),</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>This should be updated to make use of standard fixture mechanisms:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">db_session</span><span class="p">():</span>
    <span class="n">session</span> <span class="o">=</span> <span class="n">Session</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">session</span>
    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>You can consult <a class="reference internal" href="contents.html#document-funcarg_compare"><span class="doc">funcarg comparison section in the docs</span></a> for
more information.</p>
</div>
<div class="section" id="pytest-plugins-in-non-top-level-conftest-files">
<span id="pytest-plugins-in-non-top-level-conftest-files-deprecated"></span><h5><a class="toc-backref" href="#id35">pytest_plugins in non-top-level conftest files</a><a class="headerlink" href="#pytest-plugins-in-non-top-level-conftest-files" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Defining <a class="reference internal" href="contents.html#globalvar-pytest_plugins"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">pytest_plugins</span></code></a> is now deprecated in non-top-level conftest.py
files because they will activate referenced plugins <em>globally</em>, which is surprising because for all other pytest
features <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files are only <em>active</em> for tests at or below it.</p>
</div>
<div class="section" id="config-warn-and-node-warn">
<span id="config-warn-and-node-warn-deprecated"></span><h5><a class="toc-backref" href="#id36"><code class="docutils literal notranslate"><span class="pre">Config.warn</span></code> and <code class="docutils literal notranslate"><span class="pre">Node.warn</span></code></a><a class="headerlink" href="#config-warn-and-node-warn" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Those methods were part of the internal pytest warnings system, but since <code class="docutils literal notranslate"><span class="pre">3.8</span></code> pytest is using the builtin warning
system for its own warnings, so those two functions are now deprecated.</p>
<p><code class="docutils literal notranslate"><span class="pre">Config.warn</span></code> should be replaced by calls to the standard <code class="docutils literal notranslate"><span class="pre">warnings.warn</span></code>, example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;some warning&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">pytest</span><span class="o">.</span><span class="n">PytestWarning</span><span class="p">(</span><span class="s2">&quot;some warning&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Node.warn</span></code> now supports two signatures:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node.warn(PytestWarning(&quot;some</span> <span class="pre">message&quot;))</span></code>: is now the <strong>recommended</strong> way to call this function.
The warning instance must be a PytestWarning or subclass.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node.warn(&quot;CI&quot;,</span> <span class="pre">&quot;some</span> <span class="pre">message&quot;)</span></code>: this code/message form has been <strong>removed</strong> and should be converted to the warning instance form above.</p></li>
</ul>
</div>
<div class="section" id="record-xml-property">
<span id="record-xml-property-deprecated"></span><h5><a class="toc-backref" href="#id37">record_xml_property</a><a class="headerlink" href="#record-xml-property" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">record_xml_property</span></code> fixture is now deprecated in favor of the more generic <code class="docutils literal notranslate"><span class="pre">record_property</span></code>, which
can be used by other consumers (for example <code class="docutils literal notranslate"><span class="pre">pytest-html</span></code>) to obtain custom information about the test run.</p>
<p>This is just a matter of renaming the fixture as the API is the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">record_xml_property</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Change to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_foo</span><span class="p">(</span><span class="n">record_property</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="passing-command-line-string-to-pytest-main">
<span id="passing-command-line-string-to-pytest-main-deprecated"></span><h5><a class="toc-backref" href="#id38">Passing command-line string to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code></a><a class="headerlink" href="#passing-command-line-string-to-pytest-main" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Passing a command-line string to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> is deprecated:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="s2">&quot;-v -s&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pass a list instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;-s&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>By passing a string, users expect that pytest will interpret that command-line using the shell rules they are working
on (for example <code class="docutils literal notranslate"><span class="pre">bash</span></code> or <code class="docutils literal notranslate"><span class="pre">Powershell</span></code>), but this is very hard/impossible to do in a portable way.</p>
</div>
<div class="section" id="calling-fixtures-directly">
<span id="calling-fixtures-directly-deprecated"></span><h5><a class="toc-backref" href="#id39">Calling fixtures directly</a><a class="headerlink" href="#calling-fixtures-directly" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Calling a fixture function directly, as opposed to request them in a test function, is deprecated.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">cell</span><span class="p">():</span>
    <span class="k">return</span> <span class="o">...</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">full_cell</span><span class="p">():</span>
    <span class="n">cell</span> <span class="o">=</span> <span class="n">cell</span><span class="p">()</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">make_full</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cell</span>
</pre></div>
</div>
<p>This is a great source of confusion to new users, which will often call the fixture functions and request them from test functions interchangeably, which breaks the fixture resolution model.</p>
<p>In those cases just request the function directly in the dependent fixture:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">cell</span><span class="p">():</span>
    <span class="k">return</span> <span class="o">...</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">full_cell</span><span class="p">(</span><span class="n">cell</span><span class="p">):</span>
    <span class="n">cell</span><span class="o">.</span><span class="n">make_full</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cell</span>
</pre></div>
</div>
<p>Alternatively if the fixture function is called multiple times inside a test (making it hard to apply the above pattern) or
if you would like to make minimal changes to the code, you can create a fixture which calls the original function together
with the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cell</span><span class="p">():</span>
    <span class="k">return</span> <span class="o">...</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;cell&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cell_fixture</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">cell</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="yield-tests">
<span id="yield-tests-deprecated"></span><h5><a class="toc-backref" href="#id40"><code class="docutils literal notranslate"><span class="pre">yield</span></code> tests</a><a class="headerlink" href="#yield-tests" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>pytest supported <code class="docutils literal notranslate"><span class="pre">yield</span></code>-style tests, where a test function actually <code class="docutils literal notranslate"><span class="pre">yield</span></code> functions and values
that are then turned into proper test methods. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">**</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>


<span class="k">def</span> <span class="nf">test_squared</span><span class="p">():</span>
    <span class="k">yield</span> <span class="n">check</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span>
    <span class="k">yield</span> <span class="n">check</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span>
</pre></div>
</div>
<p>This would result into two actual test functions being generated.</p>
<p>This form of test function doesn’t support fixtures properly, and users should switch to <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s2">&quot;x, y&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">test_squared</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">**</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="section" id="internal-classes-accessed-through-node">
<span id="internal-classes-accessed-through-node-deprecated"></span><h5><a class="toc-backref" href="#id41">Internal classes accessed through <code class="docutils literal notranslate"><span class="pre">Node</span></code></a><a class="headerlink" href="#internal-classes-accessed-through-node" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>Access of <code class="docutils literal notranslate"><span class="pre">Module</span></code>, <code class="docutils literal notranslate"><span class="pre">Function</span></code>, <code class="docutils literal notranslate"><span class="pre">Class</span></code>, <code class="docutils literal notranslate"><span class="pre">Instance</span></code>, <code class="docutils literal notranslate"><span class="pre">File</span></code> and <code class="docutils literal notranslate"><span class="pre">Item</span></code> through <code class="docutils literal notranslate"><span class="pre">Node</span></code> instances now issue
this warning:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage of Function.Module is deprecated, please use pytest.Module instead
</pre></div>
</div>
<p>Users should just <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pytest</span></code> and access those objects using the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module.</p>
<p>This has been documented as deprecated for years, but only now we are actually emitting deprecation warnings.</p>
</div>
<div class="section" id="node-get-marker">
<h5><a class="toc-backref" href="#id42"><code class="docutils literal notranslate"><span class="pre">Node.get_marker</span></code></a><a class="headerlink" href="#node-get-marker" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>As part of a large <a class="reference internal" href="contents.html#marker-revamp"><span class="std std-ref">Marker revamp and iteration</span></a>, <code class="docutils literal notranslate"><span class="pre">_pytest.nodes.Node.get_marker</span></code> is removed. See
<a class="reference internal" href="contents.html#update-marker-code"><span class="std std-ref">the documentation</span></a> on tips on how to update your code.</p>
</div>
<div class="section" id="somefunction-markname">
<h5><a class="toc-backref" href="#id43"><code class="docutils literal notranslate"><span class="pre">somefunction.markname</span></code></a><a class="headerlink" href="#somefunction-markname" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>As part of a large <a class="reference internal" href="contents.html#marker-revamp"><span class="std std-ref">Marker revamp and iteration</span></a> we already deprecated using <code class="docutils literal notranslate"><span class="pre">MarkInfo</span></code>
the only correct way to get markers of an element is via <code class="docutils literal notranslate"><span class="pre">node.iter_markers(name)</span></code>.</p>
</div>
<div class="section" id="pytest-namespace">
<span id="pytest-namespace-deprecated"></span><h5><a class="toc-backref" href="#id44"><code class="docutils literal notranslate"><span class="pre">pytest_namespace</span></code></a><a class="headerlink" href="#pytest-namespace" title="Permalink to this headline">¶</a></h5>
<div class="versionremoved">
<p><span class="versionmodified removed">Removed in version 4.0.</span></p>
</div>
<p>This hook is deprecated because it greatly complicates the pytest internals regarding configuration and initialization, making some
bug fixes and refactorings impossible.</p>
<p>Example of usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySymbol</span><span class="p">:</span>
    <span class="o">...</span>


<span class="k">def</span> <span class="nf">pytest_namespace</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;my_symbol&quot;</span><span class="p">:</span> <span class="n">MySymbol</span><span class="p">()}</span>
</pre></div>
</div>
<p>Plugin authors relying on this hook should instead require that users now import the plugin modules directly (with an appropriate public API).</p>
<p>As a stopgap measure, plugin authors may still inject their names into pytest’s namespace, usually during <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">pytest_configure</span><span class="p">():</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">my_symbol</span> <span class="o">=</span> <span class="n">MySymbol</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-contributing"></span><div class="section" id="contribution-getting-started">
<span id="contributing"></span><h3>Contribution getting started<a class="headerlink" href="#contribution-getting-started" title="Permalink to this headline">¶</a></h3>
<p>Contributions are highly welcomed and appreciated.  Every little bit of help counts,
so do not hesitate!</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#contribution-getting-started" id="id3">Contribution getting started</a></p>
<ul>
<li><p><a class="reference internal" href="#feature-requests-and-feedback" id="id4">Feature requests and feedback</a></p></li>
<li><p><a class="reference internal" href="#report-bugs" id="id5">Report bugs</a></p></li>
<li><p><a class="reference internal" href="#fix-bugs" id="id6">Fix bugs</a></p></li>
<li><p><a class="reference internal" href="#implement-features" id="id7">Implement features</a></p></li>
<li><p><a class="reference internal" href="#write-documentation" id="id8">Write documentation</a></p></li>
<li><p><a class="reference internal" href="#submitting-plugins-to-pytest-dev" id="id9">Submitting Plugins to pytest-dev</a></p></li>
<li><p><a class="reference internal" href="#preparing-pull-requests" id="id10">Preparing Pull Requests</a></p></li>
<li><p><a class="reference internal" href="#joining-the-development-team" id="id11">Joining the Development Team</a></p></li>
<li><p><a class="reference internal" href="#backporting-bug-fixes-for-the-next-patch-release" id="id12">Backporting bug fixes for the next patch release</a></p></li>
<li><p><a class="reference internal" href="#handling-stale-issues-prs" id="id13">Handling stale issues/PRs</a></p></li>
<li><p><a class="reference internal" href="#closing-issues" id="id14">Closing Issues</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="feature-requests-and-feedback">
<span id="submitfeedback"></span><h4>Feature requests and feedback<a class="headerlink" href="#feature-requests-and-feedback" title="Permalink to this headline">¶</a></h4>
<p>Do you like pytest?  Share some love on Twitter or in your blog posts!</p>
<p>We’d also like to hear about your propositions and suggestions.  Feel free to
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues">submit them as issues</a> and:</p>
<ul class="simple">
<li><p>Explain in detail how they should work.</p></li>
<li><p>Keep the scope as narrow as possible.  This will make it easier to implement.</p></li>
</ul>
</div>
<div class="section" id="report-bugs">
<span id="reportbugs"></span><h4>Report bugs<a class="headerlink" href="#report-bugs" title="Permalink to this headline">¶</a></h4>
<p>Report bugs for pytest in the <a class="reference external" href="https://github.com/pytest-dev/pytest/issues">issue tracker</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul class="simple">
<li><p>Your operating system name and version.</p></li>
<li><p>Any details about your local setup that might be helpful in troubleshooting,
specifically the Python interpreter version, installed libraries, and pytest
version.</p></li>
<li><p>Detailed steps to reproduce the bug.</p></li>
</ul>
<p>If you can write a demonstration test that currently fails but should pass
(xfail), that is a very useful commit to make as well, even if you cannot
fix the bug itself.</p>
</div>
<div class="section" id="fix-bugs">
<span id="fixbugs"></span><h4>Fix bugs<a class="headerlink" href="#fix-bugs" title="Permalink to this headline">¶</a></h4>
<p>Look through the <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/type:%20bug">GitHub issues for bugs</a>.
See also the <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/status%3A%20easy">“status: easy” issues</a>
that are friendly to new contributors.</p>
<p><a class="reference internal" href="contents.html#contact"><span class="std std-ref">Talk</span></a> to developers to find out how you can fix specific bugs. To indicate that you are going
to work on a particular issue, add a comment to that effect on the specific issue.</p>
<p>Don’t forget to check the issue trackers of your favourite plugins, too!</p>
</div>
<div class="section" id="implement-features">
<span id="writeplugins"></span><h4>Implement features<a class="headerlink" href="#implement-features" title="Permalink to this headline">¶</a></h4>
<p>Look through the <a class="reference external" href="https://github.com/pytest-dev/pytest/labels/type:%20enhancement">GitHub issues for enhancements</a>.</p>
<p><a class="reference internal" href="contents.html#contact"><span class="std std-ref">Talk</span></a> to developers to find out how you can implement specific
features.</p>
</div>
<div class="section" id="write-documentation">
<h4>Write documentation<a class="headerlink" href="#write-documentation" title="Permalink to this headline">¶</a></h4>
<p>Pytest could always use more documentation.  What exactly is needed?</p>
<ul class="simple">
<li><p>More complementary documentation.  Have you perhaps found something unclear?</p></li>
<li><p>Documentation translations.  We currently have only English.</p></li>
<li><p>Docstrings.  There can never be too many of them.</p></li>
<li><p>Blog posts, articles and such – they’re all very appreciated.</p></li>
</ul>
<p>You can also edit documentation files directly in the GitHub web interface,
without using a local copy.  This can be convenient for small fixes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Build the documentation locally with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tox -e docs
</pre></div>
</div>
<p>The built documentation should be available in <code class="docutils literal notranslate"><span class="pre">doc/en/_build/html</span></code>,
where ‘en’ refers to the documentation language.</p>
</div>
<p>Pytest has an API reference which in large part is
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html">generated automatically</a>
from the docstrings of the documented items. Pytest uses the
<a class="reference external" href="https://sphinx-rtd-tutorial.readthedocs.io/en/latest/docstrings.html">Sphinx docstring format</a>.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="n">ArgType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Foo</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Do important stuff.</span>

<span class="sd">    More detailed info here, in separate paragraphs from the subject line.</span>
<span class="sd">    Use proper sentences -- start sentences with capital letters and end</span>
<span class="sd">    with periods.</span>

<span class="sd">    Can include annotated documentation:</span>

<span class="sd">    :param short_arg: An argument which determines stuff.</span>
<span class="sd">    :param long_arg:</span>
<span class="sd">        A long explanation which spans multiple lines, overflows</span>
<span class="sd">        like this.</span>
<span class="sd">    :returns: The result.</span>
<span class="sd">    :raises ValueError:</span>
<span class="sd">        Detailed information when this can happen.</span>

<span class="sd">    .. versionadded:: 6.0</span>

<span class="sd">    Including types into the annotations above is not necessary when</span>
<span class="sd">    type-hinting is being used (as in this example).</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="submitting-plugins-to-pytest-dev">
<span id="submitplugin"></span><h4>Submitting Plugins to pytest-dev<a class="headerlink" href="#submitting-plugins-to-pytest-dev" title="Permalink to this headline">¶</a></h4>
<p>Pytest development of the core, some plugins and support code happens
in repositories living under the <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> organisations:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev">pytest-dev on GitHub</a></p></li>
</ul>
<p>All pytest-dev Contributors team members have write access to all contained
repositories.  Pytest core and plugins are generally developed
using <a class="reference internal" href="#pull-requests">pull requests</a> to respective repositories.</p>
<p>The objectives of the <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> organisation are:</p>
<ul class="simple">
<li><p>Having a central location for popular pytest plugins</p></li>
<li><p>Sharing some of the maintenance responsibility (in case a maintainer no
longer wishes to maintain a plugin)</p></li>
</ul>
<p>You can submit your plugin by subscribing to the <a class="reference external" href="https://mail.python.org/mailman/listinfo/pytest-dev">pytest-dev mail list</a> and writing a
mail pointing to your existing pytest plugin repository which must have
the following:</p>
<ul class="simple">
<li><p>PyPI presence with packaging metadata that contains a <code class="docutils literal notranslate"><span class="pre">pytest-</span></code>
prefixed name, version number, authors, short and long description.</p></li>
<li><p>a  <a class="reference external" href="https://tox.readthedocs.io/en/latest/config.html#configuration-discovery">tox configuration</a>
for running tests using <a class="reference external" href="https://tox.readthedocs.io">tox</a>.</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">README</span></code> describing how to use the plugin and on which
platforms it runs.</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> file containing the licensing information, with
matching info in its packaging metadata.</p></li>
<li><p>an issue tracker for bug reports and enhancement requests.</p></li>
<li><p>a <a class="reference external" href="https://keepachangelog.com/">changelog</a>.</p></li>
</ul>
<p>If no contributor strongly objects and two agree, the repository can then be
transferred to the <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> organisation.</p>
<p>Here’s a rundown of how a repository transfer usually proceeds
(using a repository named <code class="docutils literal notranslate"><span class="pre">joedoe/pytest-xyz</span></code> as example):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">joedoe</span></code> transfers repository ownership to <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> administrator <code class="docutils literal notranslate"><span class="pre">calvin</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calvin</span></code> creates <code class="docutils literal notranslate"><span class="pre">pytest-xyz-admin</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest-xyz-developers</span></code> teams, inviting <code class="docutils literal notranslate"><span class="pre">joedoe</span></code> to both as <strong>maintainer</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calvin</span></code> transfers repository to <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> and configures team access:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest-xyz-admin</span></code> <strong>admin</strong> access;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest-xyz-developers</span></code> <strong>write</strong> access;</p></li>
</ul>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest-dev/Contributors</span></code> team has write access to all projects, and
every project administrator is in it. We recommend that each plugin has at least three
people who have the right to release to PyPI.</p>
<p>Repository owners can rest assured that no <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code> administrator will ever make
releases of your repository or take ownership in any way, except in rare cases
where someone becomes unresponsive after months of contact attempts.
As stated, the objective is to share maintenance and avoid “plugin-abandon”.</p>
</div>
<div class="section" id="preparing-pull-requests">
<span id="id1"></span><span id="pull-requests"></span><h4>Preparing Pull Requests<a class="headerlink" href="#preparing-pull-requests" title="Permalink to this headline">¶</a></h4>
<div class="section" id="short-version">
<h5>Short version<a class="headerlink" href="#short-version" title="Permalink to this headline">¶</a></h5>
<ol class="arabic">
<li><p>Fork the repository.</p></li>
<li><p>Enable and install <a class="reference external" href="https://pre-commit.com">pre-commit</a> to ensure style-guides and code checks are followed.</p></li>
<li><p>Follow <strong>PEP-8</strong> for naming and <a class="reference external" href="https://github.com/psf/black">black</a> for formatting.</p></li>
<li><p>Tests are run using <code class="docutils literal notranslate"><span class="pre">tox</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tox</span> <span class="o">-</span><span class="n">e</span> <span class="n">linting</span><span class="p">,</span><span class="n">py37</span>
</pre></div>
</div>
<p>The test environments above are usually enough to cover most cases locally.</p>
</li>
<li><p>Write a <code class="docutils literal notranslate"><span class="pre">changelog</span></code> entry: <code class="docutils literal notranslate"><span class="pre">changelog/2574.bugfix.rst</span></code>, use issue id number
and one of <code class="docutils literal notranslate"><span class="pre">feature</span></code>, <code class="docutils literal notranslate"><span class="pre">improvement</span></code>, <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>, <code class="docutils literal notranslate"><span class="pre">doc</span></code>, <code class="docutils literal notranslate"><span class="pre">deprecation</span></code>,
<code class="docutils literal notranslate"><span class="pre">breaking</span></code>, <code class="docutils literal notranslate"><span class="pre">vendor</span></code> or <code class="docutils literal notranslate"><span class="pre">trivial</span></code> for the issue type.</p></li>
<li><p>Unless your change is a trivial or a documentation fix (e.g., a typo or reword of a small section) please
add yourself to the <code class="docutils literal notranslate"><span class="pre">AUTHORS</span></code> file, in alphabetical order.</p></li>
</ol>
</div>
<div class="section" id="long-version">
<h5>Long version<a class="headerlink" href="#long-version" title="Permalink to this headline">¶</a></h5>
<p>What is a “pull request”?  It informs the project’s core developers about the
changes you want to review and merge.  Pull requests are stored on
<a class="reference external" href="https://github.com/pytest-dev/pytest/pulls">GitHub servers</a>.
Once you send a pull request, we can discuss its potential modifications and
even add more commits to it later on. There’s an excellent tutorial on how Pull
Requests work in the
<a class="reference external" href="https://help.github.com/articles/using-pull-requests/">GitHub Help Center</a>.</p>
<p>Here is a simple overview, with pytest-specific bits:</p>
<ol class="arabic">
<li><p>Fork the
<a class="reference external" href="https://github.com/pytest-dev/pytest">pytest GitHub repository</a>.  It’s
fine to use <code class="docutils literal notranslate"><span class="pre">pytest</span></code> as your fork repository name because it will live
under your user.</p></li>
<li><p>Clone your fork locally using <a class="reference external" href="https://git-scm.com/">git</a> and create a branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:YOUR_GITHUB_USERNAME/pytest.git
$ cd pytest
# now, create your own branch off &quot;main&quot;:

    $ git checkout -b your-bugfix-branch-name main
</pre></div>
</div>
<p>Given we have “major.minor.micro” version numbers, bug fixes will usually
be released in micro releases whereas features will be released in
minor releases and incompatible changes in major releases.</p>
<p>If you need some help with Git, follow this quick start
guide: <a class="reference external" href="https://git.wiki.kernel.org/index.php/QuickStart">https://git.wiki.kernel.org/index.php/QuickStart</a></p>
</li>
<li><p>Install <a class="reference external" href="https://pre-commit.com">pre-commit</a> and its hook on the pytest repo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --user pre-commit
$ pre-commit install
</pre></div>
</div>
<p>Afterwards <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> will run whenever you commit.</p>
<p><a class="reference external" href="https://pre-commit.com/">https://pre-commit.com/</a> is a framework for managing and maintaining multi-language pre-commit hooks
to ensure code-style and code formatting is consistent.</p>
</li>
<li><p>Install tox</p>
<p>Tox is used to run all the tests and will automatically setup virtualenvs
to run the tests in.
(will implicitly use <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">https://virtualenv.pypa.io/en/latest/</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install tox
</pre></div>
</div>
</li>
<li><p>Run all the tests</p>
<p>You need to have Python 3.7 available in your system.  Now
running tests is as simple as issuing this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e linting,py37
</pre></div>
</div>
<p>This command will run tests via the “tox” tool against Python 3.7
and also perform “lint” coding-style checks.</p>
</li>
<li><p>You can now edit your local working copy and run the tests again as necessary. Please follow PEP-8 for naming.</p>
<p>You can pass different options to <code class="docutils literal notranslate"><span class="pre">tox</span></code>. For example, to run tests on Python 3.7 and pass options to pytest
(e.g. enter pdb on failure) to pytest you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e py37 -- --pdb
</pre></div>
</div>
<p>Or to only run tests in a particular test module on Python 3.7:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e py37 -- testing/test_config.py
</pre></div>
</div>
<p>When committing, <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> will re-format the files if necessary.</p>
</li>
<li><p>If instead of using <code class="docutils literal notranslate"><span class="pre">tox</span></code> you prefer to run the tests directly, then we suggest to create a virtual environment and use
an editable install with the <code class="docutils literal notranslate"><span class="pre">testing</span></code> extra:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv .venv
$ source .venv/bin/activate  # Linux
$ .venv/Scripts/activate.bat  # Windows
$ pip install -e &quot;.[testing]&quot;
</pre></div>
</div>
<p>Afterwards, you can edit the files and run pytest normally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest testing/test_config.py
</pre></div>
</div>
</li>
<li><p>Create a new changelog entry in <code class="docutils literal notranslate"><span class="pre">changelog</span></code>. The file should be named <code class="docutils literal notranslate"><span class="pre">&lt;issueid&gt;.&lt;type&gt;.rst</span></code>,
where <em>issueid</em> is the number of the issue related to the change and <em>type</em> is one of
<code class="docutils literal notranslate"><span class="pre">feature</span></code>, <code class="docutils literal notranslate"><span class="pre">improvement</span></code>, <code class="docutils literal notranslate"><span class="pre">bugfix</span></code>, <code class="docutils literal notranslate"><span class="pre">doc</span></code>, <code class="docutils literal notranslate"><span class="pre">deprecation</span></code>, <code class="docutils literal notranslate"><span class="pre">breaking</span></code>, <code class="docutils literal notranslate"><span class="pre">vendor</span></code>
or <code class="docutils literal notranslate"><span class="pre">trivial</span></code>. You may skip creating the changelog entry if the change doesn’t affect the
documented behaviour of pytest.</p></li>
<li><p>Add yourself to <code class="docutils literal notranslate"><span class="pre">AUTHORS</span></code> file if not there yet, in alphabetical order.</p></li>
<li><p>Commit and push once your tests pass and you are happy with your change(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git commit -a -m &quot;&lt;commit message&gt;&quot;
$ git push -u
</pre></div>
</div>
</li>
<li><p>Finally, submit a pull request through the GitHub website using this data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span><span class="o">-</span><span class="n">fork</span><span class="p">:</span> <span class="n">YOUR_GITHUB_USERNAME</span><span class="o">/</span><span class="n">pytest</span>
<span class="n">compare</span><span class="p">:</span> <span class="n">your</span><span class="o">-</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span>

<span class="n">base</span><span class="o">-</span><span class="n">fork</span><span class="p">:</span> <span class="n">pytest</span><span class="o">-</span><span class="n">dev</span><span class="o">/</span><span class="n">pytest</span>
<span class="n">base</span><span class="p">:</span> <span class="n">main</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="writing-tests">
<h5>Writing Tests<a class="headerlink" href="#writing-tests" title="Permalink to this headline">¶</a></h5>
<p>Writing tests for plugins or for pytest itself is often done using the <a class="reference external" href="https://docs.pytest.org/en/stable/reference/reference.html#pytester">pytester fixture</a>, as a “black-box” test.</p>
<p>For example, to ensure a simple test passes you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_true_assertion</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        def test_foo():</span>
<span class="sd">            assert True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
    <span class="n">result</span><span class="o">.</span><span class="n">assert_outcomes</span><span class="p">(</span><span class="n">failed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">passed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, it is possible to make checks based on the actual output of the termal using
<em>glob-like</em> expressions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_true_assertion</span><span class="p">(</span><span class="n">pytester</span><span class="p">):</span>
    <span class="n">pytester</span><span class="o">.</span><span class="n">makepyfile</span><span class="p">(</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        def test_foo():</span>
<span class="sd">            assert False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pytester</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
    <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">fnmatch_lines</span><span class="p">([</span><span class="s2">&quot;*assert False*&quot;</span><span class="p">,</span> <span class="s2">&quot;*1 failed*&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>When choosing a file where to write a new test, take a look at the existing files and see if there’s
one file which looks like a good fit. For example, a regression test about a bug in the <code class="docutils literal notranslate"><span class="pre">--lf</span></code> option
should go into <code class="docutils literal notranslate"><span class="pre">test_cacheprovider.py</span></code>, given that this option is implemented in <code class="docutils literal notranslate"><span class="pre">cacheprovider.py</span></code>.
If in doubt, go ahead and open a PR with your best guess and we can discuss this over the code.</p>
</div>
</div>
<div class="section" id="joining-the-development-team">
<h4>Joining the Development Team<a class="headerlink" href="#joining-the-development-team" title="Permalink to this headline">¶</a></h4>
<p>Anyone who has successfully seen through a pull request which did not
require any extra work from the development team to merge will
themselves gain commit access if they so wish (if we forget to ask please send a friendly
reminder).  This does not mean there is any change in your contribution workflow:
everyone goes through the same pull-request-and-review process and
no-one merges their own pull requests unless already approved.  It does however mean you can
participate in the development process more fully since you can merge
pull requests from other contributors yourself after having reviewed
them.</p>
</div>
<div class="section" id="backporting-bug-fixes-for-the-next-patch-release">
<h4>Backporting bug fixes for the next patch release<a class="headerlink" href="#backporting-bug-fixes-for-the-next-patch-release" title="Permalink to this headline">¶</a></h4>
<p>Pytest makes feature release every few weeks or months. In between, patch releases
are made to the previous feature release, containing bug fixes only. The bug fixes
usually fix regressions, but may be any change that should reach users before the
next feature release.</p>
<p>Suppose for example that the latest release was 1.2.3, and you want to include
a bug fix in 1.2.4 (check <a class="reference external" href="https://github.com/pytest-dev/pytest/releases">https://github.com/pytest-dev/pytest/releases</a> for the
actual latest release). The procedure for this is:</p>
<ol class="arabic simple">
<li><p>First, make sure the bug is fixed the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch, with a regular pull
request, as described above. An exception to this is if the bug fix is not
applicable to <code class="docutils literal notranslate"><span class="pre">main</span></code> anymore.</p></li>
</ol>
<p>Automatic method:</p>
<p>Add a <code class="docutils literal notranslate"><span class="pre">backport</span> <span class="pre">1.2.x</span></code> label to the PR you want to backport. This will create
a backport PR against the <code class="docutils literal notranslate"><span class="pre">1.2.x</span></code> branch.</p>
<p>Manual method:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">origin/1.2.x</span> <span class="pre">-b</span> <span class="pre">backport-XXXX</span></code> # use the main PR number here</p></li>
<li><p>Locate the merge commit on the PR, in the <em>merged</em> message, for example:</p>
<blockquote>
<div><p>nicoddemus merged commit 0f8b462 into pytest-dev:main</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">cherry-pick</span> <span class="pre">-x</span> <span class="pre">-m1</span> <span class="pre">REVISION</span></code> # use the revision you found above (<code class="docutils literal notranslate"><span class="pre">0f8b462</span></code>).</p></li>
<li><p>Open a PR targeting <code class="docutils literal notranslate"><span class="pre">1.2.x</span></code>:</p>
<ul class="simple">
<li><p>Prefix the message with <code class="docutils literal notranslate"><span class="pre">[1.2.x]</span></code>.</p></li>
<li><p>Delete the PR body, it usually contains a duplicate commit message.</p></li>
</ul>
</li>
</ol>
<div class="section" id="who-does-the-backporting">
<h5>Who does the backporting<a class="headerlink" href="#who-does-the-backporting" title="Permalink to this headline">¶</a></h5>
<p>As mentioned above, bugs should first be fixed on <code class="docutils literal notranslate"><span class="pre">main</span></code> (except in rare occasions
that a bug only happens in a previous release). So, who should do the backport procedure described
above?</p>
<ol class="arabic simple">
<li><p>If the bug was fixed by a core developer, it is the main responsibility of that core developer
to do the backport.</p></li>
<li><p>However, often the merge is done by another maintainer, in which case it is nice of them to
do the backport procedure if they have the time.</p></li>
<li><p>For bugs submitted by non-maintainers, it is expected that a core developer will to do
the backport, normally the one that merged the PR on <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>If a non-maintainers notices a bug which is fixed on <code class="docutils literal notranslate"><span class="pre">main</span></code> but has not been backported
(due to maintainers forgetting to apply the <em>needs backport</em> label, or just plain missing it),
they are also welcome to open a PR with the backport. The procedure is simple and really
helps with the maintenance of the project.</p></li>
</ol>
<p>All the above are not rules, but merely some guidelines/suggestions on what we should expect
about backports.</p>
</div>
</div>
<div class="section" id="handling-stale-issues-prs">
<h4>Handling stale issues/PRs<a class="headerlink" href="#handling-stale-issues-prs" title="Permalink to this headline">¶</a></h4>
<p>Stale issues/PRs are those where pytest contributors have asked for questions/changes
and the authors didn’t get around to answer/implement them yet after a somewhat long time, or
the discussion simply died because people seemed to lose interest.</p>
<p>There are many reasons why people don’t answer questions or implement requested changes:
they might get busy, lose interest, or just forget about it,
but the fact is that this is very common in open source software.</p>
<p>The pytest team really appreciates every issue and pull request, but being a high-volume project
with many issues and pull requests being submitted daily, we try to reduce the number of stale
issues and PRs by regularly closing them. When an issue/pull request is closed in this manner,
it is by no means a dismissal of the topic being tackled by the issue/pull request, but it
is just a way for us to clear up the queue and make the maintainers’ work more manageable. Submitters
can always reopen the issue/pull request in their own time later if it makes sense.</p>
<div class="section" id="when-to-close">
<h5>When to close<a class="headerlink" href="#when-to-close" title="Permalink to this headline">¶</a></h5>
<p>Here are a few general rules the maintainers use deciding when to close issues/PRs because
of lack of inactivity:</p>
<ul class="simple">
<li><p>Issues labeled <code class="docutils literal notranslate"><span class="pre">question</span></code> or <code class="docutils literal notranslate"><span class="pre">needs</span> <span class="pre">information</span></code>: closed after 14 days inactive.</p></li>
<li><p>Issues labeled <code class="docutils literal notranslate"><span class="pre">proposal</span></code>: closed after six months inactive.</p></li>
<li><p>Pull requests: after one month, consider pinging the author, update linked issue, or consider closing. For pull requests which are nearly finished, the team should consider finishing it up and merging it.</p></li>
</ul>
<p>The above are <strong>not hard rules</strong>, but merely <strong>guidelines</strong>, and can be (and often are!) reviewed on a case-by-case basis.</p>
</div>
<div class="section" id="closing-pull-requests">
<h5>Closing pull requests<a class="headerlink" href="#closing-pull-requests" title="Permalink to this headline">¶</a></h5>
<p>When closing a Pull Request, it needs to be acknowledging the time, effort, and interest demonstrated by the person which submitted it. As mentioned previously, it is not the intent of the team to dismiss a stalled pull request entirely but to merely to clear up our queue, so a message like the one below is warranted when closing a pull request that went stale:</p>
<blockquote>
<div><p>Hi &lt;contributor&gt;,</p>
<p>First of all, we would like to thank you for your time and effort on working on this, the pytest team deeply appreciates it.</p>
<p>We noticed it has been awhile since you have updated this PR, however. pytest is a high activity project, with many issues/PRs being opened daily, so it is hard for us maintainers to track which PRs are ready for merging, for review, or need more attention.</p>
<p>So for those reasons we, think it is best to close the PR for now, but with the only intention to clean up our queue, it is by no means a rejection of your changes. We still encourage you to re-open this PR (it is just a click of a button away) when you are ready to get back to it.</p>
<p>Again we appreciate your time for working on this, and hope you might get back to this at a later time!</p>
<p>&lt;bye&gt;</p>
</div></blockquote>
</div>
</div>
<div class="section" id="closing-issues">
<h4>Closing Issues<a class="headerlink" href="#closing-issues" title="Permalink to this headline">¶</a></h4>
<p>When a pull request is submitted to fix an issue, add text like <code class="docutils literal notranslate"><span class="pre">closes</span> <span class="pre">#XYZW</span></code> to the PR description and/or commits (where <code class="docutils literal notranslate"><span class="pre">XYZW</span></code> is the issue number). See the <a class="reference external" href="https://help.github.com/en/github/managing-your-work-on-github/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword">GitHub docs</a> for more information.</p>
<p>When an issue is due to user error (e.g. misunderstanding of a functionality), please politely explain to the user why the issue raised is really a non-issue and ask them to close the issue if they have no further questions. If the original requestor is unresponsive, the issue will be handled as described in the section <a class="reference internal" href="#handling-stale-issues-prs">Handling stale issues/PRs</a> above.</p>
</div>
</div>
<span id="document-development_guide"></span><div class="section" id="development-guide">
<h3>Development Guide<a class="headerlink" href="#development-guide" title="Permalink to this headline">¶</a></h3>
<p>The contributing guidelines are to be found <a class="reference internal" href="contents.html#contributing"><span class="std std-ref">here</span></a>.
The release procedure for pytest is documented on
<a class="reference external" href="https://github.com/pytest-dev/pytest/blob/main/RELEASING.rst">GitHub</a>.</p>
</div>
<span id="document-sponsor"></span><div class="section" id="sponsor">
<h3>Sponsor<a class="headerlink" href="#sponsor" title="Permalink to this headline">¶</a></h3>
<p>pytest is maintained by a team of volunteers from all around the world in their free time. While
we work on pytest because we love the project and use it daily at our daily jobs, monetary
compensation when possible is welcome to justify time away from friends, family and personal time.</p>
<p>Money is also used to fund local sprints, merchandising (stickers to distribute in conferences for example)
and every few years a large sprint involving all members.</p>
<div class="section" id="opencollective">
<h4>OpenCollective<a class="headerlink" href="#opencollective" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://opencollective.com">Open Collective</a> is an online funding platform for open and transparent communities.
It provide tools to raise money and share your finances in full transparency.</p>
<p>It is the platform of choice for individuals and companies that want to make one-time or
monthly donations directly to the project.</p>
<p>See more details in the <a class="reference external" href="https://opencollective.com/pytest">pytest collective</a>.</p>
</div>
</div>
<span id="document-tidelift"></span><div class="section" id="pytest-for-enterprise">
<h3>pytest for enterprise<a class="headerlink" href="#pytest-for-enterprise" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tidelift.com">Tidelift</a> is working with the maintainers of pytest and thousands of other
open source projects to deliver commercial support and maintenance for the open source dependencies you use
to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the
exact dependencies you use.</p>
<p><a class="reference external" href="https://tidelift.com/subscription/pkg/pypi-pytest?utm_source=pypi-pytest&amp;utm_medium=referral&amp;utm_campaign=enterprise">Get more details</a></p>
<p>The Tidelift Subscription is a managed open source subscription for application dependencies covering millions of open source projects across JavaScript, Python, Java, PHP, Ruby, .NET, and more.</p>
<p>Your subscription includes:</p>
<ul class="simple">
<li><p><strong>Security updates</strong></p>
<ul>
<li><p>Tidelift’s security response team coordinates patches for new breaking security vulnerabilities and alerts immediately through a private channel, so your software supply chain is always secure.</p></li>
</ul>
</li>
<li><p><strong>Licensing verification and indemnification</strong></p>
<ul>
<li><p>Tidelift verifies license information to enable easy policy enforcement and adds intellectual property indemnification to cover creators and users in case something goes wrong. You always have a 100% up-to-date bill of materials for your dependencies to share with your legal team, customers, or partners.</p></li>
</ul>
</li>
<li><p><strong>Maintenance and code improvement</strong></p>
<ul>
<li><p>Tidelift ensures the software you rely on keeps working as long as you need it to work. Your managed dependencies are actively maintained and we recruit additional maintainers where required.</p></li>
</ul>
</li>
<li><p><strong>Package selection and version guidance</strong></p>
<ul>
<li><p>Tidelift helps you choose the best open source packages from the start—and then guide you through updates to stay on the best releases as new issues arise.</p></li>
</ul>
</li>
<li><p><strong>Roadmap input</strong></p>
<ul>
<li><p>Take a seat at the table with the creators behind the software you use. Tidelift’s participating maintainers earn more income as their software is used by more subscribers, so they’re interested in knowing what you need.</p></li>
</ul>
</li>
<li><p><strong>Tooling and cloud integration</strong></p>
<ul>
<li><p>Tidelift works with GitHub, GitLab, BitBucket, and every cloud platform (and other deployment targets, too).</p></li>
</ul>
</li>
</ul>
<p>The end result? All of the capabilities you expect from commercial-grade software, for the full breadth of open
source you use. That means less time grappling with esoteric open source trivia, and more time building your own
applications—and your business.</p>
<p><a class="reference external" href="https://tidelift.com/subscription/request-a-demo?utm_source=pypi-pytest&amp;utm_medium=referral&amp;utm_campaign=enterprise">Request a demo</a></p>
</div>
<span id="document-license"></span><div class="section" id="license">
<span id="id1"></span><h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Distributed under the terms of the <a class="reference external" href="https://github.com/pytest-dev/pytest/blob/main/LICENSE">MIT</a> license, pytest is free and open source software.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The MIT License (MIT)

Copyright (c) 2004 Holger Krekel and others

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the &quot;Software&quot;), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</pre></div>
</div>
</div>
<span id="document-contact"></span><div class="section" id="contact">
<span id="contact-channels"></span><span id="id1"></span><h3>Contact channels<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues">pytest issue tracker</a> to report bugs or suggest features (for version
2.0 and above).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/discussions">pytest discussions</a> at github for general questions.</p></li>
<li><p><a class="reference external" href="https://discord.com/invite/pytest-dev">pytest discord server</a>
for pytest development visibility and general assistance.</p></li>
<li><p><a class="reference external" href="http://stackoverflow.com/search?q=pytest">pytest on stackoverflow.com</a>
to post precise questions with the tag <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.  New Questions will usually
be seen by pytest users or developers and answered quickly.</p></li>
<li><p><a class="reference external" href="http://lists.idyll.org/listinfo/testing-in-python">Testing In Python</a>: a mailing list for Python testing tools and discussion.</p></li>
<li><p><a class="reference external" href="http://mail.python.org/mailman/listinfo/pytest-dev">pytest-dev at python.org (mailing list)</a> pytest specific announcements and discussions.</p></li>
<li><p><a class="reference internal" href="contents.html#document-contributing"><span class="doc">contribution guide</span></a> for help on submitting pull
requests to GitHub.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#pytest</span></code> <a class="reference external" href="ircs://irc.libera.chat:6697/#pytest">on irc.libera.chat</a> IRC
channel for random questions (using an IRC client, <a class="reference external" href="https://web.libera.chat/#pytest">via webchat</a>, or <a class="reference external" href="https://matrix.to/#/%23pytest:libera.chat">via Matrix</a>).</p></li>
<li><p>private mail to Holger.Krekel at gmail com if you want to communicate sensitive issues</p></li>
<li><p><a class="reference external" href="https://merlinux.eu/">merlinux.eu</a> offers pytest and tox-related professional teaching and
consulting.</p></li>
</ul>
</div>
<span id="document-history"></span><div class="section" id="history">
<h3>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<p>pytest has a long and interesting history. The <a class="reference external" href="https://github.com/pytest-dev/pytest/commit/5992a8ef21424d7571305a8d7e2a3431ee7e1e23">first commit</a>
in this repository is from January 2007, and even that commit alone already
tells a lot: The repository originally was from the <a class="reference external" href="https://pypi.org/project/py/">py</a>
library (later split off to pytest), and it
originally was a SVN revision, migrated to Mercurial, and finally migrated to
git.</p>
<p>However, the commit says “create the new development trunk” and is
already quite big: <em>435 files changed, 58640 insertions(+)</em>. This is because
pytest originally was born as part of <a class="reference external" href="https://www.pypy.org/">PyPy</a>, to make
it easier to write tests for it. Here’s how it evolved from there to its own
project:</p>
<ul>
<li><p>Late 2002 / early 2003, <a class="reference external" href="https://morepypy.blogspot.com/2018/09/the-first-15-years-of-pypy.html">PyPy was
born</a>.</p></li>
<li><p>Like that blog post mentioned, from very early on, there was a big
focus on testing. There were various <code class="docutils literal notranslate"><span class="pre">testsupport</span></code> files on top of
unittest.py, and as early as June 2003, Holger Krekel (<a class="reference external" href="https://github.com/hpk42">&#64;hpk42</a>)
<a class="reference external" href="https://mail.python.org/pipermail/pypy-dev/2003-June/000787.html">refactored</a>
its test framework to clean things up (<code class="docutils literal notranslate"><span class="pre">pypy.tool.test</span></code>, but still
on top of <code class="docutils literal notranslate"><span class="pre">unittest.py</span></code>, with nothing pytest-like yet).</p></li>
<li><p>In December 2003, there was <a class="reference external" href="https://foss.heptapod.net/pypy/pypy/-/commit/02752373e1b29d89c6bb0a97e5f940caa22bdd63">another
iteration</a>
at improving their testing situation, by Stefan Schwarzer, called
<code class="docutils literal notranslate"><span class="pre">pypy.tool.newtest</span></code>.</p></li>
<li><p>However, it didn’t seem to be around for long, as around June/July
2004, efforts started on a thing called <code class="docutils literal notranslate"><span class="pre">utest</span></code>, offering plain
assertions. This seems like the start of something pytest-like, but
unfortunately, it’s unclear where the test runner’s code was at the time.
The closest thing still around is <a class="reference external" href="https://foss.heptapod.net/pypy/pypy/-/commit/0735f9ed287ec20950a7dd0a16fc10810d4f6847">this
file</a>,
but that doesn’t seem like a complete test runner at all. What can be seen
is that there were <a class="reference external" href="https://foss.heptapod.net/pypy/pypy/-/commits/branch/default?utf8=%E2%9C%93&amp;search=utest">various
efforts</a>
by Laura Creighton and Samuele Pedroni (<a class="reference external" href="https://github.com/pedronis">&#64;pedronis</a>) at automatically
converting existing tests to the new <code class="docutils literal notranslate"><span class="pre">utest</span></code> framework.</p></li>
<li><p>Around the same time, for Europython 2004, &#64;hpk42 <a class="reference external" href="http://web.archive.org/web/20041020215353/http://codespeak.net/svn/user/hpk/talks/std-talk.txt">started a
project</a>
originally called “std”, intended to be a “complementary standard
library” - already laying out the principles behind what later became
pytest:</p>
<blockquote>
<div><ul class="simple">
<li><p>current “batteries included” are very useful, but</p>
<ul>
<li><p>some of them are written in a pretty much java-like style,
especially the unittest-framework</p></li>
<li><p>[…]</p></li>
<li><p>the best API is one that doesn’t exist</p></li>
</ul>
</li>
</ul>
<p>[…]</p>
<ul class="simple">
<li><p>a testing package should require as few boilerplate code as
possible and offer much flexibility</p></li>
<li><p>it should provide premium quality tracebacks and debugging aid</p></li>
</ul>
<p>[…]</p>
<ul>
<li><p>first of all … forget about limited “assertXYZ APIs” and use the
real thing, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
</li>
<li><p>this works with plain python but you get unhelpful “assertion
failed” errors with no information</p></li>
<li><p>std.utest (magic!) actually reinterprets the assertion expression
and offers detailed information about underlying values</p></li>
</ul>
</div></blockquote>
</li>
<li><p>In September 2004, the <code class="docutils literal notranslate"><span class="pre">py-dev</span></code> mailinglist gets born, which <a class="reference external" href="https://mail.python.org/pipermail/pytest-dev/">is
now</a> <code class="docutils literal notranslate"><span class="pre">pytest-dev</span></code>,
but thankfully with all the original archives still intact.</p></li>
<li><p>Around September/October 2004, the <code class="docutils literal notranslate"><span class="pre">std</span></code> project <a class="reference external" href="https://mail.python.org/pipermail/pypy-dev/2004-September/001565.html">was renamed</a> to
<code class="docutils literal notranslate"><span class="pre">py</span></code> and <code class="docutils literal notranslate"><span class="pre">std.utest</span></code> became <code class="docutils literal notranslate"><span class="pre">py.test</span></code>. This is also the first time the
<a class="reference external" href="https://foss.heptapod.net/pypy/pypy/-/commit/42cf50c412026028e20acd23d518bd92e623ac11">entire source
code</a>,
seems to be available, with much of the API still being around today:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>, which is being phased out of pytest (in favour of
pathlib) some 16-17 years later</p></li>
<li><p>The idea of the collection tree, including <code class="docutils literal notranslate"><span class="pre">Collector</span></code>,
<code class="docutils literal notranslate"><span class="pre">FSCollector</span></code>, <code class="docutils literal notranslate"><span class="pre">Directory</span></code>, <code class="docutils literal notranslate"><span class="pre">PyCollector</span></code>, <code class="docutils literal notranslate"><span class="pre">Module</span></code>,
<code class="docutils literal notranslate"><span class="pre">Class</span></code></p></li>
<li><p>Arguments like <code class="docutils literal notranslate"><span class="pre">-x</span></code> / <code class="docutils literal notranslate"><span class="pre">--exitfirst</span></code>, <code class="docutils literal notranslate"><span class="pre">-l</span></code> /
<code class="docutils literal notranslate"><span class="pre">--showlocals</span></code>, <code class="docutils literal notranslate"><span class="pre">--fulltrace</span></code>, <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>, <code class="docutils literal notranslate"><span class="pre">-S</span></code> /
<code class="docutils literal notranslate"><span class="pre">--nocapture</span></code> (<code class="docutils literal notranslate"><span class="pre">-s</span></code> / <code class="docutils literal notranslate"><span class="pre">--capture=off</span></code> today),
<code class="docutils literal notranslate"><span class="pre">--collectonly</span></code> (<code class="docutils literal notranslate"><span class="pre">--collect-only</span></code> today)</p></li>
</ul>
</li>
<li><p>In the same month, the <code class="docutils literal notranslate"><span class="pre">py</span></code> library <a class="reference external" href="https://foss.heptapod.net/pypy/pypy/-/commit/6bdafe9203ad92eb259270b267189141c53bce33">gets split off</a>
from <code class="docutils literal notranslate"><span class="pre">PyPy</span></code></p></li>
<li><p>It seemed to get rather quiet for a while, and little seemed to happen
between October 2004 (removing <code class="docutils literal notranslate"><span class="pre">py</span></code> from PyPy) and January
2007 (first commit in the now-pytest repository). However, there were
various discussions about features/ideas on the mailinglist, and
<a class="reference external" href="https://pypi.org/project/py/0.8.0-alpha2/#history/">a couple of releases</a> every
couple of months:</p>
<ul class="simple">
<li><p>March 2006: py 0.8.0-alpha2</p></li>
<li><p>May 2007: py 0.9.0</p></li>
<li><p>March 2008: py 0.9.1 (first release to be found <a class="reference external" href="https://github.com/pytest-dev/pytest/blob/main/doc/en/changelog.rst#091">in the pytest
changelog</a>!)</p></li>
<li><p>August 2008: py 0.9.2</p></li>
</ul>
</li>
<li><p>In August 2009, py 1.0.0 was released, <a class="reference external" href="https://holgerkrekel.net/2009/08/04/pylib-1-0-0-released-the-testing-with-python-innovations-continue/">introducing a lot of
fundamental
features</a>:</p>
<ul class="simple">
<li><p>funcargs/fixtures</p></li>
<li><p>A <a class="reference external" href="http://web.archive.org/web/20090629032718/https://codespeak.net/py/dist/test/extend.html">plugin
architecture</a>
which still looks very much the same today!</p></li>
<li><p>Various <a class="reference external" href="http://web.archive.org/web/20091005181132/https://codespeak.net/py/dist/test/plugin/index.html">default
plugins</a>,
including
<a class="reference external" href="http://web.archive.org/web/20091012022829/http://codespeak.net/py/dist/test/plugin/how-to/monkeypatch.html">monkeypatch</a></p></li>
</ul>
</li>
<li><p>Even back there, the
<a class="reference external" href="http://web.archive.org/web/20091005222413/http://codespeak.net/py/dist/faq.html">FAQ</a>
said:</p>
<blockquote>
<div><p>Clearly, [a second standard library] was ambitious and the naming has
maybe haunted the project rather than helping it. There may be a
project name change and possibly a split up into different projects
sometime.</p>
</div></blockquote>
<p>and that finally happened in November 2010, when pytest 2.0.0 <a class="reference external" href="https://mail.python.org/pipermail/pytest-dev/2010-November/001687.html">was
released</a>
as a package separate from <code class="docutils literal notranslate"><span class="pre">py</span></code> (but still called <code class="docutils literal notranslate"><span class="pre">py.test</span></code>).</p>
</li>
<li><p>In August 2016, pytest 3.0.0 <a class="reference internal" href="contents.html#release-3-0-0"><span class="std std-ref">was released</span></a>,
which adds <code class="docutils literal notranslate"><span class="pre">pytest</span></code> (rather than <code class="docutils literal notranslate"><span class="pre">py.test</span></code>) as the recommended
command-line entry point</p></li>
</ul>
<p>Due to this history, it’s difficult to answer the question when pytest was started.
It depends what point should really be seen as the start of it all. One
possible interpretation is to  pick Europython 2004, i.e. around June/July
2004.</p>
</div>
<span id="document-historical-notes"></span><div class="section" id="historical-notes">
<h3>Historical Notes<a class="headerlink" href="#historical-notes" title="Permalink to this headline">¶</a></h3>
<p>This page lists features or behavior from previous versions of pytest which have changed over the years. They are
kept here as a historical note so users looking at old code can find documentation related to them.</p>
<div class="section" id="marker-revamp-and-iteration">
<span id="marker-revamp"></span><h4>Marker revamp and iteration<a class="headerlink" href="#marker-revamp-and-iteration" title="Permalink to this headline">¶</a></h4>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 3.6.</span></p>
</div>
<p>pytest’s marker implementation traditionally worked by simply updating the <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> attribute of functions to cumulatively add markers. As a result, markers would unintentionally be passed along class hierarchies in surprising ways. Further, the API for retrieving them was inconsistent, as markers from parameterization would be stored differently than markers applied using the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark</span></code> decorator and markers added via <code class="docutils literal notranslate"><span class="pre">node.add_marker</span></code>.</p>
<p>This state of things made it technically next to impossible to use data from markers correctly without having a deep understanding of the internals, leading to subtle and hard to understand bugs in more advanced usages.</p>
<p>Depending on how a marker got declared/changed one would get either a <code class="docutils literal notranslate"><span class="pre">MarkerInfo</span></code> which might contain markers from sibling classes,
<code class="docutils literal notranslate"><span class="pre">MarkDecorators</span></code> when marks came from parameterization or from a <code class="docutils literal notranslate"><span class="pre">node.add_marker</span></code> call, discarding prior marks. Also <code class="docutils literal notranslate"><span class="pre">MarkerInfo</span></code> acts like a single mark, when it in fact represents a merged view on multiple marks with the same name.</p>
<p>On top of that markers were not accessible in the same way for modules, classes, and functions/methods.
In fact, markers were only accessible in functions, even if they were declared on classes/modules.</p>
<p>A new API to access markers has been introduced in pytest 3.6 in order to solve the problems with
the initial design, providing the <a class="reference internal" href="contents.html#pytest.nodes.Node.iter_markers" title="_pytest.nodes.Node.iter_markers"><code class="xref py py-func docutils literal notranslate"><span class="pre">_pytest.nodes.Node.iter_markers()</span></code></a> method to iterate over
markers in a consistent manner and reworking the internals, which solved a great deal of problems
with the initial design.</p>
<div class="section" id="updating-code">
<span id="update-marker-code"></span><h5>Updating code<a class="headerlink" href="#updating-code" title="Permalink to this headline">¶</a></h5>
<p>The old <code class="docutils literal notranslate"><span class="pre">Node.get_marker(name)</span></code> function is considered deprecated because it returns an internal <code class="docutils literal notranslate"><span class="pre">MarkerInfo</span></code> object
which contains the merged name, <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> of all the markers which apply to that node.</p>
<p>In general there are two scenarios on how markers should be handled:</p>
<p>1. Marks overwrite each other. Order matters but you only want to think of your mark as a single item. E.g.
<code class="docutils literal notranslate"><span class="pre">log_level('info')</span></code> at a module level can be overwritten by <code class="docutils literal notranslate"><span class="pre">log_level('debug')</span></code> for a specific test.</p>
<blockquote>
<div><p>In this case, use <code class="docutils literal notranslate"><span class="pre">Node.get_closest_marker(name)</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace this:</span>
<span class="n">marker</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_marker</span><span class="p">(</span><span class="s2">&quot;log_level&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">marker</span><span class="p">:</span>
    <span class="n">level</span> <span class="o">=</span> <span class="n">marker</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># by this:</span>
<span class="n">marker</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_closest_marker</span><span class="p">(</span><span class="s2">&quot;log_level&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">marker</span><span class="p">:</span>
    <span class="n">level</span> <span class="o">=</span> <span class="n">marker</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>2. Marks compose in an additive manner. E.g. <code class="docutils literal notranslate"><span class="pre">skipif(condition)</span></code> marks mean you just want to evaluate all of them,
order doesn’t even matter. You probably want to think of your marks as a set here.</p>
<blockquote>
<div><p>In this case iterate over each mark and handle their <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> individually.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace this</span>
<span class="n">skipif</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_marker</span><span class="p">(</span><span class="s2">&quot;skipif&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">skipif</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">condition</span> <span class="ow">in</span> <span class="n">skipif</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="c1"># eval condition</span>
        <span class="o">...</span>

<span class="c1"># by this:</span>
<span class="k">for</span> <span class="n">skipif</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">iter_markers</span><span class="p">(</span><span class="s2">&quot;skipif&quot;</span><span class="p">):</span>
    <span class="n">condition</span> <span class="o">=</span> <span class="n">skipif</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># eval condition</span>
</pre></div>
</div>
</div></blockquote>
<p>If you are unsure or have any questions, please consider opening
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/new">an issue</a>.</p>
</div>
<div class="section" id="related-issues">
<h5>Related issues<a class="headerlink" href="#related-issues" title="Permalink to this headline">¶</a></h5>
<p>Here is a non-exhaustive list of issues fixed by the new implementation:</p>
<ul class="simple">
<li><p>Marks don’t pick up nested classes (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/199">issue #199</a>).</p></li>
<li><p>Markers stain on all related classes (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/568">issue #568</a>).</p></li>
<li><p>Combining marks - args and kwargs calculation (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2897">issue #2897</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request.node.get_marker('name')</span></code> returns <code class="docutils literal notranslate"><span class="pre">None</span></code> for markers applied in classes (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/902">issue #902</a>).</p></li>
<li><p>Marks applied in parametrize are stored as markdecorator (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2400">issue #2400</a>).</p></li>
<li><p>Fix marker interaction in a backward incompatible way (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1670">issue #1670</a>).</p></li>
<li><p>Refactor marks to get rid of the current “marks transfer” mechanism (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2363">issue #2363</a>).</p></li>
<li><p>Introduce FunctionDefinition node, use it in generate_tests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2522">issue #2522</a>).</p></li>
<li><p>Remove named marker attributes and collect markers in items (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/891">issue #891</a>).</p></li>
<li><p>skipif mark from parametrize hides module level skipif mark (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1540">issue #1540</a>).</p></li>
<li><p>skipif + parametrize not skipping tests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1296">issue #1296</a>).</p></li>
<li><p>Marker transfer incompatible with inheritance (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/535">issue #535</a>).</p></li>
</ul>
<p>More details can be found in the <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/3317">original PR</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>in a future major release of pytest we will introduce class based markers,
at which point markers will no longer be limited to instances of <code class="xref py py-class docutils literal notranslate"><span class="pre">Mark</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="cache-plugin-integrated-into-the-core">
<h4>cache plugin integrated into the core<a class="headerlink" href="#cache-plugin-integrated-into-the-core" title="Permalink to this headline">¶</a></h4>
<p>The functionality of the <a class="reference internal" href="contents.html#cache"><span class="std std-ref">core cache</span></a> plugin was previously distributed
as a third party plugin named <code class="docutils literal notranslate"><span class="pre">pytest-cache</span></code>.  The core plugin
is compatible regarding command line options and API usage except that you
can only store/receive data between test runs that is json-serializable.</p>
</div>
<div class="section" id="funcargs-and-pytest-funcarg">
<span id="historical-funcargs-and-pytest-funcargs"></span><h4>funcargs and <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code><a class="headerlink" href="#funcargs-and-pytest-funcarg" title="Permalink to this headline">¶</a></h4>
<p>In versions prior to 2.3 there was no <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> marker
and you had to use a magic <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__NAME</span></code> prefix
for the fixture factory.  This remains and will remain supported
but is not anymore advertised as the primary means of declaring fixture
functions.</p>
</div>
<div class="section" id="pytest-yield-fixture-decorator">
<h4><code class="docutils literal notranslate"><span class="pre">&#64;pytest.yield_fixture</span></code> decorator<a class="headerlink" href="#pytest-yield-fixture-decorator" title="Permalink to this headline">¶</a></h4>
<p>Prior to version 2.10, in order to use a <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement to execute teardown code one
had to mark a fixture using the <code class="docutils literal notranslate"><span class="pre">yield_fixture</span></code> marker. From 2.10 onward, normal
fixtures can use <code class="docutils literal notranslate"><span class="pre">yield</span></code> directly so the <code class="docutils literal notranslate"><span class="pre">yield_fixture</span></code> decorator is no longer needed
and considered deprecated.</p>
</div>
<div class="section" id="pytest-header-in-setup-cfg">
<h4><code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> header in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code><a class="headerlink" href="#pytest-header-in-setup-cfg" title="Permalink to this headline">¶</a></h4>
<p>Prior to 3.0, the supported section name was <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code>. Due to how
this may collide with some distutils commands, the recommended
section name for <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files is now <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code>.</p>
<p>Note that for <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> and <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> files the section
name is <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code>.</p>
</div>
<div class="section" id="applying-marks-to-pytest-mark-parametrize-parameters">
<h4>Applying marks to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> parameters<a class="headerlink" href="#applying-marks-to-pytest-mark-parametrize-parameters" title="Permalink to this headline">¶</a></h4>
<p>Prior to version 3.1 the supported mechanism for marking values
used the syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;test_input,expected&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;3+5&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;2+4&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">((</span><span class="s2">&quot;6*9&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">))]</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">test_eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">,</span> <span class="n">expected</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">eval</span><span class="p">(</span><span class="n">test_input</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
<p>This was an initial hack to support the feature but soon was demonstrated to be incomplete,
broken for passing functions or applying multiple marks with the same name but different parameters.</p>
<p>The old syntax is planned to be removed in pytest-4.0.</p>
</div>
<div class="section" id="pytest-mark-parametrize-argument-names-as-a-tuple">
<h4><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> argument names as a tuple<a class="headerlink" href="#pytest-mark-parametrize-argument-names-as-a-tuple" title="Permalink to this headline">¶</a></h4>
<p>In versions prior to 2.4 one needed to specify the argument
names as a tuple.  This remains valid but the simpler <code class="docutils literal notranslate"><span class="pre">&quot;name1,name2,...&quot;</span></code>
comma-separated-string syntax is now advertised first because
it’s easier to write and produces less line noise.</p>
</div>
<div class="section" id="setup-is-now-an-autouse-fixture">
<h4>setup: is now an “autouse fixture”<a class="headerlink" href="#setup-is-now-an-autouse-fixture" title="Permalink to this headline">¶</a></h4>
<p>During development prior to the pytest-2.3 release the name
<code class="docutils literal notranslate"><span class="pre">pytest.setup</span></code> was used but before the release it was renamed
and moved to become part of the general fixture mechanism,
namely <a class="reference internal" href="contents.html#autouse-fixtures"><span class="std std-ref">Autouse fixtures (fixtures you don’t have to request)</span></a></p>
</div>
<div class="section" id="conditions-as-strings-instead-of-booleans">
<span id="string-conditions"></span><h4>Conditions as strings instead of booleans<a class="headerlink" href="#conditions-as-strings-instead-of-booleans" title="Permalink to this headline">¶</a></h4>
<p>Prior to pytest-2.4 the only way to specify skipif/xfail conditions was
to use strings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="s2">&quot;sys.version_info &gt;= (3,3)&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>During test function setup the skipif condition is evaluated by calling
<code class="docutils literal notranslate"><span class="pre">eval('sys.version_info</span> <span class="pre">&gt;=</span> <span class="pre">(3,0)',</span> <span class="pre">namespace)</span></code>.  The namespace contains
all the module globals, and <code class="docutils literal notranslate"><span class="pre">os</span></code> and <code class="docutils literal notranslate"><span class="pre">sys</span></code> as a minimum.</p>
<p>Since pytest-2.4 <a class="reference internal" href="contents.html#condition-booleans"><span class="std std-ref">boolean conditions</span></a> are considered preferable
because markers can then be freely imported between test modules.
With strings you need to import not only the marker but all variables
used by the marker, which violates encapsulation.</p>
<p>The reason for specifying the condition as a string was that <code class="docutils literal notranslate"><span class="pre">pytest</span></code> can
report a summary of skip conditions based purely on the condition string.
With conditions as booleans you are required to specify a <code class="docutils literal notranslate"><span class="pre">reason</span></code> string.</p>
<p>Note that string conditions will remain fully supported and you are free
to use them if you have no need for cross-importing markers.</p>
<p>The evaluation of a condition string in <code class="docutils literal notranslate"><span class="pre">pytest.mark.skipif(conditionstring)</span></code>
or <code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail(conditionstring)</span></code> takes place in a namespace
dictionary which is constructed as follows:</p>
<ul class="simple">
<li><p>the namespace is initialized by putting the <code class="docutils literal notranslate"><span class="pre">sys</span></code> and <code class="docutils literal notranslate"><span class="pre">os</span></code> modules
and the pytest <code class="docutils literal notranslate"><span class="pre">config</span></code> object into it.</p></li>
<li><p>updated with the module globals of the test function for which the
expression is applied.</p></li>
</ul>
<p>The pytest <code class="docutils literal notranslate"><span class="pre">config</span></code> object allows you to skip based on a test
configuration value which you might have added:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="s2">&quot;not config.getvalue(&#39;db&#39;)&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The equivalent with “boolean conditions” is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="ow">not</span> <span class="n">pytest</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(</span><span class="s2">&quot;db&quot;</span><span class="p">),</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;--db was not specified&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use <code class="docutils literal notranslate"><span class="pre">pytest.config.getvalue()</span></code> in code
imported before pytest’s argument parsing takes place.  For example,
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files are imported before command line parsing and thus
<code class="docutils literal notranslate"><span class="pre">config.getvalue()</span></code> will not execute correctly.</p>
</div>
</div>
<div class="section" id="pytest-set-trace">
<h4><code class="docutils literal notranslate"><span class="pre">pytest.set_trace()</span></code><a class="headerlink" href="#pytest-set-trace" title="Permalink to this headline">¶</a></h4>
<p>Previous to version 2.4 to set a break point in code one needed to use <code class="docutils literal notranslate"><span class="pre">pytest.set_trace()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>


<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="o">...</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>  <span class="c1"># invoke PDB debugger and tracing</span>
</pre></div>
</div>
<p>This is no longer needed and one can use the native <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pdb;pdb.set_trace()</span></code> call directly.</p>
<p>For more details see <a class="reference internal" href="contents.html#breakpoints"><span class="std std-ref">Setting breakpoints</span></a>.</p>
</div>
<div class="section" id="compat-properties">
<h4>“compat” properties<a class="headerlink" href="#compat-properties" title="Permalink to this headline">¶</a></h4>
<p>Access of <code class="docutils literal notranslate"><span class="pre">Module</span></code>, <code class="docutils literal notranslate"><span class="pre">Function</span></code>, <code class="docutils literal notranslate"><span class="pre">Class</span></code>, <code class="docutils literal notranslate"><span class="pre">Instance</span></code>, <code class="docutils literal notranslate"><span class="pre">File</span></code> and <code class="docutils literal notranslate"><span class="pre">Item</span></code> through <code class="docutils literal notranslate"><span class="pre">Node</span></code> instances have long
been documented as deprecated, but started to emit warnings from pytest <code class="docutils literal notranslate"><span class="pre">3.9</span></code> and onward.</p>
<p>Users should just <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pytest</span></code> and access those objects using the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module.</p>
</div>
</div>
<span id="document-talks"></span><div class="section" id="talks-and-tutorials">
<h3>Talks and Tutorials<a class="headerlink" href="#talks-and-tutorials" title="Permalink to this headline">¶</a></h3>
<div class="section" id="books">
<h4>Books<a class="headerlink" href="#books" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.packtpub.com/web-development/pytest-quick-start-guide">pytest Quick Start Guide, by Bruno Oliveira (2018)</a>.</p></li>
<li><p><a class="reference external" href="https://pragprog.com/book/bopytest/python-testing-with-pytest">Python Testing with pytest, by Brian Okken (2017)</a>.</p></li>
<li><p><a class="reference external" href="https://pragprog.com/titles/bopytest2/python-testing-with-pytest-second-edition">Python Testing with pytest, Second Edition, by Brian Okken (2022)</a>.</p></li>
</ul>
</div>
<div class="section" id="talks-and-blog-postings">
<h4>Talks and blog postings<a class="headerlink" href="#talks-and-blog-postings" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Training: <a class="reference external" href="https://www.youtube.com/watch?v=ofPHJrAOaTE">pytest - simple, rapid and fun testing with Python</a>, Florian Bruhin, PyConDE 2022</p></li>
<li><p><a class="reference external" href="https://youtu.be/cSJ-X3TbQ1c?t=15752">pytest: Simple, rapid and fun testing with Python,</a> (&#64; 4:22:32), Florian Bruhin, WeAreDevelopers World Congress 2021</p></li>
<li><p>Webinar: <a class="reference external" href="https://bruhin.software/ins-pytest/">pytest: Test Driven Development für Python (German)</a>, Florian Bruhin, via mylearning.ch, 2020</p></li>
<li><p>Webinar: <a class="reference external" href="https://blog.jetbrains.com/pycharm/2020/08/webinar-recording-simplify-your-tests-with-fixtures-with-oliver-bestwalter/">Simplify Your Tests with Fixtures</a>, Oliver Bestwalter, via JetBrains, 2020</p></li>
<li><p>Training: <a class="reference external" href="https://www.youtube.com/watch?v=CMuSn9cofbI">Introduction to pytest - simple, rapid and fun testing with Python</a>, Florian Bruhin, PyConDE 2019</p></li>
<li><p>Abridged metaprogramming classics - this episode: pytest, Oliver Bestwalter, PyConDE 2019 (<a class="reference external" href="https://github.com/obestwalter/abridged-meta-programming-classics">repository</a>, <a class="reference external" href="https://www.youtube.com/watch?v=zHpeMTJsBRk&amp;feature=youtu.be">recording</a>)</p></li>
<li><p>Testing PySide/PyQt code easily using the pytest framework, Florian Bruhin, Qt World Summit 2019 (<a class="reference external" href="https://bruhin.software/talks/qtws19.pdf">slides</a>, <a class="reference external" href="https://www.youtube.com/watch?v=zdsBS5BXGqQ">recording</a>)</p></li>
<li><p><a class="reference external" href="https://www.slideshare.net/AndreuVallbonaPlazas/pybcn-pytest-recomendaciones-paquetes-bsicos-para-testing-en-python-y-django">pytest: recommendations, basic packages for testing in Python and Django, Andreu Vallbona, PyBCN June 2019</a>.</p></li>
<li><p>pytest: recommendations, basic packages for testing in Python and Django, Andreu Vallbona, PyconES 2017 (<a class="reference external" href="http://talks.apsl.io/testing-pycones-2017/">slides in english</a>, <a class="reference external" href="https://www.youtube.com/watch?v=K20GeR-lXDk">video in spanish</a>)</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=7KgihdKTWY4">pytest advanced, Andrew Svetlov (Russian, PyCon Russia, 2016)</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=_92nfdd5nK8">Pythonic testing, Igor Starikov (Russian, PyNsk, November 2016)</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=rCBHkQ_LVIs">pytest - Rapid Simple Testing, Florian Bruhin, Swiss Python Summit 2016</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=RcN26hznmk4">Improve your testing with Pytest and Mock, Gabe Hollombe, PyCon SG 2015</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=LdVJj65ikRY">Introduction to pytest, Andreas Pelme, EuroPython 2014</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=IBC_dxr-4ps">Advanced Uses of py.test Fixtures, Floris Bruynooghe, EuroPython
2014</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=P-AhpukDIik">Why i use py.test and maybe you should too, Andy Todd, Pycon AU 2013</a></p></li>
<li><p><a class="reference external" href="https://daniel.roygreenfeld.com/pytest-no-boilerplate-testing.html">3-part blog series about pytest from &#64;pydanny alias Daniel Greenfeld (January
2014)</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=aaArYVh6XSM">pytest: helps you write better Django apps, Andreas Pelme, DjangoCon
Europe 2014</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=aUf8Fkb7TaY">Testing Django Applications with pytest, Andreas Pelme, EuroPython
2013</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=QUKoq2K7bis">Testes pythonics com py.test, Vinicius Belchior Assef Neto, Plone
Conf 2013, Brazil</a>.</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=bJhRW4eZMco">Introduction to py.test fixtures, FOSDEM 2013, Floris Bruynooghe</a>.</p></li>
<li><p><a class="reference external" href="http://pyvideo.org/video/2429/pytest-feature-and-new-release-highlights">pytest feature and release highlights, Holger Krekel (GERMAN, October 2013)</a></p></li>
<li><p><a class="reference external" href="http://pythontesting.net/framework/pytest-introduction/">pytest introduction from Brian Okken (January 2013)</a></p></li>
<li><p>pycon australia 2012 pytest talk from Brianna Laugher (<a class="reference external" href="https://www.youtube.com/watch?v=DTNejE9EraI">video</a>, <a class="reference external" href="https://www.slideshare.net/pfctdayelise/funcargs-other-fun-with-pytest">slides</a>, <a class="reference external" href="https://gist.github.com/3386951">code</a>)</p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=9LVqBQcFmyw">pycon 2012 US talk video from Holger Krekel</a></p></li>
<li><p><a class="reference external" href="https://tetamap.wordpress.com//2009/03/03/monkeypatching-in-unit-tests-done-right/">monkey patching done right</a> (blog post, consult <a class="reference external" href="monkeypatch.html">monkeypatch plugin</a> for up-to-date API)</p></li>
</ul>
<p>Test parametrization:</p>
<ul class="simple">
<li><p><a class="reference external" href="parametrize.html#test-generators">generating parametrized tests with fixtures</a>.</p></li>
<li><p><a class="reference external" href="http://bruynooghe.blogspot.com/2010/06/pytest-test-generators-and-cached-setup.html">test generators and cached setup</a></p></li>
<li><p><a class="reference external" href="https://tetamap.wordpress.com/2009/05/13/parametrizing-python-tests-generalized/">parametrizing tests, generalized</a> (blog post)</p></li>
<li><p><a class="reference external" href="https://tetamap.wordpress.com/2009/05/14/putting-test-hooks-into-local-and-global-plugins/">putting test-hooks into local or global plugins</a> (blog post)</p></li>
</ul>
<p>Assertion introspection:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://pybites.blogspot.com/2011/07/behind-scenes-of-pytests-new-assertion.html">(07/2011) Behind the scenes of pytest’s new assertion rewriting</a></p></li>
</ul>
<p>Distributed testing:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://tetamap.wordpress.com//2009/03/23/new-simultanously-test-your-code-on-all-platforms/">simultaneously test your code on all platforms</a> (blog entry)</p></li>
</ul>
<p>Plugin specific examples:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://bruynooghe.blogspot.com/2009/12/skipping-slow-test-by-default-in-pytest.html">skipping slow tests by default in pytest</a> (blog entry)</p></li>
<li><p><a class="reference external" href="plugins.html">many examples in the docs for plugins</a></p></li>
</ul>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-announce/index"></span><div class="section" id="release-announcements">
<h3>Release announcements<a class="headerlink" href="#release-announcements" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<span id="document-announce/release-7.1.3"></span><div class="section" id="pytest-7-1-3">
<h4>pytest-7.1.3<a class="headerlink" href="#pytest-7-1-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 7.1.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Gergely Kalmár</p></li>
<li><p>Nipunn Koorapati</p></li>
<li><p>Pax</p></li>
<li><p>Sviatoslav Sydorenko</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tony Narlock</p></li>
<li><p>Wolfremium</p></li>
<li><p>Zach OBrien</p></li>
<li><p>aizpurua23a</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.1.2"></span><div class="section" id="pytest-7-1-2">
<h4>pytest-7.1.2<a class="headerlink" href="#pytest-7-1-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 7.1.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Kian Eliasi</p></li>
<li><p>Ran Benita</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.1.1"></span><div class="section" id="pytest-7-1-1">
<h4>pytest-7.1.1<a class="headerlink" href="#pytest-7-1-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 7.1.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.1.0"></span><div class="section" id="pytest-7-1-0">
<h4>pytest-7.1.0<a class="headerlink" href="#pytest-7-1-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 7.1.0 release!</p>
<p>This release contains new features, improvements, and bug fixes,
the full list of changes is available in the changelog:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Akuli</p></li>
<li><p>Andrew Svetlov</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Brett Holman</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Chris NeJame</p></li>
<li><p>Dan Alvizu</p></li>
<li><p>Elijah DeLee</p></li>
<li><p>Emmanuel Arias</p></li>
<li><p>Fabian Egli</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Gabor Szabo</p></li>
<li><p>Hasan Ramezani</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Kian Meng, Ang</p></li>
<li><p>Kojo Idrissa</p></li>
<li><p>Masaru Tsuchiyama</p></li>
<li><p>Olga Matoula</p></li>
<li><ol class="upperalpha simple" start="16">
<li><ol class="upperalpha simple" start="12">
<li><p>Lim</p></li>
</ol>
</li>
</ol>
</li>
<li><p>Ran Benita</p></li>
<li><p>Tobias Deiminger</p></li>
<li><p>Yuval Shimon</p></li>
<li><p>eduardo naufel schettino</p></li>
<li><p>Éric</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.0.1"></span><div class="section" id="pytest-7-0-1">
<h4>pytest-7.0.1<a class="headerlink" href="#pytest-7-0-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 7.0.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.0.0"></span><div class="section" id="pytest-7-0-0">
<h4>pytest-7.0.0<a class="headerlink" href="#pytest-7-0-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 7.0.0 release!</p>
<p>This release contains new features, improvements, bug fixes, and breaking changes, so users
are encouraged to take a look at the CHANGELOG carefully:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Adam J. Stewart</p></li>
<li><p>Alexander King</p></li>
<li><p>Amin Alaee</p></li>
<li><p>Andrew Neitsch</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Ben Davies</p></li>
<li><p>Bernát Gábor</p></li>
<li><p>Brian Okken</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Cristian Vera</p></li>
<li><p>Dan Alvizu</p></li>
<li><p>David Szotten</p></li>
<li><p>Eddie</p></li>
<li><p>Emmanuel Arias</p></li>
<li><p>Emmanuel Meric de Bellefon</p></li>
<li><p>Eric Liu</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>GergelyKalmar</p></li>
<li><p>Graeme Smecher</p></li>
<li><p>Harshna</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Jakub Kulík</p></li>
<li><p>James Myatt</p></li>
<li><p>Jeff Rasley</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Kian Meng, Ang</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Naveen-Pratap</p></li>
<li><p>Oleg Höfling</p></li>
<li><p>Olga Matoula</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Simon K</p></li>
<li><p>Srip</p></li>
<li><p>Sören Wegener</p></li>
<li><p>Taneli Hukkinen</p></li>
<li><p>Terje Runde</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>William Jamir Silva</p></li>
<li><p>Yuval Shimon</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>andrewdotn</p></li>
<li><p>denivyruck</p></li>
<li><p>ericluoliu</p></li>
<li><p>oleg.hoefling</p></li>
<li><p>symonk</p></li>
<li><p>ziebam</p></li>
<li><p>Éloi Rivard</p></li>
<li><p>Éric</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-7.0.0rc1"></span><div class="section" id="pytest-7-0-0rc1">
<h4>pytest-7.0.0rc1<a class="headerlink" href="#pytest-7-0-0rc1" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 7.0.0rc1 prerelease!</p>
<p>This is a prerelease, not intended for production use, but to test the upcoming features and improvements
in order to catch any major problems before the final version is released to the major public.</p>
<p>We appreciate your help testing this out before the final release, making sure to report any
regressions to our issue tracker:</p>
<p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues">https://github.com/pytest-dev/pytest/issues</a></p>
<p>When doing so, please include the string <code class="docutils literal notranslate"><span class="pre">[prerelease]</span></code> in the title.</p>
<p>You can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install pytest==7.0.0rc1</p>
</div></blockquote>
<p>Users are encouraged to take a look at the CHANGELOG carefully:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/7.0.x/changelog.html">https://docs.pytest.org/en/7.0.x/changelog.html</a></p>
</div></blockquote>
<p>Thanks to all the contributors to this release:</p>
<ul class="simple">
<li><p>Adam J. Stewart</p></li>
<li><p>Alexander King</p></li>
<li><p>Amin Alaee</p></li>
<li><p>Andrew Neitsch</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Ben Davies</p></li>
<li><p>Bernát Gábor</p></li>
<li><p>Brian Okken</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Cristian Vera</p></li>
<li><p>David Szotten</p></li>
<li><p>Eddie</p></li>
<li><p>Emmanuel Arias</p></li>
<li><p>Emmanuel Meric de Bellefon</p></li>
<li><p>Eric Liu</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>GergelyKalmar</p></li>
<li><p>Graeme Smecher</p></li>
<li><p>Harshna</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Jakub Kulík</p></li>
<li><p>James Myatt</p></li>
<li><p>Jeff Rasley</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Naveen-Pratap</p></li>
<li><p>Oleg Höfling</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Simon K</p></li>
<li><p>Srip</p></li>
<li><p>Sören Wegener</p></li>
<li><p>Taneli Hukkinen</p></li>
<li><p>Terje Runde</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>William Jamir Silva</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>andrewdotn</p></li>
<li><p>denivyruck</p></li>
<li><p>ericluoliu</p></li>
<li><p>oleg.hoefling</p></li>
<li><p>symonk</p></li>
<li><p>ziebam</p></li>
<li><p>Éloi Rivard</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.5"></span><div class="section" id="pytest-6-2-5">
<h4>pytest-6.2.5<a class="headerlink" href="#pytest-6-2-5" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.2.5 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Brylie Christopher Oxley</p></li>
<li><p>Daniel Asztalos</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Jason Haugen</p></li>
<li><p>MapleCCC</p></li>
<li><p>Michał Górny</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sylvain Bellemare</p></li>
<li><p>Thomas Güttler</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.4"></span><div class="section" id="pytest-6-2-4">
<h4>pytest-6.2.4<a class="headerlink" href="#pytest-6-2-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.2.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christian Maurer</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.3"></span><div class="section" id="pytest-6-2-3">
<h4>pytest-6.2.3<a class="headerlink" href="#pytest-6-2-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.2.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.2"></span><div class="section" id="pytest-6-2-2">
<h4>pytest-6.2.2<a class="headerlink" href="#pytest-6-2-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.2.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Adam Johnson</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Chris NeJame</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.1"></span><div class="section" id="pytest-6-2-1">
<h4>pytest-6.2.1<a class="headerlink" href="#pytest-6-2-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.2.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Jakob van Santen</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.2.0"></span><div class="section" id="pytest-6-2-0">
<h4>pytest-6.2.0<a class="headerlink" href="#pytest-6-2-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 6.2.0 release!</p>
<p>This release contains new features, improvements, bug fixes, and breaking changes, so users
are encouraged to take a look at the CHANGELOG carefully:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Adam Johnson</p></li>
<li><p>Albert Villanova del Moral</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Anton</p></li>
<li><p>Ariel Pillemer</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Charles Aracil</p></li>
<li><p>Christine M</p></li>
<li><p>Christine Mecklenborg</p></li>
<li><p>Cserna Zsolt</p></li>
<li><p>Dominic Mortlock</p></li>
<li><p>Emiel van de Laar</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Garvit Shubham</p></li>
<li><p>Gustavo Camargo</p></li>
<li><p>Hugo Martins</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Jakob van Santen</p></li>
<li><p>Josias Aurel</p></li>
<li><p>Jürgen Gmach</p></li>
<li><p>Karthikeyan Singaravelan</p></li>
<li><p>Katarzyna</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Manuel Mariñez</p></li>
<li><p>Matthew Hughes</p></li>
<li><p>Matthias Gabriel</p></li>
<li><p>Max Voitko</p></li>
<li><p>Maximilian Cosmo Sitter</p></li>
<li><p>Mikhail Fesenko</p></li>
<li><p>Nimesh Vashistha</p></li>
<li><p>Pedro Algarvio</p></li>
<li><p>Petter Strandmark</p></li>
<li><p>Prakhar Gurunani</p></li>
<li><p>Prashant Sharma</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sanket Duthade</p></li>
<li><p>Shubham Adep</p></li>
<li><p>Simon K</p></li>
<li><p>Tanvi Mehta</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Vasilis Gerakaris</p></li>
<li><p>William Jamir Silva</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>crricks</p></li>
<li><p>dependabot[bot]</p></li>
<li><p>duthades</p></li>
<li><p>frankgerhardt</p></li>
<li><p>kwgchi</p></li>
<li><p>mickeypash</p></li>
<li><p>symonk</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.1.2"></span><div class="section" id="pytest-6-1-2">
<h4>pytest-6.1.2<a class="headerlink" href="#pytest-6-1-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.1.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Manuel Mariñez</p></li>
<li><p>Ran Benita</p></li>
<li><p>Vasilis Gerakaris</p></li>
<li><p>William Jamir Silva</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.1.1"></span><div class="section" id="pytest-6-1-1">
<h4>pytest-6.1.1<a class="headerlink" href="#pytest-6-1-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.1.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.1.0"></span><div class="section" id="pytest-6-1-0">
<h4>pytest-6.1.0<a class="headerlink" href="#pytest-6-1-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 6.1.0 release!</p>
<p>This release contains new features, improvements, bug fixes, and breaking changes, so users
are encouraged to take a look at the CHANGELOG carefully:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><ol class="upperalpha simple" start="3">
<li><p>Titus Brown</p></li>
</ol>
</li>
<li><p>Drew Devereux</p></li>
<li><p>Faris A Chugthai</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Hynek Schlawack</p></li>
<li><p>Joseph Lucas</p></li>
<li><p>Kamran Ahmad</p></li>
<li><p>Mattreex</p></li>
<li><p>Maximilian Cosmo Sitter</p></li>
<li><p>Ran Benita</p></li>
<li><p>Rüdiger Busche</p></li>
<li><p>Sam Estep</p></li>
<li><p>Sorin Sbarnea</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Vipul Kumar</p></li>
<li><p>Yutaro Ikeda</p></li>
<li><p>hp310780</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.0.2"></span><div class="section" id="pytest-6-0-2">
<h4>pytest-6.0.2<a class="headerlink" href="#pytest-6-0-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.0.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all of the contributors to this release:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.0.1"></span><div class="section" id="pytest-6-0-1">
<h4>pytest-6.0.1<a class="headerlink" href="#pytest-6-0-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.0.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/latest/changelog.html">https://docs.pytest.org/en/latest/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Mattreex</p></li>
<li><p>Ran Benita</p></li>
<li><p>hp310780</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.0.0"></span><div class="section" id="pytest-6-0-0">
<h4>pytest-6.0.0<a class="headerlink" href="#pytest-6-0-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 6.0.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bug fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/latest/changelog.html">https://docs.pytest.org/en/latest/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/latest/">https://docs.pytest.org/en/latest/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Arvin Firouzi</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Debi Mishra</p></li>
<li><p>Garrett Thomas</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Kelton Bassingthwaite</p></li>
<li><p>Kostis Anagnostopoulos</p></li>
<li><p>Lewis Cowles</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Ran Benita</p></li>
<li><p>Simon K</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-6.0.0rc1"></span><div class="section" id="pytest-6-0-0rc1">
<h4>pytest-6.0.0rc1<a class="headerlink" href="#pytest-6-0-0rc1" title="Permalink to this headline">¶</a></h4>
<p>pytest 6.0.0rc1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/latest/changelog.html">https://docs.pytest.org/en/latest/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Alfredo Deza</p></li>
<li><p>Andreas Maier</p></li>
<li><p>Andrew</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>ArtyomKaltovich</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Claire Cecil</p></li>
<li><p>Curt J. Sampson</p></li>
<li><p>Daniel</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Danny Sepler</p></li>
<li><p>David Diaz Barquero</p></li>
<li><p>Fabio Zadrozny</p></li>
<li><p>Felix Nieuwenhuizen</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Florian Dahlitz</p></li>
<li><p>Gleb Nikonorov</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Hunter Richards</p></li>
<li><p>Katarzyna Król</p></li>
<li><p>Katrin Leinweber</p></li>
<li><p>Keri Volans</p></li>
<li><p>Lewis Belcher</p></li>
<li><p>Lukas Geiger</p></li>
<li><p>Martin Michlmayr</p></li>
<li><p>Mattwmaster58</p></li>
<li><p>Maximilian Cosmo Sitter</p></li>
<li><p>Nikolay Kondratyev</p></li>
<li><p>Pavel Karateev</p></li>
<li><p>Paweł Wilczyński</p></li>
<li><p>Prashant Anand</p></li>
<li><p>Ram Rachum</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Ruaridh Williamson</p></li>
<li><p>Simon K</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tor Colvin</p></li>
<li><p>Vlad-Radz</p></li>
<li><p>Xinbin Huang</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>earonesty</p></li>
<li><p>gaurav dhameeja</p></li>
<li><p>gdhameeja</p></li>
<li><p>ibriquem</p></li>
<li><p>mcsitter</p></li>
<li><p>piotrhm</p></li>
<li><p>smarie</p></li>
<li><p>symonk</p></li>
<li><p>xuiqzy</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.4.3"></span><div class="section" id="pytest-5-4-3">
<h4>pytest-5.4.3<a class="headerlink" href="#pytest-5-4-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.4.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Ran Benita</p></li>
<li><p>Tor Colvin</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.4.2"></span><div class="section" id="pytest-5-4-2">
<h4>pytest-5.4.2<a class="headerlink" href="#pytest-5-4-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.4.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.4.1"></span><div class="section" id="pytest-5-4-1">
<h4>pytest-5.4.1<a class="headerlink" href="#pytest-5-4-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.4.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.4.0"></span><div class="section" id="pytest-5-4-0">
<h4>pytest-5.4.0<a class="headerlink" href="#pytest-5-4-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 5.4.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bug fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from PyPI via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christoph Buelter</p></li>
<li><p>Christoph Bülter</p></li>
<li><p>Daniel Arndt</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Holger Kohr</p></li>
<li><p>Hugo</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Jakub Mitoraj</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Minuddin Ahmed Rana</p></li>
<li><p>Nathaniel Compton</p></li>
<li><p>ParetoLife</p></li>
<li><p>Pauli Virtanen</p></li>
<li><p>Philipp Loose</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Stefan Scherfke</p></li>
<li><p>Stefano Mazzucco</p></li>
<li><p>TWood67</p></li>
<li><p>Tobias Schmidt</p></li>
<li><p>Tomáš Gavenčiak</p></li>
<li><p>Vinay Calastry</p></li>
<li><p>Vladyslav Rachek</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>captainCapitalism</p></li>
<li><p>cmachalo</p></li>
<li><p>gftea</p></li>
<li><p>kpinc</p></li>
<li><p>rebecca-palmer</p></li>
<li><p>sdementen</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.5"></span><div class="section" id="pytest-5-3-5">
<h4>pytest-5.3.5<a class="headerlink" href="#pytest-5-3-5" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.3.5 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Daniel Hahler</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.4"></span><div class="section" id="pytest-5-3-4">
<h4>pytest-5.3.4<a class="headerlink" href="#pytest-5-3-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.3.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Ran Benita</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.3"></span><div class="section" id="pytest-5-3-3">
<h4>pytest-5.3.3<a class="headerlink" href="#pytest-5-3-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.3.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Adam Johnson</p></li>
<li><p>Alexandre Mulatinho</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Chris NeJame</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Marcelo Duarte Trevisani</p></li>
<li><p>PaulC</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ryan Barner</p></li>
<li><p>Seth Junot</p></li>
<li><p>marc</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.2"></span><div class="section" id="pytest-5-3-2">
<h4>pytest-5.3.2<a class="headerlink" href="#pytest-5-3-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.3.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Claudio Madotto</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Jared Vasquez</p></li>
<li><p>Michael Rose</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.1"></span><div class="section" id="pytest-5-3-1">
<h4>pytest-5.3.1<a class="headerlink" href="#pytest-5-3-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.3.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Felix Yan</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Mark Dickinson</p></li>
<li><p>Nikolay Kondratyev</p></li>
<li><p>Steffen Schroeder</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.3.0"></span><div class="section" id="pytest-5-3-0">
<h4>pytest-5.3.0<a class="headerlink" href="#pytest-5-3-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 5.3.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>AnjoMan</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Anton Lodder</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Gregory Lee</p></li>
<li><p>Josh Karpel</p></li>
<li><p>JoshKarpel</p></li>
<li><p>Joshua Storck</p></li>
<li><p>Kale Kundert</p></li>
<li><p>MarcoGorelli</p></li>
<li><p>Michael Krebs</p></li>
<li><p>NNRepos</p></li>
<li><p>Ran Benita</p></li>
<li><p>TH3CHARLie</p></li>
<li><p>Tibor Arpas</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>林玮</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-5.2.4"></span><div class="section" id="pytest-5-2-4">
<h4>pytest-5.2.4<a class="headerlink" href="#pytest-5-2-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.2.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Hugo</p></li>
<li><p>Michael Shields</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.2.3"></span><div class="section" id="pytest-5-2-3">
<h4>pytest-5.2.3<a class="headerlink" href="#pytest-5-2-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.2.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Brett Cannon</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Daniil Galiev</p></li>
<li><p>David Szotten</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Patrick Harmon</p></li>
<li><p>Ran Benita</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>Zak Hassan</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.2.2"></span><div class="section" id="pytest-5-2-2">
<h4>pytest-5.2.2<a class="headerlink" href="#pytest-5-2-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.2.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Albert Tugushev</p></li>
<li><p>Andrzej Klajnert</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Nattaphoom Chaipreecha</p></li>
<li><p>Oliver Bestwalter</p></li>
<li><p>Philipp Loose</p></li>
<li><p>Ran Benita</p></li>
<li><p>Victor Maryama</p></li>
<li><p>Yoav Caspi</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.2.1"></span><div class="section" id="pytest-5-2-1">
<h4>pytest-5.2.1<a class="headerlink" href="#pytest-5-2-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.2.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Hynek Schlawack</p></li>
<li><p>Kevin J. Foley</p></li>
<li><p>tadashigaki</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.2.0"></span><div class="section" id="pytest-5-2-0">
<h4>pytest-5.2.0<a class="headerlink" href="#pytest-5-2-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 5.2.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andrzej Klajnert</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>James Cooke</p></li>
<li><p>Michael Goerz</p></li>
<li><p>Ran Benita</p></li>
<li><p>Tomáš Chvátal</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-5.1.3"></span><div class="section" id="pytest-5-1-3">
<h4>pytest-5.1.3<a class="headerlink" href="#pytest-5-1-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.1.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christian Neumüller</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Gene Wood</p></li>
<li><p>Hugo</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.1.2"></span><div class="section" id="pytest-5-1-2">
<h4>pytest-5.1.2<a class="headerlink" href="#pytest-5-1-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.1.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andrzej Klajnert</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christian Neumüller</p></li>
<li><p>Robert Holt</p></li>
<li><p>linchiwei123</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.1.1"></span><div class="section" id="pytest-5-1-1">
<h4>pytest-5.1.1<a class="headerlink" href="#pytest-5-1-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.1.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.1.0"></span><div class="section" id="pytest-5-1-0">
<h4>pytest-5.1.0<a class="headerlink" href="#pytest-5-1-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 5.1.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Albert Tugushev</p></li>
<li><p>Alexey Zankevich</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>David Röthlisberger</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Ilya Stepin</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Kaiqi</p></li>
<li><p>Max R</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Oliver Bestwalter</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Samuel Searles-Bryant</p></li>
<li><p>Semen Zhydenko</p></li>
<li><p>Steffen Schroeder</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>William Woodall</p></li>
<li><p>Wojtek Erbetowski</p></li>
<li><p>Xixi Zhao</p></li>
<li><p>Yash Todi</p></li>
<li><p>boris</p></li>
<li><p>dmitry.dygalo</p></li>
<li><p>helloocc</p></li>
<li><p>martbln</p></li>
<li><p>mei-li</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-5.0.1"></span><div class="section" id="pytest-5-0-1">
<h4>pytest-5.0.1<a class="headerlink" href="#pytest-5-0-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 5.0.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>AmirElkess</p></li>
<li><p>Andreu Vallbona Plazas</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Michael Moore</p></li>
<li><p>Niklas Meinzer</p></li>
<li><p>Thomas Grainger</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-5.0.0"></span><div class="section" id="pytest-5-0-0">
<h4>pytest-5.0.0<a class="headerlink" href="#pytest-5-0-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 5.0.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Dirk Thomas</p></li>
<li><p>Evan Kepner</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Hugo</p></li>
<li><p>Kevin J. Foley</p></li>
<li><p>Pulkit Goyal</p></li>
<li><p>Ralph Giles</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tim Gates</p></li>
<li><p>Victor Maryama</p></li>
<li><p>Yuri Apollov</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>curiousjazz77</p></li>
<li><p>patriksevallius</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.9"></span><div class="section" id="pytest-4-6-9">
<h4>pytest-4.6.9<a class="headerlink" href="#pytest-4-6-9" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.9 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Felix Yan</p></li>
<li><p>Hugo</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.8"></span><div class="section" id="pytest-4-6-8">
<h4>pytest-4.6.8<a class="headerlink" href="#pytest-4-6-8" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.8 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Ryan Mast</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.7"></span><div class="section" id="pytest-4-6-7">
<h4>pytest-4.6.7<a class="headerlink" href="#pytest-4-6-7" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.7 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.6"></span><div class="section" id="pytest-4-6-6">
<h4>pytest-4.6.6<a class="headerlink" href="#pytest-4-6-6" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.6 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Michael Goerz</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.5"></span><div class="section" id="pytest-4-6-5">
<h4>pytest-4.6.5<a class="headerlink" href="#pytest-4-6-5" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.5 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Thomas Grainger</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.4"></span><div class="section" id="pytest-4-6-4">
<h4>pytest-4.6.4<a class="headerlink" href="#pytest-4-6-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.3"></span><div class="section" id="pytest-4-6-3">
<h4>pytest-4.6.3<a class="headerlink" href="#pytest-4-6-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Dirk Thomas</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.2"></span><div class="section" id="pytest-4-6-2">
<h4>pytest-4.6.2<a class="headerlink" href="#pytest-4-6-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.1"></span><div class="section" id="pytest-4-6-1">
<h4>pytest-4.6.1<a class="headerlink" href="#pytest-4-6-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.6.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.6.0"></span><div class="section" id="pytest-4-6-0">
<h4>pytest-4.6.0<a class="headerlink" href="#pytest-4-6-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.6.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Akiomi Kamakura</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>David Röthlisberger</p></li>
<li><p>Evan Kepner</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>MyComputer</p></li>
<li><p>Nikita Krokosh</p></li>
<li><p>Raul Tambre</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tomer Keren</p></li>
<li><p>Victor Maryama</p></li>
<li><p>danielx123</p></li>
<li><p>oleg-yegorov</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.5.0"></span><div class="section" id="pytest-4-5-0">
<h4>pytest-4.5.0<a class="headerlink" href="#pytest-4-5-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.5.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Pulkit Goyal</p></li>
<li><p>Samuel Searles-Bryant</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.4.2"></span><div class="section" id="pytest-4-4-2">
<h4>pytest-4.4.2<a class="headerlink" href="#pytest-4-4-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.4.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Allan Lewis</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>DamianSkrzypczak</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Don Kirkby</p></li>
<li><p>Douglas Thor</p></li>
<li><p>Hugo</p></li>
<li><p>Ilya Konstantinov</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Matt Cooper</p></li>
<li><p>Nikolay Kondratyev</p></li>
<li><p>Ondřej Súkup</p></li>
<li><p>Peter Schutt</p></li>
<li><p>Romain Chossart</p></li>
<li><p>Sitaktif</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.4.1"></span><div class="section" id="pytest-4-4-1">
<h4>pytest-4.4.1<a class="headerlink" href="#pytest-4-4-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.4.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.4.0"></span><div class="section" id="pytest-4-4-0">
<h4>pytest-4.4.0<a class="headerlink" href="#pytest-4-4-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.4.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>ApaDoctor</p></li>
<li><p>Bernhard M. Wiedemann</p></li>
<li><p>Brian Skinn</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Gary Tyler</p></li>
<li><p>Jeong YunWon</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Takafumi Arakaki</p></li>
<li><p>henrykironde</p></li>
<li><p>smheidrich</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.3.1"></span><div class="section" id="pytest-4-3-1">
<h4>pytest-4.3.1<a class="headerlink" href="#pytest-4-3-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.3.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andras Mitzki</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Danilo Horta</p></li>
<li><p>Grygorii Iermolenko</p></li>
<li><p>Jeff Hale</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Stephan Hoyer</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>songbowen</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.3.0"></span><div class="section" id="pytest-4-3-0">
<h4>pytest-4.3.0<a class="headerlink" href="#pytest-4-3-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.3.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andras Mitzki</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christian Fetzer</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Grygorii Iermolenko</p></li>
<li><ol class="upperalpha simple" start="18">
<li><p>Alex Matevish</p></li>
</ol>
</li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>cclauss</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.2.1"></span><div class="section" id="pytest-4-2-1">
<h4>pytest-4.2.1<a class="headerlink" href="#pytest-4-2-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.2.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Arel Cordero</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Holger Kohr</p></li>
<li><p>Kevin J. Foley</p></li>
<li><p>Nick Murphy</p></li>
<li><p>Paweł Stradomski</p></li>
<li><p>Raphael Pierzina</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sam Brightman</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.2.0"></span><div class="section" id="pytest-4-2-0">
<h4>pytest-4.2.0<a class="headerlink" href="#pytest-4-2-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.2.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Adam Uhlir</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Christopher Dignam</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Joseph Hunkeler</p></li>
<li><p>Kristoffer Nordstroem</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>wim glenn</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.1.1"></span><div class="section" id="pytest-4-1-1">
<h4>pytest-4.1.1<a class="headerlink" href="#pytest-4-1-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.1.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Anton Lodder</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>David Vo</p></li>
<li><p>Oscar Benjamin</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Victor Maryama</p></li>
<li><p>Yoav Caspi</p></li>
<li><p>dmitry.dygalo</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.1.0"></span><div class="section" id="pytest-4-1-0">
<h4>pytest-4.1.0<a class="headerlink" href="#pytest-4-1-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.1.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Adam Johnson</p></li>
<li><p>Aly Sivji</p></li>
<li><p>Andrey Paramonov</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>David Vo</p></li>
<li><p>Hyunchel Kim</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Kanguros</p></li>
<li><p>Nicholas Devenish</p></li>
<li><p>Pedro Algarvio</p></li>
<li><p>Randy Barlow</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Tomer Keren</p></li>
<li><p>feuillemorte</p></li>
<li><p>wim glenn</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-4.0.2"></span><div class="section" id="pytest-4-0-2">
<h4>pytest-4.0.2<a class="headerlink" href="#pytest-4-0-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.0.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Pedro Algarvio</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Tomer Keren</p></li>
<li><p>Yash Todi</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.0.1"></span><div class="section" id="pytest-4-0-1">
<h4>pytest-4.0.1<a class="headerlink" href="#pytest-4-0-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 4.0.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Michael D. Hoyle</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Slam</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-4.0.0"></span><div class="section" id="pytest-4-0-0">
<h4>pytest-4.0.0<a class="headerlink" href="#pytest-4-0-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 4.0.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.10.1"></span><div class="section" id="pytest-3-10-1">
<h4>pytest-3.10.1<a class="headerlink" href="#pytest-3-10-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.10.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Boris Feld</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Fabien ZARIFIAN</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.10.0"></span><div class="section" id="pytest-3-10-0">
<h4>pytest-3.10.0<a class="headerlink" href="#pytest-3-10-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.10.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anders Hovmöller</p></li>
<li><p>Andreu Vallbona Plazas</p></li>
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bernardo Gomes</p></li>
<li><p>Brianna Laugher</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>David Szotten</p></li>
<li><p>Mick Koch</p></li>
<li><p>Niclas Olofsson</p></li>
<li><p>Palash Chatterjee</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sven-Hendrik Haase</p></li>
<li><p>Ville Skyttä</p></li>
<li><p>William Jamir Silva</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.9.3"></span><div class="section" id="pytest-3-9-3">
<h4>pytest-3.9.3<a class="headerlink" href="#pytest-3-9-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.9.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andreas Profous</p></li>
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.9.2"></span><div class="section" id="pytest-3-9-2">
<h4>pytest-3.9.2<a class="headerlink" href="#pytest-3-9-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.9.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Vincent Barbaresi</p></li>
<li><p>ykantor</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.9.1"></span><div class="section" id="pytest-3-9-1">
<h4>pytest-3.9.1<a class="headerlink" href="#pytest-3-9-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.9.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Thomas Hisch</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.9.0"></span><div class="section" id="pytest-3-9-0">
<h4>pytest-3.9.0<a class="headerlink" href="#pytest-3-9-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.9.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andrea Cimatoribus</p></li>
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Ben Eyal</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Jose Carlos Menezes</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Niklas JQ</p></li>
<li><p>Palash Chatterjee</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Thomas Hess</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tomer Keren</p></li>
<li><p>Victor Maryama</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.8.2"></span><div class="section" id="pytest-3-8-2">
<h4>pytest-3.8.2<a class="headerlink" href="#pytest-3-8-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.8.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Denis Otkidach</p></li>
<li><p>Harry Percival</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Jose Carlos Menezes</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Zac Hatfield-Dodds</p></li>
<li><p>iwanb</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.8.1"></span><div class="section" id="pytest-3-8-1">
<h4>pytest-3.8.1<a class="headerlink" href="#pytest-3-8-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.8.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Ankit Goel</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Maximilian Albert</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>William Jamir Silva</p></li>
<li><p>wim glenn</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.8.0"></span><div class="section" id="pytest-3-8-0">
<h4>pytest-3.8.0<a class="headerlink" href="#pytest-3-8-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.8.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.pytest.org/en/stable/">https://docs.pytest.org/en/stable/</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>CrazyMerlyn</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Fabio Zadrozny</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Virgil Dupras</p></li>
<li><p>dhirensr</p></li>
<li><p>hoefling</p></li>
<li><p>wim glenn</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.7.4"></span><div class="section" id="pytest-3-7-4">
<h4>pytest-3.7.4<a class="headerlink" href="#pytest-3-7-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.7.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="https://docs.pytest.org/en/stable/changelog.html">https://docs.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Jiri Kuncar</p></li>
<li><p>Steve Piercy</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.7.3"></span><div class="section" id="pytest-3-7-3">
<h4>pytest-3.7.3<a class="headerlink" href="#pytest-3-7-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.7.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andrew Champion</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Gandalf Saxe</p></li>
<li><p>Jennifer Rinker</p></li>
<li><p>Natan Lao</p></li>
<li><p>Ondřej Súkup</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sankt Petersbug</p></li>
<li><p>Tyler Richard</p></li>
<li><p>Victor Maryama</p></li>
<li><p>Vlad Shcherbina</p></li>
<li><p>turturica</p></li>
<li><p>wim glenn</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.7.2"></span><div class="section" id="pytest-3-7-2">
<h4>pytest-3.7.2<a class="headerlink" href="#pytest-3-7-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.7.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Josh Holland</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sankt Petersbug</p></li>
<li><p>Wes Thomas</p></li>
<li><p>turturica</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.7.1"></span><div class="section" id="pytest-3-7-1">
<h4>pytest-3.7.1<a class="headerlink" href="#pytest-3-7-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.7.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.7.0"></span><div class="section" id="pytest-3-7-0">
<h4>pytest-3.7.0<a class="headerlink" href="#pytest-3-7-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.7.0 release!</p>
<p>pytest is a mature Python testing tool with more than 2000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Alan</p></li>
<li><p>Alan Brammer</p></li>
<li><p>Ammar Najjar</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Serhii Mozghovyi</p></li>
<li><p>Tadek Teleżyński</p></li>
<li><p>Wil Cooley</p></li>
<li><p>abrammer</p></li>
<li><p>avirlrma</p></li>
<li><p>turturica</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.6.4"></span><div class="section" id="pytest-3-6-4">
<h4>pytest-3.6.4<a class="headerlink" href="#pytest-3-6-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.6.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bernhard M. Wiedemann</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Drew</p></li>
<li><p>E Hershey</p></li>
<li><p>Hugo Martins</p></li>
<li><p>Vlad Shcherbina</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.6.3"></span><div class="section" id="pytest-3-6-3">
<h4>pytest-3.6.3<a class="headerlink" href="#pytest-3-6-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.6.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>AdamEr8</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Jean-Paul Calderone</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Marcelo Duarte Trevisani</p></li>
<li><p>Ondřej Súkup</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>T.E.A de Souza</p></li>
<li><p>Victor Maryama</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.6.2"></span><div class="section" id="pytest-3-6-2">
<h4>pytest-3.6.2<a class="headerlink" href="#pytest-3-6-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.6.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Alan Velasco</p></li>
<li><p>Alex Barbato</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Bartosz Cierocki</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Guoqiang Zhang</p></li>
<li><p>Hynek Schlawack</p></li>
<li><p>John T. Wodder II</p></li>
<li><p>Michael Käufl</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Samuel Dion-Girardeau</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.6.1"></span><div class="section" id="pytest-3-6-1">
<h4>pytest-3.6.1<a class="headerlink" href="#pytest-3-6-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.6.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Niklas Meinzer</p></li>
<li><p>Oliver Bestwalter</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.6.0"></span><div class="section" id="pytest-3-6-0">
<h4>pytest-3.6.0<a class="headerlink" href="#pytest-3-6-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.6.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Shaw</p></li>
<li><p>ApaDoctor</p></li>
<li><p>Brian Maissy</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Katerina Koukiou</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Rachel Kogan</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Tim Hughes</p></li>
<li><p>Tyler Goodlet</p></li>
<li><p>Ville Skyttä</p></li>
<li><p>aviral1701</p></li>
<li><p>feuillemorte</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.5.1"></span><div class="section" id="pytest-3-5-1">
<h4>pytest-3.5.1<a class="headerlink" href="#pytest-3-5-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.5.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Brian Maissy</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Darren Burns</p></li>
<li><p>David Chudzicki</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Holger Kohr</p></li>
<li><p>Irmen de Jong</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Rachel Kogan</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Stefan Scherfke</p></li>
<li><p>Tim Strazny</p></li>
<li><p>Семён Марьясин</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.5.0"></span><div class="section" id="pytest-3-5-0">
<h4>pytest-3.5.0<a class="headerlink" href="#pytest-3-5-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.5.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Allan Feldman</p></li>
<li><p>Brian Maissy</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Carlos Jenkins</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Jason R. Coombs</p></li>
<li><p>Jeffrey Rackauckas</p></li>
<li><p>Jordan Speicher</p></li>
<li><p>Julien Palard</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Kostis Anagnostopoulos</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Maik Figura</p></li>
<li><p>Pedro Algarvio</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Tadeu Manoel</p></li>
<li><p>Tareq Alayan</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>William Lee</p></li>
<li><p>codetriage-readme-bot</p></li>
<li><p>feuillemorte</p></li>
<li><p>joshm91</p></li>
<li><p>mike</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.4.2"></span><div class="section" id="pytest-3-4-2">
<h4>pytest-3.4.2<a class="headerlink" href="#pytest-3-4-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.4.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Allan Feldman</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Jason R. Coombs</p></li>
<li><p>Kyle Altendorf</p></li>
<li><p>Maik Figura</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>codetriage-readme-bot</p></li>
<li><p>feuillemorte</p></li>
<li><p>joshm91</p></li>
<li><p>mike</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.4.1"></span><div class="section" id="pytest-3-4-1">
<h4>pytest-3.4.1<a class="headerlink" href="#pytest-3-4-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.4.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Aaron</p></li>
<li><p>Alan Velasco</p></li>
<li><p>Andy Freeland</p></li>
<li><p>Brian Maissy</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Jason R. Coombs</p></li>
<li><p>Marcin Bachry</p></li>
<li><p>Pedro Algarvio</p></li>
<li><p>Ronny Pfannschmidt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.4.0"></span><div class="section" id="pytest-3-4-0">
<h4>pytest-3.4.0<a class="headerlink" href="#pytest-3-4-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.4.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Aaron</p></li>
<li><p>Alan Velasco</p></li>
<li><p>Anders Hovmöller</p></li>
<li><p>Andrew Toolan</p></li>
<li><p>Anthony Sottile</p></li>
<li><p>Aron Coyle</p></li>
<li><p>Brian Maissy</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Cyrus Maden</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Henk-Jaap Wagenaar</p></li>
<li><p>Ian Lesperance</p></li>
<li><p>Jon Dufresne</p></li>
<li><p>Jurko Gospodnetić</p></li>
<li><p>Kate</p></li>
<li><p>Kimberly</p></li>
<li><p>Per A. Brodtkorb</p></li>
<li><p>Pierre-Alexandre Fonta</p></li>
<li><p>Raphael Castaneda</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>ST John</p></li>
<li><p>Segev Finer</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tzu-ping Chung</p></li>
<li><p>feuillemorte</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.3.2"></span><div class="section" id="pytest-3-3-2">
<h4>pytest-3.3.2<a class="headerlink" href="#pytest-3-3-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.3.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Antony Lee</p></li>
<li><p>Austin</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Henk-Jaap Wagenaar</p></li>
<li><p>Jurko Gospodnetić</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Srinivas Reddy Thatiparthy</p></li>
<li><p>Thomas Hisch</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.3.1"></span><div class="section" id="pytest-3-3-1">
<h4>pytest-3.3.1<a class="headerlink" href="#pytest-3-3-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.3.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Eugene Prikazchikov</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Roland Puntaier</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sebastian Rahlf</p></li>
<li><p>Tom Viner</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.3.0"></span><div class="section" id="pytest-3-3-0">
<h4>pytest-3.3.0<a class="headerlink" href="#pytest-3-3-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.3.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Ceridwen</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Dirk Thomas</p></li>
<li><p>Dmitry Malinovsky</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>George Y. Kussumoto</p></li>
<li><p>Hugo</p></li>
<li><p>Jesús Espino</p></li>
<li><p>Joan Massich</p></li>
<li><p>Ofir</p></li>
<li><p>OfirOshir</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Samuel Dion-Girardeau</p></li>
<li><p>Srinivas Reddy Thatiparthy</p></li>
<li><p>Sviatoslav Abakumov</p></li>
<li><p>Tarcisio Fischer</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tyler Goodlet</p></li>
<li><p>hugovk</p></li>
<li><p>je</p></li>
<li><p>prokaktus</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.5"></span><div class="section" id="pytest-3-2-5">
<h4>pytest-3.2.5<a class="headerlink" href="#pytest-3-2-5" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.2.5 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.4"></span><div class="section" id="pytest-3-2-4">
<h4>pytest-3.2.4<a class="headerlink" href="#pytest-3-2-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.2.4 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Christian Boelsen</p></li>
<li><p>Christoph Buchner</p></li>
<li><p>Daw-Ran Liou</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Franck Michea</p></li>
<li><p>Leonard Lausen</p></li>
<li><p>Matty G</p></li>
<li><p>Owen Tuz</p></li>
<li><p>Pavel Karateev</p></li>
<li><p>Pierre GIRAUD</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Stephen Finucane</p></li>
<li><p>Sviatoslav Abakumov</p></li>
<li><p>Thomas Hisch</p></li>
<li><p>Tom Dalton</p></li>
<li><p>Xuan Luong</p></li>
<li><p>Yorgos Pagles</p></li>
<li><p>Семён Марьясин</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.3"></span><div class="section" id="pytest-3-2-3">
<h4>pytest-3.2.3<a class="headerlink" href="#pytest-3-2-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.2.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Evan</p></li>
<li><p>Joe Hamman</p></li>
<li><p>Oliver Bestwalter</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Xuan Luong</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.2"></span><div class="section" id="pytest-3-2-2">
<h4>pytest-3.2.2<a class="headerlink" href="#pytest-3-2-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.2.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andreas Pelme</p></li>
<li><p>Antonio Hidalgo</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Felipe Dau</p></li>
<li><p>Fernando Macedo</p></li>
<li><p>Jesús Espino</p></li>
<li><p>Joan Massich</p></li>
<li><p>Joe Talbott</p></li>
<li><p>Kirill Pinchuk</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Xuan Luong</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.1"></span><div class="section" id="pytest-3-2-1">
<h4>pytest-3.2.1<a class="headerlink" href="#pytest-3-2-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.2.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Alex Gaynor</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Srinivas Reddy Thatiparthy</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.2.0"></span><div class="section" id="pytest-3-2-0">
<h4>pytest-3.2.0<a class="headerlink" href="#pytest-3-2-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.2.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a number of bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<blockquote>
<div><p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
</div></blockquote>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Alex Hartoto</p></li>
<li><p>Andras Tim</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>John Still</p></li>
<li><p>Jordan Moldow</p></li>
<li><p>Kale Kundert</p></li>
<li><p>Lawrence Mitchell</p></li>
<li><p>Llandy Riveron Del Risco</p></li>
<li><p>Maik Figura</p></li>
<li><p>Martin Altmayer</p></li>
<li><p>Mihai Capotă</p></li>
<li><p>Nathaniel Waisbrot</p></li>
<li><p>Nguyễn Hồng Quân</p></li>
<li><p>Pauli Virtanen</p></li>
<li><p>Raphael Pierzina</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Segev Finer</p></li>
<li><p>V.Kuznetsov</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.1.3"></span><div class="section" id="pytest-3-1-3">
<h4>pytest-3.1.3<a class="headerlink" href="#pytest-3-1-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.1.3 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Antoine Legrand</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Max Moroz</p></li>
<li><p>Raphael Pierzina</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Ryan Fitzpatrick</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.1.2"></span><div class="section" id="pytest-3-1-2">
<h4>pytest-3.1.2<a class="headerlink" href="#pytest-3-1-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.1.2 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andreas Pelme</p></li>
<li><p>ApaDoctor</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Segev Finer</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.1.1"></span><div class="section" id="pytest-3-1-1">
<h4>pytest-3.1.1<a class="headerlink" href="#pytest-3-1-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.1.1 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Jason R. Coombs</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>wanghui</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.1.0"></span><div class="section" id="pytest-3-1-0">
<h4>pytest-3.1.0<a class="headerlink" href="#pytest-3-1-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.1.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a bugs fixes and improvements, so users are encouraged
to take a look at the CHANGELOG:</p>
<p><a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a></p>
<p>For complete documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Ben Lloyd</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>David Giese</p></li>
<li><p>David Szotten</p></li>
<li><p>Dmitri Pribysh</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Florian Schulze</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>John Towler</p></li>
<li><p>Jonas Obrist</p></li>
<li><p>Katerina Koukiou</p></li>
<li><p>Kodi Arfer</p></li>
<li><p>Krzysztof Szularz</p></li>
<li><p>Lev Maximov</p></li>
<li><p>Loïc Estève</p></li>
<li><p>Luke Murphy</p></li>
<li><p>Manuel Krebber</p></li>
<li><p>Matthew Duck</p></li>
<li><p>Matthias Bussonnier</p></li>
<li><p>Michael Howitz</p></li>
<li><p>Michal Wajszczuk</p></li>
<li><p>Paweł Adamczak</p></li>
<li><p>Rafael Bertoldi</p></li>
<li><p>Ravi Chandra</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Skylar Downes</p></li>
<li><p>Thomas Kriechbaumer</p></li>
<li><p>Vitaly Lashmanov</p></li>
<li><p>Vlad Dragos</p></li>
<li><p>Wheerd</p></li>
<li><p>Xander Johnson</p></li>
<li><p>mandeep</p></li>
<li><p>reut</p></li>
</ul>
<p>Happy testing,
The Pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.7"></span><div class="section" id="pytest-3-0-7">
<h4>pytest-3.0.7<a class="headerlink" href="#pytest-3-0-7" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.7 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Anthony Sottile</p></li>
<li><p>Barney Gale</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Ionel Cristian Mărieș</p></li>
<li><p>Katerina Koukiou</p></li>
<li><p>NODA, Kai</p></li>
<li><p>Omer Hadari</p></li>
<li><p>Patrick Hayes</p></li>
<li><p>Ran Benita</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Victor Uriarte</p></li>
<li><p>Vidar Tonaas Fauske</p></li>
<li><p>Ville Skyttä</p></li>
<li><p>fbjorn</p></li>
<li><p>mbyt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.6"></span><div class="section" id="pytest-3-0-6">
<h4>pytest-3.0.6<a class="headerlink" href="#pytest-3-0-6" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.6 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The full changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Andreas Pelme</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Dmitry Malinovsky</p></li>
<li><p>Eli Boyarski</p></li>
<li><p>Jakub Wilk</p></li>
<li><p>Jeff Widman</p></li>
<li><p>Loïc Estève</p></li>
<li><p>Luke Murphy</p></li>
<li><p>Miro Hrončok</p></li>
<li><p>Oscar Hellström</p></li>
<li><p>Peter Heatwole</p></li>
<li><p>Philippe Ombredanne</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Rutger Prins</p></li>
<li><p>Stefan Scherfke</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.5"></span><div class="section" id="pytest-3-0-5">
<h4>pytest-3.0.5<a class="headerlink" href="#pytest-3-0-5" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.5 has just been released to PyPI.</p>
<p>This is a bug-fix release, being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Ana Vojnovic</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Daniel Hahler</p></li>
<li><p>Duncan Betts</p></li>
<li><p>Igor Starikov</p></li>
<li><p>Ismail</p></li>
<li><p>Luke Murphy</p></li>
<li><p>Ned Batchelder</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Sebastian Ramacher</p></li>
<li><p>nmundar</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.4"></span><div class="section" id="pytest-3-0-4">
<h4>pytest-3.0.4<a class="headerlink" href="#pytest-3-0-4" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.4 has just been released to PyPI.</p>
<p>This release fixes some regressions and bugs reported in the last version,
being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Dan Wandschneider</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Georgy Dyuldin</p></li>
<li><p>Grigorii Eremeev</p></li>
<li><p>Jason R. Coombs</p></li>
<li><p>Manuel Jacob</p></li>
<li><p>Mathieu Clabaut</p></li>
<li><p>Michael Seifert</p></li>
<li><p>Nikolaus Rath</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Tom V</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.3"></span><div class="section" id="pytest-3-0-3">
<h4>pytest-3.0.3<a class="headerlink" href="#pytest-3-0-3" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.3 has just been released to PyPI.</p>
<p>This release fixes some regressions and bugs reported in the last version,
being a drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Floris Bruynooghe</p></li>
<li><p>Huayi Zhang</p></li>
<li><p>Lev Maximov</p></li>
<li><p>Raquel Alegre</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>Roy Williams</p></li>
<li><p>Tyler Goodlet</p></li>
<li><p>mbyt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.2"></span><div class="section" id="pytest-3-0-2">
<h4>pytest-3.0.2<a class="headerlink" href="#pytest-3-0-2" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.2 has just been released to PyPI.</p>
<p>This release fixes some regressions and bugs reported in version 3.0.1, being a
drop-in replacement. To upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>The changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<ul class="simple">
<li><p>Ahn Ki-Wook</p></li>
<li><p>Bruno Oliveira</p></li>
<li><p>Florian Bruhin</p></li>
<li><p>Jordan Guymon</p></li>
<li><p>Raphael Pierzina</p></li>
<li><p>Ronny Pfannschmidt</p></li>
<li><p>mbyt</p></li>
</ul>
<p>Happy testing,
The pytest Development Team</p>
</div>
<span id="document-announce/release-3.0.1"></span><div class="section" id="pytest-3-0-1">
<h4>pytest-3.0.1<a class="headerlink" href="#pytest-3-0-1" title="Permalink to this headline">¶</a></h4>
<p>pytest 3.0.1 has just been released to PyPI.</p>
<p>This release fixes some regressions reported in version 3.0.0, being a
drop-in replacement. To upgrade:</p>
<blockquote>
<div><p>pip install –upgrade pytest</p>
</div></blockquote>
<p>The changelog is available at <a class="reference external" href="http://doc.pytest.org/en/stable/changelog.html">http://doc.pytest.org/en/stable/changelog.html</a>.</p>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Adam Chainz
Andrew Svetlov
Bruno Oliveira
Daniel Hahler
Dmitry Dygalo
Florian Bruhin
Marcin Bachry
Ronny Pfannschmidt
matthiasha</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
</div>
<span id="document-announce/release-3.0.0"></span><div class="section" id="pytest-3-0-0">
<h4>pytest-3.0.0<a class="headerlink" href="#pytest-3-0-0" title="Permalink to this headline">¶</a></h4>
<p>The pytest team is proud to announce the 3.0.0 release!</p>
<p>pytest is a mature Python testing tool with more than 1600 tests
against itself, passing on many different interpreters and platforms.</p>
<p>This release contains a lot of bugs fixes and improvements, and much of
the work done on it was possible because of the 2016 Sprint[1], which
was funded by an indiegogo campaign which raised over US$12,000 with
nearly 100 backers.</p>
<p>There’s a “What’s new in pytest 3.0” [2] blog post highlighting the
major features in this release.</p>
<p>To see the complete changelog and documentation, please visit:</p>
<blockquote>
<div><p><a class="reference external" href="http://docs.pytest.org">http://docs.pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<blockquote>
<div><p>pip install -U pytest</p>
</div></blockquote>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>AbdealiJK
Ana Ribeiro
Antony Lee
Brandon W Maister
Brianna Laugher
Bruno Oliveira
Ceridwen
Christian Boelsen
Daniel Hahler
Danielle Jenkins
Dave Hunt
Diego Russo
Dmitry Dygalo
Edoardo Batini
Eli Boyarski
Florian Bruhin
Floris Bruynooghe
Greg Price
Guyzmo
HEAD KANGAROO
JJ
Javi Romero
Javier Domingo Cansino
Kale Kundert
Kalle Bronsen
Marius Gedminas
Matt Williams
Mike Lundy
Oliver Bestwalter
Omar Kohl
Raphael Pierzina
RedBeardCode
Roberto Polli
Romain Dorgueil
Roman Bolshakov
Ronny Pfannschmidt
Stefan Zimmermann
Steffen Allner
Tareq Alayan
Ted Xiao
Thomas Grainger
Tom Viner
TomV
Vasily Kuznetsov
aostr
marscher
palaviv
satoru
taschini</p>
</div></blockquote>
<p>Happy testing,
The Pytest Development Team</p>
<p>[1] <a class="reference external" href="http://blog.pytest.org/2016/pytest-development-sprint/">http://blog.pytest.org/2016/pytest-development-sprint/</a>
[2] <a class="reference external" href="http://blog.pytest.org/2016/whats-new-in-pytest-30/">http://blog.pytest.org/2016/whats-new-in-pytest-30/</a></p>
</div>
<span id="document-announce/sprint2016"></span><div class="section" id="python-testing-sprint-june-20th-26th-2016">
<h4>python testing sprint June 20th-26th 2016<a class="headerlink" href="#python-testing-sprint-june-20th-26th-2016" title="Permalink to this headline">¶</a></h4>
<a class="reference internal image-reference" href="_images/freiburg2.jpg"><img alt="_images/freiburg2.jpg" src="_images/freiburg2.jpg" style="width: 400px;" /></a>
<p>The pytest core group held the biggest sprint
in its history in June 2016, taking place in the black forest town Freiburg
in Germany.  In February 2016 we started a <a class="reference external" href="http://igg.me/at/pytest-sprint/x/4034848">funding
campaign on Indiegogo to cover expenses</a> The page also mentions
some preliminary topics:</p>
<ul class="simple">
<li><p>improving pytest-xdist test scheduling to take into account
fixture setups and explicit user hints.</p></li>
<li><p>provide info on fixture dependencies during –collect-only</p></li>
<li><p>tying pytest-xdist to tox so that you can do “py.test -e py34”
to run tests in a particular tox-managed virtualenv.  Also
look into making pytest-xdist use tox environments on
remote ssh-sides so that remote dependency management becomes
easier.</p></li>
<li><p>refactoring the fixture system so more people understand it :)</p></li>
<li><p>integrating PyUnit setup methods as autouse fixtures.
possibly adding ways to influence ordering of same-scoped
fixtures (so you can make a choice of which fixtures come
before others)</p></li>
<li><p>fixing bugs and issues from the tracker, really an endless source :)</p></li>
</ul>
<div class="section" id="participants">
<h5>Participants<a class="headerlink" href="#participants" title="Permalink to this headline">¶</a></h5>
<p>Over 20 participants took part from 4 continents, including employees
from Splunk, Personalkollen, Cobe.io, FanDuel and Dolby. Some newcomers
mixed with developers who have worked on pytest since its beginning, and
of course everyone in between.</p>
</div>
<div class="section" id="sprint-organisation-schedule">
<h5>Sprint organisation, schedule<a class="headerlink" href="#sprint-organisation-schedule" title="Permalink to this headline">¶</a></h5>
<p>People arrived in Freiburg on the 19th, with sprint development taking
place on 20th, 21st, 22nd, 24th and 25th. On the 23rd we took a break
day for some hot hiking in the Black Forest.</p>
<p>Sprint activity was organised heavily around pairing, with plenty of group
discusssions to take advantage of the high bandwidth, and lightning talks
as well.</p>
</div>
<div class="section" id="money-funding">
<h5>Money / funding<a class="headerlink" href="#money-funding" title="Permalink to this headline">¶</a></h5>
<p>The Indiegogo campaign aimed for 11000 USD and in the end raised over
12000, to reimburse travel costs, pay for a sprint venue and catering.</p>
<p>Excess money is reserved for further sprint/travel funding for pytest/tox
contributors.</p>
</div>
</div>
<span id="document-announce/release-2.9.2"></span><div class="section" id="pytest-2-9-2">
<h4>pytest-2.9.2<a class="headerlink" href="#pytest-2-9-2" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Adam Chainz
Benjamin Dopplinger
Bruno Oliveira
Florian Bruhin
John Towler
Martin Prusse
Meng Jue
MengJueM
Omar Kohl
Quentin Pradet
Ronny Pfannschmidt
Thomas Güttler
TomV
Tyler Goodlet</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-9-1">
<h5>2.9.2 (compared to 2.9.1)<a class="headerlink" href="#compared-to-2-9-1" title="Permalink to this headline">¶</a></h5>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/510">issue #510</a>: skip tests where one parameterize dimension was empty
thanks Alex Stapleton for the Report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR</p></li>
<li><p>Fix Xfail does not work with condition keyword argument.
Thanks <a class="reference external" href="https://github.com/astraw38">&#64;astraw38</a> for reporting the issue (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1496">issue #1496</a>) and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a>
for PR the (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1524">pull request #1524</a>).</p></li>
<li><p>Fix win32 path issue when putting custom config file with absolute path
in <code class="docutils literal notranslate"><span class="pre">pytest.main(&quot;-c</span> <span class="pre">your_absolute_path&quot;)</span></code>.</p></li>
<li><p>Fix maximum recursion depth detection when raised error class is not aware
of unicode/encoded bytes.
Thanks <a class="reference external" href="https://github.com/prusse-martin">&#64;prusse-martin</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1506">pull request #1506</a>).</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code> mark when used in strict mode.
Thanks <a class="reference external" href="https://github.com/pquentin">&#64;pquentin</a> for the PR and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for
showing how to fix the bug.</p></li>
<li><p>Minor improvements and fixes to the documentation.
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the PR.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> to show all fixture definitions as opposed to just
one per fixture name.
Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.9.1"></span><div class="section" id="pytest-2-9-1">
<h4>pytest-2.9.1<a class="headerlink" href="#pytest-2-9-1" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Daniel Hahler
Dmitry Malinovsky
Florian Bruhin
Floris Bruynooghe
Matt Bachmann
Ronny Pfannschmidt
TomV
Vladimir Bolshakov
Zearin
palaviv</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-9-0">
<h5>2.9.1 (compared to 2.9.0)<a class="headerlink" href="#compared-to-2-9-0" title="Permalink to this headline">¶</a></h5>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>Improve error message when a plugin fails to load.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1178">issue #1178</a>):
<code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> with non-ascii characters raises an internal pytest error.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/469">issue #469</a>): junit parses report.nodeid incorrectly, when params IDs
contain <code class="docutils literal notranslate"><span class="pre">::</span></code>. Thanks <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1431">pull request #1431</a>).</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/578">issue #578</a>): SyntaxErrors
containing non-ascii lines at the point of failure generated an internal
py.test error.
Thanks <a class="reference external" href="https://github.com/asottile">&#64;asottile</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1437">issue #1437</a>): When passing in a bytestring regex pattern to parameterize
attempt to decode it as utf-8 ignoring errors.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/649">issue #649</a>): parametrized test nodes cannot be specified to run on the command line.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.9.0"></span><div class="section" id="pytest-2-9-0">
<h4>pytest-2.9.0<a class="headerlink" href="#pytest-2-9-0" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Anatoly Bubenkov
Bruno Oliveira
Buck Golemon
David Vierra
Florian Bruhin
Galaczi Endre
Georgy Dyuldin
Lukas Bednar
Luke Murphy
Marcin Biernat
Matt Williams
Michael Aquilina
Raphael Pierzina
Ronny Pfannschmidt
Ryan Wooden
Tiemo Kieft
TomV
holger krekel
jab</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-7">
<h5>2.9.0 (compared to 2.8.7)<a class="headerlink" href="#compared-to-2-8-7" title="Permalink to this headline">¶</a></h5>
<p><strong>New Features</strong></p>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code> mark, which unconditionally skips marked tests.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1040">pull request #1040</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--doctest-glob</span></code> may now be passed multiple times in the command-line.
Thanks <a class="reference external" href="https://github.com/jab">&#64;jab</a> and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">-rp</span></code> and <code class="docutils literal notranslate"><span class="pre">-rP</span></code> reporting options give the summary and full output
of passing tests, respectively. Thanks to <a class="reference external" href="https://github.com/codewarrior0">&#64;codewarrior0</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code> now has a <code class="docutils literal notranslate"><span class="pre">strict</span></code> option which makes <code class="docutils literal notranslate"><span class="pre">XPASS</span></code>
tests to fail the test suite, defaulting to <code class="docutils literal notranslate"><span class="pre">False</span></code>. There’s also a
<code class="docutils literal notranslate"><span class="pre">xfail_strict</span></code> ini option that can be used to configure it project-wise.
Thanks <a class="reference external" href="https://github.com/rabbbit">&#64;rabbbit</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1355">issue #1355</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Parser.addini</span></code> now supports options of type <code class="docutils literal notranslate"><span class="pre">bool</span></code>. Thanks
<a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ALLOW_BYTES</span></code> doctest option strips <code class="docutils literal notranslate"><span class="pre">b</span></code> prefixes from byte strings
in doctest output (similar to <code class="docutils literal notranslate"><span class="pre">ALLOW_UNICODE</span></code>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1287">issue #1287</a>).</p></li>
<li><p>give a hint on KeyboardInterrupt to use the –fulltrace option to show the errors,
this fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1366">issue #1366</a>.
Thanks to <a class="reference external" href="https://github.com/hpk42">&#64;hpk42</a> for the report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
<li><p>catch IndexError exceptions when getting exception source location. This fixes
pytest internal error for dynamically generated code (fixtures and tests)
where source lines are fake by intention</p></li>
</ul>
<p><strong>Changes</strong></p>
<ul>
<li><p><strong>Important</strong>: <a class="reference external" href="https://pylib.readthedocs.io/en/stable/code.html">py.code</a> has been
merged into the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> repository as <code class="docutils literal notranslate"><span class="pre">pytest._code</span></code>. This decision
was made because <code class="docutils literal notranslate"><span class="pre">py.code</span></code> had very few uses outside <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and the
fact that it was in a different repository made it difficult to fix bugs on
its code in a timely manner. The team hopes with this to be able to better
refactor out and improve that code.
This change shouldn’t affect users, but it is useful to let users aware
if they encounter any strange behavior.</p>
<p>Keep in mind that the code for <code class="docutils literal notranslate"><span class="pre">pytest._code</span></code> is <strong>private</strong> and
<strong>experimental</strong>, so you definitely should not import it explicitly!</p>
<p>Please note that the original <code class="docutils literal notranslate"><span class="pre">py.code</span></code> is still available in
<a class="reference external" href="https://pylib.readthedocs.io/en/stable/">pylib</a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_enter_pdb</span></code> now optionally receives the pytest config object.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Removed code and documentation for Python 2.5 or lower versions,
including removal of the obsolete <code class="docutils literal notranslate"><span class="pre">_pytest.assertion.oldinterpret</span></code> module.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1226">issue #1226</a>).</p></li>
<li><p>Comparisons now always show up in full when <code class="docutils literal notranslate"><span class="pre">CI</span></code> or <code class="docutils literal notranslate"><span class="pre">BUILD_NUMBER</span></code> is
found in the environment, even when -vv isn’t used.
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--lf</span></code> and <code class="docutils literal notranslate"><span class="pre">--ff</span></code> now support long names: <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> and
<code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> respectively.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the PR.</p></li>
<li><p>Added expected exceptions to pytest.raises fail message</p></li>
<li><p>Collection only displays progress (“collecting X items”) when in a terminal.
This avoids cluttering the output when using <code class="docutils literal notranslate"><span class="pre">--color=yes</span></code> to obtain
colors in CI integrations systems (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1397">issue #1397</a>).</p></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-s</span></code> and <code class="docutils literal notranslate"><span class="pre">-c</span></code> options should now work under <code class="docutils literal notranslate"><span class="pre">xdist</span></code>;
<code class="docutils literal notranslate"><span class="pre">Config.fromdictargs</span></code> now represents its input much more faithfully.
Thanks to <a class="reference external" href="https://github.com/bukzor">&#64;bukzor</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/680">issue #680</a>).</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1290">issue #1290</a>): support Python 3.5’s <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator in assertion rewriting.
Thanks <a class="reference external" href="https://github.com/Shinkenjoe">&#64;Shinkenjoe</a> for report with test case and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p>Fix formatting utf-8 explanation messages (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1379">issue #1379</a>).
Thanks <a class="reference external" href="https://github.com/biern">&#64;biern</a> for the PR.</p></li>
<li><p>Fix <a class="reference external" href="https://pytest.org/en/stable/how-to/output.html#modifying-python-traceback-printing">traceback style docs</a> to describe all of the available options
(auto/long/short/line/native/no), with <code class="docutils literal notranslate"><span class="pre">auto</span></code> being the default since v2.6.
Thanks <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1422">issue #1422</a>): junit record_xml_property doesn’t allow multiple records
with same name.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.7"></span><div class="section" id="pytest-2-8-7">
<h4>pytest-2.8.7<a class="headerlink" href="#pytest-2-8-7" title="Permalink to this headline">¶</a></h4>
<p>This is a hotfix release to solve a regression
in the builtin monkeypatch plugin that got introduced in 2.8.6.</p>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.5.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Ronny Pfannschmidt</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-6">
<h5>2.8.7 (compared to 2.8.6)<a class="headerlink" href="#compared-to-2-8-6" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1338: use predictable object resolution for monkeypatch</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.6"></span><div class="section" id="pytest-2-8-6">
<h4>pytest-2.8.6<a class="headerlink" href="#pytest-2-8-6" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.5.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>AMiT Kumar
Bruno Oliveira
Erik M. Bray
Florian Bruhin
Georgy Dyuldin
Jeff Widman
Kartik Singhal
Loïc Estève
Manu Phatak
Peter Demin
Rick van Hattem
Ronny Pfannschmidt
Ulrich Petri
foxx</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-5">
<h5>2.8.6 (compared to 2.8.5)<a class="headerlink" href="#compared-to-2-8-5" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1259: allow for double nodeids in junitxml,
this was a regression failing plugins combinations
like pytest-pep8 + pytest-flakes</p></li>
<li><p>Workaround for exception that occurs in pyreadline when using
<code class="docutils literal notranslate"><span class="pre">--pdb</span></code> with standard I/O capture enabled.
Thanks Erik M. Bray for the PR.</p></li>
<li><p>fix #900: Better error message in case the target of a <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> call
raises an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>.</p></li>
<li><p>fix #1292: monkeypatch calls (setattr, setenv, etc.) are now O(1).
Thanks David R. MacIver for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1223: captured stdout and stderr are now properly displayed before
entering pdb when <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> is used instead of being thrown away.
Thanks Cal Leeming for the PR.</p></li>
<li><p>fix #1305: pytest warnings emitted during <code class="docutils literal notranslate"><span class="pre">pytest_terminal_summary</span></code> are now
properly displayed.
Thanks Ionel Maries Cristian for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #628: fixed internal UnicodeDecodeError when doctests contain unicode.
Thanks Jason R. Coombs for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1334: Add captured stdout to jUnit XML report on setup error.
Thanks Georgy Dyuldin for the PR.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.5"></span><div class="section" id="pytest-2-8-5">
<h4>pytest-2.8.5<a class="headerlink" href="#pytest-2-8-5" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.4.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Alex Gaynor
aselus-hub
Bruno Oliveira
Ronny Pfannschmidt</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-4">
<h5>2.8.5 (compared to 2.8.4)<a class="headerlink" href="#compared-to-2-8-4" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1243: fixed issue where class attributes injected during collection could break pytest.
PR by Alexei Kozlenok, thanks Ronny Pfannschmidt and Bruno Oliveira for the review and help.</p></li>
<li><p>fix #1074: precompute junitxml chunks instead of storing the whole tree in objects
Thanks Bruno Oliveira for the report and Ronny Pfannschmidt for the PR</p></li>
<li><p>fix #1238: fix <code class="docutils literal notranslate"><span class="pre">pytest.deprecated_call()</span></code> receiving multiple arguments
(Regression introduced in 2.8.4). Thanks Alex Gaynor for the report and
Bruno Oliveira for the PR.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.4"></span><div class="section" id="pytest-2-8-4">
<h4>pytest-2.8.4<a class="headerlink" href="#pytest-2-8-4" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.2.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Florian Bruhin
Jeff Widman
Mehdy Khoshnoody
Nicholas Chammas
Ronny Pfannschmidt
Tim Chan</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-3">
<h5>2.8.4 (compared to 2.8.3)<a class="headerlink" href="#compared-to-2-8-3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1190: <code class="docutils literal notranslate"><span class="pre">deprecated_call()</span></code> now works when the deprecated
function has been already called by another test in the same
module. Thanks Mikhail Chernykh for the report and Bruno Oliveira for the
PR.</p></li>
<li><p>fix #1198: <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> option now works on Python 3. Thanks
Mehdy Khoshnoody for the PR.</p></li>
<li><p>fix #1219: <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> now works correctly when captured output contains
non-ascii characters. Thanks Bruno Oliveira for the PR.</p></li>
<li><p>fix #1204: another error when collecting with a nasty __getattr__().
Thanks Florian Bruhin for the PR.</p></li>
<li><p>fix the summary printed when no tests did run.
Thanks Florian Bruhin for the PR.</p></li>
<li><p>a number of documentation modernizations wrt good practices.
Thanks Bruno Oliveira for the PR.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.3"></span><div class="section" id="pytest-2-8-3-bug-fixes">
<h4>pytest-2.8.3: bug fixes<a class="headerlink" href="#pytest-2-8-3-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.2.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Florian Bruhin
Gabe Hollombe
Gabriel Reis
Hartmut Goebel
John Vandenberg
Lee Kamentsky
Michael Birtwell
Raphael Pierzina
Ronny Pfannschmidt
William Martin Stewart</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-8-2">
<h5>2.8.3 (compared to 2.8.2)<a class="headerlink" href="#compared-to-2-8-2" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1169: add __name__ attribute to testcases in TestCaseFunction to
support the &#64;unittest.skip decorator on functions and methods.
Thanks Lee Kamentsky for the PR.</p></li>
<li><p>fix #1035: collecting tests if test module level obj has __getattr__().
Thanks Suor for the report and Bruno Oliveira / Tom Viner for the PR.</p></li>
<li><p>fix #331: don’t collect tests if their failure cannot be reported correctly
e.g. they are a callable instance of a class.</p></li>
<li><p>fix #1133: fixed internal error when filtering tracebacks where one entry
belongs to a file which is no longer available.
Thanks Bruno Oliveira for the PR.</p></li>
<li><p>enhancement made to highlight in red the name of the failing tests so
they stand out in the output.
Thanks Gabriel Reis for the PR.</p></li>
<li><p>add more talks to the documentation</p></li>
<li><p>extend documentation on the –ignore cli option</p></li>
<li><p>use pytest-runner for setuptools integration</p></li>
<li><p>minor fixes for interaction with OS X El Capitan system integrity protection (thanks Florian)</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.8.2"></span><div class="section" id="pytest-2-8-2-bug-fixes">
<h4>pytest-2.8.2: bug fixes<a class="headerlink" href="#pytest-2-8-2-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.8.1.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Demian Brecht
Florian Bruhin
Ionel Cristian Mărieș
Raphael Pierzina
Ronny Pfannschmidt
holger krekel</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-7-2">
<h5>2.8.2 (compared to 2.7.2)<a class="headerlink" href="#compared-to-2-7-2" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix #1085: proper handling of encoding errors when passing encoded byte
strings to pytest.parametrize in Python 2.
Thanks Themanwithoutaplan for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1087: handling SystemError when passing empty byte strings to
pytest.parametrize in Python 3.
Thanks Paul Kehrer for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #995: fixed internal error when filtering tracebacks where one entry
was generated by an exec() statement.
Thanks Daniel Hahler, Ashley C Straw, Philippe Gauthier and Pavel Savchenko
for contributing and Bruno Oliveira for the PR.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.7.2"></span><div class="section" id="pytest-2-7-2-bug-fixes">
<h4>pytest-2.7.2: bug fixes<a class="headerlink" href="#pytest-2-7-2-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.7.1.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Floris Bruynooghe
Punyashloka Biswal
Aron Curzon
Benjamin Peterson
Thomas De Schampheleire
Edison Gustavo Muenz
Holger Krekel</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-7-1">
<h5>2.7.2 (compared to 2.7.1)<a class="headerlink" href="#compared-to-2-7-1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue767: pytest.raises value attribute does not contain the exception
instance on Python 2.6. Thanks Eric Siegerman for providing the test
case and Bruno Oliveira for PR.</p></li>
<li><p>Automatically create directory for junitxml and results log.
Thanks Aron Curzon.</p></li>
<li><p>fix issue713: JUnit XML reports for doctest failures.
Thanks Punyashloka Biswal.</p></li>
<li><p>fix issue735: assertion failures on debug versions of Python 3.4+
Thanks Benjamin Peterson.</p></li>
<li><p>fix issue114: skipif marker reports to internal skipping plugin;
Thanks Floris Bruynooghe for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue748: unittest.SkipTest reports to internal pytest unittest plugin.
Thanks Thomas De Schampheleire for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue718: failed to create representation of sets containing unsortable
elements in python 2. Thanks Edison Gustavo Muenz</p></li>
<li><p>fix issue756, fix issue752 (and similar issues): depend on py-1.4.29
which has a refined algorithm for traceback generation.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.7.1"></span><div class="section" id="pytest-2-7-1-bug-fixes">
<h4>pytest-2.7.1: bug fixes<a class="headerlink" href="#pytest-2-7-1-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.7.0.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed to this release, among them:</p>
<blockquote>
<div><p>Bruno Oliveira
Holger Krekel
Ionel Maries Cristian
Floris Bruynooghe</p>
</div></blockquote>
<p>Happy testing,
The py.test Development Team</p>
<div class="section" id="compared-to-2-7-0">
<h5>2.7.1 (compared to 2.7.0)<a class="headerlink" href="#compared-to-2-7-0" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue731: do not get confused by the braces which may be present
and unbalanced in an object’s repr while collapsing False
explanations.  Thanks Carl Meyer for the report and test case.</p></li>
<li><p>fix issue553: properly handling inspect.getsourcelines failures in
FixtureLookupError which would lead to an internal error,
obfuscating the original problem. Thanks talljosh for initial
diagnose/patch and Bruno Oliveira for final patch.</p></li>
<li><p>fix issue660: properly report scope-mismatch-access errors
independently from ordering of fixture arguments.  Also
avoid the pytest internal traceback which does not provide
information to the user. Thanks Holger Krekel.</p></li>
<li><p>streamlined and documented release process.  Also all versions
(in setup.py and documentation generation) are now read
from _pytest/__init__.py. Thanks Holger Krekel.</p></li>
<li><p>fixed docs to remove the notion that yield-fixtures are experimental.
They are here to stay :)  Thanks Bruno Oliveira.</p></li>
<li><p>Support building wheels by using environment markers for the
requirements.  Thanks Ionel Maries Cristian.</p></li>
<li><p>fixed regression to 2.6.4 which surfaced e.g. in lost stdout capture printing
when tests raised SystemExit. Thanks Holger Krekel.</p></li>
<li><p>reintroduced _pytest fixture of the pytester plugin which is used
at least by pytest-xdist.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.7.0"></span><div class="section" id="pytest-2-7-0-fixes-features-speed-improvements">
<h4>pytest-2.7.0: fixes, features, speed improvements<a class="headerlink" href="#pytest-2-7-0-fixes-features-speed-improvements" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is supposed to be drop-in compatible to 2.6.X.</p>
<p>See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed, among them:</p>
<blockquote>
<div><p>Anatoly Bubenkoff
Floris Bruynooghe
Brianna Laugher
Eric Siegerman
Daniel Hahler
Charles Cloud
Tom Viner
Holger Peters
Ldiary Translations
almarklein</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
<div class="section" id="compared-to-2-6-4">
<h5>2.7.0 (compared to 2.6.4)<a class="headerlink" href="#compared-to-2-6-4" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue435: make reload() work when assert rewriting is active.
Thanks Daniel Hahler.</p></li>
<li><p>fix issue616: conftest.py files and their contained fixtures are now
properly considered for visibility, independently from the exact
current working directory and test arguments that are used.
Many thanks to Eric Siegerman and his PR235 which contains
systematic tests for conftest visibility and now passes.
This change also introduces the concept of a <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> which
is printed as a new pytest header and documented in the pytest
customize web page.</p></li>
<li><p>change reporting of “diverted” tests, i.e. tests that are collected
in one file but actually come from another (e.g. when tests in a test class
come from a base class in a different file).  We now show the nodeid
and indicate via a postfix the other file.</p></li>
<li><p>add ability to set command line options by environment variable PYTEST_ADDOPTS.</p></li>
<li><p>added documentation on the new pytest-dev teams on bitbucket and
github.  See <a class="reference external" href="https://pytest.org/en/stable/contributing.html">https://pytest.org/en/stable/contributing.html</a> .
Thanks to Anatoly for pushing and initial work on this.</p></li>
<li><p>fix issue650: new option <code class="docutils literal notranslate"><span class="pre">--docttest-ignore-import-errors</span></code> which
will turn import errors in doctests into skips.  Thanks Charles Cloud
for the complete PR.</p></li>
<li><p>fix issue655: work around different ways that cause python2/3
to leak sys.exc_info into fixtures/tests causing failures in 3rd party code</p></li>
<li><p>fix issue615: assertion rewriting did not correctly escape % signs
when formatting boolean operations, which tripped over mixing
booleans with modulo operators.  Thanks to Tom Viner for the report,
triaging and fix.</p></li>
<li><p>implement issue351: add ability to specify parametrize ids as a callable
to generate custom test ids.  Thanks Brianna Laugher for the idea and
implementation.</p></li>
<li><p>introduce and document new hookwrapper mechanism useful for plugins
which want to wrap the execution of certain hooks for their purposes.
This supersedes the undocumented <code class="docutils literal notranslate"><span class="pre">__multicall__</span></code> protocol which
pytest itself and some external plugins use.  Note that pytest-2.8
is scheduled to drop supporting the old <code class="docutils literal notranslate"><span class="pre">__multicall__</span></code>
and only support the hookwrapper protocol.</p></li>
<li><p>majorly speed up invocation of plugin hooks</p></li>
<li><p>use hookwrapper mechanism in builtin pytest plugins.</p></li>
<li><p>add a doctest ini option for doctest flags, thanks Holger Peters.</p></li>
<li><p>add note to docs that if you want to mark a parameter and the
parameter is a callable, you also need to pass in a reason to disambiguate
it from the “decorator” case.  Thanks Tom Viner.</p></li>
<li><p>“python_classes” and “python_functions” options now support glob-patterns
for test discovery, as discussed in issue600. Thanks Ldiary Translations.</p></li>
<li><p>allow to override parametrized fixtures with non-parametrized ones and vice versa (bubenkoff).</p></li>
<li><p>fix issue463: raise specific error for ‘parameterize’ misspelling (pfctdayelise).</p></li>
<li><p>On failure, the <code class="docutils literal notranslate"><span class="pre">sys.last_value</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.last_type</span></code> and
<code class="docutils literal notranslate"><span class="pre">sys.last_traceback</span></code> are set, so that a user can inspect the error
via postmortem debugging (almarklein).</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.6.3"></span><div class="section" id="pytest-2-6-3-fixes-and-little-improvements">
<h4>pytest-2.6.3: fixes and little improvements<a class="headerlink" href="#pytest-2-6-3-fixes-and-little-improvements" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is drop-in compatible to 2.5.2 and 2.6.X.
See below for the changes and see docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed, among them:</p>
<blockquote>
<div><p>Floris Bruynooghe
Oleg Sinyavskiy
Uwe Schmitt
Charles Cloud
Wolfgang Schnerring</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
</div>
<div class="section" id="changes-2-6-3">
<h4>Changes 2.6.3<a class="headerlink" href="#changes-2-6-3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue575: xunit-xml was reporting collection errors as failures
instead of errors, thanks Oleg Sinyavskiy.</p></li>
<li><p>fix issue582: fix setuptools example, thanks Laszlo Papp and Ronny
Pfannschmidt.</p></li>
<li><p>Fix infinite recursion bug when pickling capture.EncodedFile, thanks
Uwe Schmitt.</p></li>
<li><p>fix issue589: fix bad interaction with numpy and others when showing
exceptions.  Check for precise “maximum recursion depth exceed” exception
instead of presuming any RuntimeError is that one (implemented in py
dep).  Thanks Charles Cloud for analysing the issue.</p></li>
<li><p>fix conftest related fixture visibility issue: when running with a
CWD outside of a test package pytest would get fixture discovery wrong.
Thanks to Wolfgang Schnerring for figuring out a reproducible example.</p></li>
<li><p>Introduce pytest_enter_pdb hook (needed e.g. by pytest_timeout to cancel the
timeout when interactively entering pdb).  Thanks Wolfgang Schnerring.</p></li>
<li><p>check xfail/skip also with non-python function test items. Thanks
Floris Bruynooghe.</p></li>
</ul>
</div>
<span id="document-announce/release-2.6.2"></span><div class="section" id="pytest-2-6-2-few-fixes-and-cx-freeze-support">
<h4>pytest-2.6.2: few fixes and cx_freeze support<a class="headerlink" href="#pytest-2-6-2-few-fixes-and-cx-freeze-support" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
This release is drop-in compatible to 2.5.2 and 2.6.X.  It also
brings support for including pytest with cx_freeze or similar
freezing tools into your single-file app distribution.  For details
see the CHANGELOG below.</p>
<p>See docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed, among them:</p>
<blockquote>
<div><p>Floris Bruynooghe
Benjamin Peterson
Bruno Oliveira</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
<div class="section" id="id1">
<h5>2.6.2<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Added function pytest.freeze_includes(), which makes it easy to embed
pytest into executables using tools like cx_freeze.
See docs for examples and rationale. Thanks Bruno Oliveira.</p></li>
<li><p>Improve assertion rewriting cache invalidation precision.</p></li>
<li><p>fixed issue561: adapt autouse fixture example for python3.</p></li>
<li><p>fixed issue453: assertion rewriting issue with __repr__ containing
“n{“, “n}” and “n~”.</p></li>
<li><p>fix issue560: correctly display code if an “else:” or “finally:” is
followed by statements on the same line.</p></li>
<li><p>Fix example in monkeypatch documentation, thanks t-8ch.</p></li>
<li><p>fix issue572: correct tmpdir doc example for python3.</p></li>
<li><p>Do not mark as universal wheel because Python 2.6 is different from
other builds due to the extra argparse dependency.  Fixes issue566.
Thanks sontek.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.6.1"></span><div class="section" id="pytest-2-6-1-fixes-and-new-xfail-feature">
<h4>pytest-2.6.1: fixes and new xfail feature<a class="headerlink" href="#pytest-2-6-1-fixes-and-new-xfail-feature" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1100 tests
against itself, passing on many different interpreters and platforms.
The 2.6.1 release is drop-in compatible to 2.5.2 and actually fixes some
regressions introduced with 2.6.0.  It also brings a little feature
to the xfail marker which now recognizes expected exceptions,
see the CHANGELOG below.</p>
<p>See docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed, among them:</p>
<blockquote>
<div><p>Floris Bruynooghe
Bruno Oliveira
Nicolas Delaby</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
</div>
<div class="section" id="changes-2-6-1">
<h4>Changes 2.6.1<a class="headerlink" href="#changes-2-6-1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>No longer show line numbers in the –verbose output, the output is now
purely the nodeid.  The line number is still shown in failure reports.
Thanks Floris Bruynooghe.</p></li>
<li><p>fix issue437 where assertion rewriting could cause pytest-xdist worker nodes
to collect different tests. Thanks Bruno Oliveira.</p></li>
<li><p>fix issue555: add “errors” attribute to capture-streams to satisfy
some distutils and possibly other code accessing sys.stdout.errors.</p></li>
<li><p>fix issue547 capsys/capfd also work when output capturing (“-s”) is disabled.</p></li>
<li><p>address issue170: allow pytest.mark.xfail(…) to specify expected exceptions via
an optional “raises=EXC” argument where EXC can be a single exception
or a tuple of exception classes.  Thanks David Mohr for the complete
PR.</p></li>
<li><p>fix integration of pytest with unittest.mock.patch decorator when
it uses the “new” argument.  Thanks Nicolas Delaby for test and PR.</p></li>
<li><p>fix issue with detecting conftest files if the arguments contain
“::” node id specifications (copy pasted from “-v” output)</p></li>
<li><p>fix issue544 by only removing “&#64;NUM” at the end of “::” separated parts
and if the part has a “.py” extension</p></li>
<li><p>don’t use py.std import helper, rather import things directly.
Thanks Bruno Oliveira.</p></li>
</ul>
</div>
<span id="document-announce/release-2.6.0"></span><div class="section" id="pytest-2-6-0-shorter-tracebacks-new-warning-system-test-runner-compat">
<h4>pytest-2.6.0: shorter tracebacks, new warning system, test runner compat<a class="headerlink" href="#pytest-2-6-0-shorter-tracebacks-new-warning-system-test-runner-compat" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>The 2.6.0 release should be drop-in backward compatible to 2.5.2 and
fixes a number of bugs and brings some new features, mainly:</p>
<ul class="simple">
<li><p>shorter tracebacks by default: only the first (test function) entry
and the last (failure location) entry are shown, the ones between
only in “short” format.  Use <code class="docutils literal notranslate"><span class="pre">--tb=long</span></code> to get back the old
behaviour of showing “long” entries everywhere.</p></li>
<li><p>a new warning system which reports oddities during collection
and execution.  For example, ignoring collecting Test* classes with an
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> now produces a warning.</p></li>
<li><p>various improvements to nose/mock/unittest integration</p></li>
</ul>
<p>Note also that 2.6.0 departs with the “zero reported bugs” policy
because it has been too hard to keep up with it, unfortunately.
Instead we are for now rather bound to work on “upvoted” issues in
the <a class="reference external" href="https://bitbucket.org/pytest-dev/pytest/issues?status=new&amp;status=open&amp;sort=-votes">https://bitbucket.org/pytest-dev/pytest/issues?status=new&amp;status=open&amp;sort=-votes</a>
issue tracker.</p>
<p>See docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to all who contributed, among them:</p>
<blockquote>
<div><p>Benjamin Peterson
Jurko Gospodnetić
Floris Bruynooghe
Marc Abramowitz
Marc Schlaich
Trevor Bekolay
Bruno Oliveira
Alex Groenholm</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
<div class="section" id="id1">
<h5>2.6.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue537: Avoid importing old assertion reinterpretation code by default.
Thanks Benjamin Peterson.</p></li>
<li><p>fix issue364: shorten and enhance tracebacks representation by default.
The new “–tb=auto” option (default) will only display long tracebacks
for the first and last entry.  You can get the old behaviour of printing
all entries as long entries with “–tb=long”.  Also short entries by
default are now printed very similarly to “–tb=native” ones.</p></li>
<li><p>fix issue514: teach assertion reinterpretation about private class attributes
Thanks Benjamin Peterson.</p></li>
<li><p>change -v output to include full node IDs of tests.  Users can copy
a node ID from a test run, including line number, and use it as a
positional argument in order to run only a single test.</p></li>
<li><p>fix issue 475: fail early and comprehensible if calling
pytest.raises with wrong exception type.</p></li>
<li><p>fix issue516: tell in getting-started about current dependencies.</p></li>
<li><p>cleanup setup.py a bit and specify supported versions. Thanks Jurko
Gospodnetic for the PR.</p></li>
<li><p>change XPASS colour to yellow rather then red when tests are run
with -v.</p></li>
<li><p>fix issue473: work around mock putting an unbound method into a class
dict when double-patching.</p></li>
<li><p>fix issue498: if a fixture finalizer fails, make sure that
the fixture is still invalidated.</p></li>
<li><p>fix issue453: the result of the pytest_assertrepr_compare hook now gets
it’s newlines escaped so that format_exception does not blow up.</p></li>
<li><p>internal new warning system: pytest will now produce warnings when
it detects oddities in your test collection or execution.
Warnings are ultimately sent to a new pytest_logwarning hook which is
currently only implemented by the terminal plugin which displays
warnings in the summary line and shows more details when -rw (report on
warnings) is specified.</p></li>
<li><p>change skips into warnings for test classes with an __init__ and
callables in test modules which look like a test but are not functions.</p></li>
<li><p>fix issue436: improved finding of initial conftest files from command
line arguments by using the result of parse_known_args rather than
the previous flaky heuristics.  Thanks Marc Abramowitz for tests
and initial fixing approaches in this area.</p></li>
<li><p>fix issue #479: properly handle nose/unittest(2) SkipTest exceptions
during collection/loading of test modules.  Thanks to Marc Schlaich
for the complete PR.</p></li>
<li><p>fix issue490: include pytest_load_initial_conftests in documentation
and improve docstring.</p></li>
<li><p>fix issue472: clarify that <code class="docutils literal notranslate"><span class="pre">pytest.config.getvalue()</span></code> cannot work
if it’s triggered ahead of command line parsing.</p></li>
<li><p>merge PR123: improved integration with mock.patch decorator on tests.</p></li>
<li><p>fix issue412: messing with stdout/stderr FD-level streams is now
captured without crashes.</p></li>
<li><p>fix issue483: trial/py33 works now properly.  Thanks Daniel Grana for PR.</p></li>
<li><p>improve example for pytest integration with “python setup.py test”
which now has a generic “-a” or “–pytest-args” option where you
can pass additional options as a quoted string.  Thanks Trevor Bekolay.</p></li>
<li><p>simplified internal capturing mechanism and made it more robust
against tests or setups changing FD1/FD2, also better integrated
now with pytest.pdb() in single tests.</p></li>
<li><p>improvements to pytest’s own test-suite leakage detection, courtesy of PRs
from Marc Abramowitz</p></li>
<li><p>fix issue492: avoid leak in test_writeorg.  Thanks Marc Abramowitz.</p></li>
<li><p>fix issue493: don’t run tests in doc directory with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code>
(use tox -e doctesting for that)</p></li>
<li><p>fix issue486: better reporting and handling of early conftest loading failures</p></li>
<li><p>some cleanup and simplification of internal conftest handling.</p></li>
<li><p>work a bit harder to break reference cycles when catching exceptions.
Thanks Jurko Gospodnetic.</p></li>
<li><p>fix issue443: fix skip examples to use proper comparison.  Thanks Alex
Groenholm.</p></li>
<li><p>support nose-style <code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute on modules, classes and
functions, including unittest-style Classes.  If set to False, the
test will not be collected.</p></li>
<li><p>fix issue512: show “&lt;notset&gt;” for arguments which might not be set
in monkeypatch plugin.  Improves output in documentation.</p></li>
<li><p>avoid importing “py.test” (an old alias module for “pytest”)</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.5.2"></span><div class="section" id="pytest-2-5-2-fixes">
<h4>pytest-2.5.2: fixes<a class="headerlink" href="#pytest-2-5-2-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>The 2.5.2 release fixes a few bugs with two maybe-bugs remaining and
actively being worked on (and waiting for the bug reporter’s input).
We also have a new contribution guide thanks to Piotr Banaszkiewicz
and others.</p>
<p>See docs at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to the following people who contributed to this release:</p>
<blockquote>
<div><p>Anatoly Bubenkov
Ronny Pfannschmidt
Floris Bruynooghe
Bruno Oliveira
Andreas Pelme
Jurko Gospodnetić
Piotr Banaszkiewicz
Simon Liedtke
lakka
Lukasz Balcerzak
Philippe Muller
Daniel Hahler</p>
</div></blockquote>
<p>have fun,
holger krekel</p>
<div class="section" id="id1">
<h5>2.5.2<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue409 – better interoperate with cx_freeze by not
trying to import from collections.abc which causes problems
for py27/cx_freeze.  Thanks Wolfgang L. for reporting and tracking it down.</p></li>
<li><p>fixed docs and code to use “pytest” instead of “py.test” almost everywhere.
Thanks Jurko Gospodnetic for the complete PR.</p></li>
<li><p>fix issue425: mention at end of “py.test -h” that –markers
and –fixtures work according to specified test path (or current dir)</p></li>
<li><p>fix issue413: exceptions with unicode attributes are now printed
correctly also on python2 and with pytest-xdist runs. (the fix
requires py-1.4.20)</p></li>
<li><p>copy, cleanup and integrate py.io capture
from pylib 1.4.20.dev2 (rev 13d9af95547e)</p></li>
<li><p>address issue416: clarify docs as to conftest.py loading semantics</p></li>
<li><p>fix issue429: comparing byte strings with non-ascii chars in assert
expressions now work better.  Thanks Floris Bruynooghe.</p></li>
<li><p>make capfd/capsys.capture private, its unused and shouldn’t be exposed</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.5.1"></span><div class="section" id="pytest-2-5-1-fixes-and-new-home-page-styling">
<h4>pytest-2.5.1: fixes and new home page styling<a class="headerlink" href="#pytest-2-5-1-fixes-and-new-home-page-styling" title="Permalink to this headline">¶</a></h4>
<p>pytest is a mature Python testing tool with more than 1000 tests
against itself, passing on many different interpreters and platforms.</p>
<p>The 2.5.1 release maintains the “zero-reported-bugs” promise by fixing
the three bugs reported since the last release a few days ago.  It also
features a new home page styling implemented by Tobias Bieniek, based on
the flask theme from Armin Ronacher:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>If you have anything more to improve styling and docs,
we’d be very happy to merge further pull requests.</p>
<p>On the coding side, the release also contains a little enhancement to
fixture decorators allowing to directly influence generation of test
ids, thanks to Floris Bruynooghe.  Other thanks for helping with
this release go to Anatoly Bubenkoff and Ronny Pfannschmidt.</p>
<p>As usual, you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>have fun and a nice remaining “bug-free” time of the year :)
holger krekel</p>
<div class="section" id="id1">
<h5>2.5.1<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>merge new documentation styling PR from Tobias Bieniek.</p></li>
<li><p>fix issue403: allow parametrize of multiple same-name functions within
a collection node.  Thanks Andreas Kloeckner and Alex Gaynor for reporting
and analysis.</p></li>
<li><p>Allow parameterized fixtures to specify the ID of the parameters by
adding an ids argument to pytest.fixture() and pytest.yield_fixture().
Thanks Floris Bruynooghe.</p></li>
<li><p>fix issue404 by always using the binary xml escape in the junitxml
plugin.  Thanks Ronny Pfannschmidt.</p></li>
<li><p>fix issue407: fix addoption docstring to point to argparse instead of
optparse. Thanks Daniel D. Wright.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.5.0"></span><div class="section" id="pytest-2-5-0-now-down-to-zero-reported-bugs">
<h4>pytest-2.5.0: now down to ZERO reported bugs!<a class="headerlink" href="#pytest-2-5-0-now-down-to-zero-reported-bugs" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.5.0 is a big fixing release, the result of two community bug
fixing days plus numerous additional works from many people and
reporters.  The release should be fully compatible to 2.4.2, existing
plugins and test suites.  We aim at maintaining this level of ZERO reported
bugs because it’s no fun if your testing tool has bugs, is it?  Under a
condition, though: when submitting a bug report please provide
clear information about the circumstances and a simple example which
reproduces the problem.</p>
<p>The issue tracker is of course not empty now.  We have many remaining
“enhancement” issues which we’ll hopefully can tackle in 2014 with your
help.</p>
<p>For those who use older Python versions, please note that pytest is not
automatically tested on python2.5 due to virtualenv, setuptools and tox
not supporting it anymore.  Manual verification shows that it mostly
works fine but it’s not going to be part of the automated release
process and thus likely to break in the future.</p>
<p>As usual, current docs are at</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>and you can upgrade from pypi via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Particular thanks for helping with this release go to Anatoly Bubenkoff,
Floris Bruynooghe, Marc Abramowitz, Ralph Schmitt, Ronny Pfannschmidt,
Donald Stufft, James Lan, Rob Dennis, Jason R. Coombs, Mathieu Agopian,
Virgil Dupras, Bruno Oliveira, Alex Gaynor and others.</p>
<p>have fun,
holger krekel</p>
<div class="section" id="id1">
<h5>2.5.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>dropped python2.5 from automated release testing of pytest itself
which means it’s probably going to break soon (but still works
with this release we believe).</p></li>
<li><p>simplified and fixed implementation for calling finalizers when
parametrized fixtures or function arguments are involved.  finalization
is now performed lazily at setup time instead of in the “teardown phase”.
While this might sound odd at first, it helps to ensure that we are
correctly handling setup/teardown even in complex code.  User-level code
should not be affected unless it’s implementing the pytest_runtest_teardown
hook and expecting certain fixture instances are torn down within (very
unlikely and would have been unreliable anyway).</p></li>
<li><p>PR90: add –color=yes|no|auto option to force terminal coloring
mode (“auto” is default).  Thanks Marc Abramowitz.</p></li>
<li><p>fix issue319 - correctly show unicode in assertion errors.  Many
thanks to Floris Bruynooghe for the complete PR.  Also means
we depend on py&gt;=1.4.19 now.</p></li>
<li><p>fix issue396 - correctly sort and finalize class-scoped parametrized
tests independently from number of methods on the class.</p></li>
<li><p>refix issue323 in a better way – parametrization should now never
cause Runtime Recursion errors because the underlying algorithm
for re-ordering tests per-scope/per-fixture is not recursive
anymore (it was tail-call recursive before which could lead
to problems for more than &gt;966 non-function scoped parameters).</p></li>
<li><p>fix issue290 - there is preliminary support now for parametrizing
with repeated same values (sometimes useful to test if calling
a second time works as with the first time).</p></li>
<li><p>close issue240 - document precisely how pytest module importing
works, discuss the two common test directory layouts, and how it
interacts with PEP420-namespace packages.</p></li>
<li><p>fix issue246 fix finalizer order to be LIFO on independent fixtures
depending on a parametrized higher-than-function scoped fixture.
(was quite some effort so please bear with the complexity of this sentence :)
Thanks Ralph Schmitt for the precise failure example.</p></li>
<li><p>fix issue244 by implementing special index for parameters to only use
indices for paramentrized test ids</p></li>
<li><p>fix issue287 by running all finalizers but saving the exception
from the first failing finalizer and re-raising it so teardown will
still have failed.  We reraise the first failing exception because
it might be the cause for other finalizers to fail.</p></li>
<li><p>fix ordering when mock.patch or other standard decorator-wrappings
are used with test methods.  This fixes issue346 and should
help with random “xdist” collection failures.  Thanks to
Ronny Pfannschmidt and Donald Stufft for helping to isolate it.</p></li>
<li><p>fix issue357 - special case “-k” expressions to allow for
filtering with simple strings that are not valid python expressions.
Examples: “-k 1.3” matches all tests parametrized with 1.3.
“-k None” filters all tests that have “None” in their name
and conversely “-k ‘not None’”.
Previously these examples would raise syntax errors.</p></li>
<li><p>fix issue384 by removing the trial support code
since the unittest compat enhancements allow
trial to handle it on its own</p></li>
<li><p>don’t hide an ImportError when importing a plugin produces one.
fixes issue375.</p></li>
<li><p>fix issue275 - allow usefixtures and autouse fixtures
for running doctest text files.</p></li>
<li><p>fix issue380 by making –resultlog only rely on longrepr instead
of the “reprcrash” attribute which only exists sometimes.</p></li>
<li><p>address issue122: allow &#64;pytest.fixture(params=iterator) by exploding
into a list early on.</p></li>
<li><p>fix pexpect-3.0 compatibility for pytest’s own tests.
(fixes issue386)</p></li>
<li><p>allow nested parametrize-value markers, thanks James Lan for the PR.</p></li>
<li><p>fix unicode handling with new monkeypatch.setattr(import_path, value)
API.  Thanks Rob Dennis.  Fixes issue371.</p></li>
<li><p>fix unicode handling with junitxml, fixes issue368.</p></li>
<li><p>In assertion rewriting mode on Python 2, fix the detection of coding
cookies. See issue #330.</p></li>
<li><p>make “–runxfail” turn imperative pytest.xfail calls into no ops
(it already did neutralize pytest.mark.xfail markers)</p></li>
<li><p>refine pytest / pkg_resources interactions: The AssertionRewritingHook
PEP302 compliant loader now registers itself with setuptools/pkg_resources
properly so that the pkg_resources.resource_stream method works properly.
Fixes issue366.  Thanks for the investigations and full PR to Jason R. Coombs.</p></li>
<li><p>pytestconfig fixture is now session-scoped as it is the same object during the
whole test run.  Fixes issue370.</p></li>
<li><p>avoid one surprising case of marker malfunction/confusion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">some</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span><span class="p">:</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
</pre></div>
</div>
<p>would not work correctly because pytest assumes &#64;pytest.mark.some
gets a function to be decorated already.  We now at least detect if this
arg is a lambda and thus the example will work.  Thanks Alex Gaynor
for bringing it up.</p>
</li>
<li><p>xfail a test on pypy that checks wrong encoding/ascii (pypy does
not error out). fixes issue385.</p></li>
<li><p>internally make varnames() deal with classes’s __init__,
although it’s not needed by pytest itself atm.  Also
fix caching.  Fixes issue376.</p></li>
<li><p>fix issue221 - handle importing of namespace-package with no
__init__.py properly.</p></li>
<li><p>refactor internal FixtureRequest handling to avoid monkeypatching.
One of the positive user-facing effects is that the “request” object
can now be used in closures.</p></li>
<li><p>fixed version comparison in pytest.importskip(modname, minverstring)</p></li>
<li><p>fix issue377 by clarifying in the nose-compat docs that pytest
does not duplicate the unittest-API into the “plain” namespace.</p></li>
<li><p>fix verbose reporting for &#64;mock’d test functions</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.4.2"></span><div class="section" id="pytest-2-4-2-colorama-on-windows-plugin-tmpdir-fixes">
<h4>pytest-2.4.2: colorama on windows, plugin/tmpdir fixes<a class="headerlink" href="#pytest-2-4-2-colorama-on-windows-plugin-tmpdir-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.4.2 is another bug-fixing release:</p>
<ul class="simple">
<li><p>on Windows require colorama and a newer py lib so that py.io.TerminalWriter()
now uses colorama instead of its own ctypes hacks. (fixes issue365)
thanks Paul Moore for bringing it up.</p></li>
<li><p>fix “-k” matching of tests where “repr” and “attr” and other names would
cause wrong matches because of an internal implementation quirk
(don’t ask) which is now properly implemented. fixes issue345.</p></li>
<li><p>avoid tmpdir fixture to create too long filenames especially
when parametrization is used (issue354)</p></li>
<li><p>fix pytest-pep8 and pytest-flakes / pytest interactions
(collection names in mark plugin was assuming an item always
has a function which is not true for those plugins etc.)
Thanks Andi Zeidler.</p></li>
<li><p>introduce node.get_marker/node.add_marker API for plugins
like pytest-pep8 and pytest-flakes to avoid the messy
details of the node.keywords  pseudo-dicts.  Adapted
docs.</p></li>
<li><p>remove attempt to “dup” stdout at startup as it’s icky.
the normal capturing should catch enough possibilities
of tests messing up standard FDs.</p></li>
<li><p>add pluginmanager.do_configure(config) as a link to
config.do_configure() for plugin-compatibility</p></li>
</ul>
<p>as usual, docs at <a class="reference external" href="http://pytest.org">http://pytest.org</a> and upgrades via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>have fun,
holger krekel</p>
</div>
<span id="document-announce/release-2.4.1"></span><div class="section" id="pytest-2-4-1-fixing-three-regressions-compared-to-2-3-5">
<h4>pytest-2.4.1: fixing three regressions compared to 2.3.5<a class="headerlink" href="#pytest-2-4-1-fixing-three-regressions-compared-to-2-3-5" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.4.1 is a quick follow up release to fix three regressions
compared to 2.3.5 before they hit more people:</p>
<ul class="simple">
<li><p>When using parser.addoption() unicode arguments to the
“type” keyword should also be converted to the respective types.
thanks Floris Bruynooghe, &#64;dnozay. (fixes issue360 and issue362)</p></li>
<li><p>fix dotted filename completion when using argcomplete
thanks Anthon van der Neuth. (fixes issue361)</p></li>
<li><p>fix regression when a 1-tuple (“arg”,) is used for specifying
parametrization (the values of the parametrization were passed
nested in a tuple).  Thanks Donald Stufft.</p></li>
<li><p>also merge doc typo fixes, thanks Andy Dirnberger</p></li>
</ul>
<p>as usual, docs at <a class="reference external" href="http://pytest.org">http://pytest.org</a> and upgrades via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>have fun,
holger krekel</p>
</div>
<span id="document-announce/release-2.4.0"></span><div class="section" id="pytest-2-4-0-new-fixture-features-hooks-and-bug-fixes">
<h4>pytest-2.4.0: new fixture features/hooks and bug fixes<a class="headerlink" href="#pytest-2-4-0-new-fixture-features-hooks-and-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>The just released pytest-2.4.0 brings many improvements and numerous
bug fixes while remaining plugin- and test-suite compatible apart
from a few supposedly very minor incompatibilities.  See below for
a full list of details.  A few feature highlights:</p>
<ul class="simple">
<li><p>new yield-style fixtures <a class="reference external" href="http://pytest.org/en/stable/yieldfixture.html">pytest.yield_fixture</a>, allowing to use
existing with-style context managers in fixture functions.</p></li>
<li><p>improved pdb support: <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pdb</span> <span class="pre">;</span> <span class="pre">pdb.set_trace()</span></code> now works
without requiring prior disabling of stdout/stderr capturing.
Also the <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> options works now on collection and internal errors
and we introduced a new experimental hook for IDEs/plugins to
intercept debugging: <code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(node,</span> <span class="pre">call,</span> <span class="pre">report)</span></code>.</p></li>
<li><p>shorter monkeypatch variant to allow specifying an import path as
a target, for example: <code class="docutils literal notranslate"><span class="pre">monkeypatch.setattr(&quot;requests.get&quot;,</span> <span class="pre">myfunc)</span></code></p></li>
<li><p>better unittest/nose compatibility: all teardown methods are now only
called if the corresponding setup method succeeded.</p></li>
<li><p>integrate tab-completion on command line options if you
have <a class="reference external" href="https://pypi.org/project/argcomplete/">argcomplete</a> configured.</p></li>
<li><p>allow boolean expression directly with skipif/xfail
if a “reason” is also specified.</p></li>
<li><p>a new hook <code class="docutils literal notranslate"><span class="pre">pytest_load_initial_conftests</span></code> allows plugins like
<a class="reference external" href="https://pypi.org/project/pytest-django/">pytest-django</a> to
influence the environment before conftest files import <code class="docutils literal notranslate"><span class="pre">django</span></code>.</p></li>
<li><p>reporting: color the last line red or green depending if
failures/errors occurred or everything passed.</p></li>
</ul>
<p>The documentation has been updated to accommodate the changes,
see <a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
<p>To install or upgrade pytest:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p><strong>Many thanks to all who helped, including Floris Bruynooghe,
Brianna Laugher, Andreas Pelme, Anthon van der Neut, Anatoly Bubenkoff,
Vladimir Keleshev, Mathieu Agopian, Ronny Pfannschmidt, Christian
Theunert and many others.</strong></p>
<p>may passing tests be with you,</p>
<p>holger krekel</p>
<div class="section" id="changes-between-2-3-5-and-2-4">
<h5>Changes between 2.3.5 and 2.4<a class="headerlink" href="#changes-between-2-3-5-and-2-4" title="Permalink to this headline">¶</a></h5>
<p>known incompatibilities:</p>
<ul class="simple">
<li><p>if calling –genscript from python2.7 or above, you only get a
standalone script which works on python2.7 or above.  Use Python2.6
to also get a python2.5 compatible version.</p></li>
<li><p>all xunit-style teardown methods (nose-style, pytest-style,
unittest-style) will not be called if the corresponding setup method failed,
see issue322 below.</p></li>
<li><p>the pytest_plugin_unregister hook wasn’t ever properly called
and there is no known implementation of the hook - so it got removed.</p></li>
<li><p>pytest.fixture-decorated functions cannot be generators (i.e. use
yield) anymore.  This change might be reversed in 2.4.1 if it causes
unforeseen real-life issues.  However, you can always write and return
an inner function/generator and change the fixture consumer to iterate
over the returned generator.  This change was done in lieu of the new
<code class="docutils literal notranslate"><span class="pre">pytest.yield_fixture</span></code> decorator, see below.</p></li>
</ul>
<p>new features:</p>
<ul>
<li><p>experimentally introduce a new <code class="docutils literal notranslate"><span class="pre">pytest.yield_fixture</span></code> decorator
which accepts exactly the same parameters as pytest.fixture but
mandates a <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement instead of a <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">statement</span></code> from
fixture functions.  This allows direct integration with “with-style”
context managers in fixture functions and generally avoids registering
of finalization callbacks in favour of treating the “after-yield” as
teardown code.  Thanks Andreas Pelme, Vladimir Keleshev, Floris
Bruynooghe, Ronny Pfannschmidt and many others for discussions.</p></li>
<li><p>allow boolean expression directly with skipif/xfail
if a “reason” is also specified.  Rework skipping documentation
to recommend “condition as booleans” because it prevents surprises
when importing markers between modules.  Specifying conditions
as strings will remain fully supported.</p></li>
<li><p>reporting: color the last line red or green depending if
failures/errors occurred or everything passed.  thanks Christian
Theunert.</p></li>
<li><p>make “import pdb ; pdb.set_trace()” work natively wrt capturing (no
“-s” needed anymore), making <code class="docutils literal notranslate"><span class="pre">pytest.set_trace()</span></code> a mere shortcut.</p></li>
<li><p>fix issue181: –pdb now also works on collect errors (and
on internal errors) .  This was implemented by a slight internal
refactoring and the introduction of a new hook
<code class="docutils literal notranslate"><span class="pre">pytest_exception_interact</span></code> hook (see next item).</p></li>
<li><p>fix issue341: introduce new experimental hook for IDEs/terminals to
intercept debugging: <code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(node,</span> <span class="pre">call,</span> <span class="pre">report)</span></code>.</p></li>
<li><p>new monkeypatch.setattr() variant to provide a shorter
invocation for patching out classes/functions from modules:</p>
<blockquote>
<div><p>monkeypatch.setattr(“requests.get”, myfunc)</p>
</div></blockquote>
<p>will replace the “get” function of the “requests” module with <code class="docutils literal notranslate"><span class="pre">myfunc</span></code>.</p>
</li>
<li><p>fix issue322: tearDownClass is not run if setUpClass failed. Thanks
Mathieu Agopian for the initial fix.  Also make all of pytest/nose
finalizer mimic the same generic behaviour: if a setupX exists and
fails, don’t run teardownX.  This internally introduces a new method
“node.addfinalizer()” helper which can only be called during the setup
phase of a node.</p></li>
<li><p>simplify pytest.mark.parametrize() signature: allow to pass a
CSV-separated string to specify argnames.  For example:
<code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize(&quot;input,expected&quot;,</span>&#160; <span class="pre">[(1,2),</span> <span class="pre">(2,3)])</span></code>
works as well as the previous:
<code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize((&quot;input&quot;,</span> <span class="pre">&quot;expected&quot;),</span> <span class="pre">...)</span></code>.</p></li>
<li><p>add support for setUpModule/tearDownModule detection, thanks Brian Okken.</p></li>
<li><p>integrate tab-completion on options through use of “argcomplete”.
Thanks Anthon van der Neut for the PR.</p></li>
<li><p>change option names to be hyphen-separated long options but keep the
old spelling backward compatible.  py.test -h will only show the
hyphenated version, for example “–collect-only” but “–collectonly”
will remain valid as well (for backward-compat reasons).  Many thanks to
Anthon van der Neut for the implementation and to Hynek Schlawack for
pushing us.</p></li>
<li><p>fix issue 308 - allow to mark/xfail/skip individual parameter sets
when parametrizing.  Thanks Brianna Laugher.</p></li>
<li><p>call new experimental pytest_load_initial_conftests hook to allow
3rd party plugins to do something before a conftest is loaded.</p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>fix issue358 - capturing options are now parsed more properly
by using a new parser.parse_known_args method.</p></li>
<li><p>pytest now uses argparse instead of optparse (thanks Anthon) which
means that “argparse” is added as a dependency if installing into python2.6
environments or below.</p></li>
<li><p>fix issue333: fix a case of bad unittest/pytest hook interaction.</p></li>
<li><p>PR27: correctly handle nose.SkipTest during collection.  Thanks
Antonio Cuni, Ronny Pfannschmidt.</p></li>
<li><p>fix issue355: junitxml puts name=”pytest” attribute to testsuite tag.</p></li>
<li><p>fix issue336: autouse fixture in plugins should work again.</p></li>
<li><p>fix issue279: improve object comparisons on assertion failure
for standard datatypes and recognise collections.abc.  Thanks to
Brianna Laugher and Mathieu Agopian.</p></li>
<li><p>fix issue317: assertion rewriter support for the is_package method</p></li>
<li><p>fix issue335: document py.code.ExceptionInfo() object returned
from pytest.raises(), thanks Mathieu Agopian.</p></li>
<li><p>remove implicit distribute_setup support from setup.py.</p></li>
<li><p>fix issue305: ignore any problems when writing pyc files.</p></li>
<li><p>SO-17664702: call fixture finalizers even if the fixture function
partially failed (finalizers would not always be called before)</p></li>
<li><p>fix issue320 - fix class scope for fixtures when mixed with
module-level functions.  Thanks Anatloy Bubenkoff.</p></li>
<li><p>you can specify “-q” or “-qq” to get different levels of “quieter”
reporting (thanks Katarzyna Jachim)</p></li>
<li><p>fix issue300 - Fix order of conftest loading when starting py.test
in a subdirectory.</p></li>
<li><p>fix issue323 - sorting of many module-scoped arg parametrizations</p></li>
<li><p>make sessionfinish hooks execute with the same cwd-context as at
session start (helps fix plugin behaviour which write output files
with relative path such as pytest-cov)</p></li>
<li><p>fix issue316 - properly reference collection hooks in docs</p></li>
<li><p>fix issue 306 - cleanup of -k/-m options to only match markers/test
names/keywords respectively.  Thanks Wouter van Ackooy.</p></li>
<li><p>improved doctest counting for doctests in python modules –
files without any doctest items will not show up anymore
and doctest examples are counted as separate test items.
thanks Danilo Bellini.</p></li>
<li><p>fix issue245 by depending on the released py-1.4.14
which fixes py.io.dupfile to work with files with no
mode. Thanks Jason R. Coombs.</p></li>
<li><p>fix junitxml generation when test output contains control characters,
addressing issue267, thanks Jaap Broekhuizen</p></li>
<li><p>fix issue338: honor –tb style for setup/teardown errors as well.  Thanks Maho.</p></li>
<li><p>fix issue307 - use yaml.safe_load in example, thanks Mark Eichin.</p></li>
<li><p>better parametrize error messages, thanks Brianna Laugher</p></li>
<li><p>pytest_terminal_summary(terminalreporter) hooks can now use
“.section(title)” and “.line(msg)” methods to print extra
information at the end of a test run.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.3.5"></span><div class="section" id="pytest-2-3-5-bug-fixes-and-little-improvements">
<h4>pytest-2.3.5: bug fixes and little improvements<a class="headerlink" href="#pytest-2-3-5-bug-fixes-and-little-improvements" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3.5 is a maintenance release with many bug fixes and little
improvements.  See the changelog below for details.  No backward
compatibility issues are foreseen and all plugins which worked with the
prior version are expected to work unmodified.   Speaking of which, a
few interesting new plugins saw the light last month:</p>
<ul class="simple">
<li><p>pytest-instafail: show failure information while tests are running</p></li>
<li><p>pytest-qt: testing of GUI applications written with QT/Pyside</p></li>
<li><p>pytest-xprocess: managing external processes across test runs</p></li>
<li><p>pytest-random: randomize test ordering</p></li>
</ul>
<p>And several others like pytest-django saw maintenance releases.
For a more complete list, check out
<a class="reference external" href="https://pypi.org/search/?q=pytest">https://pypi.org/search/?q=pytest</a></p>
<p>For general information see:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>Particular thanks to Floris, Ronny, Benjamin and the many bug reporters
and fix providers.</p>
<p>may the fixtures be with you,
holger krekel</p>
<div class="section" id="changes-between-2-3-4-and-2-3-5">
<h5>Changes between 2.3.4 and 2.3.5<a class="headerlink" href="#changes-between-2-3-4-and-2-3-5" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>never consider a fixture function for test function collection</p></li>
<li><p>allow re-running of test items / helps to fix pytest-reruntests plugin
and also help to keep less fixture/resource references alive</p></li>
<li><p>put captured stdout/stderr into junitxml output even for passing tests
(thanks Adam Goucher)</p></li>
<li><p>Issue 265 - integrate nose setup/teardown with setupstate
so it doesn’t try to teardown if it did not setup</p></li>
<li><p>issue 271 - don’t write junitxml on worker nodes</p></li>
<li><p>Issue 274 - don’t try to show full doctest example
when doctest does not know the example location</p></li>
<li><p>issue 280 - disable assertion rewriting on buggy CPython 2.6.0</p></li>
<li><p>inject “getfixture()” helper to retrieve fixtures from doctests,
thanks Andreas Zeidler</p></li>
<li><p>issue 259 - when assertion rewriting, be consistent with the default
source encoding of ASCII on Python 2</p></li>
<li><p>issue 251 - report a skip instead of ignoring classes with init</p></li>
<li><p>issue250 unicode/str mixes in parametrization names and values now works</p></li>
<li><p>issue257, assertion-triggered compilation of source ending in a
comment line doesn’t blow up in python2.5 (fixed through py&gt;=1.4.13.dev6)</p></li>
<li><p>fix –genscript option to generate standalone scripts that also
work with python3.3 (importer ordering)</p></li>
<li><p>issue171 - in assertion rewriting, show the repr of some
global variables</p></li>
<li><p>fix option help for “-k”</p></li>
<li><p>move long description of distribution into README.rst</p></li>
<li><p>improve docstring for metafunc.parametrize()</p></li>
<li><p>fix bug where using capsys with pytest.set_trace() in a test
function would break when looking at capsys.readouterr()</p></li>
<li><p>allow to specify prefixes starting with “_” when
customizing python_functions test discovery. (thanks Graham Horler)</p></li>
<li><p>improve PYTEST_DEBUG tracing output by putting
extra data on a new lines with additional indent</p></li>
<li><p>ensure OutcomeExceptions like skip/fail have initialized exception attributes</p></li>
<li><p>issue 260 - don’t use nose special setup on plain unittest cases</p></li>
<li><p>fix issue134 - print the collect errors that prevent running specified test items</p></li>
<li><p>fix issue266 - accept unicode in MarkEvaluator expressions</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.3.4"></span><div class="section" id="pytest-2-3-4-stabilization-more-flexible-selection-via-k-expr">
<h4>pytest-2.3.4: stabilization, more flexible selection via “-k expr”<a class="headerlink" href="#pytest-2-3-4-stabilization-more-flexible-selection-via-k-expr" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3.4 is a small stabilization release of the py.test tool
which offers uebersimple assertions, scalable fixture mechanisms
and deep customization for testing with Python.  This release
comes with the following fixes and features:</p>
<ul class="simple">
<li><p>make “-k” option accept an expressions the same as with “-m” so that one
can write: -k “name1 or name2” etc.  This is a slight usage incompatibility
if you used special syntax like “TestClass.test_method” which you now
need to write as -k “TestClass and test_method” to match a certain
method in a certain test class.</p></li>
<li><p>allow to dynamically define markers via
item.keywords[…]=assignment integrating with “-m” option</p></li>
<li><p>yielded test functions will now have autouse-fixtures active but
cannot accept fixtures as funcargs - it’s anyway recommended to
rather use the post-2.0 parametrize features instead of yield, see:
<a class="reference external" href="http://pytest.org/en/stable/example/how-to/parametrize.html">http://pytest.org/en/stable/example/how-to/parametrize.html</a></p></li>
<li><p>fix autouse-issue where autouse-fixtures would not be discovered
if defined in an a/conftest.py file and tests in a/tests/test_some.py</p></li>
<li><p>fix issue226 - LIFO ordering for fixture teardowns</p></li>
<li><p>fix issue224 - invocations with &gt;256 char arguments now work</p></li>
<li><p>fix issue91 - add/discuss package/directory level setups in example</p></li>
<li><p>fixes related to autouse discovery and calling</p></li>
</ul>
<p>Thanks in particular to Thomas Waldmann for spotting and reporting issues.</p>
<p>See</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>for general information.  To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>best,
holger krekel</p>
</div>
<span id="document-announce/release-2.3.3"></span><div class="section" id="pytest-2-3-3-integration-fixes-py24-support-shown-in-traceback">
<h4>pytest-2.3.3: integration fixes, py24 support, <code class="docutils literal notranslate"><span class="pre">*/**</span></code> shown in traceback<a class="headerlink" href="#pytest-2-3-3-integration-fixes-py24-support-shown-in-traceback" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3.3 is another stabilization release of the py.test tool
which offers uebersimple assertions, scalable fixture mechanisms
and deep customization for testing with Python.  Particularly,
this release provides:</p>
<ul class="simple">
<li><p>integration fixes and improvements related to flask, numpy, nose,
unittest, mock</p></li>
<li><p>makes pytest work on py24 again (yes, people sometimes still need to use it)</p></li>
<li><p>show <code class="docutils literal notranslate"><span class="pre">*,**</span></code> args in pytest tracebacks</p></li>
</ul>
<p>Thanks to Manuel Jacob, Thomas Waldmann, Ronny Pfannschmidt, Pavel Repin
and Andreas Taumoefolau for providing patches and all for the issues.</p>
<p>See</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>for general information.  To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-3-2-and-2-3-3">
<h5>Changes between 2.3.2 and 2.3.3<a class="headerlink" href="#changes-between-2-3-2-and-2-3-3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue214 - parse modules that contain special objects like e. g.
flask’s request object which blows up on getattr access if no request
is active. thanks Thomas Waldmann.</p></li>
<li><p>fix issue213 - allow to parametrize with values like numpy arrays that
do not support an __eq__ operator</p></li>
<li><p>fix issue215 - split test_python.org into multiple files</p></li>
<li><p>fix issue148 - &#64;unittest.skip on classes is now recognized and avoids
calling setUpClass/tearDownClass, thanks Pavel Repin</p></li>
<li><p>fix issue209 - reintroduce python2.4 support by depending on newer
pylib which re-introduced statement-finding for pre-AST interpreters</p></li>
<li><p>nose support: only call setup if it’s a callable, thanks Andrew
Taumoefolau</p></li>
<li><p>fix issue219 - add py2.4-3.3 classifiers to TROVE list</p></li>
<li><p>in tracebacks <em>,*</em> arg values are now shown next to normal arguments
(thanks Manuel Jacob)</p></li>
<li><p>fix issue217 - support mock.patch with pytest’s fixtures - note that
you need either mock-1.0.1 or the python3.3 builtin unittest.mock.</p></li>
<li><p>fix issue127 - improve documentation for pytest_addoption() and
add a <code class="docutils literal notranslate"><span class="pre">config.getoption(name)</span></code> helper function for consistency.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.3.2"></span><div class="section" id="pytest-2-3-2-some-fixes-and-more-traceback-printing-speed">
<h4>pytest-2.3.2: some fixes and more traceback-printing speed<a class="headerlink" href="#pytest-2-3-2-some-fixes-and-more-traceback-printing-speed" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3.2 is another stabilization release:</p>
<ul class="simple">
<li><p>issue 205: fixes a regression with conftest detection</p></li>
<li><p>issue 208/29: fixes traceback-printing speed in some bad cases</p></li>
<li><p>fix teardown-ordering for parametrized setups</p></li>
<li><p>fix unittest and trial compat behaviour with respect  to runTest() methods</p></li>
<li><p>issue 206 and others: some improvements to packaging</p></li>
<li><p>fix issue127 and others: improve some docs</p></li>
</ul>
<p>See</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>for general information.  To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-3-1-and-2-3-2">
<h5>Changes between 2.3.1 and 2.3.2<a class="headerlink" href="#changes-between-2-3-1-and-2-3-2" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue208 and fix issue29 use new py version to avoid long pauses
when printing tracebacks in long modules</p></li>
<li><p>fix issue205 - conftests in subdirs customizing
pytest_pycollect_makemodule and pytest_pycollect_makeitem
now work properly</p></li>
<li><p>fix teardown-ordering for parametrized setups</p></li>
<li><p>fix issue127 - better documentation for pytest_addoption
and related objects.</p></li>
<li><p>fix unittest behaviour: TestCase.runtest only called if there are
test methods defined</p></li>
<li><p>improve trial support: don’t collect its empty
unittest.TestCase.runTest() method</p></li>
<li><p>“python setup.py test” now works with pytest itself</p></li>
<li><p>fix/improve internal/packaging related bits:</p>
<ul>
<li><p>exception message check of test_nose.py now passes on python33 as well</p></li>
<li><p>issue206 - fix test_assertrewrite.py to work when a global
PYTHONDONTWRITEBYTECODE=1 is present</p></li>
<li><p>add tox.ini to pytest distribution so that ignore-dirs and others config
bits are properly distributed for maintainers who run pytest-own tests</p></li>
</ul>
</li>
</ul>
</div>
</div>
<span id="document-announce/release-2.3.1"></span><div class="section" id="pytest-2-3-1-fix-regression-with-factory-functions">
<h4>pytest-2.3.1: fix regression with factory functions<a class="headerlink" href="#pytest-2-3-1-fix-regression-with-factory-functions" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3.1 is a quick follow-up release:</p>
<ul class="simple">
<li><p>fix issue202 - regression with fixture functions/funcarg factories:
using “self” is now safe again and works as in 2.2.4.  Thanks
to Eduard Schettino for the quick bug report.</p></li>
<li><p>disable pexpect pytest self tests on Freebsd - thanks Koob for the
quick reporting</p></li>
<li><p>fix/improve interactive docs with –markers</p></li>
</ul>
<p>See</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>for general information.  To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-3-0-and-2-3-1">
<h5>Changes between 2.3.0 and 2.3.1<a class="headerlink" href="#changes-between-2-3-0-and-2-3-1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue202 - fix regression: using “self” from fixture functions now
works as expected (it’s the same “self” instance that a test method
which uses the fixture sees)</p></li>
<li><p>skip pexpect using tests (test_pdb.py mostly) on freebsd* systems
due to pexpect not supporting it properly (hanging)</p></li>
<li><p>link to web pages from –markers output which provides help for
pytest.mark.* usage.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.3.0"></span><div class="section" id="pytest-2-3-improved-fixtures-better-unittest-integration">
<h4>pytest-2.3: improved fixtures / better unittest integration<a class="headerlink" href="#pytest-2-3-improved-fixtures-better-unittest-integration" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.3 comes with many major improvements for fixture/funcarg management
and parametrized testing in Python.  It is now easier, more efficient and
more predictable to re-run the same tests with different fixture
instances.  Also, you can directly declare the caching “scope” of
fixtures so that dependent tests throughout your whole test suite can
re-use database or other expensive fixture objects with ease.  Lastly,
it’s possible for fixture functions (formerly known as funcarg
factories) to use other fixtures, allowing for a completely modular and
re-usable fixture design.</p>
<p>For detailed info and tutorial-style examples, see:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/en/stable/explanation/fixtures.html">http://pytest.org/en/stable/explanation/fixtures.html</a></p>
</div></blockquote>
<p>Moreover, there is now support for using pytest fixtures/funcargs with
unittest-style suites, see here for examples:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/en/stable/how-to/unittest.html">http://pytest.org/en/stable/how-to/unittest.html</a></p>
</div></blockquote>
<p>Besides, more unittest-test suites are now expected to “simply work”
with pytest.</p>
<p>All changes are backward compatible and you should be able to continue
to run your test suites and 3rd party plugins that worked with
pytest-2.2.4.</p>
<p>If you are interested in the precise reasoning (including examples) of the
pytest-2.3 fixture evolution, please consult
<a class="reference external" href="http://pytest.org/en/stable/funcarg_compare.html">http://pytest.org/en/stable/funcarg_compare.html</a></p>
<p>For general info on installation and getting started:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/en/stable/getting-started.html">http://pytest.org/en/stable/getting-started.html</a></p>
</div></blockquote>
<p>Docs and PDF access as usual at:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org">http://pytest.org</a></p>
</div></blockquote>
<p>and more details for those already in the knowing of pytest can be found
in the CHANGELOG below.</p>
<p>Particular thanks for this release go to Floris Bruynooghe, Alex Okrushko
Carl Meyer, Ronny Pfannschmidt, Benjamin Peterson and Alex Gaynor for helping
to get the new features right and well integrated.  Ronny and Floris
also helped to fix a number of bugs and yet more people helped by
providing bug reports.</p>
<p>have fun,
holger krekel</p>
<div class="section" id="changes-between-2-2-4-and-2-3-0">
<h5>Changes between 2.2.4 and 2.3.0<a class="headerlink" href="#changes-between-2-2-4-and-2-3-0" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue202 - better automatic names for parametrized test functions</p></li>
<li><p>fix issue139 - introduce &#64;pytest.fixture which allows direct scoping
and parametrization of funcarg factories.  Introduce new &#64;pytest.setup
marker to allow the writing of setup functions which accept funcargs.</p></li>
<li><p>fix issue198 - conftest fixtures were not found on windows32 in some
circumstances with nested directory structures due to path manipulation issues</p></li>
<li><p>fix issue193 skip test functions with were parametrized with empty
parameter sets</p></li>
<li><p>fix python3.3 compat, mostly reporting bits that previously depended
on dict ordering</p></li>
<li><p>introduce re-ordering of tests by resource and parametrization setup
which takes precedence to the usual file-ordering</p></li>
<li><p>fix issue185 monkeypatching time.time does not cause pytest to fail</p></li>
<li><p>fix issue172 duplicate call of pytest.setup-decoratored setup_module
functions</p></li>
<li><p>fix junitxml=path construction so that if tests change the
current working directory and the path is a relative path
it is constructed correctly from the original current working dir.</p></li>
<li><p>fix “python setup.py test” example to cause a proper “errno” return</p></li>
<li><p>fix issue165 - fix broken doc links and mention stackoverflow for FAQ</p></li>
<li><p>catch unicode-issues when writing failure representations
to terminal to prevent the whole session from crashing</p></li>
<li><p>fix xfail/skip confusion: a skip-mark or an imperative pytest.skip
will now take precedence before xfail-markers because we
can’t determine xfail/xpass status in case of a skip. see also:
<a class="reference external" href="http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get">http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get</a></p></li>
<li><p>always report installed 3rd party plugins in the header of a test run</p></li>
<li><p>fix issue160: a failing setup of an xfail-marked tests should
be reported as xfail (not xpass)</p></li>
<li><p>fix issue128: show captured output when capsys/capfd are used</p></li>
<li><p>fix issue179: properly show the dependency chain of factories</p></li>
<li><p>pluginmanager.register(…) now raises ValueError if the
plugin has been already registered or the name is taken</p></li>
<li><p>fix issue159: improve <a class="reference external" href="https://docs.pytest.org/en/6.0.1/faq.html">https://docs.pytest.org/en/6.0.1/faq.html</a>
especially with respect to the “magic” history, also mention
pytest-django, trial and unittest integration.</p></li>
<li><p>make request.keywords and node.keywords writable.  All descendant
collection nodes will see keyword values.  Keywords are dictionaries
containing markers and other info.</p></li>
<li><p>fix issue 178: xml binary escapes are now wrapped in py.xml.raw</p></li>
<li><p>fix issue 176: correctly catch the builtin AssertionError
even when we replaced AssertionError with a subclass on the
python level</p></li>
<li><p>factory discovery no longer fails with magic global callables
that provide no sane __code__ object (mock.call for example)</p></li>
<li><p>fix issue 182: testdir.inprocess_run now considers passed plugins</p></li>
<li><dl class="simple">
<dt>fix issue 188: ensure sys.exc_info is clear on python2</dt><dd><p>before calling into a test</p>
</dd>
</dl>
</li>
<li><p>fix issue 191: add unittest TestCase runTest method support</p></li>
<li><p>fix issue 156: monkeypatch correctly handles class level descriptors</p></li>
<li><p>reporting refinements:</p>
<ul>
<li><p>pytest_report_header now receives a “startdir” so that
you can use startdir.bestrelpath(yourpath) to show
nice relative path</p></li>
<li><p>allow plugins to implement both pytest_report_header and
pytest_sessionstart (sessionstart is invoked first).</p></li>
<li><p>don’t show deselected reason line if there is none</p></li>
<li><p>py.test -vv will show all of assert comparisons instead of truncating</p></li>
</ul>
</li>
</ul>
</div>
</div>
<span id="document-announce/release-2.2.4"></span><div class="section" id="pytest-2-2-4-bug-fixes-better-junitxml-unittest-python3-compat">
<h4>pytest-2.2.4: bug fixes, better junitxml/unittest/python3 compat<a class="headerlink" href="#pytest-2-2-4-bug-fixes-better-junitxml-unittest-python3-compat" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.2.4 is a minor backward-compatible release of the versatile
py.test testing tool.   It contains bug fixes and a few refinements
to junitxml reporting, better unittest- and python3 compatibility.</p>
<p>For general information see here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>Special thanks for helping on this release to Ronny Pfannschmidt
and Benjamin Peterson and the contributors of issues.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-2-3-and-2-2-4">
<h5>Changes between 2.2.3 and 2.2.4<a class="headerlink" href="#changes-between-2-2-3-and-2-2-4" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix error message for rewritten assertions involving the % operator</p></li>
<li><p>fix issue 126: correctly match all invalid xml characters for junitxml
binary escape</p></li>
<li><p>fix issue with unittest: now &#64;unittest.expectedFailure markers should
be processed correctly (you can also use &#64;pytest.mark markers)</p></li>
<li><p>document integration with the extended distribute/setuptools test commands</p></li>
<li><p>fix issue 140: properly get the real functions
of bound classmethods for setup/teardown_class</p></li>
<li><p>fix issue #141: switch from the deceased paste.pocoo.org to bpaste.net</p></li>
<li><p>fix issue #143: call unconfigure/sessionfinish always when
configure/sessionstart where called</p></li>
<li><p>fix issue #144: better mangle test ids to junitxml classnames</p></li>
<li><p>upgrade distribute_setup.py to 0.6.27</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.2.2"></span><div class="section" id="pytest-2-2-2-bug-fixes">
<h4>pytest-2.2.2: bug fixes<a class="headerlink" href="#pytest-2-2-2-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.2.2 (updated to 2.2.3 to fix packaging issues) is a minor
backward-compatible release of the versatile py.test testing tool.   It
contains bug fixes and a few refinements particularly to reporting with
“–collectonly”, see below for betails.</p>
<p>For general information see here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>Special thanks for helping on this release to Ronny Pfannschmidt
and Ralf Schmitt and the contributors of issues.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-2-1-and-2-2-2">
<h5>Changes between 2.2.1 and 2.2.2<a class="headerlink" href="#changes-between-2-2-1-and-2-2-2" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue101: wrong args to unittest.TestCase test function now
produce better output</p></li>
<li><p>fix issue102: report more useful errors and hints for when a
test directory was renamed and some pyc/__pycache__ remain</p></li>
<li><p>fix issue106: allow parametrize to be applied multiple times
e.g. from module, class and at function level.</p></li>
<li><p>fix issue107: actually perform session scope finalization</p></li>
<li><p>don’t check in parametrize if indirect parameters are funcarg names</p></li>
<li><p>add chdir method to monkeypatch funcarg</p></li>
<li><p>fix crash resulting from calling monkeypatch undo a second time</p></li>
<li><p>fix issue115: make –collectonly robust against early failure
(missing files/directories)</p></li>
<li><p>“-qq –collectonly” now shows only files and the number of tests in them</p></li>
<li><p>“-q –collectonly” now shows test ids</p></li>
<li><p>allow adding of attributes to test reports such that it also works
with distributed testing (no upgrade of pytest-xdist needed)</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.2.1"></span><div class="section" id="pytest-2-2-1-bug-fixes-perfect-teardowns">
<h4>pytest-2.2.1: bug fixes, perfect teardowns<a class="headerlink" href="#pytest-2-2-1-bug-fixes-perfect-teardowns" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.2.1 is a minor backward-compatible release of the py.test
testing tool.   It contains bug fixes and little improvements, including
documentation fixes.  If you are using the distributed testing
pluginmake sure to upgrade it to pytest-xdist-1.8.</p>
<p>For general information see here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>To install or upgrade pytest:</p>
<blockquote>
<div><p>pip install -U pytest # or
easy_install -U pytest</p>
</div></blockquote>
<p>Special thanks for helping on this release to Ronny Pfannschmidt, Jurko
Gospodnetic and Ralf Schmitt.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-2-0-and-2-2-1">
<h5>Changes between 2.2.0 and 2.2.1<a class="headerlink" href="#changes-between-2-2-0-and-2-2-1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue99 (in pytest and py) internallerrors with resultlog now
produce better output - fixed by normalizing pytest_internalerror
input arguments.</p></li>
<li><p>fix issue97 / traceback issues (in pytest and py) improve traceback output
in conjunction with jinja2 and cython which hack tracebacks</p></li>
<li><p>fix issue93 (in pytest and pytest-xdist) avoid “delayed teardowns”:
the final test in a test node will now run its teardown directly
instead of waiting for the end of the session. Thanks Dave Hunt for
the good reporting and feedback.  The pytest_runtest_protocol as well
as the pytest_runtest_teardown hooks now have “nextitem” available
which will be None indicating the end of the test run.</p></li>
<li><p>fix collection crash due to unknown-source collected items, thanks
to Ralf Schmitt (fixed by depending on a more recent pylib)</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.2.0"></span><div class="section" id="py-test-2-2-0-test-marking-parametrization-and-duration-profiling">
<h4>py.test 2.2.0: test marking++, parametrization++ and duration profiling<a class="headerlink" href="#py-test-2-2-0-test-marking-parametrization-and-duration-profiling" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.2.0 is a test-suite compatible release of the popular
py.test testing tool.  Plugins might need upgrades. It comes
with these improvements:</p>
<ul class="simple">
<li><p>easier and more powerful parametrization of tests:</p>
<ul>
<li><p>new &#64;pytest.mark.parametrize decorator to run tests with different arguments</p></li>
<li><p>new metafunc.parametrize() API for parametrizing arguments independently</p></li>
<li><p>see examples at <a class="reference external" href="http://pytest.org/en/stable/example/how-to/parametrize.html">http://pytest.org/en/stable/example/how-to/parametrize.html</a></p></li>
<li><p>NOTE that parametrize() related APIs are still a bit experimental
and might change in future releases.</p></li>
</ul>
</li>
<li><p>improved handling of test markers and refined marking mechanism:</p>
<ul>
<li><p>“-m markexpr” option for selecting tests according to their mark</p></li>
<li><p>a new “markers” ini-variable for registering test markers for your project</p></li>
<li><p>the new “–strict” bails out with an error if using unregistered markers.</p></li>
<li><p>see examples at <a class="reference external" href="http://pytest.org/en/stable/example/markers.html">http://pytest.org/en/stable/example/markers.html</a></p></li>
</ul>
</li>
<li><p>duration profiling: new “–duration=N” option showing the N slowest test
execution or setup/teardown calls. This is most useful if you want to
find out where your slowest test code is.</p></li>
<li><p>also 2.2.0 performs more eager calling of teardown/finalizers functions
resulting in better and more accurate reporting when they fail</p></li>
</ul>
<p>Besides there is the usual set of bug fixes along with a cleanup of
pytest’s own test suite allowing it to run on a wider range of environments.</p>
<p>For general information, see extensive docs with examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>If you want to install or upgrade pytest you might just type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to Ronny Pfannschmidt, David Burns, Jeff Donner, Daniel Nouri, Alfredo Deza and all who gave feedback or sent bug reports.</p>
<p>best,
holger krekel</p>
<div class="section" id="notes-on-incompatibility">
<h5>notes on incompatibility<a class="headerlink" href="#notes-on-incompatibility" title="Permalink to this headline">¶</a></h5>
<p>While test suites should work unchanged you might need to upgrade plugins:</p>
<ul class="simple">
<li><p>You need a new version of the pytest-xdist plugin (1.7) for distributing
test runs.</p></li>
<li><p>Other plugins might need an upgrade if they implement
the <code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport</span></code> hook which now is called unconditionally
for the setup/teardown fixture phases of a test. You may choose to
ignore setup/teardown failures by inserting “if rep.when != ‘call’: return”
or something similar. Note that most code probably “just” works because
the hook was already called for failing setup/teardown phases of a test
so a plugin should have been ready to grok such reports already.</p></li>
</ul>
</div>
<div class="section" id="changes-between-2-1-3-and-2-2-0">
<h5>Changes between 2.1.3 and 2.2.0<a class="headerlink" href="#changes-between-2-1-3-and-2-2-0" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue90: introduce eager tearing down of test items so that
teardown function are called earlier.</p></li>
<li><p>add an all-powerful metafunc.parametrize function which allows to
parametrize test function arguments in multiple steps and therefore
from independent plugins and places.</p></li>
<li><p>add a &#64;pytest.mark.parametrize helper which allows to easily
call a test function with different argument values.</p></li>
<li><p>Add examples to the “parametrize” example page, including a quick port
of Test scenarios and the new parametrize function and decorator.</p></li>
<li><p>introduce registration for “pytest.mark.*” helpers via ini-files
or through plugin hooks.  Also introduce a “–strict” option which
will treat unregistered markers as errors
allowing to avoid typos and maintain a well described set of markers
for your test suite.  See examples at <a class="reference external" href="http://pytest.org/en/stable/how-to/mark.html">http://pytest.org/en/stable/how-to/mark.html</a>
and its links.</p></li>
<li><p>issue50: introduce “-m marker” option to select tests based on markers
(this is a stricter and more predictable version of “-k” in that “-m”
only matches complete markers and has more obvious rules for and/or
semantics.</p></li>
<li><p>new feature to help optimizing the speed of your tests:
–durations=N option for displaying N slowest test calls
and setup/teardown methods.</p></li>
<li><p>fix issue87: –pastebin now works with python3</p></li>
<li><p>fix issue89: –pdb with unexpected exceptions in doctest work more sensibly</p></li>
<li><p>fix and cleanup pytest’s own test suite to not leak FDs</p></li>
<li><p>fix issue83: link to generated funcarg list</p></li>
<li><p>fix issue74: pyarg module names are now checked against imp.find_module false positives</p></li>
<li><p>fix compatibility with twisted/trial-11.1.0 use cases</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.1.3"></span><div class="section" id="py-test-2-1-3-just-some-more-fixes">
<h4>py.test 2.1.3: just some more fixes<a class="headerlink" href="#py-test-2-1-3-just-some-more-fixes" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.1.3 is a minor backward compatible maintenance release of the
popular py.test testing tool.  It is commonly used for unit, functional-
and integration testing.  See extensive docs with examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>The release contains another fix to the perfected assertions introduced
with the 2.1 series as well as the new possibility to customize reporting
for assertion expressions on a per-directory level.</p>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Thanks to the bug reporters and to Ronny Pfannschmidt, Benjamin Peterson
and Floris Bruynooghe who implemented the fixes.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-1-2-and-2-1-3">
<h5>Changes between 2.1.2 and 2.1.3<a class="headerlink" href="#changes-between-2-1-2-and-2-1-3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue79: assertion rewriting failed on some comparisons in boolops,</p></li>
<li><p>correctly handle zero length arguments (a la pytest ‘’)</p></li>
<li><p>fix issue67 / junitxml now contains correct test durations</p></li>
<li><p>fix issue75 / skipping test failure on jython</p></li>
<li><p>fix issue77 / Allow assertrepr_compare hook to apply to a subset of tests</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.1.2"></span><div class="section" id="py-test-2-1-2-bug-fixes-and-fixes-for-jython">
<h4>py.test 2.1.2: bug fixes and fixes for jython<a class="headerlink" href="#py-test-2-1-2-bug-fixes-and-fixes-for-jython" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.1.2 is a minor backward compatible maintenance release of the
popular py.test testing tool.  pytest is commonly used for unit,
functional- and integration testing.  See extensive docs with examples
here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>Most bug fixes address remaining issues with the perfected assertions
introduced in the 2.1 series - many thanks to the bug reporters and to Benjamin
Peterson for helping to fix them.  pytest should also work better with
Jython-2.5.1 (and Jython trunk).</p>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>best,
holger krekel / <a class="reference external" href="https://merlinux.eu/">https://merlinux.eu/</a></p>
<div class="section" id="changes-between-2-1-1-and-2-1-2">
<h5>Changes between 2.1.1 and 2.1.2<a class="headerlink" href="#changes-between-2-1-1-and-2-1-2" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix assertion rewriting on files with windows newlines on some Python versions</p></li>
<li><p>refine test discovery by package/module name (–pyargs), thanks Florian Mayer</p></li>
<li><p>fix issue69 / assertion rewriting fixed on some boolean operations</p></li>
<li><p>fix issue68 / packages now work with assertion rewriting</p></li>
<li><p>fix issue66: use different assertion rewriting caches when the -O option is passed</p></li>
<li><p>don’t try assertion rewriting on Jython, use reinterp</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.1.1"></span><div class="section" id="py-test-2-1-1-assertion-fixes-and-improved-junitxml-output">
<h4>py.test 2.1.1: assertion fixes and improved junitxml output<a class="headerlink" href="#py-test-2-1-1-assertion-fixes-and-improved-junitxml-output" title="Permalink to this headline">¶</a></h4>
<p>pytest-2.1.1 is a backward compatible maintenance release of the
popular py.test testing tool.  See extensive docs with examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>Most bug fixes address remaining issues with the perfected assertions
introduced with 2.1.0 - many thanks to the bug reporters and to Benjamin
Peterson for helping to fix them.  Also, junitxml output now produces
system-out/err tags which lead to better displays of tracebacks with Jenkins.</p>
<p>Also a quick note to package maintainers and others interested: there now
is a “pytest” man page which can be generated with “make man” in doc/.</p>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>best,
holger krekel / <a class="reference external" href="https://merlinux.eu/">https://merlinux.eu/</a></p>
<div class="section" id="changes-between-2-1-0-and-2-1-1">
<h5>Changes between 2.1.0 and 2.1.1<a class="headerlink" href="#changes-between-2-1-0-and-2-1-1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue64 / pytest.set_trace now works within pytest_generate_tests hooks</p></li>
<li><p>fix issue60 / fix error conditions involving the creation of __pycache__</p></li>
<li><p>fix issue63 / assertion rewriting on inserts involving strings containing ‘%’</p></li>
<li><p>fix assertion rewriting on calls with a ** arg</p></li>
<li><p>don’t cache rewritten modules if bytecode generation is disabled</p></li>
<li><p>fix assertion rewriting in read-only directories</p></li>
<li><p>fix issue59: provide system-out/err tags for junitxml output</p></li>
<li><p>fix issue61: assertion rewriting on boolean operations with 3 or more operands</p></li>
<li><p>you can now build a man page with “cd doc ; make man”</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.1.0"></span><div class="section" id="py-test-2-1-0-perfected-assertions-and-bug-fixes">
<h4>py.test 2.1.0: perfected assertions and bug fixes<a class="headerlink" href="#py-test-2-1-0-perfected-assertions-and-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>Welcome to the release of pytest-2.1, a mature testing tool for Python,
supporting CPython 2.4-3.2, Jython and latest PyPy interpreters.  See
the improved extensive docs (now also as PDF!) with tested examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>The single biggest news about this release are <strong>perfected assertions</strong>
courtesy of Benjamin Peterson.  You can now safely use <code class="docutils literal notranslate"><span class="pre">assert</span></code>
statements in test modules without having to worry about side effects
or python optimization (“-OO”) options.  This is achieved by rewriting
assert statements in test modules upon import, using a PEP302 hook.
See <a class="reference external" href="https://docs.pytest.org/en/stable/how-to/assert.html">https://docs.pytest.org/en/stable/how-to/assert.html</a> for
detailed information.  The work has been partly sponsored by my company,
merlinux GmbH.</p>
<p>For further details on bug fixes and smaller enhancements see below.</p>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>best,
holger krekel / <a class="reference external" href="https://merlinux.eu/">https://merlinux.eu/</a></p>
<div class="section" id="changes-between-2-0-3-and-2-1-0">
<h5>Changes between 2.0.3 and 2.1.0<a class="headerlink" href="#changes-between-2-0-3-and-2-1-0" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue53 call nosestyle setup functions with correct ordering</p></li>
<li><p>fix issue58 and issue59: new assertion code fixes</p></li>
<li><p>merge Benjamin’s assertionrewrite branch: now assertions
for test modules on python 2.6 and above are done by rewriting
the AST and saving the pyc file before the test module is imported.
see doc/assert.txt for more info.</p></li>
<li><p>fix issue43: improve doctests with better traceback reporting on
unexpected exceptions</p></li>
<li><p>fix issue47: timing output in junitxml for test cases is now correct</p></li>
<li><p>fix issue48: typo in MarkInfo repr leading to exception</p></li>
<li><p>fix issue49: avoid confusing error when initialization partially fails</p></li>
<li><p>fix issue44: env/username expansion for junitxml file path</p></li>
<li><p>show releaselevel information in test runs for pypy</p></li>
<li><p>reworked doc pages for better navigation and PDF generation</p></li>
<li><p>report KeyboardInterrupt even if interrupted during session startup</p></li>
<li><p>fix issue 35 - provide PDF doc version and download link from index page</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.0.3"></span><div class="section" id="py-test-2-0-3-bug-fixes-and-speed-ups">
<h4>py.test 2.0.3: bug fixes and speed ups<a class="headerlink" href="#py-test-2-0-3-bug-fixes-and-speed-ups" title="Permalink to this headline">¶</a></h4>
<p>Welcome to pytest-2.0.3, a maintenance and bug fix release of pytest,
a mature testing tool for Python, supporting CPython 2.4-3.2, Jython
and latest PyPy interpreters.  See the extensive docs with tested examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>There also is a bugfix release 1.6 of pytest-xdist, the plugin
that enables seamless distributed and “looponfail” testing for Python.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-0-2-and-2-0-3">
<h5>Changes between 2.0.2 and 2.0.3<a class="headerlink" href="#changes-between-2-0-2-and-2-0-3" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue38: nicer tracebacks on calls to hooks, particularly early
configure/sessionstart ones</p></li>
<li><p>fix missing skip reason/meta information in junitxml files, reported
via <a class="reference external" href="http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html">http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html</a></p></li>
<li><p>fix issue34: avoid collection failure with “test” prefixed classes
deriving from object.</p></li>
<li><p>don’t require zlib (and other libs) for genscript plugin without
–genscript actually being used.</p></li>
<li><p>speed up skips (by not doing a full traceback representation
internally)</p></li>
<li><p>fix issue37: avoid invalid characters in junitxml’s output</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.0.2"></span><div class="section" id="py-test-2-0-2-bug-fixes-improved-xfail-skip-expressions-speed-ups">
<h4>py.test 2.0.2: bug fixes, improved xfail/skip expressions, speed ups<a class="headerlink" href="#py-test-2-0-2-bug-fixes-improved-xfail-skip-expressions-speed-ups" title="Permalink to this headline">¶</a></h4>
<p>Welcome to pytest-2.0.2, a maintenance and bug fix release of pytest,
a mature testing tool for Python, supporting CPython 2.4-3.2, Jython
and latest PyPy interpreters.  See the extensive docs with tested examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Many thanks to all issue reporters and people asking questions
or complaining, particularly Jurko for his insistence,
Laura, Victor and Brianna for helping with improving
and Ronny for his general advise.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-0-1-and-2-0-2">
<h5>Changes between 2.0.1 and 2.0.2<a class="headerlink" href="#changes-between-2-0-1-and-2-0-2" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>tackle issue32 - speed up test runs of very quick test functions
by reducing the relative overhead</p></li>
<li><p>fix issue30 - extended xfail/skipif handling and improved reporting.
If you have a syntax error in your skip/xfail
expressions you now get nice error reports.</p>
<p>Also you can now access module globals from xfail/skipif
expressions so that this for example works now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="s2">&quot;mymodule.__version__[0] == &quot;</span><span class="mi">1</span><span class="s2">&quot;)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This will not run the test function if the module’s version string
does not start with a “1”.  Note that specifying a string instead
of a boolean expressions allows py.test to report meaningful information
when summarizing a test run as to what conditions lead to skipping
(or xfail-ing) tests.</p>
</li>
<li><p>fix issue28 - setup_method and pytest_generate_tests work together
The setup_method fixture method now gets called also for
test function invocations generated from the pytest_generate_tests
hook.</p></li>
<li><p>fix issue27 - collectonly and keyword-selection (-k) now work together
Also, if you do “py.test –collectonly -q” you now get a flat list
of test ids that you can use to paste to the py.test commandline
in order to execute a particular test.</p></li>
<li><p>fix issue25 avoid reported problems with –pdb and python3.2/encodings output</p></li>
<li><p>fix issue23 - tmpdir argument now works on Python3.2 and WindowsXP
Starting with Python3.2 os.symlink may be supported. By requiring
a newer py lib version the py.path.local() implementation acknowledges
this.</p></li>
<li><p>fixed typos in the docs (thanks Victor Garcia, Brianna Laugher) and particular
thanks to Laura Creighton who also reviewed parts of the documentation.</p></li>
<li><p>fix slightly wrong output of verbose progress reporting for classes
(thanks Amaury)</p></li>
<li><p>more precise (avoiding of) deprecation warnings for node.Class|Function accesses</p></li>
<li><p>avoid std unittest assertion helper code in tracebacks (thanks Ronny)</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.0.1"></span><div class="section" id="py-test-2-0-1-bug-fixes">
<h4>py.test 2.0.1: bug fixes<a class="headerlink" href="#py-test-2-0-1-bug-fixes" title="Permalink to this headline">¶</a></h4>
<p>Welcome to pytest-2.0.1, a maintenance and bug fix release of pytest,
a mature testing tool for Python, supporting CPython 2.4-3.2, Jython
and latest PyPy interpreters.  See extensive docs with tested examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/">http://pytest.org/</a></p>
</div></blockquote>
<p>If you want to install or upgrade pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span> <span class="c1"># or</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Many thanks to all issue reporters and people asking questions or
complaining.  Particular thanks to Floris Bruynooghe and Ronny Pfannschmidt
for their great coding contributions and many others for feedback and help.</p>
<p>best,
holger krekel</p>
<div class="section" id="changes-between-2-0-0-and-2-0-1">
<h5>Changes between 2.0.0 and 2.0.1<a class="headerlink" href="#changes-between-2-0-0-and-2-0-1" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>refine and unify initial capturing so that it works nicely
even if the logging module is used on an early-loaded conftest.py
file or plugin.</p></li>
<li><p>fix issue12 - show plugin versions with “–version” and
“–traceconfig” and also document how to add extra information
to reporting test header</p></li>
<li><p>fix issue17 (import-* reporting issue on python3) by
requiring py&gt;1.4.0 (1.4.1 is going to include it)</p></li>
<li><p>fix issue10 (numpy arrays truth checking) by refining
assertion interpretation in py lib</p></li>
<li><p>fix issue15: make nose compatibility tests compatible
with python3 (now that nose-1.0 supports python3)</p></li>
<li><p>remove somewhat surprising “same-conftest” detection because
it ignores conftest.py when they appear in several subdirs.</p></li>
<li><p>improve assertions (“not in”), thanks Floris Bruynooghe</p></li>
<li><p>improve behaviour/warnings when running on top of “python -OO”
(assertions and docstrings are turned off, leading to potential
false positives)</p></li>
<li><p>introduce a pytest_cmdline_processargs(args) hook
to allow dynamic computation of command line arguments.
This fixes a regression because py.test prior to 2.0
allowed to set command line options from conftest.py
files which so far pytest-2.0 only allowed from ini-files now.</p></li>
<li><p>fix issue7: assert failures in doctest modules.
unexpected failures in doctests will not generally
show nicer, i.e. within the doctest failing context.</p></li>
<li><p>fix issue9: setup/teardown functions for an xfail-marked
test will report as xfail if they fail but report as normally
passing (not xpassing) if they succeed.  This only is true
for “direct” setup/teardown invocations because teardown_class/
teardown_module cannot closely relate to a single test.</p></li>
<li><p>fix issue14: no logging errors at process exit</p></li>
<li><p>refinements to “collecting” output on non-ttys</p></li>
<li><p>refine internal plugin registration and –traceconfig output</p></li>
<li><p>introduce a mechanism to prevent/unregister plugins from the
command line, see <a class="reference external" href="http://pytest.org/en/stable/how-to/plugins.html#cmdunregister">http://pytest.org/en/stable/how-to/plugins.html#cmdunregister</a></p></li>
<li><p>activate resultlog plugin by default</p></li>
<li><p>fix regression wrt yielded tests which due to the
collection-before-running semantics were not
setup as with pytest 1.3.4.  Note, however, that
the recommended and much cleaner way to do test
parametrization remains the “pytest_generate_tests”
mechanism, see the docs.</p></li>
</ul>
</div>
</div>
<span id="document-announce/release-2.0.0"></span><div class="section" id="py-test-2-0-0-asserts-unittest-reporting-config-docs">
<h4>py.test 2.0.0: asserts++, unittest++, reporting++, config++, docs++<a class="headerlink" href="#py-test-2-0-0-asserts-unittest-reporting-config-docs" title="Permalink to this headline">¶</a></h4>
<p>Welcome to pytest-2.0.0, a major new release of “py.test”, the rapid
easy Python testing tool.  There are many new features and enhancements,
see below for summary and detailed lists.  A lot of long-deprecated code
has been removed, resulting in a much smaller and cleaner
implementation.  See the new docs with examples here:</p>
<blockquote>
<div><p><a class="reference external" href="http://pytest.org/en/stable/index.html">http://pytest.org/en/stable/index.html</a></p>
</div></blockquote>
<p>A note on packaging: pytest used to part of the “py” distribution up
until version py-1.3.4 but this has changed now:  pytest-2.0.0 only
contains py.test related code and is expected to be backward-compatible
to existing test code. If you want to install pytest, just type one of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
<span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pytest</span>
</pre></div>
</div>
<p>Many thanks to all issue reporters and people asking questions or
complaining.  Particular thanks to Floris Bruynooghe and Ronny Pfannschmidt
for their great coding contributions and many others for feedback and help.</p>
<p>best,
holger krekel</p>
<div class="section" id="new-features">
<h5>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>new invocations through Python interpreter and from Python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span>      <span class="c1"># on all pythons &gt;= 2.5</span>
</pre></div>
</div>
<p>or from a python program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span> <span class="p">;</span> <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">arglist</span><span class="p">,</span> <span class="n">pluginlist</span><span class="p">)</span>
</pre></div>
</div>
<p>see <a class="reference external" href="http://pytest.org/en/stable/how-to/usage.html">http://pytest.org/en/stable/how-to/usage.html</a> for details.</p>
</li>
<li><p>new and better reporting information in assert expressions
if comparing lists, sequences or strings.</p>
<p>see <a class="reference external" href="http://pytest.org/en/stable/how-to/assert.html#newreport">http://pytest.org/en/stable/how-to/assert.html#newreport</a></p>
</li>
<li><p>new configuration through ini-files (setup.cfg or tox.ini recognized),
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pytest</span><span class="p">]</span>
<span class="n">norecursedirs</span> <span class="o">=</span> <span class="o">.</span><span class="n">hg</span> <span class="n">data</span><span class="o">*</span>  <span class="c1"># don&#39;t ever recurse in such dirs</span>
<span class="n">addopts</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span> <span class="o">--</span><span class="n">pyargs</span>      <span class="c1"># add these command line options by default</span>
</pre></div>
</div>
<p>see <a class="reference external" href="http://pytest.org/en/stable/reference/customize.html">http://pytest.org/en/stable/reference/customize.html</a></p>
</li>
<li><p>improved standard unittest support.  In general py.test should now
better be able to run custom unittest.TestCases like twisted trial
or Django based TestCases.  Also you can now run the tests of an
installed ‘unittest’ package with py.test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">test</span> <span class="o">--</span><span class="n">pyargs</span> <span class="n">unittest</span>
</pre></div>
</div>
</li>
<li><p>new “-q” option which decreases verbosity and prints a more
nose/unittest-style “dot” output.</p></li>
<li><p>many many more detailed improvements details</p></li>
</ul>
</div>
<div class="section" id="fixes">
<h5>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>fix issue126 - introduce py.test.set_trace() to trace execution via
PDB during the running of tests even if capturing is ongoing.</p></li>
<li><p>fix issue124 - make reporting more resilient against tests opening
files on filedescriptor 1 (stdout).</p></li>
<li><p>fix issue109 - sibling conftest.py files will not be loaded.
(and Directory collectors cannot be customized anymore from a Directory’s
conftest.py - this needs to happen at least one level up).</p></li>
<li><p>fix issue88 (finding custom test nodes from command line arg)</p></li>
<li><p>fix issue93 stdout/stderr is captured while importing conftest.py</p></li>
<li><p>fix bug: unittest collected functions now also can have “pytestmark”
applied at class/module level</p></li>
</ul>
</div>
<div class="section" id="important-notes">
<h5>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>The usual way in pre-2.0 times to use py.test in python code was
to import “py” and then e.g. use “py.test.raises” for the helper.
This remains valid and is not planned to be deprecated.  However,
in most examples and internal code you’ll find “import pytest”
and “pytest.raises” used as the recommended default way.</p></li>
<li><p>pytest now first performs collection of the complete test suite
before running any test. This changes for example the semantics of when
pytest_collectstart/pytest_collectreport are called.  Some plugins may
need upgrading.</p></li>
<li><p>The pytest package consists of a 400 LOC core.py and about 20 builtin plugins,
summing up to roughly 5000 LOCs, including docstrings. To be fair, it also
uses generic code from the “pylib”, and the new “py” package to help
with filesystem and introspection/code manipulation.</p></li>
</ul>
</div>
<div class="section" id="incompatible-removals">
<h5>(Incompatible) Removals<a class="headerlink" href="#incompatible-removals" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>py.test.config is now only available if you are in a test run.</p></li>
<li><p>the following (mostly already deprecated) functionality was removed:</p>
<ul class="simple">
<li><p>removed support for Module/Class/… collection node definitions
in conftest.py files.  They will cause nothing special.</p></li>
<li><p>removed support for calling the pre-1.0 collection API of “run()” and “join”</p></li>
<li><p>removed reading option values from conftest.py files or env variables.
This can now be done much much better and easier through the ini-file
mechanism and the “addopts” entry in particular.</p></li>
<li><p>removed the “disabled” attribute in test classes.  Use the skipping
and pytestmark mechanism to skip or xfail a test class.</p></li>
</ul>
</li>
<li><p>py.test.collect.Directory does not exist anymore and it
is not possible to provide an own “Directory” object.
If you have used this and don’t know what to do, get
in contact.  We’ll figure something out.</p>
<p>Note that pytest_collect_directory() is still called but
any return value will be ignored.  This allows to keep
old code working that performed for example “py.test.skip()”
in collect() to prevent recursion into directory trees
if a certain dependency or command line option is missing.</p>
</li>
</ul>
<p>see <a class="reference internal" href="contents.html#changelog"><span class="std std-ref">Changelog</span></a> for more detailed changes.</p>
</div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-changelog"></span><div class="section" id="changelog">
<span id="id1"></span><h3>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h3>
<p>Versions follow <a class="reference external" href="https://semver.org/">Semantic Versioning</a> (<code class="docutils literal notranslate"><span class="pre">&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;</span></code>).</p>
<p>Backward incompatible (breaking) changes will only be introduced in major versions
with advance notice in the <strong>Deprecations</strong> section of releases.</p>
<div class="section" id="pytest-7-1-3-2022-08-31">
<h4>pytest 7.1.3 (2022-08-31)<a class="headerlink" href="#pytest-7-1-3-2022-08-31" title="Permalink to this headline">¶</a></h4>
<div class="section" id="bug-fixes">
<h5>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/10060">#10060</a>: When running with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>, <code class="docutils literal notranslate"><span class="pre">TestCase.tearDown</span></code> is no longer called for tests when the <em>class</em> has been skipped via <code class="docutils literal notranslate"><span class="pre">unittest.skip</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/10190">#10190</a>: Invalid XML characters in setup or teardown error messages are now properly escaped for JUnit XML reports.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/10230">#10230</a>: Ignore <code class="docutils literal notranslate"><span class="pre">.py</span></code> files created by <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>-based editable builds introduced in <a class="reference external" href="https://pip.pypa.io/en/stable/news/#v21-3">pip 21.3</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3396">#3396</a>: Doctests now respect the <code class="docutils literal notranslate"><span class="pre">--import-mode</span></code> flag.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9514">#9514</a>: Type-annotate <code class="docutils literal notranslate"><span class="pre">FixtureRequest.param</span></code> as <code class="docutils literal notranslate"><span class="pre">Any</span></code> as a stop gap measure until <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8073">issue #8073</a> is fixed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9791">#9791</a>: Fixed a path handling code in <code class="docutils literal notranslate"><span class="pre">rewrite.py</span></code> that seems to work fine, but was incorrect and fails in some systems.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9917">#9917</a>: Fixed string representation for <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> when used to compare tuples.</p></li>
</ul>
</div>
<div class="section" id="improved-documentation">
<h5>Improved Documentation<a class="headerlink" href="#improved-documentation" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9937">#9937</a>: Explicit note that <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a> fixture is discouraged in favour of <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a>.</p></li>
</ul>
</div>
<div class="section" id="trivial-internal-changes">
<h5>Trivial/Internal Changes<a class="headerlink" href="#trivial-internal-changes" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/10114">#10114</a>: Replace <a class="reference external" href="https://github.com/untitaker/python-atomicwrites">atomicwrites</a> dependency on windows with <code class="docutils literal notranslate"><span class="pre">os.replace</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-1-2-2022-04-23">
<h4>pytest 7.1.2 (2022-04-23)<a class="headerlink" href="#pytest-7-1-2-2022-04-23" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id11">
<h5>Bug Fixes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9726">#9726</a>: An unnecessary <code class="docutils literal notranslate"><span class="pre">numpy</span></code> import inside <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> was removed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9820">#9820</a>: Fix comparison of  <code class="docutils literal notranslate"><span class="pre">dataclasses</span></code> with <code class="docutils literal notranslate"><span class="pre">InitVar</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9869">#9869</a>: Increase <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> for the <code class="docutils literal notranslate"><span class="pre">NODE_CTOR_FSPATH_ARG</span></code> deprecation to point to the
user’s code, not pytest.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9871">#9871</a>: Fix a bizarre (and fortunately rare) bug where the <code class="docutils literal notranslate"><span class="pre">temp_path</span></code> fixture could raise
an internal error while attempting to get the current user’s username.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-1-1-2022-03-17">
<h4>pytest 7.1.1 (2022-03-17)<a class="headerlink" href="#pytest-7-1-1-2022-03-17" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id16">
<h5>Bug Fixes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9767">#9767</a>: Fixed a regression in pytest 7.1.0 where some conftest.py files outside of the source tree (e.g. in the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory) were not picked up.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-1-0-2022-03-13">
<h4>pytest 7.1.0 (2022-03-13)<a class="headerlink" href="#pytest-7-1-0-2022-03-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="breaking-changes">
<h5>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8838">#8838</a>: As per our policy, the following features have been deprecated in the 6.X series and are now
removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest._fillfuncargs</span></code> function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook - use <code class="docutils literal notranslate"><span class="pre">pytest_warning_recorded</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">-foobar</span></code> syntax - use <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'not</span> <span class="pre">foobar'</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">foobar:</span></code> syntax.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.collect</span></code> module - import from <code class="docutils literal notranslate"><span class="pre">pytest</span></code> directly.</p></li>
</ul>
<p>For more information consult
<a class="reference external" href="https://docs.pytest.org/en/latest/deprecations.html">Deprecations and Removals</a> in the docs.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9437">#9437</a>: Dropped support for Python 3.6, which reached <a class="reference external" href="https://devguide.python.org/#status-of-python-branches">end-of-life</a> at 2021-12-23.</p></li>
</ul>
</div>
<div class="section" id="improvements">
<h5>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5192">#5192</a>: Fixed test output for some data types where <code class="docutils literal notranslate"><span class="pre">-v</span></code> would show less information.</p>
<p>Also, when showing diffs for sequences, <code class="docutils literal notranslate"><span class="pre">-q</span></code> would produce full diffs instead of the expected diff.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9362">#9362</a>: pytest now avoids specialized assert formatting when it is detected that the default <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> is overridden in <code class="docutils literal notranslate"><span class="pre">attrs</span></code> or <code class="docutils literal notranslate"><span class="pre">dataclasses</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9536">#9536</a>: When <code class="docutils literal notranslate"><span class="pre">-vv</span></code> is given on command line, show skipping and xfail reasons in full instead of truncating them to fit the terminal width.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9644">#9644</a>: More information about the location of resources that led Python to raise <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ResourceWarning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a> can now
be obtained by enabling <a class="reference external" href="https://docs.python.org/3/library/tracemalloc.html#module-tracemalloc" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracemalloc</span></code></a>.</p>
<p>See <a class="reference internal" href="contents.html#resource-warnings"><span class="std std-ref">Resource Warnings</span></a> for more information.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9678">#9678</a>: More types are now accepted in the <code class="docutils literal notranslate"><span class="pre">ids</span></code> argument to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>.
Previously only <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> were accepted;
now <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">complex</span></code>, <code class="docutils literal notranslate"><span class="pre">re.Pattern</span></code>, <code class="docutils literal notranslate"><span class="pre">Enum</span></code> and anything with a <code class="docutils literal notranslate"><span class="pre">__name__</span></code> are also accepted.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9692">#9692</a>: <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> now raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a> when given an unordered sequence (such as <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>).</p>
<p>Note that this implies that custom classes which only implement <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> and <code class="docutils literal notranslate"><span class="pre">__len__</span></code> are no longer supported as they don’t guarantee order.</p>
</li>
</ul>
</div>
<div class="section" id="id26">
<h5>Bug Fixes<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8242">#8242</a>: The deprecation of raising <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.SkipTest" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.SkipTest</span></code></a> to skip collection of
tests during the pytest collection phase is reverted - this is now a supported
feature again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9493">#9493</a>: Symbolic link components are no longer resolved in conftest paths.
This means that if a conftest appears twice in collection tree, using symlinks, it will be executed twice.
For example, given</p>
<blockquote>
<div><p>tests/real/conftest.py
tests/real/test_it.py
tests/link -&gt; tests/real</p>
</div></blockquote>
<p>running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">tests</span></code> now imports the conftest twice, once as <code class="docutils literal notranslate"><span class="pre">tests/real/conftest.py</span></code> and once as <code class="docutils literal notranslate"><span class="pre">tests/link/conftest.py</span></code>.
This is a fix to match a similar change made to test collection itself in pytest 6.0 (see <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/6523">pull request #6523</a> for details).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9626">#9626</a>: Fixed count of selected tests on terminal collection summary when there were errors or skipped modules.</p>
<p>If there were errors or skipped modules on collection, pytest would mistakenly subtract those from the selected count.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9645">#9645</a>: Fixed regression where <code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> used together with <span class="target" id="index-0"></span><a class="reference external" href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH" title="(in Python v3.10)"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> or <a class="reference internal" href="contents.html#confval-pythonpath"><code class="xref std std-confval docutils literal notranslate"><span class="pre">pythonpath</span></code></a> would cause import errors in test suites.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9708">#9708</a>: <a class="reference internal" href="contents.html#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a> now requests a <a class="reference internal" href="contents.html#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a> fixture instead of creating one internally. This solves some issues with tests that involve pytest environment variables.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9730">#9730</a>: Malformed <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files now produce a clearer error message.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-0-1-2022-02-11">
<h4>pytest 7.0.1 (2022-02-11)<a class="headerlink" href="#pytest-7-0-1-2022-02-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id33">
<h5>Bug Fixes<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9608">#9608</a>: Fix invalid importing of <code class="docutils literal notranslate"><span class="pre">importlib.readers</span></code> in Python 3.9.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9610">#9610</a>: Restore <code class="docutils literal notranslate"><span class="pre">UnitTestFunction.obj</span></code> to return unbound rather than bound method.
Fixes a crash during a failed teardown in unittest TestCases with non-default <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.
Regressed in pytest 7.0.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9636">#9636</a>: The <code class="docutils literal notranslate"><span class="pre">pythonpath</span></code> plugin was renamed to <code class="docutils literal notranslate"><span class="pre">python_path</span></code>. This avoids a conflict with the <code class="docutils literal notranslate"><span class="pre">pytest-pythonpath</span></code> plugin.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9642">#9642</a>: Fix running tests by id with <code class="docutils literal notranslate"><span class="pre">::</span></code> in the parametrize portion.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9643">#9643</a>: Delay issuing a <a class="reference internal" href="contents.html#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a> about diamond inheritance involving <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a> and
<a class="reference internal" href="contents.html#pytest.Collector" title="pytest.Collector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Collector</span></code></a> so it can be filtered using <a class="reference internal" href="contents.html#warnings"><span class="std std-ref">standard warning filters</span></a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-0-0-2022-02-03">
<h4>pytest 7.0.0 (2022-02-03)<a class="headerlink" href="#pytest-7-0-0-2022-02-03" title="Permalink to this headline">¶</a></h4>
<p>(<strong>Please see the full set of changes for this release also in the 7.0.0rc1 notes below</strong>)</p>
<div class="section" id="deprecations">
<h5>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9488">#9488</a>: If custom subclasses of nodes like <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> override the
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, they should take <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>. See
<a class="reference internal" href="contents.html#uncooperative-constructors-deprecated"><span class="std std-ref">Constructors of custom pytest.Node subclasses should take **kwargs</span></a> for details.</p>
<p>Note that a deprection warning is only emitted when there is a conflict in the
arguments pytest expected to pass. This deprecation was already part of pytest
7.0.0rc1 but wasn’t documented.</p>
</li>
</ul>
</div>
<div class="section" id="id40">
<h5>Bug Fixes<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9355">#9355</a>: Fixed error message prints function decorators when using assert in Python 3.8 and above.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9396">#9396</a>: Ensure <code class="xref py py-attr docutils literal notranslate"><span class="pre">pytest.Config.inifile</span></code> is available during the <a class="reference internal" href="contents.html#pytest.hookspec.pytest_cmdline_main" title="_pytest.hookspec.pytest_cmdline_main"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest_cmdline_main</span></code></a> hook (regression during <code class="docutils literal notranslate"><span class="pre">7.0.0rc1</span></code>).</p></li>
</ul>
</div>
<div class="section" id="id43">
<h5>Improved Documentation<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9404">#9404</a>: Added extra documentation on alternatives to common misuses of <code class="docutils literal notranslate"><span class="pre">pytest.warns(None)</span></code> ahead of its deprecation.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9505">#9505</a>: Clarify where the configuration files are located. To avoid confusions documentation mentions
that configuration file is located in the root of the repository.</p></li>
</ul>
</div>
<div class="section" id="id46">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9521">#9521</a>: Add test coverage to assertion rewrite path.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-7-0-0rc1-2021-12-06">
<h4>pytest 7.0.0rc1 (2021-12-06)<a class="headerlink" href="#pytest-7-0-0rc1-2021-12-06" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id48">
<h5>Breaking Changes<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7259">#7259</a>: The <a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Node.reportinfo()</span></a> function first return value type has been expanded from <code class="docutils literal notranslate"><span class="pre">py.path.local</span> <span class="pre">|</span> <span class="pre">str</span></code> to <code class="docutils literal notranslate"><span class="pre">os.PathLike[str]</span> <span class="pre">|</span> <span class="pre">str</span></code>.</p>
<p>Most plugins which refer to <code class="docutils literal notranslate"><span class="pre">reportinfo()</span></code> only define it as part of a custom <a class="reference internal" href="contents.html#pytest.Item" title="pytest.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code></a> implementation.
Since <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> is a <code class="docutils literal notranslate"><span class="pre">os.PathLike[str]</span></code>, these plugins are unaffacted.</p>
<p>Plugins and users which call <code class="docutils literal notranslate"><span class="pre">reportinfo()</span></code>, use the first return value and interact with it as a <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>, would need to adjust by calling <code class="docutils literal notranslate"><span class="pre">py.path.local(fspath)</span></code>.
Although preferably, avoid the legacy <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> and use <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>, or use <code class="docutils literal notranslate"><span class="pre">item.location</span></code> or <code class="docutils literal notranslate"><span class="pre">item.path</span></code>, instead.</p>
<p>Note: pytest was not able to provide a deprecation period for this change.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8246">#8246</a>: <code class="docutils literal notranslate"><span class="pre">--version</span></code> now writes version information to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> rather than <code class="docutils literal notranslate"><span class="pre">stderr</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8733">#8733</a>: Drop a workaround for <a class="reference external" href="https://github.com/pyreadline/pyreadline">pyreadline</a> that made it work with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>.</p>
<p>The workaround was introduced in <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1281">#1281</a> in 2015, however since then
<a class="reference external" href="https://github.com/pyreadline/pyreadline/issues/58">pyreadline seems to have gone unmaintained</a>, is <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8847">generating
warnings</a>, and will stop working on Python 3.10.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9061">#9061</a>: Using <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> in a boolean context now raises an error hinting at the proper usage.</p>
<p>It is apparently common for users to mistakenly use <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">pytest</span><span class="o">.</span><span class="n">approx</span><span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
</pre></div>
</div>
<p>While the correct usage is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">pytest</span><span class="o">.</span><span class="n">approx</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
</pre></div>
</div>
<p>The new error message helps catch those mistakes.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9277">#9277</a>: The <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> collector type has been removed.
Importing <code class="docutils literal notranslate"><span class="pre">pytest.Instance</span></code> or <code class="docutils literal notranslate"><span class="pre">_pytest.python.Instance</span></code> returns a dummy type and emits a deprecation warning.
See <a class="reference internal" href="contents.html#instance-collector-deprecation"><span class="std std-ref">The pytest.Instance collector</span></a> for details.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9308">#9308</a>: <strong>PytestRemovedIn7Warning deprecation warnings are now errors by default.</strong></p>
<p>Following our plan to remove deprecated features with as little disruption as
possible, all warnings of type <code class="docutils literal notranslate"><span class="pre">PytestRemovedIn7Warning</span></code> now generate errors
instead of warning messages by default.</p>
<p><strong>The affected features will be effectively removed in pytest 7.1</strong>, so please consult the
<a class="reference internal" href="contents.html#deprecations"><span class="std std-ref">Deprecations and Removals</span></a> section in the docs for directions on how to update existing code.</p>
<p>In the pytest <code class="docutils literal notranslate"><span class="pre">7.0.X</span></code> series, it is possible to change the errors back into warnings as a
stopgap measure by adding this to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::pytest.PytestRemovedIn7Warning</span><span class="w"></span>
</pre></div>
</div>
<p>But this will stop working when pytest <code class="docutils literal notranslate"><span class="pre">7.1</span></code> is released.</p>
<p><strong>If you have concerns</strong> about the removal of a specific feature, please add a
comment to <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9308">issue #9308</a>.</p>
</li>
</ul>
</div>
<div class="section" id="id55">
<h5>Deprecations<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7259">#7259</a>: <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> arguments for hooks have been deprecated. See <a class="reference internal" href="contents.html#legacy-path-hooks-deprecated"><span class="std std-ref">the deprecation note</span></a> for full details.</p>
<p><code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> arguments to Node constructors have been deprecated. See <a class="reference internal" href="contents.html#node-ctor-fspath-deprecation"><span class="std std-ref">the deprecation note</span></a> for full details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> arguments and attributes (the
new attribute being <code class="docutils literal notranslate"><span class="pre">path</span></code>) is <strong>the opposite</strong> of the situation for hooks
(the old argument being <code class="docutils literal notranslate"><span class="pre">path</span></code>).</p>
<p>This is an unfortunate artifact due to historical reasons, which should be
resolved in future versions as we slowly get rid of the <a class="reference external" href="https://pypi.org/project/py/">py</a>
dependency (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9283">issue #9283</a> for a longer discussion).</p>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7469">#7469</a>: Directly constructing the following classes is now deprecated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.Mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.MarkDecorator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.mark.structures.MarkGenerator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.python.Metafunc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.runner.CallInfo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest._code.ExceptionInfo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.config.argparsing.Parser</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.config.argparsing.OptionGroup</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.pytester.HookRecorder</span></code></p></li>
</ul>
<p>These constructors have always been considered private, but now issue a deprecation warning, which may become a hard error in pytest 8.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8242">#8242</a>: Raising <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.SkipTest" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.SkipTest</span></code></a> to skip collection of tests during the
pytest collection phase is deprecated. Use <a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a> instead.</p>
<p>Note: This deprecation only relates to using <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.SkipTest" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.SkipTest</span></code></a> during test
collection. You are probably not doing that. Ordinary usage of
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.SkipTest" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.SkipTest</span></code></a> / <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.skipTest" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.skipTest()</span></code></a> /
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.skip" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.skip()</span></code></a> in unittest test cases is fully supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This deprecation has been reverted in pytest 7.1.0.</p>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8315">#8315</a>: Several behaviors of <a class="reference internal" href="contents.html#pytest.Parser.addoption" title="pytest.Parser.addoption"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Parser.addoption</span></code></a> are now
scheduled for removal in pytest 8 (deprecated since pytest 2.4.0):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parser.addoption(...,</span> <span class="pre">help=&quot;..</span> <span class="pre">%default</span> <span class="pre">..&quot;)</span></code> - use <code class="docutils literal notranslate"><span class="pre">%(default)s</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parser.addoption(...,</span> <span class="pre">type=&quot;int/string/float/complex&quot;)</span></code> - use <code class="docutils literal notranslate"><span class="pre">type=int</span></code> etc. instead.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8447">#8447</a>: Defining a custom pytest node type which is both an <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Item</span></code> and a <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Collector</span></code> (e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.File</span></code>) now issues a warning.
It was never sanely supported and triggers hard to debug errors.</p>
<p>See <a class="reference internal" href="contents.html#diamond-inheritance-deprecated"><span class="std std-ref">the deprecation note</span></a> for full details.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8592">#8592</a>: <a class="reference internal" href="contents.html#std-hook-pytest_cmdline_preparse"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_cmdline_preparse</span></code></a> has been officially deprecated.  It will be removed in a future release.  Use <a class="reference internal" href="contents.html#std-hook-pytest_load_initial_conftests"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_load_initial_conftests</span></code></a> instead.</p>
<p>See <a class="reference internal" href="contents.html#cmdline-preparse-deprecated"><span class="std std-ref">the deprecation note</span></a> for full details.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8645">#8645</a>: <a class="reference internal" href="contents.html#pytest.warns" title="pytest.warns"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.warns(None)</span></code></a> is now deprecated because many people used
it to mean “this code does not emit warnings”, but it actually had the effect of
checking that the code emits at least one warning of any type - like <code class="docutils literal notranslate"><span class="pre">pytest.warns()</span></code>
or <code class="docutils literal notranslate"><span class="pre">pytest.warns(Warning)</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8948">#8948</a>: <a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip(msg=...)</span></code></a>, <a class="reference internal" href="contents.html#pytest.fail" title="pytest.fail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fail(msg=...)</span></code></a> and <a class="reference internal" href="contents.html#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit(msg=...)</span></code></a>
signatures now accept a <code class="docutils literal notranslate"><span class="pre">reason</span></code> argument instead of <code class="docutils literal notranslate"><span class="pre">msg</span></code>.  Using <code class="docutils literal notranslate"><span class="pre">msg</span></code> still works, but is deprecated and will be removed in a future release.</p>
<p>This was changed for consistency with <a class="reference internal" href="contents.html#pytest.mark.skip" title="pytest.mark.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code></a> and  <a class="reference internal" href="contents.html#pytest.mark.xfail" title="pytest.mark.xfail"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code></a> which both accept
<code class="docutils literal notranslate"><span class="pre">reason</span></code> as an argument.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8174">#8174</a>: The following changes have been made to types reachable through <a class="reference internal" href="contents.html#pytest.ExceptionInfo.traceback" title="pytest.ExceptionInfo.traceback"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pytest.ExceptionInfo.traceback</span></code></a>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> property of <code class="docutils literal notranslate"><span class="pre">_pytest.code.Code</span></code> returns <code class="docutils literal notranslate"><span class="pre">Path</span></code> instead of <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> property of <code class="docutils literal notranslate"><span class="pre">_pytest.code.TracebackEntry</span></code> returns <code class="docutils literal notranslate"><span class="pre">Path</span></code> instead of <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p></li>
</ul>
<p>There was no deprecation period for this change (sorry!).</p>
</li>
</ul>
</div>
<div class="section" id="features">
<h5>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5196">#5196</a>: Tests are now ordered by definition order in more cases.</p>
<p>In a class hierarchy, tests from base classes are now consistently ordered before tests defined on their subclasses (reverse MRO order).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7132">#7132</a>: Added two environment variables <span class="target" id="index-1"></span><a class="reference internal" href="contents.html#envvar-PYTEST_THEME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME</span></code></a> and <span class="target" id="index-2"></span><a class="reference internal" href="contents.html#envvar-PYTEST_THEME_MODE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTEST_THEME_MODE</span></code></a> to let the users customize the pygments theme used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7259">#7259</a>: Added <a class="reference internal" href="contents.html#pytest.Cache.mkdir" title="pytest.Cache.mkdir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cache.mkdir()</span></code></a>, which is similar to the existing <code class="xref py py-meth docutils literal notranslate"><span class="pre">cache.makedir()</span></code>,
but returns a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> instead of a legacy <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p>
<p>Added a <code class="docutils literal notranslate"><span class="pre">paths</span></code> type to <a class="reference internal" href="contents.html#pytest.Parser.addini" title="pytest.Parser.addini"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parser.addini()</span></code></a>,
as in <code class="docutils literal notranslate"><span class="pre">parser.addini(&quot;mypaths&quot;,</span> <span class="pre">&quot;my</span> <span class="pre">paths&quot;,</span> <span class="pre">type=&quot;paths&quot;)</span></code>,
which is similar to the existing <code class="docutils literal notranslate"><span class="pre">pathlist</span></code>,
but returns a list of <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> instead of legacy <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7469">#7469</a>: The types of objects used in pytest’s API are now exported so they may be used in type annotations.</p>
<p>The newly-exported types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Config</span></code> for <a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Mark</span></code> for <a class="reference internal" href="contents.html#pytest.Mark" title="pytest.Mark"><code class="xref py py-class docutils literal notranslate"><span class="pre">marks</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.MarkDecorator</span></code> for <a class="reference internal" href="contents.html#pytest.MarkDecorator" title="pytest.MarkDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">mark</span> <span class="pre">decorators</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.MarkGenerator</span></code> for the <a class="reference internal" href="contents.html#pytest.MarkGenerator" title="pytest.MarkGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.mark</span></code></a> singleton.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Metafunc</span></code> for the <a class="reference internal" href="contents.html#pytest.MarkGenerator" title="pytest.MarkGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">metafunc</span></code></a> argument to the <a class="reference internal" href="contents.html#std-hook-pytest_generate_tests"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code></a> hook.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.CallInfo</span></code> for the <a class="reference internal" href="contents.html#pytest.CallInfo" title="pytest.CallInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">CallInfo</span></code></a> type passed to various hooks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.PytestPluginManager</span></code> for <a class="reference internal" href="contents.html#pytest.PytestPluginManager" title="pytest.PytestPluginManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestPluginManager</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.ExceptionInfo</span></code> for the <a class="reference internal" href="contents.html#pytest.ExceptionInfo" title="pytest.ExceptionInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code></a> type returned from <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> and passed to various hooks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Parser</span></code> for the <a class="reference internal" href="contents.html#pytest.Parser" title="pytest.Parser"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code></a> type passed to the <a class="reference internal" href="contents.html#std-hook-pytest_addoption"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_addoption</span></code></a> hook.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.OptionGroup</span></code> for the <a class="reference internal" href="contents.html#pytest.OptionGroup" title="pytest.OptionGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptionGroup</span></code></a> type returned from the <a class="reference internal" href="contents.html#pytest.Parser.getgroup" title="pytest.Parser.getgroup"><code class="xref py py-func docutils literal notranslate"><span class="pre">parser.addgroup</span></code></a> method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.HookRecorder</span></code> for the <a class="reference internal" href="contents.html#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a> type returned from <a class="reference internal" href="contents.html#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.RecordedHookCall</span></code> for the <a class="reference internal" href="contents.html#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">RecordedHookCall</span></code></a> type returned from <a class="reference internal" href="contents.html#pytest.HookRecorder" title="pytest.HookRecorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">HookRecorder</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.RunResult</span></code> for the <a class="reference internal" href="contents.html#pytest.RunResult" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code></a> type returned from <a class="reference internal" href="contents.html#pytest.Pytester" title="pytest.Pytester"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.LineMatcher</span></code> for the <a class="reference internal" href="contents.html#pytest.RunResult" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code></a> type used in <a class="reference internal" href="contents.html#pytest.RunResult" title="pytest.RunResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code></a> and others.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.TestReport</span></code> for the <a class="reference internal" href="contents.html#pytest.TestReport" title="pytest.TestReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestReport</span></code></a> type used in various hooks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.CollectReport</span></code> for the <a class="reference internal" href="contents.html#pytest.CollectReport" title="pytest.CollectReport"><code class="xref py py-class docutils literal notranslate"><span class="pre">CollectReport</span></code></a> type used in various hooks.</p></li>
</ul>
<p>Constructing most of them directly is not supported; they are only meant for use in type annotations.
Doing so will emit a deprecation warning, and may become a hard-error in pytest 8.0.</p>
<p>Subclassing them is also not supported. This is not currently enforced at runtime, but is detected by type-checkers such as mypy.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7856">#7856</a>: <a class="reference internal" href="contents.html#import-modes"><span class="std std-ref">–import-mode=importlib</span></a> now works with features that
depend on modules being on <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.modules" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.modules</span></code></a>, such as <a class="reference external" href="https://docs.python.org/3/library/pickle.html#module-pickle" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#module-dataclasses" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dataclasses</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8144">#8144</a>: The following hooks now receive an additional <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> argument, equivalent to an existing <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code> argument:</p>
<ul class="simple">
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_ignore_collect"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_ignore_collect</span></code></a> - The <code class="docutils literal notranslate"><span class="pre">collection_path</span></code> parameter (equivalent to existing <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter).</p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_collect_file"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_collect_file</span></code></a> - The <code class="docutils literal notranslate"><span class="pre">file_path</span></code> parameter (equivalent to existing <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter).</p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_pycollect_makemodule"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_pycollect_makemodule</span></code></a> - The <code class="docutils literal notranslate"><span class="pre">module_path</span></code> parameter (equivalent to existing <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter).</p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_report_header"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_header</span></code></a> - The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter (equivalent to existing <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter).</p></li>
<li><p><a class="reference internal" href="contents.html#std-hook-pytest_report_collectionfinish"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_report_collectionfinish</span></code></a> - The <code class="docutils literal notranslate"><span class="pre">start_path</span></code> parameter (equivalent to existing <code class="docutils literal notranslate"><span class="pre">startdir</span></code> parameter).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> arguments and attributes (the
new attribute being <code class="docutils literal notranslate"><span class="pre">path</span></code>) is <strong>the opposite</strong> of the situation for hooks
(the old argument being <code class="docutils literal notranslate"><span class="pre">path</span></code>).</p>
<p>This is an unfortunate artifact due to historical reasons, which should be
resolved in future versions as we slowly get rid of the <a class="reference external" href="https://pypi.org/project/py/">py</a>
dependency (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9283">issue #9283</a> for a longer discussion).</p>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8251">#8251</a>: Implement <code class="docutils literal notranslate"><span class="pre">Node.path</span></code> as a <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>. Both the old <code class="docutils literal notranslate"><span class="pre">fspath</span></code> and this new attribute gets set no matter whether <code class="docutils literal notranslate"><span class="pre">path</span></code> or <code class="docutils literal notranslate"><span class="pre">fspath</span></code> (deprecated) is passed to the constructor. It is a replacement for the <code class="docutils literal notranslate"><span class="pre">fspath</span></code> attribute (which represents the same path as <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>). While <code class="docutils literal notranslate"><span class="pre">fspath</span></code> is not deprecated yet
due to the ongoing migration of methods like <code class="xref py py-meth docutils literal notranslate"><span class="pre">reportinfo()</span></code>, we expect to deprecate it in a future release.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> arguments and attributes (the
new attribute being <code class="docutils literal notranslate"><span class="pre">path</span></code>) is <strong>the opposite</strong> of the situation for hooks
(the old argument being <code class="docutils literal notranslate"><span class="pre">path</span></code>).</p>
<p>This is an unfortunate artifact due to historical reasons, which should be
resolved in future versions as we slowly get rid of the <a class="reference external" href="https://pypi.org/project/py/">py</a>
dependency (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9283">issue #9283</a> for a longer discussion).</p>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8421">#8421</a>: <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> now works on <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> within mappings/dicts and sequences/lists.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8606">#8606</a>: pytest invocations with <code class="docutils literal notranslate"><span class="pre">--fixtures-per-test</span></code> and <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> have been enriched with:</p>
<ul class="simple">
<li><p>Fixture location path printed with the fixture name.</p></li>
<li><p>First section of the fixture’s docstring printed under the fixture name.</p></li>
<li><p>Whole of fixture’s docstring printed under the fixture name using <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8761">#8761</a>: New <a class="reference internal" href="contents.html#version-tuple"><span class="std std-ref">pytest.version_tuple</span></a> attribute, which makes it simpler for users to do something depending on the pytest version (such as declaring hooks which are introduced in later versions).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8789">#8789</a>: Switch TOML parser from <code class="docutils literal notranslate"><span class="pre">toml</span></code> to <code class="docutils literal notranslate"><span class="pre">tomli</span></code> for TOML v1.0.0 support in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8920">#8920</a>: Added <a class="reference internal" href="contents.html#pytest.Stash" title="pytest.Stash"><code class="xref py py-class docutils literal notranslate"><span class="pre">pytest.Stash</span></code></a>, a facility for plugins to store their data on <a class="reference internal" href="contents.html#pytest.Config" title="pytest.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> and <a class="reference internal" href="contents.html#pytest.nodes.Node" title="_pytest.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a>s in a type-safe and conflict-free manner.
See <a class="reference internal" href="contents.html#plugin-stash"><span class="std std-ref">Storing data on items across hook functions</span></a> for details.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8953">#8953</a>: <code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code> method <code class="xref py py-meth docutils literal notranslate"><span class="pre">assert_outcomes</span></code> now accepts a
<code class="docutils literal notranslate"><span class="pre">warnings</span></code> argument to assert the total number of warnings captured.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8954">#8954</a>: <code class="docutils literal notranslate"><span class="pre">--debug</span></code> flag now accepts a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> file to route debug logs into, remains defaulted to <code class="docutils literal notranslate"><span class="pre">pytestdebug.log</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9023">#9023</a>: Full diffs are now always shown for equality assertions of iterables when
<code class="docutils literal notranslate"><span class="pre">CI</span></code> or <code class="docutils literal notranslate"><span class="pre">BUILD_NUMBER</span></code> is found in the environment, even when <code class="docutils literal notranslate"><span class="pre">-v</span></code> isn’t
used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9113">#9113</a>: <code class="xref py py-class docutils literal notranslate"><span class="pre">RunResult</span></code> method <code class="xref py py-meth docutils literal notranslate"><span class="pre">assert_outcomes</span></code> now accepts a
<code class="docutils literal notranslate"><span class="pre">deselected</span></code> argument to assert the total number of deselected tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9114">#9114</a>: Added <a class="reference internal" href="contents.html#confval-pythonpath"><code class="xref std std-confval docutils literal notranslate"><span class="pre">pythonpath</span></code></a> setting that adds listed paths to <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> for the duration of the test session. If you currently use the pytest-pythonpath or pytest-srcpaths plugins, you should be able to replace them with built-in <code class="docutils literal notranslate"><span class="pre">pythonpath</span></code> setting.</p></li>
</ul>
</div>
<div class="section" id="id82">
<h5>Improvements<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7480">#7480</a>: A deprecation scheduled to be removed in a major version X (e.g. pytest 7, 8, 9, …) now uses warning category <code class="docutils literal notranslate"><span class="pre">PytestRemovedInXWarning</span></code>,
a subclass of <a class="reference internal" href="contents.html#pytest.PytestDeprecationWarning" title="pytest.PytestDeprecationWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code></a>,
instead of <code class="xref py py-class docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code> directly.</p>
<p>See <a class="reference internal" href="contents.html#backwards-compatibility"><span class="std std-ref">Backwards Compatibility Policy</span></a> for more details.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7864">#7864</a>: Improved error messages when parsing warning filters.</p>
<p>Previously pytest would show an internal traceback, which besides being ugly sometimes would hide the cause
of the problem (for example an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> while importing a specific warning type).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8335">#8335</a>: Improved <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> assertion messages for sequences of numbers.</p>
<p>The assertion messages now dumps a table with the index and the error of each diff.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>       <span class="k">assert</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="n">pytest</span><span class="o">.</span><span class="n">approx</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="n">E</span>       <span class="k">assert</span> <span class="n">comparison</span> <span class="n">failed</span> <span class="k">for</span> <span class="mi">2</span> <span class="n">values</span><span class="p">:</span>
<span class="n">E</span>         <span class="n">Index</span> <span class="o">|</span> <span class="n">Obtained</span> <span class="o">|</span> <span class="n">Expected</span>
<span class="n">E</span>         <span class="mi">1</span>     <span class="o">|</span> <span class="mi">2</span>        <span class="o">|</span> <span class="mi">3</span> <span class="o">+-</span> <span class="mf">3.0e-06</span>
<span class="n">E</span>         <span class="mi">3</span>     <span class="o">|</span> <span class="mi">4</span>        <span class="o">|</span> <span class="mi">5</span> <span class="o">+-</span> <span class="mf">5.0e-06</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8403">#8403</a>: By default, pytest will truncate long strings in assert errors so they don’t clutter the output too much,
currently at <code class="docutils literal notranslate"><span class="pre">240</span></code> characters by default.</p>
<p>However, in some cases the longer output helps, or is even crucial, to diagnose a failure. Using <code class="docutils literal notranslate"><span class="pre">-v</span></code> will
now increase the truncation threshold to <code class="docutils literal notranslate"><span class="pre">2400</span></code> characters, and <code class="docutils literal notranslate"><span class="pre">-vv</span></code> or higher will disable truncation entirely.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8509">#8509</a>: Fixed issue where <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.setUpClass" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.setUpClass()</span></code></a> is not called when a test has <code class="docutils literal notranslate"><span class="pre">/</span></code> in its name since pytest 6.2.0.</p>
<p>This refers to the path part in pytest node IDs, e.g. <code class="docutils literal notranslate"><span class="pre">TestClass::test_it</span></code> in the node ID <code class="docutils literal notranslate"><span class="pre">tests/test_file.py::TestClass::test_it</span></code>.</p>
<p>Now, instead of assuming that the test name does not contain <code class="docutils literal notranslate"><span class="pre">/</span></code>, it is assumed that test path does not contain <code class="docutils literal notranslate"><span class="pre">::</span></code>. We plan to hopefully make both of these work in the future.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8803">#8803</a>: It is now possible to add colors to custom log levels on cli log.</p>
<p>By using <code class="xref py py-func docutils literal notranslate"><span class="pre">add_color_level</span></code> from a <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> hook, colors can be added:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logging_plugin</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">pluginmanager</span><span class="o">.</span><span class="n">get_plugin</span><span class="p">(</span><span class="s1">&#39;logging-plugin&#39;</span><span class="p">)</span>
<span class="n">logging_plugin</span><span class="o">.</span><span class="n">log_cli_handler</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">add_color_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="s1">&#39;cyan&#39;</span><span class="p">)</span>
<span class="n">logging_plugin</span><span class="o">.</span><span class="n">log_cli_handler</span><span class="o">.</span><span class="n">formatter</span><span class="o">.</span><span class="n">add_color_level</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">SPAM</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="contents.html#log-colors"><span class="std std-ref">Customizing Colors</span></a> for more information.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8822">#8822</a>: When showing fixture paths in <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> or <code class="docutils literal notranslate"><span class="pre">--fixtures-by-test</span></code>, fixtures coming from pytest itself now display an elided path, rather than the full path to the file in the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8898">#8898</a>: Complex numbers are now treated like floats and integers when generating parameterization IDs.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9062">#9062</a>: <code class="docutils literal notranslate"><span class="pre">--stepwise-skip</span></code> now implicitly enables <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> and can be used on its own.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9205">#9205</a>: <a class="reference internal" href="contents.html#pytest.Cache.set" title="pytest.Cache.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.Cache.set()</span></code></a> now preserves key order when saving dicts.</p></li>
</ul>
</div>
<div class="section" id="id93">
<h5>Bug Fixes<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7124">#7124</a>: Fixed an issue where <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> would raise an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> when <code class="docutils literal notranslate"><span class="pre">--doctest-modules</span></code> was provided.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8061">#8061</a>: Fixed failing <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> test cases if they are inherited from a parent test class.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8192">#8192</a>: <code class="docutils literal notranslate"><span class="pre">testdir.makefile</span></code> now silently accepts values which don’t start with <code class="docutils literal notranslate"><span class="pre">.</span></code> to maintain backward compatibility with older pytest versions.</p>
<p><code class="docutils literal notranslate"><span class="pre">pytester.makefile</span></code> now issues a clearer error if the <code class="docutils literal notranslate"><span class="pre">.</span></code> is missing in the <code class="docutils literal notranslate"><span class="pre">ext</span></code> argument.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8258">#8258</a>: Fixed issue where pytest’s <code class="docutils literal notranslate"><span class="pre">faulthandler</span></code> support would not dump traceback on crashes
if the <a class="reference external" href="https://docs.python.org/3/library/faulthandler.html#module-faulthandler" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">faulthandler</span></code></a> module was already enabled during pytest startup (using
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-X</span> <span class="pre">dev</span> <span class="pre">-m</span> <span class="pre">pytest</span></code> for example).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8317">#8317</a>: Fixed an issue where illegal directory characters derived from <code class="docutils literal notranslate"><span class="pre">getpass.getuser()</span></code> raised an <code class="docutils literal notranslate"><span class="pre">OSError</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8367">#8367</a>: Fix <code class="docutils literal notranslate"><span class="pre">Class.from_parent</span></code> so it forwards extra keyword arguments to the constructor.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8377">#8377</a>: The test selection options <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-k</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-m</span></code> now support matching
names containing forward slash (<code class="docutils literal notranslate"><span class="pre">/</span></code>) characters.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8384">#8384</a>: The <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> decorator now correctly handles its arguments. When the <code class="docutils literal notranslate"><span class="pre">reason</span></code> argument is accidentally given both positional and as a keyword (e.g. because it was confused with <code class="docutils literal notranslate"><span class="pre">skipif</span></code>), a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> now occurs. Before, such tests were silently skipped, and the positional argument ignored. Additionally, <code class="docutils literal notranslate"><span class="pre">reason</span></code> is now documented correctly as positional or keyword (rather than keyword-only).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8394">#8394</a>: Use private names for internal fixtures that handle classic setup/teardown so that they don’t show up with the default <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> invocation (but they still show up with <code class="docutils literal notranslate"><span class="pre">--fixtures</span> <span class="pre">-v</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8456">#8456</a>: The <a class="reference internal" href="contents.html#confval-required_plugins"><code class="xref std std-confval docutils literal notranslate"><span class="pre">required_plugins</span></code></a> config option now works correctly when pre-releases of plugins are installed, rather than falsely claiming that those plugins aren’t installed at all.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8464">#8464</a>: <code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">&lt;config</span> <span class="pre">file&gt;</span></code> now also properly defines <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> as the directory that contains <code class="docutils literal notranslate"><span class="pre">&lt;config</span> <span class="pre">file&gt;</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8503">#8503</a>: <a class="reference internal" href="contents.html#pytest.MonkeyPatch.syspath_prepend" title="pytest.MonkeyPatch.syspath_prepend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.MonkeyPatch.syspath_prepend()</span></code></a> no longer fails when
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code> is not installed.
It now only calls <code class="xref py py-func docutils literal notranslate"><span class="pre">pkg_resources.fixup_namespace_packages()</span></code> if
<code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> was previously imported, because it is not needed otherwise.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8548">#8548</a>: Introduce fix to handle precision width in <code class="docutils literal notranslate"><span class="pre">log-cli-format</span></code> in turn to fix output coloring for certain formats.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8796">#8796</a>: Fixed internal error when skipping doctests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8983">#8983</a>: The test selection options <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-k</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-m</span></code> now support matching names containing backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) characters.
Backslashes are treated literally, not as escape characters (the values being matched against are already escaped).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8990">#8990</a>: Fix <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-vv</span></code> crashing with an internal exception <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">'str'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'relative_to'</span></code> in some cases.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9077">#9077</a>: Fixed confusing error message when <code class="docutils literal notranslate"><span class="pre">request.fspath</span></code> / <code class="docutils literal notranslate"><span class="pre">request.path</span></code> was accessed from a session-scoped fixture.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9131">#9131</a>: Fixed the URL used by <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> to use <a class="reference external" href="http://bpa.st">bpa.st</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9163">#9163</a>: The end line number and end column offset are now properly set for rewritten assert statements.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9169">#9169</a>: Support for the <code class="docutils literal notranslate"><span class="pre">files</span></code> API from <code class="docutils literal notranslate"><span class="pre">importlib.resources</span></code> within rewritten files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9272">#9272</a>: The nose compatibility module-level fixtures <code class="docutils literal notranslate"><span class="pre">setup()</span></code> and <code class="docutils literal notranslate"><span class="pre">teardown()</span></code> are now only called once per module, instead of for each test function.
They are now called even if object-level <code class="docutils literal notranslate"><span class="pre">setup</span></code>/<code class="docutils literal notranslate"><span class="pre">teardown</span></code> is defined.</p></li>
</ul>
</div>
<div class="section" id="id115">
<h5>Improved Documentation<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4320">#4320</a>: Improved docs for <code class="docutils literal notranslate"><span class="pre">pytester.copy_example</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5105">#5105</a>: Add automatically generated <a class="reference internal" href="contents.html#plugin-list"><span class="std std-ref">Plugin List</span></a>. The list is updated on a periodic schedule.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8337">#8337</a>: Recommend <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.testing.html">numpy.testing</a> module on <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8655">#8655</a>: Help text for <code class="docutils literal notranslate"><span class="pre">--pdbcls</span></code> more accurately reflects the option’s behavior.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9210">#9210</a>: Remove incorrect docs about <code class="docutils literal notranslate"><span class="pre">confcutdir</span></code> being a configuration option: it can only be set through the <code class="docutils literal notranslate"><span class="pre">--confcutdir</span></code> command-line option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9242">#9242</a>: Upgrade readthedocs configuration to use a <code class="docutils literal notranslate"><span class="pre">newer</span> <span class="pre">Ubuntu</span> <span class="pre">version</span> <span class="pre">&lt;https://blog.readthedocs.com/new-build-specification/&gt;`__</span></code> with better unicode support for PDF docs.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9341">#9341</a>: Various methods commonly used for <a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">Working with non-python tests</span></a> are now correctly documented in the reference docs. They were undocumented previously.</p></li>
</ul>
</div>
<div class="section" id="id123">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8133">#8133</a>: Migrate to <code class="docutils literal notranslate"><span class="pre">setuptools_scm</span></code> 6.x to use <code class="docutils literal notranslate"><span class="pre">SETUPTOOLS_SCM_PRETEND_VERSION_FOR_PYTEST</span></code> for more robust release tooling.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8174">#8174</a>: The following changes have been made to internal pytest types/functions:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_pytest.code.getfslineno()</span></code> function returns <code class="docutils literal notranslate"><span class="pre">Path</span></code> instead of <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_pytest.python.path_matches_patterns()</span></code> function takes <code class="docutils literal notranslate"><span class="pre">Path</span></code> instead of <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_pytest._code.Traceback.cut()</span></code> function accepts any <code class="docutils literal notranslate"><span class="pre">os.PathLike[str]</span></code>, not just <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8248">#8248</a>: Internal Restructure: let <code class="docutils literal notranslate"><span class="pre">python.PyObjMixin</span></code> inherit from <code class="docutils literal notranslate"><span class="pre">nodes.Node</span></code> to carry over typing information.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8432">#8432</a>: Improve error message when <a class="reference internal" href="contents.html#pytest.skip" title="pytest.skip"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.skip()</span></code></a> is used at module level without passing <code class="docutils literal notranslate"><span class="pre">allow_module_level=True</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8818">#8818</a>: Ensure <code class="docutils literal notranslate"><span class="pre">regendoc</span></code> opts out of <code class="docutils literal notranslate"><span class="pre">TOX_ENV</span></code> cachedir selection to ensure independent example test runs.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8913">#8913</a>: The private <code class="docutils literal notranslate"><span class="pre">CallSpec2._arg2scopenum</span></code> attribute has been removed after an internal refactoring.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8967">#8967</a>: <a class="reference internal" href="contents.html#std-hook-pytest_assertion_pass"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_assertion_pass</span></code></a> is no longer considered experimental and
future changes to it will be considered more carefully.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9202">#9202</a>: Add github action to upload coverage report to codecov instead of bash uploader.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9225">#9225</a>: Changed the command used to create sdist and wheel artifacts: using the build package instead of setup.py.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9351">#9351</a>: Correct minor typos in doc/en/example/special.rst.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-5-2021-08-29">
<h4>pytest 6.2.5 (2021-08-29)<a class="headerlink" href="#pytest-6-2-5-2021-08-29" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id134">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id134" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8494">issue #8494</a>: Python 3.10 is now supported.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/9040">issue #9040</a>: Enable compatibility with <code class="docutils literal notranslate"><span class="pre">pluggy</span> <span class="pre">1.0</span></code> or later.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-4-2021-05-04">
<h4>pytest 6.2.4 (2021-05-04)<a class="headerlink" href="#pytest-6-2-4-2021-05-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id135">
<h5>Bug Fixes<a class="headerlink" href="#id135" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8539">issue #8539</a>: Fixed assertion rewriting on Python 3.10.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-3-2021-04-03">
<h4>pytest 6.2.3 (2021-04-03)<a class="headerlink" href="#pytest-6-2-3-2021-04-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id136">
<h5>Bug Fixes<a class="headerlink" href="#id136" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8414">issue #8414</a>: pytest used to create directories under <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> with world-readable
permissions. This means that any user in the system was able to read
information written by tests in temporary directories (such as those created by
the <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>/<code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> fixture). Now the directories are created with
private permissions.</p>
<p>pytest used to silently use a pre-existing <code class="docutils literal notranslate"><span class="pre">/tmp/pytest-of-&lt;username&gt;</span></code> directory,
even if owned by another user. This means another user could pre-create such a
directory and gain control of another user’s temporary directory. Now such a
condition results in an error.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-2-2021-01-25">
<h4>pytest 6.2.2 (2021-01-25)<a class="headerlink" href="#pytest-6-2-2-2021-01-25" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id137">
<h5>Bug Fixes<a class="headerlink" href="#id137" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8152">issue #8152</a>: Fixed “(&lt;Skipped instance&gt;)” being shown as a skip reason in the verbose test summary line when the reason is empty.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8249">issue #8249</a>: Fix the <code class="docutils literal notranslate"><span class="pre">faulthandler</span></code> plugin for occasions when running with <code class="docutils literal notranslate"><span class="pre">twisted.logger</span></code> and using <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--capture=no</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-1-2020-12-15">
<h4>pytest 6.2.1 (2020-12-15)<a class="headerlink" href="#pytest-6-2-1-2020-12-15" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id138">
<h5>Bug Fixes<a class="headerlink" href="#id138" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7678">issue #7678</a>: Fixed bug where <code class="docutils literal notranslate"><span class="pre">ImportPathMismatchError</span></code> would be raised for files compiled in
the host and loaded later from an UNC mounted path (Windows).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8132">issue #8132</a>: Fixed regression in <code class="docutils literal notranslate"><span class="pre">approx</span></code>: in 6.2.0 <code class="docutils literal notranslate"><span class="pre">approx</span></code> no longer raises
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when dealing with non-numeric types, falling back to normal comparison.
Before 6.2.0, array types like tf.DeviceArray fell through to the scalar case,
and happened to compare correctly to a scalar if they had only one element.
After 6.2.0, these types began failing, because they inherited neither from
standard Python number hierarchy nor from <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">approx</span></code> now converts arguments to <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> if they expose the array
protocol and are not scalars. This treats array-like objects like numpy arrays,
regardless of size.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-2-0-2020-12-12">
<h4>pytest 6.2.0 (2020-12-12)<a class="headerlink" href="#pytest-6-2-0-2020-12-12" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id139">
<h5>Breaking Changes<a class="headerlink" href="#id139" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7808">issue #7808</a>: pytest now supports python3.6+ only.</p></li>
</ul>
</div>
<div class="section" id="id140">
<h5>Deprecations<a class="headerlink" href="#id140" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7469">issue #7469</a>: Directly constructing/calling the following classes/functions is now deprecated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.cacheprovider.Cache</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.cacheprovider.Cache.for_config()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.cacheprovider.Cache.clear_cache()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.cacheprovider.Cache.cache_dir_from_config()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.capture.CaptureFixture</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.fixtures.FixtureRequest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.fixtures.SubRequest</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.logging.LogCaptureFixture</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.pytester.Pytester</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.pytester.Testdir</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.recwarn.WarningsRecorder</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.recwarn.WarningsChecker</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.tmpdir.TempPathFactory</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.tmpdir.TempdirFactory</span></code></p></li>
</ul>
<p>These have always been considered private, but now issue a deprecation warning, which may become a hard error in pytest 8.0.0.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7530">issue #7530</a>: The <code class="docutils literal notranslate"><span class="pre">--strict</span></code> command-line option has been deprecated, use <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> instead.</p>
<p>We have plans to maybe in the future to reintroduce <code class="docutils literal notranslate"><span class="pre">--strict</span></code> and make it an encompassing flag for all strictness
related options (<code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> and <code class="docutils literal notranslate"><span class="pre">--strict-config</span></code> at the moment, more might be introduced in the future).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7988">issue #7988</a>: The <code class="docutils literal notranslate"><span class="pre">&#64;pytest.yield_fixture</span></code> decorator/function is now deprecated. Use <a class="reference internal" href="contents.html#pytest.fixture" title="pytest.fixture"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.fixture()</span></code></a> instead.</p>
<p><code class="docutils literal notranslate"><span class="pre">yield_fixture</span></code> has been an alias for <code class="docutils literal notranslate"><span class="pre">fixture</span></code> for a very long time, so can be search/replaced safely.</p>
</li>
</ul>
</div>
<div class="section" id="id141">
<h5>Features<a class="headerlink" href="#id141" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5299">issue #5299</a>: pytest now warns about unraisable exceptions and unhandled thread exceptions that occur in tests on Python&gt;=3.8.
See <a class="reference internal" href="contents.html#unraisable"><span class="std std-ref">Warning about unraisable exceptions and unhandled thread exceptions</span></a> for more information.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7425">issue #7425</a>: New <a class="reference internal" href="contents.html#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a> fixture, which is identical to <a class="reference internal" href="contents.html#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a> but its methods return <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> when appropriate instead of <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>.</p>
<p>This is part of the movement to use <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects internally, in order to remove the dependency to <code class="docutils literal notranslate"><span class="pre">py</span></code> in the future.</p>
<p>Internally, the old <code class="xref py py-class docutils literal notranslate"><span class="pre">Testdir</span></code> is now a thin wrapper around <code class="xref py py-class docutils literal notranslate"><span class="pre">Pytester</span></code>, preserving the old interface.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7695">issue #7695</a>: A new hook was added, <code class="docutils literal notranslate"><span class="pre">pytest_markeval_namespace</span></code> which should return a dictionary.
This dictionary will be used to augment the “global” variables available to evaluate skipif/xfail/xpass markers.</p>
<p>Pseudo example</p>
<p><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_markeval_namespace</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">test_func.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="s2">&quot;color == &#39;blue&#39;&quot;</span><span class="p">,</span> <span class="n">reason</span><span class="o">=</span><span class="s2">&quot;Color is not red&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_func</span><span class="p">():</span>
    <span class="k">assert</span> <span class="kc">False</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8006">issue #8006</a>: It is now possible to construct a <a class="reference internal" href="contents.html#pytest.MonkeyPatch" title="pytest.MonkeyPatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonkeyPatch</span></code></a> object directly as <code class="docutils literal notranslate"><span class="pre">pytest.MonkeyPatch()</span></code>,
in cases when the <a class="reference internal" href="contents.html#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a> fixture cannot be used. Previously some users imported it
from the private <code class="docutils literal notranslate"><span class="pre">_pytest.monkeypatch.MonkeyPatch</span></code> namespace.</p>
<p>Additionally, <a class="reference internal" href="contents.html#pytest.MonkeyPatch.context" title="pytest.MonkeyPatch.context"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MonkeyPatch.context</span></code></a> is now a classmethod,
and can be used as <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">MonkeyPatch.context()</span> <span class="pre">as</span> <span class="pre">mp:</span> <span class="pre">...</span></code>. This is the recommended way to use
<code class="docutils literal notranslate"><span class="pre">MonkeyPatch</span></code> directly, since unlike the <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture, an instance created directly
is not <code class="docutils literal notranslate"><span class="pre">undo()</span></code>-ed automatically.</p>
</li>
</ul>
</div>
<div class="section" id="id142">
<h5>Improvements<a class="headerlink" href="#id142" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1265">issue #1265</a>: Added an <code class="docutils literal notranslate"><span class="pre">__str__</span></code> implementation to the <code class="xref py py-class docutils literal notranslate"><span class="pre">LineMatcher</span></code> class which is returned from <code class="docutils literal notranslate"><span class="pre">pytester.run_pytest().stdout</span></code> and similar. It returns the entire output, like the existing <code class="docutils literal notranslate"><span class="pre">str()</span></code> method.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2044">issue #2044</a>: Verbose mode now shows the reason that a test was skipped in the test’s terminal line after the “SKIPPED”, “XFAIL” or “XPASS”.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7469">issue #7469</a> The types of builtin pytest fixtures are now exported so they may be used in type annotations of test functions.
The newly-exported types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.FixtureRequest</span></code> for the <a class="reference internal" href="contents.html#std-fixture-request"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">request</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Cache</span></code> for the <a class="reference internal" href="contents.html#std-fixture-cache"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">cache</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.CaptureFixture[str]</span></code> for the <a class="reference internal" href="contents.html#std-fixture-capfd"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfd</span></code></a> and <a class="reference internal" href="contents.html#std-fixture-capsys"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsys</span></code></a> fixtures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.CaptureFixture[bytes]</span></code> for the <a class="reference internal" href="contents.html#std-fixture-capfdbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capfdbinary</span></code></a> and <a class="reference internal" href="contents.html#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span></code></a> fixtures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.LogCaptureFixture</span></code> for the <a class="reference internal" href="contents.html#std-fixture-caplog"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">caplog</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Pytester</span></code> for the <a class="reference internal" href="contents.html#std-fixture-pytester"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">pytester</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.Testdir</span></code> for the <a class="reference internal" href="contents.html#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.TempdirFactory</span></code> for the <a class="reference internal" href="contents.html#std-fixture-tmpdir_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir_factory</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.TempPathFactory</span></code> for the <a class="reference internal" href="contents.html#std-fixture-tmp_path_factory"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path_factory</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.MonkeyPatch</span></code> for the <a class="reference internal" href="contents.html#std-fixture-monkeypatch"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">monkeypatch</span></code></a> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.WarningsRecorder</span></code> for the <a class="reference internal" href="contents.html#std-fixture-recwarn"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">recwarn</span></code></a> fixture.</p></li>
</ul>
<p>Constructing them is not supported (except for <code class="docutils literal notranslate"><span class="pre">MonkeyPatch</span></code>); they are only meant for use in type annotations.
Doing so will emit a deprecation warning, and may become a hard-error in pytest 8.0.</p>
<p>Subclassing them is also not supported. This is not currently enforced at runtime, but is detected by type-checkers such as mypy.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7527">issue #7527</a>: When a comparison between <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.namedtuple" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">namedtuple</span></code></a> instances of the same type fails, pytest now shows the differing field names (possibly nested) instead of their indexes.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7615">issue #7615</a>: <a class="reference internal" href="contents.html#pytest.nodes.Node.warn" title="_pytest.nodes.Node.warn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Node.warn</span></code></a> now permits any subclass of <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Warning" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Warning</span></code></a>, not just <a class="reference internal" href="contents.html#pytest.PytestWarning" title="pytest.PytestWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytestWarning</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7701">issue #7701</a>: Improved reporting when using <code class="docutils literal notranslate"><span class="pre">--collected-only</span></code>. It will now show the number of collected tests in the summary stats.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7710">issue #7710</a>: Use strict equality comparison for non-numeric types in <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.approx()</span></code></a> instead of
raising <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p>
<p>This was the undocumented behavior before 3.7, but is now officially a supported feature.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7938">issue #7938</a>: New <code class="docutils literal notranslate"><span class="pre">--sw-skip</span></code> argument which is a shorthand for <code class="docutils literal notranslate"><span class="pre">--stepwise-skip</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8023">issue #8023</a>: Added <code class="docutils literal notranslate"><span class="pre">'node_modules'</span></code> to default value for <a class="reference internal" href="contents.html#confval-norecursedirs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">norecursedirs</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8032">issue #8032</a>: <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.doClassCleanups" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doClassCleanups</span></code></a> (introduced in <a class="reference external" href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> in Python and 3.8) is now called appropriately.</p></li>
</ul>
</div>
<div class="section" id="id143">
<h5>Bug Fixes<a class="headerlink" href="#id143" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4824">issue #4824</a>: Fixed quadratic behavior and improved performance of collection of items using autouse fixtures and xunit fixtures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7758">issue #7758</a>: Fixed an issue where some files in packages are getting lost from <code class="docutils literal notranslate"><span class="pre">--lf</span></code> even though they contain tests that failed. Regressed in pytest 5.4.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7911">issue #7911</a>: Directories created by by <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a> and <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a> are now considered stale after 3 days without modification (previous value was 3 hours) to avoid deleting directories still in use in long running test suites.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7913">issue #7913</a>: Fixed a crash or hang in <code class="xref py py-meth docutils literal notranslate"><span class="pre">pytester.spawn</span></code> when the <a class="reference external" href="https://docs.python.org/3/library/readline.html#module-readline" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> module is involved.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7951">issue #7951</a>: Fixed handling of recursive symlinks when collecting tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7981">issue #7981</a>: Fixed symlinked directories not being followed during collection. Regressed in pytest 6.1.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8016">issue #8016</a>: Fixed only one doctest being collected when using <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--doctest-modules</span> <span class="pre">path/to/an/__init__.py</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id144">
<h5>Improved Documentation<a class="headerlink" href="#id144" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7429">issue #7429</a>: Add more information and use cases about skipping doctests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7780">issue #7780</a>: Classes which should not be inherited from are now marked <code class="docutils literal notranslate"><span class="pre">final</span> <span class="pre">class</span></code> in the API reference.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7872">issue #7872</a>: <code class="docutils literal notranslate"><span class="pre">_pytest.config.argparsing.Parser.addini()</span></code> accepts explicit <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;string&quot;</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7878">issue #7878</a>: In pull request section, ask to commit after editing changelog and authors file.</p></li>
</ul>
</div>
<div class="section" id="id145">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7802">issue #7802</a>: The <code class="docutils literal notranslate"><span class="pre">attrs</span></code> dependency requirement is now &gt;=19.2.0 instead of &gt;=17.4.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/8014">issue #8014</a>: <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files created by pytest’s assertion rewriting now conform to the newer <span class="target" id="index-3"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0552"><strong>PEP 552</strong></a> format on Python&gt;=3.7.
(These files are internal and only interpreted by pytest itself.)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-1-2-2020-10-28">
<h4>pytest 6.1.2 (2020-10-28)<a class="headerlink" href="#pytest-6-1-2-2020-10-28" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id146">
<h5>Bug Fixes<a class="headerlink" href="#id146" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7758">issue #7758</a>: Fixed an issue where some files in packages are getting lost from <code class="docutils literal notranslate"><span class="pre">--lf</span></code> even though they contain tests that failed. Regressed in pytest 5.4.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7911">issue #7911</a>: Directories created by <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> are now considered stale after 3 days without modification (previous value was 3 hours) to avoid deleting directories still in use in long running test suites.</p></li>
</ul>
</div>
<div class="section" id="id147">
<h5>Improved Documentation<a class="headerlink" href="#id147" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7815">issue #7815</a>: Improve deprecation warning message for <code class="docutils literal notranslate"><span class="pre">pytest._fillfuncargs()</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-1-1-2020-10-03">
<h4>pytest 6.1.1 (2020-10-03)<a class="headerlink" href="#pytest-6-1-1-2020-10-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id148">
<h5>Bug Fixes<a class="headerlink" href="#id148" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7807">issue #7807</a>: Fixed regression in pytest 6.1.0 causing incorrect rootdir to be determined in some non-trivial cases where parent directories have config files as well.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7814">issue #7814</a>: Fixed crash in header reporting when <a class="reference internal" href="contents.html#confval-testpaths"><code class="xref std std-confval docutils literal notranslate"><span class="pre">testpaths</span></code></a> is used and contains absolute paths (regression in 6.1.0).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-1-0-2020-09-26">
<h4>pytest 6.1.0 (2020-09-26)<a class="headerlink" href="#pytest-6-1-0-2020-09-26" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id149">
<h5>Breaking Changes<a class="headerlink" href="#id149" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5585">issue #5585</a>: As per our policy, the following features which have been deprecated in the 5.X series are now
removed:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">funcargnames</span></code> read-only property of <code class="docutils literal notranslate"><span class="pre">FixtureRequest</span></code>, <code class="docutils literal notranslate"><span class="pre">Metafunc</span></code>, and <code class="docutils literal notranslate"><span class="pre">Function</span></code> classes. Use <code class="docutils literal notranslate"><span class="pre">fixturenames</span></code> attribute.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> no longer supports positional arguments, pass all arguments by keyword instead.</p></li>
<li><p>Direct construction of <code class="docutils literal notranslate"><span class="pre">Node</span></code> subclasses now raise an error, use <code class="docutils literal notranslate"><span class="pre">from_parent</span></code> instead.</p></li>
<li><p>The default value for <code class="docutils literal notranslate"><span class="pre">junit_family</span></code> has changed to <code class="docutils literal notranslate"><span class="pre">xunit2</span></code>. If you require the old format, add <code class="docutils literal notranslate"><span class="pre">junit_family=xunit1</span></code> to your configuration file.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">TerminalReporter</span></code> no longer has a <code class="docutils literal notranslate"><span class="pre">writer</span></code> attribute. Plugin authors may use the public functions of the <code class="docutils literal notranslate"><span class="pre">TerminalReporter</span></code> instead of accessing the <code class="docutils literal notranslate"><span class="pre">TerminalWriter</span></code> object directly.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--result-log</span></code> option has been removed. Users are recommended to use the <a class="reference external" href="https://github.com/pytest-dev/pytest-reportlog">pytest-reportlog</a> plugin instead.</p></li>
</ul>
<p>For more information consult <a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> in the docs.</p>
</li>
</ul>
</div>
<div class="section" id="id150">
<h5>Deprecations<a class="headerlink" href="#id150" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6981">issue #6981</a>: The <code class="docutils literal notranslate"><span class="pre">pytest.collect</span></code> module is deprecated: all its names can be imported from <code class="docutils literal notranslate"><span class="pre">pytest</span></code> directly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7097">issue #7097</a>: The <code class="docutils literal notranslate"><span class="pre">pytest._fillfuncargs</span></code> function is deprecated. This function was kept
for backward compatibility with an older plugin.</p>
<p>It’s functionality is not meant to be used directly, but if you must replace
it, use <code class="docutils literal notranslate"><span class="pre">function._request._fillfixtures()</span></code> instead, though note this is not
a public API and may break in the future.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7210">issue #7210</a>: The special <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'-expr'</span></code> syntax to <code class="docutils literal notranslate"><span class="pre">-k</span></code> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'not</span> <span class="pre">expr'</span></code>
instead.</p>
<p>The special <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'expr:'</span></code> syntax to <code class="docutils literal notranslate"><span class="pre">-k</span></code> is deprecated. Please open an issue
if you use this and want a replacement.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7255">issue #7255</a>: The <code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook is deprecated in favor
of <a class="reference internal" href="contents.html#std-hook-pytest_warning_recorded"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_warning_recorded</span></code></a>, and will be removed in a future version.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7648">issue #7648</a>: The <code class="docutils literal notranslate"><span class="pre">gethookproxy()</span></code> and <code class="docutils literal notranslate"><span class="pre">isinitpath()</span></code> methods of <code class="docutils literal notranslate"><span class="pre">FSCollector</span></code> and <code class="docutils literal notranslate"><span class="pre">Package</span></code> are deprecated;
use <code class="docutils literal notranslate"><span class="pre">self.session.gethookproxy()</span></code> and <code class="docutils literal notranslate"><span class="pre">self.session.isinitpath()</span></code> instead.
This should work on all pytest versions.</p></li>
</ul>
</div>
<div class="section" id="id151">
<h5>Features<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7667">issue #7667</a>: New <code class="docutils literal notranslate"><span class="pre">--durations-min</span></code> command-line flag controls the minimal duration for inclusion in the slowest list of tests shown by <code class="docutils literal notranslate"><span class="pre">--durations</span></code>. Previously this was hard-coded to <code class="docutils literal notranslate"><span class="pre">0.005s</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id152">
<h5>Improvements<a class="headerlink" href="#id152" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6681">issue #6681</a>: Internal pytest warnings issued during the early stages of initialization are now properly handled and can filtered through <a class="reference internal" href="contents.html#confval-filterwarnings"><code class="xref std std-confval docutils literal notranslate"><span class="pre">filterwarnings</span></code></a> or <code class="docutils literal notranslate"><span class="pre">--pythonwarnings/-W</span></code>.</p>
<p>This also fixes a number of long standing issues: <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2891">issue #2891</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7620">issue #7620</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7426">issue #7426</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7572">issue #7572</a>: When a plugin listed in <code class="docutils literal notranslate"><span class="pre">required_plugins</span></code> is missing or an unknown config key is used with <code class="docutils literal notranslate"><span class="pre">--strict-config</span></code>, a simple error message is now shown instead of a stacktrace.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7685">issue #7685</a>: Added two new attributes <code class="xref py py-attr docutils literal notranslate"><span class="pre">rootpath</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">inipath</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code>.
These attributes are <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> versions of the existing <code class="xref py py-attr docutils literal notranslate"><span class="pre">rootdir</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">inifile</span></code> attributes,
and should be preferred over them when possible.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7780">issue #7780</a>: Public classes which are not designed to be inherited from are now marked <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.final" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;final</span></code></a>.
Code which inherits from these classes will trigger a type-checking (e.g. mypy) error, but will still work in runtime.
Currently the <code class="docutils literal notranslate"><span class="pre">final</span></code> designation does not appear in the API Reference but hopefully will in the future.</p></li>
</ul>
</div>
<div class="section" id="id153">
<h5>Bug Fixes<a class="headerlink" href="#id153" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1953">issue #1953</a>: Fixed error when overwriting a parametrized fixture, while also reusing the super fixture value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># conftest.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">param</span>


<span class="c1"># test_foo.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">foo</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4984">issue #4984</a>: Fixed an internal error crash with <code class="docutils literal notranslate"><span class="pre">IndexError:</span> <span class="pre">list</span> <span class="pre">index</span> <span class="pre">out</span> <span class="pre">of</span> <span class="pre">range</span></code> when
collecting a module which starts with a decorated function, the decorator
raises, and assertion rewriting is enabled.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7591">issue #7591</a>: pylint shouldn’t complain anymore about unimplemented abstract methods when inheriting from <a class="reference internal" href="contents.html#non-python-tests"><span class="std std-ref">File</span></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7628">issue #7628</a>: Fixed test collection when a full path without a drive letter was passed to pytest on Windows (for example <code class="docutils literal notranslate"><span class="pre">\projects\tests\test.py</span></code> instead of <code class="docutils literal notranslate"><span class="pre">c:\projects\tests\pytest.py</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7638">issue #7638</a>: Fix handling of command-line options that appear as paths but trigger an OS-level syntax error on Windows, such as the options used internally by <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7742">issue #7742</a>: Fixed INTERNALERROR when accessing locals / globals with faulty <code class="docutils literal notranslate"><span class="pre">exec</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id154">
<h5>Improved Documentation<a class="headerlink" href="#id154" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1477">issue #1477</a>: Removed faq.rst and its reference in contents.rst.</p></li>
</ul>
</div>
<div class="section" id="id155">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id155" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7536">issue #7536</a>: The internal <code class="docutils literal notranslate"><span class="pre">junitxml</span></code> plugin has rewritten to use <code class="docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code>.
The order of attributes in XML elements might differ. Some unneeded escaping is
no longer performed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7587">issue #7587</a>: The dependency on the <code class="docutils literal notranslate"><span class="pre">more-itertools</span></code> package has been removed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7631">issue #7631</a>: The result type of <code class="xref py py-meth docutils literal notranslate"><span class="pre">capfd.readouterr()</span></code> (and similar) is no longer a namedtuple,
but should behave like one in all respects. This was done for technical reasons.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7671">issue #7671</a>: When collecting tests, pytest finds test classes and functions by examining the
attributes of python objects (modules, classes and instances). To speed up this
process, pytest now ignores builtin attributes (like <code class="docutils literal notranslate"><span class="pre">__class__</span></code>,
<code class="docutils literal notranslate"><span class="pre">__delattr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__new__</span></code>) without consulting the <a class="reference internal" href="contents.html#confval-python_classes"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_classes</span></code></a> and
<a class="reference internal" href="contents.html#confval-python_functions"><code class="xref std std-confval docutils literal notranslate"><span class="pre">python_functions</span></code></a> configuration options and without passing them to plugins
using the <a class="reference internal" href="contents.html#std-hook-pytest_pycollect_makeitem"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_pycollect_makeitem</span></code></a> hook.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-0-2-2020-09-04">
<h4>pytest 6.0.2 (2020-09-04)<a class="headerlink" href="#pytest-6-0-2-2020-09-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id156">
<h5>Bug Fixes<a class="headerlink" href="#id156" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7148">issue #7148</a>: Fixed <code class="docutils literal notranslate"><span class="pre">--log-cli</span></code> potentially causing unrelated <code class="docutils literal notranslate"><span class="pre">print</span></code> output to be swallowed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7672">issue #7672</a>: Fixed log-capturing level restored incorrectly if <code class="docutils literal notranslate"><span class="pre">caplog.set_level</span></code> is called more than once.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7686">issue #7686</a>: Fixed <code class="docutils literal notranslate"><span class="pre">NotSetType.token</span></code> being used as the parameter ID when the parametrization list is empty.
Regressed in pytest 6.0.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7707">issue #7707</a>: Fix internal error when handling some exceptions that contain multiple lines or the style uses multiple lines (<code class="docutils literal notranslate"><span class="pre">--tb=line</span></code> for example).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-0-1-2020-07-30">
<h4>pytest 6.0.1 (2020-07-30)<a class="headerlink" href="#pytest-6-0-1-2020-07-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id157">
<h5>Bug Fixes<a class="headerlink" href="#id157" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7394">issue #7394</a>: Passing an empty <code class="docutils literal notranslate"><span class="pre">help</span></code> value to <code class="docutils literal notranslate"><span class="pre">Parser.add_option</span></code> is now accepted instead of crashing when running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--help</span></code>.
Passing <code class="docutils literal notranslate"><span class="pre">None</span></code> raises a more informative <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7558">issue #7558</a>: Fix pylint <code class="docutils literal notranslate"><span class="pre">not-callable</span></code> lint on <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize()</span></code> and the other builtin marks:
<code class="docutils literal notranslate"><span class="pre">skip</span></code>, <code class="docutils literal notranslate"><span class="pre">skipif</span></code>, <code class="docutils literal notranslate"><span class="pre">xfail</span></code>, <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code>, <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7559">issue #7559</a>: Fix regression in plugins using <code class="docutils literal notranslate"><span class="pre">TestReport.longreprtext</span></code> (such as <code class="docutils literal notranslate"><span class="pre">pytest-html</span></code>) when <code class="docutils literal notranslate"><span class="pre">TestReport.longrepr</span></code> is not a string.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7569">issue #7569</a>: Fix logging capture handler’s level not reset on teardown after a call to <code class="docutils literal notranslate"><span class="pre">caplog.set_level()</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-0-0-2020-07-28">
<h4>pytest 6.0.0 (2020-07-28)<a class="headerlink" href="#pytest-6-0-0-2020-07-28" title="Permalink to this headline">¶</a></h4>
<p>(<strong>Please see the full set of changes for this release also in the 6.0.0rc1 notes below</strong>)</p>
<div class="section" id="id158">
<h5>Breaking Changes<a class="headerlink" href="#id158" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5584">issue #5584</a>: <strong>PytestDeprecationWarning are now errors by default.</strong></p>
<p>Following our plan to remove deprecated features with as little disruption as
possible, all warnings of type <code class="docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code> now generate errors
instead of warning messages.</p>
<p><strong>The affected features will be effectively removed in pytest 6.1</strong>, so please consult the
<a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> section in the docs for directions on how to update existing code.</p>
<p>In the pytest <code class="docutils literal notranslate"><span class="pre">6.0.X</span></code> series, it is possible to change the errors back into warnings as a
stopgap measure by adding this to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::pytest.PytestDeprecationWarning</span><span class="w"></span>
</pre></div>
</div>
<p>But this will stop working when pytest <code class="docutils literal notranslate"><span class="pre">6.1</span></code> is released.</p>
<p><strong>If you have concerns</strong> about the removal of a specific feature, please add a
comment to <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5584">issue #5584</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7472">issue #7472</a>: The <code class="docutils literal notranslate"><span class="pre">exec_()</span></code> and <code class="docutils literal notranslate"><span class="pre">is_true()</span></code> methods of <code class="docutils literal notranslate"><span class="pre">_pytest._code.Frame</span></code> have been removed.</p></li>
</ul>
</div>
<div class="section" id="id159">
<h5>Features<a class="headerlink" href="#id159" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7464">issue #7464</a>: Added support for <span class="target" id="index-4"></span><a class="reference internal" href="contents.html#envvar-NO_COLOR"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NO_COLOR</span></code></a> and <span class="target" id="index-5"></span><a class="reference internal" href="contents.html#envvar-FORCE_COLOR"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FORCE_COLOR</span></code></a> environment variables to control colored output.</p></li>
</ul>
</div>
<div class="section" id="id160">
<h5>Improvements<a class="headerlink" href="#id160" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7467">issue #7467</a>: <code class="docutils literal notranslate"><span class="pre">--log-file</span></code> CLI option and <code class="docutils literal notranslate"><span class="pre">log_file</span></code> ini marker now create subdirectories if needed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7489">issue #7489</a>: The <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> function has a clearer error message when <code class="docutils literal notranslate"><span class="pre">match</span></code> equals the obtained string but is not a regex match. In this case it is suggested to escape the regex.</p></li>
</ul>
</div>
<div class="section" id="id161">
<h5>Bug Fixes<a class="headerlink" href="#id161" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7392">issue #7392</a>: Fix the reported location of tests skipped with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> when <code class="docutils literal notranslate"><span class="pre">--runxfail</span></code> is used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7491">issue #7491</a>: <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a> and <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a> no longer raise an error if the lock to check for
stale temporary directories is not accessible.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7517">issue #7517</a>: Preserve line endings when captured via <code class="docutils literal notranslate"><span class="pre">capfd</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7534">issue #7534</a>: Restored the previous formatting of <code class="docutils literal notranslate"><span class="pre">TracebackEntry.__str__</span></code> which was changed by accident.</p></li>
</ul>
</div>
<div class="section" id="id162">
<h5>Improved Documentation<a class="headerlink" href="#id162" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7422">issue #7422</a>: Clarified when the <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> mark can apply fixtures to test.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7441">issue #7441</a>: Add a note about <code class="docutils literal notranslate"><span class="pre">-q</span></code> option used in getting started guide.</p></li>
</ul>
</div>
<div class="section" id="id163">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id163" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7389">issue #7389</a>: Fixture scope <code class="docutils literal notranslate"><span class="pre">package</span></code> is no longer considered experimental.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-6-0-0rc1-2020-07-08">
<h4>pytest 6.0.0rc1 (2020-07-08)<a class="headerlink" href="#pytest-6-0-0rc1-2020-07-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id164">
<h5>Breaking Changes<a class="headerlink" href="#id164" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1316">issue #1316</a>: <code class="docutils literal notranslate"><span class="pre">TestReport.longrepr</span></code> is now always an instance of <code class="docutils literal notranslate"><span class="pre">ReprExceptionInfo</span></code>. Previously it was a <code class="docutils literal notranslate"><span class="pre">str</span></code> when a test failed with <code class="docutils literal notranslate"><span class="pre">pytest.fail(...,</span> <span class="pre">pytrace=False)</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5965">issue #5965</a>: symlinks are no longer resolved during collection and matching <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files with test file paths.</p>
<p>Resolving symlinks for the current directory and during collection was introduced as a bugfix in 3.9.0, but it actually is a new feature which had unfortunate consequences in Windows and surprising results in other platforms.</p>
<p>The team decided to step back on resolving symlinks at all, planning to review this in the future with a more solid solution (see discussion in
<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/6523">pull request #6523</a> for details).</p>
<p>This might break test suites which made use of this feature; the fix is to create a symlink
for the entire test tree, and not only to partial files/tress as it was possible previously.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6505">issue #6505</a>: <code class="docutils literal notranslate"><span class="pre">Testdir.run().parseoutcomes()</span></code> now always returns the parsed nouns in plural form.</p>
<p>Originally <code class="docutils literal notranslate"><span class="pre">parseoutcomes()</span></code> would always returns the nouns in plural form, but a change
meant to improve the terminal summary by using singular form single items (<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">warning</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">error</span></code>)
caused an unintended regression by changing the keys returned by <code class="docutils literal notranslate"><span class="pre">parseoutcomes()</span></code>.</p>
<p>Now the API guarantees to always return the plural form, so calls like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">testdir</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
<span class="n">result</span><span class="o">.</span><span class="n">assert_outcomes</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Need to be changed to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">testdir</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
<span class="n">result</span><span class="o">.</span><span class="n">assert_outcomes</span><span class="p">(</span><span class="n">errors</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6903">issue #6903</a>: The <code class="docutils literal notranslate"><span class="pre">os.dup()</span></code> function is now assumed to exist. We are not aware of any
supported Python 3 implementations which do not provide it.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7040">issue #7040</a>: <code class="docutils literal notranslate"><span class="pre">-k</span></code> no longer matches against the names of the directories outside the test session root.</p>
<p>Also, <code class="docutils literal notranslate"><span class="pre">pytest.Package.name</span></code> is now just the name of the directory containing the package’s
<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file, instead of the full path. This is consistent with how the other nodes
are named, and also one of the reasons why <code class="docutils literal notranslate"><span class="pre">-k</span></code> would match against any directory containing
the test suite.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7122">issue #7122</a>: Expressions given to the <code class="docutils literal notranslate"><span class="pre">-m</span></code> and <code class="docutils literal notranslate"><span class="pre">-k</span></code> options are no longer evaluated using Python’s <a class="reference external" href="https://docs.python.org/3/library/functions.html#eval" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a>.
The format supports <code class="docutils literal notranslate"><span class="pre">or</span></code>, <code class="docutils literal notranslate"><span class="pre">and</span></code>, <code class="docutils literal notranslate"><span class="pre">not</span></code>, parenthesis and general identifiers to match against.
Python constants, keywords or other operators are no longer evaluated differently.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7135">issue #7135</a>: Pytest now uses its own <code class="docutils literal notranslate"><span class="pre">TerminalWriter</span></code> class instead of using the one from the <code class="docutils literal notranslate"><span class="pre">py</span></code> library.
Plugins generally access this class through <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code>, <code class="docutils literal notranslate"><span class="pre">TerminalReporter.write()</span></code>
(and similar methods), or <code class="docutils literal notranslate"><span class="pre">_pytest.config.create_terminal_writer()</span></code>.</p>
<p>The following breaking changes were made:</p>
<ul class="simple">
<li><p>Output (<code class="docutils literal notranslate"><span class="pre">write()</span></code> method and others) no longer flush implicitly; the flushing behavior
of the underlying file is respected. To flush explicitly (for example, if you
want output to be shown before an end-of-line is printed), use <code class="docutils literal notranslate"><span class="pre">write(flush=True)</span></code> or
<code class="docutils literal notranslate"><span class="pre">terminal_writer.flush()</span></code>.</p></li>
<li><p>Explicit Windows console support was removed, delegated to the colorama library.</p></li>
<li><p>Support for writing <code class="docutils literal notranslate"><span class="pre">bytes</span></code> was removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">reline</span></code> method and <code class="docutils literal notranslate"><span class="pre">chars_on_current_line</span></code> property were removed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">stringio</span></code> and <code class="docutils literal notranslate"><span class="pre">encoding</span></code> arguments was removed.</p></li>
<li><p>Support for passing a callable instead of a file was removed.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7224">issue #7224</a>: The <code class="docutils literal notranslate"><span class="pre">item.catch_log_handler</span></code> and <code class="docutils literal notranslate"><span class="pre">item.catch_log_handlers</span></code> attributes, set by the
logging plugin and never meant to be public, are no longer available.</p>
<p>The deprecated <code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code> option and <code class="docutils literal notranslate"><span class="pre">log_print</span></code> ini option are removed. Use <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> instead.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7226">issue #7226</a>: Removed the unused <code class="docutils literal notranslate"><span class="pre">args</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">pytest.Function.__init__</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7418">issue #7418</a>: Removed the <code class="docutils literal notranslate"><span class="pre">pytest_doctest_prepare_content</span></code> hook specification. This hook
hasn’t been triggered by pytest for at least 10 years.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7438">issue #7438</a>: Some changes were made to the internal <code class="docutils literal notranslate"><span class="pre">_pytest._code.source</span></code>, listed here
for the benefit of plugin authors who may be using it:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">deindent</span></code> argument to <code class="docutils literal notranslate"><span class="pre">Source()</span></code> has been removed, now it is always true.</p></li>
<li><p>Support for zero or multiple arguments to <code class="docutils literal notranslate"><span class="pre">Source()</span></code> has been removed.</p></li>
<li><p>Support for comparing <code class="docutils literal notranslate"><span class="pre">Source</span></code> with an <code class="docutils literal notranslate"><span class="pre">str</span></code> has been removed.</p></li>
<li><p>The methods <code class="docutils literal notranslate"><span class="pre">Source.isparseable()</span></code> and <code class="docutils literal notranslate"><span class="pre">Source.putaround()</span></code> have been removed.</p></li>
<li><p>The method <code class="docutils literal notranslate"><span class="pre">Source.compile()</span></code> and function <code class="docutils literal notranslate"><span class="pre">_pytest._code.compile()</span></code> have
been removed; use plain <code class="docutils literal notranslate"><span class="pre">compile()</span></code> instead.</p></li>
<li><p>The function <code class="docutils literal notranslate"><span class="pre">_pytest._code.source.getsource()</span></code> has been removed; use
<code class="docutils literal notranslate"><span class="pre">Source()</span></code> directly instead.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id165">
<h5>Deprecations<a class="headerlink" href="#id165" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7210">issue #7210</a>: The special <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'-expr'</span></code> syntax to <code class="docutils literal notranslate"><span class="pre">-k</span></code> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'not</span> <span class="pre">expr'</span></code>
instead.</p>
<p>The special <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">'expr:'</span></code> syntax to <code class="docutils literal notranslate"><span class="pre">-k</span></code> is deprecated. Please open an issue
if you use this and want a replacement.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4049">issue #4049</a>: <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> is deprecated in favor of the <code class="docutils literal notranslate"><span class="pre">pytest_warning_recorded</span></code> hook.</p></li>
</ul>
</div>
<div class="section" id="id166">
<h5>Features<a class="headerlink" href="#id166" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1556">issue #1556</a>: pytest now supports <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files for configuration.</p>
<p>The configuration options is similar to the one available in other formats, but must be defined
in a <code class="docutils literal notranslate"><span class="pre">[tool.pytest.ini_options]</span></code> table to be picked up by pytest:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyproject.toml</span><span class="w"></span>
<span class="k">[tool.pytest.ini_options]</span><span class="w"></span>
<span class="n">minversion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;6.0&quot;</span><span class="w"></span>
<span class="n">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;-ra -q&quot;</span><span class="w"></span>
<span class="n">testpaths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;tests&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;integration&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</pre></div>
</div>
<p>More information can be found <a class="reference internal" href="contents.html#config-file-formats"><span class="std std-ref">in the docs</span></a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3342">issue #3342</a>: pytest now includes inline type annotations and exposes them to user programs.
Most of the user-facing API is covered, as well as internal code.</p>
<p>If you are running a type checker such as mypy on your tests, you may start
noticing type errors indicating incorrect usage. If you run into an error that
you believe to be incorrect, please let us know in an issue.</p>
<p>The types were developed against mypy version 0.780. Versions before 0.750
are known not to work. We recommend using the latest version. Other type
checkers may work as well, but they are not officially verified to work by
pytest yet.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4049">issue #4049</a>: Introduced a new hook named <code class="docutils literal notranslate"><span class="pre">pytest_warning_recorded</span></code> to convey information about warnings captured by the internal <code class="docutils literal notranslate"><span class="pre">pytest</span></code> warnings plugin.</p>
<p>This hook is meant to replace <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code>, which is deprecated and will be removed in a future release.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6471">issue #6471</a>: New command-line flags:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--no-header</span></code>: disables the initial header, including platform, version, and plugins.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-summary</span></code>: disables the final test summary, including warnings.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6856">issue #6856</a>: A warning is now shown when an unknown key is read from a config INI file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--strict-config</span></code> flag has been added to treat these warnings as errors.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6906">issue #6906</a>: Added <code class="docutils literal notranslate"><span class="pre">--code-highlight</span></code> command line option to enable/disable code highlighting in terminal output.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7245">issue #7245</a>: New <code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> option that uses <a class="reference external" href="https://docs.python.org/3/library/importlib.html#module-importlib" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> to import test modules.</p>
<p>Traditionally pytest used <code class="docutils literal notranslate"><span class="pre">__import__</span></code> while changing <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> to import test modules (which
also changes <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> as a side-effect), which works but has a number of drawbacks, like requiring test modules
that don’t live in packages to have unique names (as they need to reside under a unique name in <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> uses more fine grained import mechanisms from <code class="docutils literal notranslate"><span class="pre">importlib</span></code> which don’t
require pytest to change <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> or <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> at all, eliminating much of the drawbacks
of the previous mode.</p>
<p>We intend to make <code class="docutils literal notranslate"><span class="pre">--import-mode=importlib</span></code> the default in future versions, so users are encouraged
to try the new mode and provide feedback (both positive or negative) in issue <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7245">issue #7245</a>.</p>
<p>You can read more about this option in <a class="reference internal" href="contents.html#import-modes"><span class="std std-ref">the documentation</span></a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7305">issue #7305</a>: New <code class="docutils literal notranslate"><span class="pre">required_plugins</span></code> configuration option allows the user to specify a list of plugins, including version information, that are required for pytest to run. An error is raised if any required plugins are not found when running pytest.</p></li>
</ul>
</div>
<div class="section" id="id167">
<h5>Improvements<a class="headerlink" href="#id167" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4375">issue #4375</a>: The <code class="docutils literal notranslate"><span class="pre">pytest</span></code> command now suppresses the <code class="docutils literal notranslate"><span class="pre">BrokenPipeError</span></code> error message that
is printed to stderr when the output of <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is piped and and the pipe is
closed by the piped-to program (common examples are <code class="docutils literal notranslate"><span class="pre">less</span></code> and <code class="docutils literal notranslate"><span class="pre">head</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4391">issue #4391</a>: Improved precision of test durations measurement. <code class="docutils literal notranslate"><span class="pre">CallInfo</span></code> items now have a new <code class="docutils literal notranslate"><span class="pre">&lt;CallInfo&gt;.duration</span></code> attribute, created using <code class="docutils literal notranslate"><span class="pre">time.perf_counter()</span></code>. This attribute is used to fill the <code class="docutils literal notranslate"><span class="pre">&lt;TestReport&gt;.duration</span></code> attribute, which is more accurate than the previous <code class="docutils literal notranslate"><span class="pre">&lt;CallInfo&gt;.stop</span> <span class="pre">-</span> <span class="pre">&lt;CallInfo&gt;.start</span></code> (as these are based on <code class="docutils literal notranslate"><span class="pre">time.time()</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4675">issue #4675</a>: Rich comparison for dataclasses and <code class="docutils literal notranslate"><span class="pre">attrs</span></code>-classes is now recursive.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6285">issue #6285</a>: Exposed the <code class="docutils literal notranslate"><span class="pre">pytest.FixtureLookupError</span></code> exception which is raised by <code class="docutils literal notranslate"><span class="pre">request.getfixturevalue()</span></code>
(where <code class="docutils literal notranslate"><span class="pre">request</span></code> is a <code class="docutils literal notranslate"><span class="pre">FixtureRequest</span></code> fixture) when a fixture with the given name cannot be returned.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6433">issue #6433</a>: If an error is encountered while formatting the message in a logging call, for
example <code class="docutils literal notranslate"><span class="pre">logging.warning(&quot;oh</span> <span class="pre">no!:</span> <span class="pre">%s:</span> <span class="pre">%s&quot;,</span> <span class="pre">&quot;first&quot;)</span></code> (a second argument is
missing), pytest now propagates the error, likely causing the test to fail.</p>
<p>Previously, such a mistake would cause an error to be printed to stderr, which
is not displayed by default for passing tests. This change makes the mistake
visible during testing.</p>
<p>You may suppress this behavior temporarily or permanently by setting
<code class="docutils literal notranslate"><span class="pre">logging.raiseExceptions</span> <span class="pre">=</span> <span class="pre">False</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6817">issue #6817</a>: Explicit new-lines in help texts of command-line options are preserved, allowing plugins better control
of the help displayed to users.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6940">issue #6940</a>: When using the <code class="docutils literal notranslate"><span class="pre">--duration</span></code> option, the terminal message output is now more precise about the number and duration of hidden items.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6991">issue #6991</a>: Collected files are displayed after any reports from hooks, e.g. the status from <code class="docutils literal notranslate"><span class="pre">--lf</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7091">issue #7091</a>: When <code class="docutils literal notranslate"><span class="pre">fd</span></code> capturing is used, through <code class="docutils literal notranslate"><span class="pre">--capture=fd</span></code> or the <code class="docutils literal notranslate"><span class="pre">capfd</span></code> and
<code class="docutils literal notranslate"><span class="pre">capfdbinary</span></code> fixtures, and the file descriptor (0, 1, 2) cannot be
duplicated, FD capturing is still performed. Previously, direct writes to the
file descriptors would fail or be lost in this case.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7119">issue #7119</a>: Exit with an error if the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> argument is empty, is the current working directory or is one of the parent directories.
This is done to protect against accidental data loss, as any directory passed to this argument is cleared.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7128">issue #7128</a>: <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--version</span></code> now displays just the pytest version, while <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--version</span> <span class="pre">--version</span></code> displays more verbose information including plugins. This is more consistent with how other tools show <code class="docutils literal notranslate"><span class="pre">--version</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7133">issue #7133</a>: <code class="xref py py-meth docutils literal notranslate"><span class="pre">caplog.set_level()</span></code> will now override any <a class="reference internal" href="contents.html#confval-log_level"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_level</span></code></a> set via the CLI or configuration file.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7159">issue #7159</a>: <code class="xref py py-meth docutils literal notranslate"><span class="pre">caplog.set_level()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">caplog.at_level()</span></code> no longer affect
the level of logs that are shown in the <em>Captured log report</em> report section.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7348">issue #7348</a>: Improve recursive diff report for comparison asserts on dataclasses / attrs.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7385">issue #7385</a>: <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> now includes the exception cause in the <code class="docutils literal notranslate"><span class="pre">message</span></code> XML attribute for failures during setup and teardown.</p>
<p>Previously:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;error</span> <span class="na">message=</span><span class="s">&quot;test setup failure&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
<p>Now:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;error</span> <span class="na">message=</span><span class="s">&quot;failed on setup with &amp;quot;ValueError: Some error during setup&amp;quot;&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id168">
<h5>Bug Fixes<a class="headerlink" href="#id168" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1120">issue #1120</a>: Fix issue where directories from <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a> are not removed properly when multiple instances of pytest are running in parallel.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4583">issue #4583</a>: Prevent crashing and provide a user-friendly error when a marker expression (<code class="docutils literal notranslate"><span class="pre">-m</span></code>) invoking of <a class="reference external" href="https://docs.python.org/3/library/functions.html#eval" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> raises any exception.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4677">issue #4677</a>: The path shown in the summary report for SKIPPED tests is now always relative. Previously it was sometimes absolute.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5456">issue #5456</a>: Fix a possible race condition when trying to remove lock files used to control access to folders
created by <a class="reference internal" href="contents.html#std-fixture-tmp_path"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmp_path</span></code></a> and <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6240">issue #6240</a>: Fixes an issue where logging during collection step caused duplication of log
messages to stderr.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6428">issue #6428</a>: Paths appearing in error messages are now correct in case the current working directory has
changed since the start of the session.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6755">issue #6755</a>: Support deleting paths longer than 260 characters on windows created inside <a class="reference internal" href="contents.html#std-fixture-tmpdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">tmpdir</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6871">issue #6871</a>: Fix crash with captured output when using <a class="reference internal" href="contents.html#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6909">issue #6909</a>: Revert the change introduced by <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/6330">pull request #6330</a>, which required all arguments to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> to be explicitly defined in the function signature.</p>
<p>The intention of the original change was to remove what was expected to be an unintended/surprising behavior, but it turns out many people relied on it, so the restriction has been reverted.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6910">issue #6910</a>: Fix crash when plugins return an unknown stats while using the <code class="docutils literal notranslate"><span class="pre">--reportlog</span></code> option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6924">issue #6924</a>: Ensure a <code class="docutils literal notranslate"><span class="pre">unittest.IsolatedAsyncioTestCase</span></code> is actually awaited.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6925">issue #6925</a>: Fix <code class="docutils literal notranslate"><span class="pre">TerminalRepr</span></code> instances to be hashable again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6947">issue #6947</a>: Fix regression where functions registered with <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.addCleanup" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.addCleanup()</span></code></a> were not being called on test failures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6951">issue #6951</a>: Allow users to still set the deprecated <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> attribute.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6956">issue #6956</a>: Prevent pytest from printing <code class="docutils literal notranslate"><span class="pre">ConftestImportFailure</span></code> traceback to stdout.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6991">issue #6991</a>: Fix regressions with <code class="docutils literal notranslate"><span class="pre">--lf</span></code> filtering too much since pytest 5.4.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6992">issue #6992</a>: Revert “tmpdir: clean up indirection via config for factories” <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6767">issue #6767</a> as it breaks pytest-xdist.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7061">issue #7061</a>: When a yielding fixture fails to yield a value, report a test setup error instead of crashing.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7076">issue #7076</a>: The path of file skipped by <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> in the SKIPPED report is now relative to invocation directory. Previously it was relative to root directory.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7110">issue #7110</a>: Fixed regression: <code class="docutils literal notranslate"><span class="pre">asyncbase.TestCase</span></code> tests are executed correctly again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7126">issue #7126</a>: <code class="docutils literal notranslate"><span class="pre">--setup-show</span></code> now doesn’t raise an error when a bytes value is used as a <code class="docutils literal notranslate"><span class="pre">parametrize</span></code>
parameter when Python is called with the <code class="docutils literal notranslate"><span class="pre">-bb</span></code> flag.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7143">issue #7143</a>: Fix <code class="xref py py-meth docutils literal notranslate"><span class="pre">pytest.File.from_parent()</span></code> so it forwards extra keyword arguments to the constructor.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7145">issue #7145</a>: Classes with broken <code class="docutils literal notranslate"><span class="pre">__getattribute__</span></code> methods are displayed correctly during failures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7150">issue #7150</a>: Prevent hiding the underlying exception when <code class="docutils literal notranslate"><span class="pre">ConfTestImportFailure</span></code> is raised.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7180">issue #7180</a>: Fix <code class="docutils literal notranslate"><span class="pre">_is_setup_py</span></code> for files encoded differently than locale.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7215">issue #7215</a>: Fix regression where running with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> would call <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.tearDown" title="(in Python v3.10)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unittest.TestCase.tearDown()</span></code></a> for skipped tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7253">issue #7253</a>: When using <code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code> on a function directly, as in <code class="docutils literal notranslate"><span class="pre">pytest.fixture(func)</span></code>,
if the <code class="docutils literal notranslate"><span class="pre">autouse</span></code> or <code class="docutils literal notranslate"><span class="pre">params</span></code> arguments are also passed, the function is no longer
ignored, but is marked as a fixture.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7360">issue #7360</a>: Fix possibly incorrect evaluation of string expressions passed to <code class="docutils literal notranslate"><span class="pre">pytest.mark.skipif</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code>,
in rare circumstances where the exact same string is used but refers to different global values.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7383">issue #7383</a>: Fixed exception causes all over the codebase, i.e. use <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">new_exception</span> <span class="pre">from</span> <span class="pre">old_exception</span></code> when wrapping an exception.</p></li>
</ul>
</div>
<div class="section" id="id169">
<h5>Improved Documentation<a class="headerlink" href="#id169" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7202">issue #7202</a>: The development guide now links to the contributing section of the docs and <code class="docutils literal notranslate"><span class="pre">RELEASING.rst</span></code> on GitHub.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7233">issue #7233</a>: Add a note about <code class="docutils literal notranslate"><span class="pre">--strict</span></code> and <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> and the preference for the latter one.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7345">issue #7345</a>: Explain indirect parametrization and markers for fixtures.</p></li>
</ul>
</div>
<div class="section" id="id170">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id170" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7035">issue #7035</a>: The <code class="docutils literal notranslate"><span class="pre">originalname</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">_pytest.python.Function</span></code> now defaults to <code class="docutils literal notranslate"><span class="pre">name</span></code> if not
provided explicitly, and is always set.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7264">issue #7264</a>: The dependency on the <code class="docutils literal notranslate"><span class="pre">wcwidth</span></code> package has been removed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7291">issue #7291</a>: Replaced <code class="docutils literal notranslate"><span class="pre">py.iniconfig</span></code> with <a class="reference external" href="https://pypi.org/project/iniconfig/">iniconfig</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7295">issue #7295</a>: <code class="docutils literal notranslate"><span class="pre">src/_pytest/config/__init__.py</span></code> now uses the <code class="docutils literal notranslate"><span class="pre">warnings</span></code> module to report warnings instead of <code class="docutils literal notranslate"><span class="pre">sys.stderr.write</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7356">issue #7356</a>: Remove last internal uses of deprecated <em>slave</em> term from old <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7357">issue #7357</a>: <code class="docutils literal notranslate"><span class="pre">py</span></code>&gt;=1.8.2 is now required.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-4-3-2020-06-02">
<h4>pytest 5.4.3 (2020-06-02)<a class="headerlink" href="#pytest-5-4-3-2020-06-02" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id171">
<h5>Bug Fixes<a class="headerlink" href="#id171" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6428">issue #6428</a>: Paths appearing in error messages are now correct in case the current working directory has
changed since the start of the session.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6755">issue #6755</a>: Support deleting paths longer than 260 characters on windows created inside tmpdir.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6956">issue #6956</a>: Prevent pytest from printing ConftestImportFailure traceback to stdout.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7150">issue #7150</a>: Prevent hiding the underlying exception when <code class="docutils literal notranslate"><span class="pre">ConfTestImportFailure</span></code> is raised.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7215">issue #7215</a>: Fix regression where running with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> would call the <code class="docutils literal notranslate"><span class="pre">tearDown</span></code> methods of <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>
subclasses for skipped tests.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-4-2-2020-05-08">
<h4>pytest 5.4.2 (2020-05-08)<a class="headerlink" href="#pytest-5-4-2-2020-05-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id172">
<h5>Bug Fixes<a class="headerlink" href="#id172" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6871">issue #6871</a>: Fix crash with captured output when using the <a class="reference internal" href="contents.html#std-fixture-capsysbinary"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">capsysbinary</span> <span class="pre">fixture</span></code></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6924">issue #6924</a>: Ensure a <code class="docutils literal notranslate"><span class="pre">unittest.IsolatedAsyncioTestCase</span></code> is actually awaited.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6925">issue #6925</a>: Fix TerminalRepr instances to be hashable again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6947">issue #6947</a>: Fix regression where functions registered with <code class="docutils literal notranslate"><span class="pre">TestCase.addCleanup</span></code> were not being called on test failures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6951">issue #6951</a>: Allow users to still set the deprecated <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> attribute.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6992">issue #6992</a>: Revert “tmpdir: clean up indirection via config for factories” #6767 as it breaks pytest-xdist.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7110">issue #7110</a>: Fixed regression: <code class="docutils literal notranslate"><span class="pre">asyncbase.TestCase</span></code> tests are executed correctly again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7143">issue #7143</a>: Fix <code class="docutils literal notranslate"><span class="pre">File.from_parent</span></code> so it forwards extra keyword arguments to the constructor.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7145">issue #7145</a>: Classes with broken <code class="docutils literal notranslate"><span class="pre">__getattribute__</span></code> methods are displayed correctly during failures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7180">issue #7180</a>: Fix <code class="docutils literal notranslate"><span class="pre">_is_setup_py</span></code> for files encoded differently than locale.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-4-1-2020-03-13">
<h4>pytest 5.4.1 (2020-03-13)<a class="headerlink" href="#pytest-5-4-1-2020-03-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id173">
<h5>Bug Fixes<a class="headerlink" href="#id173" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6909">issue #6909</a>: Revert the change introduced by <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/6330">pull request #6330</a>, which required all arguments to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> to be explicitly defined in the function signature.</p>
<p>The intention of the original change was to remove what was expected to be an unintended/surprising behavior, but it turns out many people relied on it, so the restriction has been reverted.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6910">issue #6910</a>: Fix crash when plugins return an unknown stats while using the <code class="docutils literal notranslate"><span class="pre">--reportlog</span></code> option.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-4-0-2020-03-12">
<h4>pytest 5.4.0 (2020-03-12)<a class="headerlink" href="#pytest-5-4-0-2020-03-12" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id174">
<h5>Breaking Changes<a class="headerlink" href="#id174" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6316">issue #6316</a>: Matching of <code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">EXPRESSION</span></code> to test names is now case-insensitive.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6443">issue #6443</a>: Plugins specified with <code class="docutils literal notranslate"><span class="pre">-p</span></code> are now loaded after internal plugins, which results in their hooks being called <em>before</em> the internal ones.</p>
<p>This makes the <code class="docutils literal notranslate"><span class="pre">-p</span></code> behavior consistent with <code class="docutils literal notranslate"><span class="pre">PYTEST_PLUGINS</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6637">issue #6637</a>: Removed the long-deprecated <code class="docutils literal notranslate"><span class="pre">pytest_itemstart</span></code> hook.</p>
<p>This hook has been marked as deprecated and not been even called by pytest for over 10 years now.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6673">issue #6673</a>: Reversed / fix meaning of “+/-” in error diffs.  “-” means that sth. expected is missing in the result and “+” means that there are unexpected extras in the result.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6737">issue #6737</a>: The <code class="docutils literal notranslate"><span class="pre">cached_result</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">FixtureDef</span></code> is now set to <code class="docutils literal notranslate"><span class="pre">None</span></code> when
the result is unavailable, instead of being deleted.</p>
<p>If your plugin performs checks like <code class="docutils literal notranslate"><span class="pre">hasattr(fixturedef,</span> <span class="pre">'cached_result')</span></code>,
for example in a <code class="docutils literal notranslate"><span class="pre">pytest_fixture_post_finalizer</span></code> hook implementation, replace
it with <code class="docutils literal notranslate"><span class="pre">fixturedef.cached_result</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code>. If you <code class="docutils literal notranslate"><span class="pre">del</span></code> the attribute,
set it to <code class="docutils literal notranslate"><span class="pre">None</span></code> instead.</p>
</li>
</ul>
</div>
<div class="section" id="id175">
<h5>Deprecations<a class="headerlink" href="#id175" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3238">issue #3238</a>: Option <code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code> is deprecated and meant to be removed in a future release. If you use <code class="docutils literal notranslate"><span class="pre">--no-print-logs</span></code>, please try out <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> and
provide feedback.</p>
<p><code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> command-line option was added in <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">3.5.0</span></code> and allows to specify how to
display captured output when tests fail: <code class="docutils literal notranslate"><span class="pre">no</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>, <code class="docutils literal notranslate"><span class="pre">log</span></code> or <code class="docutils literal notranslate"><span class="pre">all</span></code> (the default).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/571">issue #571</a>: Deprecate the unused/broken <code class="docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code> hook.
It was misaligned since the removal of the <code class="docutils literal notranslate"><span class="pre">Directory</span></code> collector in 2010
and incorrect/unusable as soon as collection was split from test execution.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5975">issue #5975</a>: Deprecate using direct constructors for <code class="docutils literal notranslate"><span class="pre">Nodes</span></code>.</p>
<p>Instead they are now constructed via <code class="docutils literal notranslate"><span class="pre">Node.from_parent</span></code>.</p>
<p>This transitional mechanism enables us to untangle the very intensely
entangled <code class="docutils literal notranslate"><span class="pre">Node</span></code> relationships by enforcing more controlled creation/configuration patterns.</p>
<p>As part of this change, session/config are already disallowed parameters and as we work on the details we might need disallow a few more as well.</p>
<p>Subclasses are expected to use <code class="docutils literal notranslate"><span class="pre">super().from_parent</span></code> if they intend to expand the creation of <code class="docutils literal notranslate"><span class="pre">Nodes</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6779">issue #6779</a>: The <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> attribute has been deprecated and should no longer be used. This
was inadvertently exposed as part of the public API of that plugin and ties it too much
with <code class="docutils literal notranslate"><span class="pre">py.io.TerminalWriter</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id176">
<h5>Features<a class="headerlink" href="#id176" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4597">issue #4597</a>: New <a class="reference internal" href="contents.html#capture-method"><span class="std std-ref">–capture=tee-sys</span></a> option to allow both live printing and capturing of test output.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5712">issue #5712</a>: Now all arguments to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> need to be explicitly declared in the function signature or via <code class="docutils literal notranslate"><span class="pre">indirect</span></code>.
Previously it was possible to omit an argument if a fixture with the same name existed, which was just an accident of implementation and was not meant to be a part of the API.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6454">issue #6454</a>: Changed default for <code class="docutils literal notranslate"><span class="pre">-r</span></code> to <code class="docutils literal notranslate"><span class="pre">fE</span></code>, which displays failures and errors in the <a class="reference internal" href="contents.html#pytest-detailed-failed-tests-usage"><span class="std std-ref">short test summary</span></a>.  <code class="docutils literal notranslate"><span class="pre">-rN</span></code> can be used to disable it (the old behavior).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6469">issue #6469</a>: New options have been added to the <a class="reference internal" href="contents.html#confval-junit_logging"><code class="xref std std-confval docutils literal notranslate"><span class="pre">junit_logging</span></code></a> option: <code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">out-err</span></code>, and <code class="docutils literal notranslate"><span class="pre">all</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6834">issue #6834</a>: Excess warning summaries are now collapsed per file to ensure readable display of warning summaries.</p></li>
</ul>
</div>
<div class="section" id="id177">
<h5>Improvements<a class="headerlink" href="#id177" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1857">issue #1857</a>: <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> accepts integers for <code class="docutils literal notranslate"><span class="pre">ids</span></code> again, converting it to strings.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/449">issue #449</a>: Use “yellow” main color with any XPASSED tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4639">issue #4639</a>: Revert “A warning is now issued when assertions are made for <code class="docutils literal notranslate"><span class="pre">None</span></code>”.</p>
<p>The warning proved to be less useful than initially expected and had quite a
few false positive cases.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5686">issue #5686</a>: <code class="docutils literal notranslate"><span class="pre">tmpdir_factory.mktemp</span></code> now fails when given absolute and non-normalized paths.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5984">issue #5984</a>: The <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook now receives a <code class="docutils literal notranslate"><span class="pre">location</span></code> parameter with the code location that generated the warning.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6213">issue #6213</a>: pytester: the <code class="docutils literal notranslate"><span class="pre">testdir</span></code> fixture respects environment settings from the <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture for inner runs.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6247">issue #6247</a>: <code class="docutils literal notranslate"><span class="pre">--fulltrace</span></code> is honored with collection errors.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6384">issue #6384</a>: Make <code class="docutils literal notranslate"><span class="pre">--showlocals</span></code> work also with <code class="docutils literal notranslate"><span class="pre">--tb=short</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6653">issue #6653</a>: Add support for matching lines consecutively with <code class="xref py py-attr docutils literal notranslate"><span class="pre">LineMatcher</span></code>’s <code class="xref py py-func docutils literal notranslate"><span class="pre">fnmatch_lines()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">re_match_lines()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6658">issue #6658</a>: Code is now highlighted in tracebacks when <code class="docutils literal notranslate"><span class="pre">pygments</span></code> is installed.</p>
<p>Users are encouraged to install <code class="docutils literal notranslate"><span class="pre">pygments</span></code> into their environment and provide feedback, because
the plan is to make <code class="docutils literal notranslate"><span class="pre">pygments</span></code> a regular dependency in the future.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6795">issue #6795</a>: Import usage error message with invalid <code class="docutils literal notranslate"><span class="pre">-o</span></code> option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/759">issue #759</a>: <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> supports iterators and generators for <code class="docutils literal notranslate"><span class="pre">ids</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id178">
<h5>Bug Fixes<a class="headerlink" href="#id178" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/310">issue #310</a>: Add support for calling <code class="docutils literal notranslate"><span class="pre">pytest.xfail()</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest.importorskip()</span></code> with doctests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3823">issue #3823</a>: <code class="docutils literal notranslate"><span class="pre">--trace</span></code> now works with unittests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4445">issue #4445</a>: Fixed some warning reports produced by pytest to point to the correct location of the warning in the user’s code.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5301">issue #5301</a>: Fix <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> to collect new tests from files with known failures.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5928">issue #5928</a>: Report <code class="docutils literal notranslate"><span class="pre">PytestUnknownMarkWarning</span></code> at the level of the user’s code, not <code class="docutils literal notranslate"><span class="pre">pytest</span></code>’s.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5991">issue #5991</a>: Fix interaction with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> and unittests: do not use unittest’s <code class="docutils literal notranslate"><span class="pre">TestCase.debug()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6334">issue #6334</a>: Fix summary entries appearing twice when <code class="docutils literal notranslate"><span class="pre">f/F</span></code> and <code class="docutils literal notranslate"><span class="pre">s/S</span></code> report chars were used at the same time in the <code class="docutils literal notranslate"><span class="pre">-r</span></code> command-line option (for example <code class="docutils literal notranslate"><span class="pre">-rFf</span></code>).</p>
<p>The upper case variants were never documented and the preferred form should be the lower case.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6409">issue #6409</a>: Fallback to green (instead of yellow) for non-last items without previous passes with colored terminal progress indicator.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6454">issue #6454</a>: <code class="docutils literal notranslate"><span class="pre">--disable-warnings</span></code> is honored with <code class="docutils literal notranslate"><span class="pre">-ra</span></code> and <code class="docutils literal notranslate"><span class="pre">-rA</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6497">issue #6497</a>: Fix bug in the comparison of request key with cached key in fixture.</p>
<p>A construct <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">key</span> <span class="pre">==</span> <span class="pre">cached_key:</span></code> can fail either because <code class="docutils literal notranslate"><span class="pre">==</span></code> is explicitly disallowed, or for, e.g., NumPy arrays, where the result of <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code> cannot generally be converted to <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>.
The implemented fix replaces <code class="docutils literal notranslate"><span class="pre">==</span></code> with <code class="docutils literal notranslate"><span class="pre">is</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6557">issue #6557</a>: Make capture output streams <code class="docutils literal notranslate"><span class="pre">.write()</span></code> method return the same return value from original streams.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6566">issue #6566</a>: Fix <code class="docutils literal notranslate"><span class="pre">EncodedFile.writelines</span></code> to call the underlying buffer’s <code class="docutils literal notranslate"><span class="pre">writelines</span></code> method.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6575">issue #6575</a>: Fix internal crash when <code class="docutils literal notranslate"><span class="pre">faulthandler</span></code> starts initialized
(for example with <code class="docutils literal notranslate"><span class="pre">PYTHONFAULTHANDLER=1</span></code> environment variable set) and <code class="docutils literal notranslate"><span class="pre">faulthandler_timeout</span></code> defined
in the configuration file.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6597">issue #6597</a>: Fix node ids which contain a parametrized empty-string variable.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6646">issue #6646</a>: Assertion rewriting hooks are (re)stored for the current item, which fixes them being still used after e.g. pytester’s <code class="xref py py-func docutils literal notranslate"><span class="pre">testdir.runpytest</span></code> etc.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6660">issue #6660</a>: <a class="reference internal" href="contents.html#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a> is handled when emitted from the <a class="reference internal" href="contents.html#std-hook-pytest_sessionfinish"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_sessionfinish</span></code></a> hook.  This includes quitting from a debugger.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6752">issue #6752</a>: When <a class="reference internal" href="contents.html#pytest.raises" title="pytest.raises"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.raises()</span></code></a> is used as a function (as opposed to a context manager),
a <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword argument is now passed through to the tested function. Previously
it was swallowed and ignored (regression in pytest 5.1.0).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6801">issue #6801</a>: Do not display empty lines in between traceback for unexpected exceptions with doctests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6802">issue #6802</a>: The <a class="reference internal" href="contents.html#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span> <span class="pre">fixture</span></code></a> works within doctests now.</p></li>
</ul>
</div>
<div class="section" id="id179">
<h5>Improved Documentation<a class="headerlink" href="#id179" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6696">issue #6696</a>: Add list of fixtures to start of fixture chapter.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6742">issue #6742</a>: Expand first sentence on fixtures into a paragraph.</p></li>
</ul>
</div>
<div class="section" id="id180">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id180" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6404">issue #6404</a>: Remove usage of <code class="docutils literal notranslate"><span class="pre">parser</span></code> module, deprecated in Python 3.9.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-5-2020-01-29">
<h4>pytest 5.3.5 (2020-01-29)<a class="headerlink" href="#pytest-5-3-5-2020-01-29" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id181">
<h5>Bug Fixes<a class="headerlink" href="#id181" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6517">issue #6517</a>: Fix regression in pytest 5.3.4 causing an INTERNALERROR due to a wrong assertion.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-4-2020-01-20">
<h4>pytest 5.3.4 (2020-01-20)<a class="headerlink" href="#pytest-5-3-4-2020-01-20" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id182">
<h5>Bug Fixes<a class="headerlink" href="#id182" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6496">issue #6496</a>: Revert <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6436">issue #6436</a>: unfortunately this change has caused a number of regressions in many suites,
so the team decided to revert this change and make a new release while we continue to look for a solution.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-3-2020-01-16">
<h4>pytest 5.3.3 (2020-01-16)<a class="headerlink" href="#pytest-5-3-3-2020-01-16" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id183">
<h5>Bug Fixes<a class="headerlink" href="#id183" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2780">issue #2780</a>: Captured output during teardown is shown with <code class="docutils literal notranslate"><span class="pre">-rP</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5971">issue #5971</a>: Fix a <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> crash when dealing with exceptions raised in subprocesses created by the
<code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> module.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6436">issue #6436</a>: <a class="reference internal" href="contents.html#pytest.fixtures.FixtureDef" title="_pytest.fixtures.FixtureDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">FixtureDef</span></code></a> objects now properly register their finalizers with autouse and
parameterized fixtures that execute before them in the fixture stack so they are torn
down at the right times, and in the right order.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6532">issue #6532</a>: Fix parsing of outcomes containing multiple errors with <code class="docutils literal notranslate"><span class="pre">testdir</span></code> results (regression in 5.3.0).</p></li>
</ul>
</div>
<div class="section" id="id184">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id184" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6350">issue #6350</a>: Optimized automatic renaming of test parameter IDs.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-2-2019-12-13">
<h4>pytest 5.3.2 (2019-12-13)<a class="headerlink" href="#pytest-5-3-2-2019-12-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id185">
<h5>Improvements<a class="headerlink" href="#id185" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4639">issue #4639</a>: Revert “A warning is now issued when assertions are made for <code class="docutils literal notranslate"><span class="pre">None</span></code>”.</p>
<p>The warning proved to be less useful than initially expected and had quite a
few false positive cases.</p>
</li>
</ul>
</div>
<div class="section" id="id186">
<h5>Bug Fixes<a class="headerlink" href="#id186" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5430">issue #5430</a>: junitxml: Logs for failed test are now passed to junit report in case the test fails during call phase.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6290">issue #6290</a>: The supporting files in the <code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> directory are kept with <code class="docutils literal notranslate"><span class="pre">--cache-clear</span></code>, which only clears cached values now.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6301">issue #6301</a>: Fix assertion rewriting for egg-based distributions and <code class="docutils literal notranslate"><span class="pre">editable</span></code> installs (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--editable</span></code>).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-1-2019-11-25">
<h4>pytest 5.3.1 (2019-11-25)<a class="headerlink" href="#pytest-5-3-1-2019-11-25" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id187">
<h5>Improvements<a class="headerlink" href="#id187" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6231">issue #6231</a>: Improve check for misspelling of <a class="reference internal" href="contents.html#pytest-mark-parametrize-ref"><span class="std std-ref">pytest.mark.parametrize</span></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6257">issue #6257</a>: Handle <a class="reference internal" href="contents.html#pytest.exit" title="pytest.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">pytest.exit()</span></code></a> being used via <a class="reference internal" href="contents.html#std-hook-pytest_internalerror"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_internalerror</span></code></a>, e.g. when quitting pdb from post mortem.</p></li>
</ul>
</div>
<div class="section" id="id188">
<h5>Bug Fixes<a class="headerlink" href="#id188" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5914">issue #5914</a>: pytester: fix <code class="xref py py-func docutils literal notranslate"><span class="pre">no_fnmatch_line()</span></code> when used after positive matching.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6082">issue #6082</a>: Fix line detection for doctest samples inside <a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">property</span></code></a> docstrings, as a workaround to <a class="reference external" href="https://bugs.python.org/issue17446">bpo-17446</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6254">issue #6254</a>: Fix compatibility with pytest-parallel (regression in pytest 5.3.0).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6255">issue #6255</a>: Clear the <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.last_traceback" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.last_traceback</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.last_type" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.last_type</span></code></a>
and <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.last_value" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.last_value</span></code></a> attributes by deleting them instead
of setting them to <code class="docutils literal notranslate"><span class="pre">None</span></code>. This better matches the behaviour of
the Python standard library.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-3-0-2019-11-19">
<h4>pytest 5.3.0 (2019-11-19)<a class="headerlink" href="#pytest-5-3-0-2019-11-19" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id189">
<h5>Deprecations<a class="headerlink" href="#id189" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6179">issue #6179</a>: The default value of <a class="reference internal" href="contents.html#confval-junit_family"><code class="xref std std-confval docutils literal notranslate"><span class="pre">junit_family</span></code></a> option will change to <code class="docutils literal notranslate"><span class="pre">&quot;xunit2&quot;</span></code> in pytest 6.0, given
that this is the version supported by default in modern tools that manipulate this type of file.</p>
<p>In order to smooth the transition, pytest will issue a warning in case the <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> option
is given in the command line but <a class="reference internal" href="contents.html#confval-junit_family"><code class="xref std std-confval docutils literal notranslate"><span class="pre">junit_family</span></code></a> is not explicitly configured in <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>.</p>
<p>For more information, <a class="reference internal" href="contents.html#junit-family-changed-default-value"><span class="std std-ref">see the docs</span></a>.</p>
</li>
</ul>
</div>
<div class="section" id="id190">
<h5>Features<a class="headerlink" href="#id190" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4488">issue #4488</a>: The pytest team has created the <a class="reference external" href="https://github.com/pytest-dev/pytest-reportlog">pytest-reportlog</a>
plugin, which provides a new <code class="docutils literal notranslate"><span class="pre">--report-log=FILE</span></code> option that writes <em>report logs</em> into a file as the test session executes.</p>
<p>Each line of the report log contains a self contained JSON object corresponding to a testing event,
such as a collection or a test result report. The file is guaranteed to be flushed after writing
each line, so systems can read and process events in real-time.</p>
<p>The plugin is meant to replace the <code class="docutils literal notranslate"><span class="pre">--resultlog</span></code> option, which is deprecated and meant to be removed
in a future release. If you use <code class="docutils literal notranslate"><span class="pre">--resultlog</span></code>, please try out <code class="docutils literal notranslate"><span class="pre">pytest-reportlog</span></code> and
provide feedback.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4730">issue #4730</a>: When <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.pycache_prefix" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.pycache_prefix</span></code></a> (Python 3.8+) is set, it will be used by pytest to cache test files changed by the assertion rewriting mechanism.</p>
<p>This makes it easier to benefit of cached <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files even on file systems without permissions.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5515">issue #5515</a>: Allow selective auto-indentation of multiline log messages.</p>
<p>Adds command line option <code class="docutils literal notranslate"><span class="pre">--log-auto-indent</span></code>, config option
<a class="reference internal" href="contents.html#confval-log_auto_indent"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_auto_indent</span></code></a> and support for per-entry configuration of
indentation behavior on calls to <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.log" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">logging.log()</span></code></a>.</p>
<p>Alters the default for auto-indention from <code class="docutils literal notranslate"><span class="pre">&quot;on&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;off&quot;</span></code>. This
restores the older behavior that existed prior to v4.6.0. This
reversion to earlier behavior was done because it is better to
activate new features that may lead to broken tests explicitly
rather than implicitly.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5914">issue #5914</a>: <a class="reference internal" href="contents.html#std-fixture-testdir"><code class="xref std std-fixture docutils literal notranslate"><span class="pre">testdir</span></code></a> learned two new functions, <code class="xref py py-func docutils literal notranslate"><span class="pre">no_fnmatch_line()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">no_re_match_line()</span></code>.</p>
<p>The functions are used to ensure the captured text <em>does not</em> match the given
pattern.</p>
<p>The previous idiom was to use <a class="reference external" href="https://docs.python.org/3/library/re.html#re.match" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">re.match()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">testdir</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">str</span><span class="p">())</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
<p>Or the <code class="docutils literal notranslate"><span class="pre">in</span></code> operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">testdir</span><span class="o">.</span><span class="n">runpytest</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">str</span><span class="p">()</span>
</pre></div>
</div>
<p>But the new functions produce best output on failure.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6057">issue #6057</a>: Added tolerances to complex values when printing <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code>.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">repr(pytest.approx(3+4j))</span></code> returns <code class="docutils literal notranslate"><span class="pre">(3+4j)</span> <span class="pre">±</span> <span class="pre">5e-06</span> <span class="pre">∠</span> <span class="pre">±180°</span></code>. This is polar notation indicating a circle around the expected value, with a radius of 5e-06. For <code class="docutils literal notranslate"><span class="pre">approx</span></code> comparisons to return <code class="docutils literal notranslate"><span class="pre">True</span></code>, the actual value should fall within this circle.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6061">issue #6061</a>: Added the pluginmanager as an argument to <code class="docutils literal notranslate"><span class="pre">pytest_addoption</span></code>
so that hooks can be invoked when setting up command line options. This is
useful for having one plugin communicate things to another plugin,
such as default values or which set of command line options to add.</p></li>
</ul>
</div>
<div class="section" id="id191">
<h5>Improvements<a class="headerlink" href="#id191" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5061">issue #5061</a>: Use multiple colors with terminal summary statistics.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5630">issue #5630</a>: Quitting from debuggers is now properly handled in <code class="docutils literal notranslate"><span class="pre">doctest</span></code> items.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5924">issue #5924</a>: Improved verbose diff output with sequences.</p>
<p>Before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E</span>   <span class="ne">AssertionError</span><span class="p">:</span> <span class="k">assert</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;...version_info&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;...version&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="n">E</span>     <span class="n">Right</span> <span class="n">contains</span> <span class="mi">3</span> <span class="n">more</span> <span class="n">items</span><span class="p">,</span> <span class="n">first</span> <span class="n">extra</span> <span class="n">item</span><span class="p">:</span> <span class="s1">&#39; &#39;</span>
<span class="n">E</span>     <span class="n">Full</span> <span class="n">diff</span><span class="p">:</span>
<span class="n">E</span>     <span class="o">-</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;version_info&#39;</span><span class="p">,</span> <span class="s1">&#39;sys.version&#39;</span><span class="p">,</span> <span class="s1">&#39;sys.version_info&#39;</span><span class="p">]</span>
<span class="n">E</span>     <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;version_info&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version_info&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39; &#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version_info&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>After:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E</span>   <span class="ne">AssertionError</span><span class="p">:</span> <span class="k">assert</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;...version_info&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;...version&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="n">E</span>     <span class="n">Right</span> <span class="n">contains</span> <span class="mi">3</span> <span class="n">more</span> <span class="n">items</span><span class="p">,</span> <span class="n">first</span> <span class="n">extra</span> <span class="n">item</span><span class="p">:</span> <span class="s1">&#39; &#39;</span>
<span class="n">E</span>     <span class="n">Full</span> <span class="n">diff</span><span class="p">:</span>
<span class="n">E</span>       <span class="p">[</span>
<span class="n">E</span>        <span class="s1">&#39;version&#39;</span><span class="p">,</span>
<span class="n">E</span>        <span class="s1">&#39;version_info&#39;</span><span class="p">,</span>
<span class="n">E</span>        <span class="s1">&#39;sys.version&#39;</span><span class="p">,</span>
<span class="n">E</span>        <span class="s1">&#39;sys.version_info&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39; &#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version&#39;</span><span class="p">,</span>
<span class="n">E</span>     <span class="o">+</span>  <span class="s1">&#39;sys.version_info&#39;</span><span class="p">,</span>
<span class="n">E</span>       <span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5934">issue #5934</a>: <code class="docutils literal notranslate"><span class="pre">repr</span></code> of <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> objects has been improved to honor the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> method of the underlying exception.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5936">issue #5936</a>: Display untruncated assertion message with <code class="docutils literal notranslate"><span class="pre">-vv</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5990">issue #5990</a>: Fixed plurality mismatch in test summary (e.g. display “1 error” instead of “1 errors”).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6008">issue #6008</a>: <code class="docutils literal notranslate"><span class="pre">Config.InvocationParams.args</span></code> is now always a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> to better convey that it should be
immutable and avoid accidental modifications.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6023">issue #6023</a>: <code class="docutils literal notranslate"><span class="pre">pytest.main</span></code> returns a <code class="docutils literal notranslate"><span class="pre">pytest.ExitCode</span></code> instance now, except for when custom exit codes are used (where it returns <code class="docutils literal notranslate"><span class="pre">int</span></code> then still).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6026">issue #6026</a>: Align prefixes in output of pytester’s <code class="docutils literal notranslate"><span class="pre">LineMatcher</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6059">issue #6059</a>: Collection errors are reported as errors (and not failures like before) in the terminal’s short test summary.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6069">issue #6069</a>: <code class="docutils literal notranslate"><span class="pre">pytester.spawn</span></code> does not skip/xfail tests on FreeBSD anymore unconditionally.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6097">issue #6097</a>: The “[…%]” indicator in the test summary is now colored according to the final (new) multi-colored line’s main color.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6116">issue #6116</a>: Added <code class="docutils literal notranslate"><span class="pre">--co</span></code> as a synonym to <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6148">issue #6148</a>: <code class="docutils literal notranslate"><span class="pre">atomicwrites</span></code> is now only used on Windows, fixing a performance regression with assertion rewriting on Unix.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6152">issue #6152</a>: Now parametrization will use the <code class="docutils literal notranslate"><span class="pre">__name__</span></code> attribute of any object for the id, if present. Previously it would only use <code class="docutils literal notranslate"><span class="pre">__name__</span></code> for functions and classes.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6176">issue #6176</a>: Improved failure reporting with pytester’s <code class="docutils literal notranslate"><span class="pre">Hookrecorder.assertoutcome</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6181">issue #6181</a>: The reason for a stopped session, e.g. with <code class="docutils literal notranslate"><span class="pre">--maxfail</span></code> / <code class="docutils literal notranslate"><span class="pre">-x</span></code>, now gets reported in the test summary.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6206">issue #6206</a>: Improved <code class="docutils literal notranslate"><span class="pre">cache.set</span></code> robustness and performance.</p></li>
</ul>
</div>
<div class="section" id="id192">
<h5>Bug Fixes<a class="headerlink" href="#id192" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2049">issue #2049</a>: Fixed <code class="docutils literal notranslate"><span class="pre">--setup-plan</span></code> showing inaccurate information about fixture lifetimes.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2548">issue #2548</a>: Fixed line offset mismatch of skipped tests in terminal summary.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6039">issue #6039</a>: The <code class="docutils literal notranslate"><span class="pre">PytestDoctestRunner</span></code> is now properly invalidated when unconfiguring the doctest plugin.</p>
<p>This is important when used with <code class="docutils literal notranslate"><span class="pre">pytester</span></code>’s <code class="docutils literal notranslate"><span class="pre">runpytest_inprocess</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6047">issue #6047</a>: BaseExceptions are now handled in <code class="docutils literal notranslate"><span class="pre">saferepr</span></code>, which includes <code class="docutils literal notranslate"><span class="pre">pytest.fail.Exception</span></code> etc.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6074">issue #6074</a>: pytester: fixed order of arguments in <code class="docutils literal notranslate"><span class="pre">rm_rf</span></code> warning when cleaning up temporary directories, and do not emit warnings for errors with <code class="docutils literal notranslate"><span class="pre">os.open</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6189">issue #6189</a>: Fixed result of <code class="docutils literal notranslate"><span class="pre">getmodpath</span></code> method.</p></li>
</ul>
</div>
<div class="section" id="id193">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id193" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4901">issue #4901</a>: <code class="docutils literal notranslate"><span class="pre">RunResult</span></code> from <code class="docutils literal notranslate"><span class="pre">pytester</span></code> now displays the mnemonic of the <code class="docutils literal notranslate"><span class="pre">ret</span></code> attribute when it is a
valid <code class="docutils literal notranslate"><span class="pre">pytest.ExitCode</span></code> value.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-2-4-2019-11-15">
<h4>pytest 5.2.4 (2019-11-15)<a class="headerlink" href="#pytest-5-2-4-2019-11-15" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id194">
<h5>Bug Fixes<a class="headerlink" href="#id194" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6194">issue #6194</a>: Fix incorrect discovery of non-test <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6197">issue #6197</a>: Revert “The first test in a package (<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>) marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> is now correctly skipped.”.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-2-3-2019-11-14">
<h4>pytest 5.2.3 (2019-11-14)<a class="headerlink" href="#pytest-5-2-3-2019-11-14" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id195">
<h5>Bug Fixes<a class="headerlink" href="#id195" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5830">issue #5830</a>: The first test in a package (<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>) marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skip</span></code> is now correctly skipped.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6099">issue #6099</a>: Fix <code class="docutils literal notranslate"><span class="pre">--trace</span></code> when used with parametrized functions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6183">issue #6183</a>: Using <code class="docutils literal notranslate"><span class="pre">request</span></code> as a parameter name in <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> now produces a more
user-friendly error.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-2-2-2019-10-24">
<h4>pytest 5.2.2 (2019-10-24)<a class="headerlink" href="#pytest-5-2-2-2019-10-24" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id196">
<h5>Bug Fixes<a class="headerlink" href="#id196" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5206">issue #5206</a>: Fix <code class="docutils literal notranslate"><span class="pre">--nf</span></code> to not forget about known nodeids with partial test selection.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5906">issue #5906</a>: Fix crash with <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> during <code class="docutils literal notranslate"><span class="pre">--setup-show</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5946">issue #5946</a>: Fixed issue when parametrizing fixtures with numpy arrays (and possibly other sequence-like types).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6044">issue #6044</a>: Properly ignore <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> exceptions when trying to remove old temporary directories,
for instance when multiple processes try to remove the same directory (common with <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>
for example).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-2-1-2019-10-06">
<h4>pytest 5.2.1 (2019-10-06)<a class="headerlink" href="#pytest-5-2-1-2019-10-06" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id197">
<h5>Bug Fixes<a class="headerlink" href="#id197" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5902">issue #5902</a>: Fix warnings about deprecated <code class="docutils literal notranslate"><span class="pre">cmp</span></code> attribute in <code class="docutils literal notranslate"><span class="pre">attrs&gt;=19.2</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-2-0-2019-09-28">
<h4>pytest 5.2.0 (2019-09-28)<a class="headerlink" href="#pytest-5-2-0-2019-09-28" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id198">
<h5>Deprecations<a class="headerlink" href="#id198" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1682">issue #1682</a>: Passing arguments to pytest.fixture() as positional arguments is deprecated - pass them
as a keyword argument instead.</p></li>
</ul>
</div>
<div class="section" id="id199">
<h5>Features<a class="headerlink" href="#id199" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1682">issue #1682</a>: The <code class="docutils literal notranslate"><span class="pre">scope</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> can now be a callable that receives
the fixture name and the <code class="docutils literal notranslate"><span class="pre">config</span></code> object as keyword-only parameters.
See <a class="reference internal" href="contents.html#dynamic-scope"><span class="std std-ref">the docs</span></a> for more information.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5764">issue #5764</a>: New behavior of the <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> option: failures to connect to the pastebin server are reported, without failing the pytest run</p></li>
</ul>
</div>
<div class="section" id="id200">
<h5>Bug Fixes<a class="headerlink" href="#id200" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5806">issue #5806</a>: Fix “lexer” being used when uploading to bpaste.net from <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> to “text”.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5884">issue #5884</a>: Fix <code class="docutils literal notranslate"><span class="pre">--setup-only</span></code> and <code class="docutils literal notranslate"><span class="pre">--setup-show</span></code> for custom pytest items.</p></li>
</ul>
</div>
<div class="section" id="id201">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id201" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5056">issue #5056</a>: The HelpFormatter uses <code class="docutils literal notranslate"><span class="pre">py.io.get_terminal_width</span></code> for better width detection.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-1-3-2019-09-18">
<h4>pytest 5.1.3 (2019-09-18)<a class="headerlink" href="#pytest-5-1-3-2019-09-18" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id202">
<h5>Bug Fixes<a class="headerlink" href="#id202" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5807">issue #5807</a>: Fix pypy3.6 (nightly) on windows.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5811">issue #5811</a>: Handle <code class="docutils literal notranslate"><span class="pre">--fulltrace</span></code> correctly with <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5819">issue #5819</a>: Windows: Fix regression with conftest whose qualified name contains uppercase
characters (introduced by #5792).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-1-2-2019-08-30">
<h4>pytest 5.1.2 (2019-08-30)<a class="headerlink" href="#pytest-5-1-2-2019-08-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id203">
<h5>Bug Fixes<a class="headerlink" href="#id203" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2270">issue #2270</a>: Fixed <code class="docutils literal notranslate"><span class="pre">self</span></code> reference in function-scoped fixtures defined plugin classes: previously <code class="docutils literal notranslate"><span class="pre">self</span></code>
would be a reference to a <em>test</em> class, not the <em>plugin</em> class.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/570">issue #570</a>: Fixed long standing issue where fixture scope was not respected when indirect fixtures were used during
parametrization.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5782">issue #5782</a>: Fix decoding error when printing an error response from <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5786">issue #5786</a>: Chained exceptions in test and collection reports are now correctly serialized, allowing plugins like
<code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> to display them properly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5792">issue #5792</a>: Windows: Fix error that occurs in certain circumstances when loading
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> from a working directory that has casing other than the one stored
in the filesystem (e.g., <code class="docutils literal notranslate"><span class="pre">c:\test</span></code> instead of <code class="docutils literal notranslate"><span class="pre">C:\test</span></code>).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-1-1-2019-08-20">
<h4>pytest 5.1.1 (2019-08-20)<a class="headerlink" href="#pytest-5-1-1-2019-08-20" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id204">
<h5>Bug Fixes<a class="headerlink" href="#id204" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5751">issue #5751</a>: Fixed <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when importing pytest on Python 3.5.0 and 3.5.1.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-1-0-2019-08-15">
<h4>pytest 5.1.0 (2019-08-15)<a class="headerlink" href="#pytest-5-1-0-2019-08-15" title="Permalink to this headline">¶</a></h4>
<div class="section" id="removals">
<h5>Removals<a class="headerlink" href="#removals" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5180">issue #5180</a>: As per our policy, the following features have been deprecated in the 4.X series and are now
removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Request.getfuncargvalue</span></code>: use <code class="docutils literal notranslate"><span class="pre">Request.getfixturevalue</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code> no longer support strings as the second argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code> and <code class="docutils literal notranslate"><span class="pre">ParameterSet.param</span></code> now use native keyword-only
syntax. This might change the exception message from previous versions, but they still raise
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code> on unknown keyword arguments as before.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> global variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tmpdir_factory.ensuretemp</span></code> method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_logwarning</span></code> hook.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warning</span></code> warning type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request</span></code> is now a reserved name for fixtures.</p></li>
</ul>
<p>For more information consult <a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> in the docs.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5565">issue #5565</a>: Removed unused support code for <a class="reference external" href="https://pypi.org/project/unittest2/">unittest2</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">unittest2</span></code> backport module is no longer
necessary since Python 3.3+, and the small amount of code in pytest to support it also doesn’t seem
to be used: after removed, all tests still pass unchanged.</p>
<p>Although our policy is to introduce a deprecation period before removing any features or support
for third party libraries, because this code is apparently not used
at all (even if <code class="docutils literal notranslate"><span class="pre">unittest2</span></code> is used by a test suite executed by pytest), it was decided to
remove it in this release.</p>
<p>If you experience a regression because of this, please <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/new">file an issue</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5615">issue #5615</a>: <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.xfail</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest.skip</span></code> no longer support bytes for the message argument.</p>
<p>This was supported for Python 2 where it was tempting to use <code class="docutils literal notranslate"><span class="pre">&quot;message&quot;</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">u&quot;message&quot;</span></code>.</p>
<p>Python 3 code is unlikely to pass <code class="docutils literal notranslate"><span class="pre">bytes</span></code> to these functions. If you do,
please decode it to an <code class="docutils literal notranslate"><span class="pre">str</span></code> beforehand.</p>
</li>
</ul>
</div>
<div class="section" id="id205">
<h5>Features<a class="headerlink" href="#id205" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5564">issue #5564</a>: New <code class="docutils literal notranslate"><span class="pre">Config.invocation_args</span></code> attribute containing the unchanged arguments passed to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5576">issue #5576</a>: New <a class="reference internal" href="contents.html#using-doctest-options"><span class="std std-ref">NUMBER</span></a>
option for doctests to ignore irrelevant differences in floating-point numbers.
Inspired by Sébastien Boisgérault’s <a class="reference external" href="https://github.com/boisgera/numtest">numtest</a>
extension for doctest.</p></li>
</ul>
</div>
<div class="section" id="id206">
<h5>Improvements<a class="headerlink" href="#id206" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5471">issue #5471</a>: JUnit XML now includes a timestamp and hostname in the testsuite tag.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5707">issue #5707</a>: Time taken to run the test suite now includes a human-readable representation when it takes over
60 seconds, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">=====</span> <span class="mi">2</span> <span class="n">failed</span> <span class="ow">in</span> <span class="mf">102.70</span><span class="n">s</span> <span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">42</span><span class="p">)</span> <span class="o">=====</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id207">
<h5>Bug Fixes<a class="headerlink" href="#id207" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4344">issue #4344</a>: Fix RuntimeError/StopIteration when trying to collect package with “__init__.py” only.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5115">issue #5115</a>: Warnings issued during <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> are explicitly not treated as errors, even if configured as such, because it otherwise completely breaks pytest.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5477">issue #5477</a>: The XML file produced by <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> now correctly contain a <code class="docutils literal notranslate"><span class="pre">&lt;testsuites&gt;</span></code> root element.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5524">issue #5524</a>: Fix issue where <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> and <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> would not remove directories containing files marked as read-only,
which could lead to pytest crashing when executed a second time with the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5537">issue #5537</a>: Replace <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> backport with <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> from the
standard library on Python 3.8+.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5578">issue #5578</a>: Improve type checking for some exception-raising functions (<code class="docutils literal notranslate"><span class="pre">pytest.xfail</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.skip</span></code>, etc)
so they provide better error messages when users meant to use marks (for example <code class="docutils literal notranslate"><span class="pre">&#64;pytest.xfail</span></code>
instead of <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5606">issue #5606</a>: Fixed internal error when test functions were patched with objects that cannot be compared
for truth values against others, like <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5634">issue #5634</a>: <code class="docutils literal notranslate"><span class="pre">pytest.exit</span></code> is now correctly handled in <code class="docutils literal notranslate"><span class="pre">unittest</span></code> cases.
This makes <code class="docutils literal notranslate"><span class="pre">unittest</span></code> cases handle <code class="docutils literal notranslate"><span class="pre">quit</span></code> from pytest’s pdb correctly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5650">issue #5650</a>: Improved output when parsing an ini configuration file fails.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5701">issue #5701</a>: Fix collection of <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code> objects defined with <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5734">issue #5734</a>: Skip async generator test functions, and update the warning message to refer to <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> functions.</p></li>
</ul>
</div>
<div class="section" id="id208">
<h5>Improved Documentation<a class="headerlink" href="#id208" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5669">issue #5669</a>: Add docstring for <code class="docutils literal notranslate"><span class="pre">Testdir.copy_example</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id209">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id209" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5095">issue #5095</a>: XML files of the <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> family are now validated against the schema by pytest’s own test suite
to avoid future regressions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5516">issue #5516</a>: Cache node splitting function which can improve collection performance in very large test suites.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5603">issue #5603</a>: Simplified internal <code class="docutils literal notranslate"><span class="pre">SafeRepr</span></code> class and removed some dead code.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5664">issue #5664</a>: When invoking pytest’s own testsuite with <code class="docutils literal notranslate"><span class="pre">PYTHONDONTWRITEBYTECODE=1</span></code>,
the <code class="docutils literal notranslate"><span class="pre">test_xfail_handling</span></code> test no longer fails.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5684">issue #5684</a>: Replace manual handling of <code class="docutils literal notranslate"><span class="pre">OSError.errno</span></code> in the codebase by new <code class="docutils literal notranslate"><span class="pre">OSError</span></code> subclasses (<code class="docutils literal notranslate"><span class="pre">PermissionError</span></code>, <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code>, etc.).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-0-1-2019-07-04">
<h4>pytest 5.0.1 (2019-07-04)<a class="headerlink" href="#pytest-5-0-1-2019-07-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id210">
<h5>Bug Fixes<a class="headerlink" href="#id210" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5479">issue #5479</a>: Improve quoting in <code class="docutils literal notranslate"><span class="pre">raises</span></code> match failure message.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5523">issue #5523</a>: Fixed using multiple short options together in the command-line (for example <code class="docutils literal notranslate"><span class="pre">-vs</span></code>) in Python 3.8+.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5547">issue #5547</a>: <code class="docutils literal notranslate"><span class="pre">--step-wise</span></code> now handles <code class="docutils literal notranslate"><span class="pre">xfail(strict=True)</span></code> markers properly.</p></li>
</ul>
</div>
<div class="section" id="id211">
<h5>Improved Documentation<a class="headerlink" href="#id211" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5517">issue #5517</a>: Improve “Declaring new hooks” section in chapter “Writing Plugins”</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-5-0-0-2019-06-28">
<h4>pytest 5.0.0 (2019-06-28)<a class="headerlink" href="#pytest-5-0-0-2019-06-28" title="Permalink to this headline">¶</a></h4>
<div class="section" id="important">
<h5>Important<a class="headerlink" href="#important" title="Permalink to this headline">¶</a></h5>
<p>This release is a Python3.5+ only release.</p>
<p>For more details, see our <a class="reference external" href="https://docs.pytest.org/en/7.0.x/py27-py34-deprecation.html">Python 2.7 and 3.4 support plan</a>.</p>
</div>
<div class="section" id="id212">
<h5>Removals<a class="headerlink" href="#id212" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1149">issue #1149</a>: Pytest no longer accepts prefixes of command-line arguments, for example
typing <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--doctest-mod</span></code> inplace of <code class="docutils literal notranslate"><span class="pre">--doctest-modules</span></code>.
This was previously allowed where the <code class="docutils literal notranslate"><span class="pre">ArgumentParser</span></code> thought it was unambiguous,
but this could be incorrect due to delayed parsing of options for plugins.
See for example issues <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1149">issue #1149</a>,
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3413">issue #3413</a>, and
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4009">issue #4009</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5402">issue #5402</a>: <strong>PytestDeprecationWarning are now errors by default.</strong></p>
<p>Following our plan to remove deprecated features with as little disruption as
possible, all warnings of type <code class="docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code> now generate errors
instead of warning messages.</p>
<p><strong>The affected features will be effectively removed in pytest 5.1</strong>, so please consult the
<a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> section in the docs for directions on how to update existing code.</p>
<p>In the pytest <code class="docutils literal notranslate"><span class="pre">5.0.X</span></code> series, it is possible to change the errors back into warnings as a stop
gap measure by adding this to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::pytest.PytestDeprecationWarning</span><span class="w"></span>
</pre></div>
</div>
<p>But this will stop working when pytest <code class="docutils literal notranslate"><span class="pre">5.1</span></code> is released.</p>
<p><strong>If you have concerns</strong> about the removal of a specific feature, please add a
comment to <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5402">issue #5402</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5412">issue #5412</a>: <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> objects (returned by <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>) now have the same <code class="docutils literal notranslate"><span class="pre">str</span></code> representation as <code class="docutils literal notranslate"><span class="pre">repr</span></code>, which
avoids some confusion when users use <code class="docutils literal notranslate"><span class="pre">print(e)</span></code> to inspect the object.</p>
<p>This means code like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">SomeException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">assert</span> <span class="s2">&quot;some message&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>Needs to be changed to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">SomeException</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">assert</span> <span class="s2">&quot;some message&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id213">
<h5>Deprecations<a class="headerlink" href="#id213" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4488">issue #4488</a>: The removal of the <code class="docutils literal notranslate"><span class="pre">--result-log</span></code> option and module has been postponed to (tentatively) pytest 6.0 as
the team has not yet got around to implement a good alternative for it.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/466">issue #466</a>: The <code class="docutils literal notranslate"><span class="pre">funcargnames</span></code> attribute has been an alias for <code class="docutils literal notranslate"><span class="pre">fixturenames</span></code> since
pytest 2.3, and is now deprecated in code too.</p></li>
</ul>
</div>
<div class="section" id="id214">
<h5>Features<a class="headerlink" href="#id214" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3457">issue #3457</a>: New <a class="reference internal" href="contents.html#std-hook-pytest_assertion_pass"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_assertion_pass</span></code></a>
hook, called with context information when an assertion <em>passes</em>.</p>
<p>This hook is still <strong>experimental</strong> so use it with caution.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5440">issue #5440</a>: The <a class="reference external" href="https://docs.python.org/3/library/faulthandler.html#module-faulthandler" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">faulthandler</span></code></a> standard library
module is now enabled by default to help users diagnose crashes in C modules.</p>
<p>This functionality was provided by integrating the external
<a class="reference external" href="https://github.com/pytest-dev/pytest-faulthandler">pytest-faulthandler</a> plugin into the core,
so users should remove that plugin from their requirements if used.</p>
<p>For more information see the docs: <a class="reference internal" href="contents.html#faulthandler"><span class="std std-ref">Fault Handler</span></a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5452">issue #5452</a>: When warnings are configured as errors, pytest warnings now appear as originating from <code class="docutils literal notranslate"><span class="pre">pytest.</span></code> instead of the internal <code class="docutils literal notranslate"><span class="pre">_pytest.warning_types.</span></code> module.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5125">issue #5125</a>: <code class="docutils literal notranslate"><span class="pre">Session.exitcode</span></code> values are now coded in <code class="docutils literal notranslate"><span class="pre">pytest.ExitCode</span></code>, an <code class="docutils literal notranslate"><span class="pre">IntEnum</span></code>. This makes the exit code available for consumer code and are more explicit other than just documentation. User defined exit codes are still valid, but should be used with caution.</p>
<p>The team doesn’t expect this change to break test suites or plugins in general, except in esoteric/specific scenarios.</p>
<p><strong>pytest-xdist</strong> users should upgrade to <code class="docutils literal notranslate"><span class="pre">1.29.0</span></code> or later, as <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> required a compatibility fix because of this change.</p>
</li>
</ul>
</div>
<div class="section" id="id215">
<h5>Bug Fixes<a class="headerlink" href="#id215" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1403">issue #1403</a>: Switch from <code class="docutils literal notranslate"><span class="pre">imp</span></code> to <code class="docutils literal notranslate"><span class="pre">importlib</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1671">issue #1671</a>: The name of the <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files cached by the assertion writer now includes the pytest version
to avoid stale caches.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2761">issue #2761</a>: Honor <span class="target" id="index-6"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0235"><strong>PEP 235</strong></a> on case-insensitive file systems.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5078">issue #5078</a>: Test module is no longer double-imported when using <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5260">issue #5260</a>: Improved comparison of byte strings.</p>
<p>When comparing bytes, the assertion message used to show the byte numeric value when showing the differences:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
<span class="o">&gt;</span>       <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;spam&#39;</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;eggs&#39;</span>
<span class="n">E</span>       <span class="ne">AssertionError</span><span class="p">:</span> <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;spam&#39;</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;eggs&#39;</span>
<span class="n">E</span>         <span class="n">At</span> <span class="n">index</span> <span class="mi">0</span> <span class="n">diff</span><span class="p">:</span> <span class="mi">115</span> <span class="o">!=</span> <span class="mi">101</span>
<span class="n">E</span>         <span class="n">Use</span> <span class="o">-</span><span class="n">v</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">full</span> <span class="n">diff</span>
</pre></div>
</div>
<p>It now shows the actual ascii representation instead, which is often more useful:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
<span class="o">&gt;</span>       <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;spam&#39;</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;eggs&#39;</span>
<span class="n">E</span>       <span class="ne">AssertionError</span><span class="p">:</span> <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;spam&#39;</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;eggs&#39;</span>
<span class="n">E</span>         <span class="n">At</span> <span class="n">index</span> <span class="mi">0</span> <span class="n">diff</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;s&#39;</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;e&#39;</span>
<span class="n">E</span>         <span class="n">Use</span> <span class="o">-</span><span class="n">v</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">full</span> <span class="n">diff</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5335">issue #5335</a>: Colorize level names when the level in the logging format is formatted using
‘%(levelname).Xs’ (truncated fixed width alignment), where X is an integer.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5354">issue #5354</a>: Fix <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> when the argvalues is an iterator.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5370">issue #5370</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix <code class="docutils literal notranslate"><span class="pre">NameError</span></code> on nested comprehensions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5371">issue #5371</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix incorrect handling of generators with <code class="docutils literal notranslate"><span class="pre">if</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5372">issue #5372</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix incorrect assertion when using <code class="docutils literal notranslate"><span class="pre">all()</span></code> in an expression.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5383">issue #5383</a>: <code class="docutils literal notranslate"><span class="pre">-q</span></code> has again an impact on the style of the collected items
(<code class="docutils literal notranslate"><span class="pre">--collect-only</span></code>) when <code class="docutils literal notranslate"><span class="pre">--log-cli-level</span></code> is used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5389">issue #5389</a>: Fix regressions of <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/5063">pull request #5063</a> for <code class="docutils literal notranslate"><span class="pre">importlib_metadata.PathDistribution</span></code> which have their <code class="docutils literal notranslate"><span class="pre">files</span></code> attribute being <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5390">issue #5390</a>: Fix regression where the <code class="docutils literal notranslate"><span class="pre">obj</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">TestCase</span></code> items was no longer bound to methods.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5404">issue #5404</a>: Emit a warning when attempting to unwrap a broken object raises an exception,
for easier debugging (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5080">issue #5080</a>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5432">issue #5432</a>: Prevent “already imported” warnings from assertion rewriter when invoking pytest in-process multiple times.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5433">issue #5433</a>: Fix assertion rewriting in packages (<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5444">issue #5444</a>: Fix <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> mode when the first file passed on the command-line fails to collect.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5482">issue #5482</a>: Fix bug introduced in 4.6.0 causing collection errors when passing
more than 2 positional arguments to <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5505">issue #5505</a>: Fix crash when discovery fails while using <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:terminal</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id216">
<h5>Improved Documentation<a class="headerlink" href="#id216" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5315">issue #5315</a>: Expand docs on mocking classes and dictionaries with <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5416">issue #5416</a>: Fix PytestUnknownMarkWarning in run/skip example.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-11-2020-06-04">
<h4>pytest 4.6.11 (2020-06-04)<a class="headerlink" href="#pytest-4-6-11-2020-06-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id217">
<h5>Bug Fixes<a class="headerlink" href="#id217" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6334">issue #6334</a>: Fix summary entries appearing twice when <code class="docutils literal notranslate"><span class="pre">f/F</span></code> and <code class="docutils literal notranslate"><span class="pre">s/S</span></code> report chars were used at the same time in the <code class="docutils literal notranslate"><span class="pre">-r</span></code> command-line option (for example <code class="docutils literal notranslate"><span class="pre">-rFf</span></code>).</p>
<p>The upper case variants were never documented and the preferred form should be the lower case.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/7310">issue #7310</a>: Fix <code class="docutils literal notranslate"><span class="pre">UnboundLocalError:</span> <span class="pre">local</span> <span class="pre">variable</span> <span class="pre">'letter'</span> <span class="pre">referenced</span> <span class="pre">before</span>
<span class="pre">assignment</span></code> in <code class="docutils literal notranslate"><span class="pre">_pytest.terminal.pytest_report_teststatus()</span></code>
when plugins return report objects in an unconventional state.</p>
<p>This was making <code class="docutils literal notranslate"><span class="pre">pytest_report_teststatus()</span></code> skip
entering if-block branches that declare the <code class="docutils literal notranslate"><span class="pre">letter</span></code> variable.</p>
<p>The fix was to set the initial value of the <code class="docutils literal notranslate"><span class="pre">letter</span></code> before
the if-block cascade so that it always has a value.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-10-2020-05-08">
<h4>pytest 4.6.10 (2020-05-08)<a class="headerlink" href="#pytest-4-6-10-2020-05-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id218">
<h5>Features<a class="headerlink" href="#id218" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6870">issue #6870</a>: New <code class="docutils literal notranslate"><span class="pre">Config.invocation_args</span></code> attribute containing the unchanged arguments passed to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code>.</p>
<p>Remark: while this is technically a new feature and according to our
<a class="reference external" href="https://docs.pytest.org/en/7.0.x/py27-py34-deprecation.html#what-goes-into-4-6-x-releases">policy</a>
it should not have been backported, we have opened an exception in this
particular case because it fixes a serious interaction with <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>,
so it can also be considered a bugfix.</p>
</li>
</ul>
</div>
<div class="section" id="id219">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id219" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6404">issue #6404</a>: Remove usage of <code class="docutils literal notranslate"><span class="pre">parser</span></code> module, deprecated in Python 3.9.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-9-2020-01-04">
<h4>pytest 4.6.9 (2020-01-04)<a class="headerlink" href="#pytest-4-6-9-2020-01-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id220">
<h5>Bug Fixes<a class="headerlink" href="#id220" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6301">issue #6301</a>: Fix assertion rewriting for egg-based distributions and <code class="docutils literal notranslate"><span class="pre">editable</span></code> installs (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--editable</span></code>).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-8-2019-12-19">
<h4>pytest 4.6.8 (2019-12-19)<a class="headerlink" href="#pytest-4-6-8-2019-12-19" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id221">
<h5>Features<a class="headerlink" href="#id221" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5471">issue #5471</a>: JUnit XML now includes a timestamp and hostname in the testsuite tag.</p></li>
</ul>
</div>
<div class="section" id="id222">
<h5>Bug Fixes<a class="headerlink" href="#id222" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5430">issue #5430</a>: junitxml: Logs for failed test are now passed to junit report in case the test fails during call phase.</p></li>
</ul>
</div>
<div class="section" id="id223">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id223" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6345">issue #6345</a>: Pin <code class="docutils literal notranslate"><span class="pre">colorama</span></code> to <code class="docutils literal notranslate"><span class="pre">0.4.1</span></code> only for Python 3.4 so newer Python versions can still receive colorama updates.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-7-2019-12-05">
<h4>pytest 4.6.7 (2019-12-05)<a class="headerlink" href="#pytest-4-6-7-2019-12-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id224">
<h5>Bug Fixes<a class="headerlink" href="#id224" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5477">issue #5477</a>: The XML file produced by <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> now correctly contain a <code class="docutils literal notranslate"><span class="pre">&lt;testsuites&gt;</span></code> root element.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/6044">issue #6044</a>: Properly ignore <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> (<code class="docutils literal notranslate"><span class="pre">OSError.errno</span> <span class="pre">==</span> <span class="pre">NOENT</span></code> in Python 2) exceptions when trying to remove old temporary directories,
for instance when multiple processes try to remove the same directory (common with <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>
for example).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-6-2019-10-11">
<h4>pytest 4.6.6 (2019-10-11)<a class="headerlink" href="#pytest-4-6-6-2019-10-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id225">
<h5>Bug Fixes<a class="headerlink" href="#id225" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5523">issue #5523</a>: Fixed using multiple short options together in the command-line (for example <code class="docutils literal notranslate"><span class="pre">-vs</span></code>) in Python 3.8+.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5537">issue #5537</a>: Replace <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> backport with <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> from the
standard library on Python 3.8+.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5806">issue #5806</a>: Fix “lexer” being used when uploading to bpaste.net from <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> to “text”.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5902">issue #5902</a>: Fix warnings about deprecated <code class="docutils literal notranslate"><span class="pre">cmp</span></code> attribute in <code class="docutils literal notranslate"><span class="pre">attrs&gt;=19.2</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id226">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id226" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5801">issue #5801</a>: Fixes python version checks (detected by <code class="docutils literal notranslate"><span class="pre">flake8-2020</span></code>) in case python4 becomes a thing.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-5-2019-08-05">
<h4>pytest 4.6.5 (2019-08-05)<a class="headerlink" href="#pytest-4-6-5-2019-08-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id227">
<h5>Bug Fixes<a class="headerlink" href="#id227" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4344">issue #4344</a>: Fix RuntimeError/StopIteration when trying to collect package with “__init__.py” only.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5478">issue #5478</a>: Fix encode error when using unicode strings in exceptions with <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5524">issue #5524</a>: Fix issue where <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> and <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> would not remove directories containing files marked as read-only,
which could lead to pytest crashing when executed a second time with the <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5547">issue #5547</a>: <code class="docutils literal notranslate"><span class="pre">--step-wise</span></code> now handles <code class="docutils literal notranslate"><span class="pre">xfail(strict=True)</span></code> markers properly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5650">issue #5650</a>: Improved output when parsing an ini configuration file fails.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-4-2019-06-28">
<h4>pytest 4.6.4 (2019-06-28)<a class="headerlink" href="#pytest-4-6-4-2019-06-28" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id228">
<h5>Bug Fixes<a class="headerlink" href="#id228" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5404">issue #5404</a>: Emit a warning when attempting to unwrap a broken object raises an exception,
for easier debugging (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5080">issue #5080</a>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5444">issue #5444</a>: Fix <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> mode when the first file passed on the command-line fails to collect.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5482">issue #5482</a>: Fix bug introduced in 4.6.0 causing collection errors when passing
more than 2 positional arguments to <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5505">issue #5505</a>: Fix crash when discovery fails while using <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:terminal</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-3-2019-06-11">
<h4>pytest 4.6.3 (2019-06-11)<a class="headerlink" href="#pytest-4-6-3-2019-06-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id229">
<h5>Bug Fixes<a class="headerlink" href="#id229" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5383">issue #5383</a>: <code class="docutils literal notranslate"><span class="pre">-q</span></code> has again an impact on the style of the collected items
(<code class="docutils literal notranslate"><span class="pre">--collect-only</span></code>) when <code class="docutils literal notranslate"><span class="pre">--log-cli-level</span></code> is used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5389">issue #5389</a>: Fix regressions of <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/5063">pull request #5063</a> for <code class="docutils literal notranslate"><span class="pre">importlib_metadata.PathDistribution</span></code> which have their <code class="docutils literal notranslate"><span class="pre">files</span></code> attribute being <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5390">issue #5390</a>: Fix regression where the <code class="docutils literal notranslate"><span class="pre">obj</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">TestCase</span></code> items was no longer bound to methods.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-2-2019-06-03">
<h4>pytest 4.6.2 (2019-06-03)<a class="headerlink" href="#pytest-4-6-2-2019-06-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id230">
<h5>Bug Fixes<a class="headerlink" href="#id230" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5370">issue #5370</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix <code class="docutils literal notranslate"><span class="pre">NameError</span></code> on nested comprehensions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5371">issue #5371</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix incorrect handling of generators with <code class="docutils literal notranslate"><span class="pre">if</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5372">issue #5372</a>: Revert unrolling of <code class="docutils literal notranslate"><span class="pre">all()</span></code> to fix incorrect assertion when using <code class="docutils literal notranslate"><span class="pre">all()</span></code> in an expression.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-1-2019-06-02">
<h4>pytest 4.6.1 (2019-06-02)<a class="headerlink" href="#pytest-4-6-1-2019-06-02" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id231">
<h5>Bug Fixes<a class="headerlink" href="#id231" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5354">issue #5354</a>: Fix <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> when the argvalues is an iterator.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5358">issue #5358</a>: Fix assertion rewriting of <code class="docutils literal notranslate"><span class="pre">all()</span></code> calls to deal with non-generators.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-6-0-2019-05-31">
<h4>pytest 4.6.0 (2019-05-31)<a class="headerlink" href="#pytest-4-6-0-2019-05-31" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id232">
<h5>Important<a class="headerlink" href="#id232" title="Permalink to this headline">¶</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">4.6.X</span></code> series will be the last series to support <strong>Python 2 and Python 3.4</strong>.</p>
<p>For more details, see our <a class="reference external" href="https://docs.pytest.org/en/7.0.x/py27-py34-deprecation.html">Python 2.7 and 3.4 support plan</a>.</p>
</div>
<div class="section" id="id234">
<h5>Features<a class="headerlink" href="#id234" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4559">issue #4559</a>: Added the <code class="docutils literal notranslate"><span class="pre">junit_log_passing_tests</span></code> ini value which can be used to enable or disable logging of passing test output in the Junit XML file.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4956">issue #4956</a>: pytester’s <code class="docutils literal notranslate"><span class="pre">testdir.spawn</span></code> uses <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> as HOME/USERPROFILE directory.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5062">issue #5062</a>: Unroll calls to <code class="docutils literal notranslate"><span class="pre">all</span></code> to full for-loops with assertion rewriting for better failure messages, especially when using Generator Expressions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5063">issue #5063</a>: Switch from <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> to <code class="docutils literal notranslate"><span class="pre">importlib-metadata</span></code> for entrypoint detection for improved performance and import time.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5091">issue #5091</a>: The output for ini options in <code class="docutils literal notranslate"><span class="pre">--help</span></code> has been improved.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5269">issue #5269</a>: <code class="docutils literal notranslate"><span class="pre">pytest.importorskip</span></code> includes the <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> now in the default <code class="docutils literal notranslate"><span class="pre">reason</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5311">issue #5311</a>: Captured logs that are output for each failing test are formatted using the
ColoredLevelFormatter.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5312">issue #5312</a>: Improved formatting of multiline log messages in Python 3.</p></li>
</ul>
</div>
<div class="section" id="id235">
<h5>Bug Fixes<a class="headerlink" href="#id235" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2064">issue #2064</a>: The debugging plugin imports the wrapped <code class="docutils literal notranslate"><span class="pre">Pdb</span></code> class (<code class="docutils literal notranslate"><span class="pre">--pdbcls</span></code>) on-demand now.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4908">issue #4908</a>: The <code class="docutils literal notranslate"><span class="pre">pytest_enter_pdb</span></code> hook gets called with post-mortem (<code class="docutils literal notranslate"><span class="pre">--pdb</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5036">issue #5036</a>: Fix issue where fixtures dependent on other parametrized fixtures would be erroneously parametrized.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5256">issue #5256</a>: Handle internal error due to a lone surrogate unicode character not being representable in Jython.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5257">issue #5257</a>: Ensure that <code class="docutils literal notranslate"><span class="pre">sys.stdout.mode</span></code> does not include <code class="docutils literal notranslate"><span class="pre">'b'</span></code> as it is a text stream.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5278">issue #5278</a>: Pytest’s internal python plugin can be disabled using <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:python</span></code> again.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5286">issue #5286</a>: Fix issue with <code class="docutils literal notranslate"><span class="pre">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span></code> option not working when using a list of test IDs in parametrized tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5330">issue #5330</a>: Show the test module being collected when emitting <code class="docutils literal notranslate"><span class="pre">PytestCollectionWarning</span></code> messages for
test classes with <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and <code class="docutils literal notranslate"><span class="pre">__new__</span></code> methods to make it easier to pin down the problem.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5333">issue #5333</a>: Fix regression in 4.5.0 with <code class="docutils literal notranslate"><span class="pre">--lf</span></code> not re-running all tests with known failures from non-selected tests.</p></li>
</ul>
</div>
<div class="section" id="id236">
<h5>Improved Documentation<a class="headerlink" href="#id236" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5250">issue #5250</a>: Expand docs on use of <code class="docutils literal notranslate"><span class="pre">setenv</span></code> and <code class="docutils literal notranslate"><span class="pre">delenv</span></code> with <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-5-0-2019-05-11">
<h4>pytest 4.5.0 (2019-05-11)<a class="headerlink" href="#pytest-4-5-0-2019-05-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id237">
<h5>Features<a class="headerlink" href="#id237" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4826">issue #4826</a>: A warning is now emitted when unknown marks are used as a decorator.
This is often due to a typo, which can lead to silently broken tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4907">issue #4907</a>: Show XFail reason as part of JUnitXML message field.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5013">issue #5013</a>: Messages from crash reports are displayed within test summaries now, truncated to the terminal width.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5023">issue #5023</a>: New flag <code class="docutils literal notranslate"><span class="pre">--strict-markers</span></code> that triggers an error when unknown markers (e.g. those not registered using the <a class="reference internal" href="contents.html#confval-markers"><code class="xref std std-confval docutils literal notranslate"><span class="pre">markers</span></code></a> option in the configuration file) are used in the test suite.</p>
<p>The existing <code class="docutils literal notranslate"><span class="pre">--strict</span></code> option has the same behavior currently, but can be augmented in the future for additional checks.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5026">issue #5026</a>: Assertion failure messages for sequences and dicts contain the number of different items now.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5034">issue #5034</a>: Improve reporting with <code class="docutils literal notranslate"><span class="pre">--lf</span></code> and <code class="docutils literal notranslate"><span class="pre">--ff</span></code> (run-last-failure).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5035">issue #5035</a>: The <code class="docutils literal notranslate"><span class="pre">--cache-show</span></code> option/action accepts an optional glob to show only matching cache entries.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5059">issue #5059</a>: Standard input (stdin) can be given to pytester’s <code class="docutils literal notranslate"><span class="pre">Testdir.run()</span></code> and <code class="docutils literal notranslate"><span class="pre">Testdir.popen()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5068">issue #5068</a>: The <code class="docutils literal notranslate"><span class="pre">-r</span></code> option learnt about <code class="docutils literal notranslate"><span class="pre">A</span></code> to display all reports (including passed ones) in the short test summary.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5108">issue #5108</a>: The short test summary is displayed after passes with output (<code class="docutils literal notranslate"><span class="pre">-rP</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5172">issue #5172</a>: The <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> (<code class="docutils literal notranslate"><span class="pre">--lf</span></code>) option got smarter and will now skip entire files if all tests
of that test file have passed in previous runs, greatly speeding up collection.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5177">issue #5177</a>: Introduce new specific warning <code class="docutils literal notranslate"><span class="pre">PytestWarning</span></code> subclasses to make it easier to filter warnings based on the class, rather than on the message. The new subclasses are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PytestAssertRewriteWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PytestCacheWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PytestCollectionWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PytestConfigWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PytestUnhandledCoroutineWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PytestUnknownMarkWarning</span></code></p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5202">issue #5202</a>: New <code class="docutils literal notranslate"><span class="pre">record_testsuite_property</span></code> session-scoped fixture allows users to log <code class="docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> tags at the <code class="docutils literal notranslate"><span class="pre">testsuite</span></code>
level with the <code class="docutils literal notranslate"><span class="pre">junitxml</span></code> plugin.</p>
<p>The generated XML is compatible with the latest xunit standard, contrary to
the properties recorded by <code class="docutils literal notranslate"><span class="pre">record_property</span></code> and <code class="docutils literal notranslate"><span class="pre">record_xml_attribute</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5214">issue #5214</a>: The default logging format has been changed to improve readability. Here is an
example of a previous logging message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_log_cli_enabled_disabled</span><span class="o">.</span><span class="n">py</span>    <span class="mi">3</span> <span class="n">CRITICAL</span> <span class="n">critical</span> <span class="n">message</span> <span class="n">logged</span> <span class="n">by</span> <span class="n">test</span>
</pre></div>
</div>
<p>This has now become:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CRITICAL</span> <span class="n">root</span><span class="p">:</span><span class="n">test_log_cli_enabled_disabled</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">3</span> <span class="n">critical</span> <span class="n">message</span> <span class="n">logged</span> <span class="n">by</span> <span class="n">test</span>
</pre></div>
</div>
<p>The formatting can be changed through the <a class="reference internal" href="contents.html#confval-log_format"><code class="xref std std-confval docutils literal notranslate"><span class="pre">log_format</span></code></a> configuration option.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5220">issue #5220</a>: <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> now also shows fixture scope for scopes other than <code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id238">
<h5>Bug Fixes<a class="headerlink" href="#id238" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5113">issue #5113</a>: Deselected items from plugins using <code class="docutils literal notranslate"><span class="pre">pytest_collect_modifyitems</span></code> as a hookwrapper are correctly reported now.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5144">issue #5144</a>: With usage errors <code class="docutils literal notranslate"><span class="pre">exitstatus</span></code> is set to <code class="docutils literal notranslate"><span class="pre">EXIT_USAGEERROR</span></code> in the <code class="docutils literal notranslate"><span class="pre">pytest_sessionfinish</span></code> hook now as expected.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5235">issue #5235</a>: <code class="docutils literal notranslate"><span class="pre">outcome.exit</span></code> is not used with <code class="docutils literal notranslate"><span class="pre">EOF</span></code> in the pdb wrapper anymore, but only with <code class="docutils literal notranslate"><span class="pre">quit</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id239">
<h5>Improved Documentation<a class="headerlink" href="#id239" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4935">issue #4935</a>: Expand docs on registering marks and the effect of <code class="docutils literal notranslate"><span class="pre">--strict</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id240">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id240" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4942">issue #4942</a>: <code class="docutils literal notranslate"><span class="pre">logging.raiseExceptions</span></code> is not set to <code class="docutils literal notranslate"><span class="pre">False</span></code> anymore.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5013">issue #5013</a>: pytest now depends on <a class="reference external" href="https://pypi.org/project/wcwidth/">wcwidth</a> to properly track unicode character sizes for more precise terminal output.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5059">issue #5059</a>: pytester’s <code class="docutils literal notranslate"><span class="pre">Testdir.popen()</span></code> uses <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> via keyword arguments with defaults now (<code class="docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5069">issue #5069</a>: The code for the short test summary in the terminal was moved to the terminal plugin.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5082">issue #5082</a>: Improved validation of kwargs for various methods in the pytester plugin.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5202">issue #5202</a>: <code class="docutils literal notranslate"><span class="pre">record_property</span></code> now emits a <code class="docutils literal notranslate"><span class="pre">PytestWarning</span></code> when used with <code class="docutils literal notranslate"><span class="pre">junit_family=xunit2</span></code>: the fixture generates
<code class="docutils literal notranslate"><span class="pre">property</span></code> tags as children of <code class="docutils literal notranslate"><span class="pre">testcase</span></code>, which is not permitted according to the most
<a class="reference external" href="https://github.com/jenkinsci/xunit-plugin/blob/master/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd">recent schema</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5239">issue #5239</a>: Pin <code class="docutils literal notranslate"><span class="pre">pluggy</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">1.0</span></code> so we don’t update to <code class="docutils literal notranslate"><span class="pre">1.0</span></code> automatically when
it gets released: there are planned breaking changes, and we want to ensure
pytest properly supports <code class="docutils literal notranslate"><span class="pre">pluggy</span> <span class="pre">1.0</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-4-2-2019-05-08">
<h4>pytest 4.4.2 (2019-05-08)<a class="headerlink" href="#pytest-4-4-2-2019-05-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id241">
<h5>Bug Fixes<a class="headerlink" href="#id241" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5089">issue #5089</a>: Fix crash caused by error in <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> function with both <code class="docutils literal notranslate"><span class="pre">showlocals</span></code> and verbose output enabled.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5139">issue #5139</a>: Eliminate core dependency on ‘terminal’ plugin.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5229">issue #5229</a>: Require <code class="docutils literal notranslate"><span class="pre">pluggy&gt;=0.11.0</span></code> which reverts a dependency to <code class="docutils literal notranslate"><span class="pre">importlib-metadata</span></code> added in <code class="docutils literal notranslate"><span class="pre">0.10.0</span></code>.
The <code class="docutils literal notranslate"><span class="pre">importlib-metadata</span></code> package cannot be imported when installed as an egg and causes issues when relying on <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> to install test dependencies.</p></li>
</ul>
</div>
<div class="section" id="id242">
<h5>Improved Documentation<a class="headerlink" href="#id242" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5171">issue #5171</a>: Doc: <code class="docutils literal notranslate"><span class="pre">pytest_ignore_collect</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest_collect_directory</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest_collect_file</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest_pycollect_makemodule</span></code> hooks’s ‘path’ parameter documented type is now <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5188">issue #5188</a>: Improve help for <code class="docutils literal notranslate"><span class="pre">--runxfail</span></code> flag.</p></li>
</ul>
</div>
<div class="section" id="id243">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id243" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5182">issue #5182</a>: Removed internal and unused <code class="docutils literal notranslate"><span class="pre">_pytest.deprecated.MARK_INFO_ATTRIBUTE</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-4-1-2019-04-15">
<h4>pytest 4.4.1 (2019-04-15)<a class="headerlink" href="#pytest-4-4-1-2019-04-15" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id244">
<h5>Bug Fixes<a class="headerlink" href="#id244" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5031">issue #5031</a>: Environment variables are properly restored when using pytester’s <code class="docutils literal notranslate"><span class="pre">testdir</span></code> fixture.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5039">issue #5039</a>: Fix regression with <code class="docutils literal notranslate"><span class="pre">--pdbcls</span></code>, which stopped working with local modules in 4.0.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5092">issue #5092</a>: Produce a warning when unknown keywords are passed to <code class="docutils literal notranslate"><span class="pre">pytest.param(...)</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5098">issue #5098</a>: Invalidate import caches with <code class="docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend</span></code>, which is required with namespace packages being used.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-4-0-2019-03-29">
<h4>pytest 4.4.0 (2019-03-29)<a class="headerlink" href="#pytest-4-4-0-2019-03-29" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id245">
<h5>Features<a class="headerlink" href="#id245" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2224">issue #2224</a>: <code class="docutils literal notranslate"><span class="pre">async</span></code> test functions are skipped and a warning is emitted when a suitable
async plugin is not installed (such as <code class="docutils literal notranslate"><span class="pre">pytest-asyncio</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest-trio</span></code>).</p>
<p>Previously <code class="docutils literal notranslate"><span class="pre">async</span></code> functions would not execute at all but still be marked as “passed”.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2482">issue #2482</a>: Include new <code class="docutils literal notranslate"><span class="pre">disable_test_id_escaping_and_forfeit_all_rights_to_community_support</span></code> option to disable ascii-escaping in parametrized values. This may cause a series of problems and as the name makes clear, use at your own risk.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4718">issue #4718</a>: The <code class="docutils literal notranslate"><span class="pre">-p</span></code> option can now be used to early-load plugins also by entry-point name, instead of just
by module name.</p>
<p>This makes it possible to early load external plugins like <code class="docutils literal notranslate"><span class="pre">pytest-cov</span></code> in the command-line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">p</span> <span class="n">pytest_cov</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4855">issue #4855</a>: The <code class="docutils literal notranslate"><span class="pre">--pdbcls</span></code> option handles classes via module attributes now (e.g.
<code class="docutils literal notranslate"><span class="pre">pdb:pdb.Pdb</span></code> with <a class="reference external" href="https://pypi.org/project/pdbpp/">pdbpp</a>), and its validation was improved.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4875">issue #4875</a>: The <a class="reference internal" href="contents.html#confval-testpaths"><code class="xref std std-confval docutils literal notranslate"><span class="pre">testpaths</span></code></a> configuration option is now displayed next
to the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> and <code class="docutils literal notranslate"><span class="pre">inifile</span></code> lines in the pytest header if the option is in effect, i.e., directories or file names were
not explicitly passed in the command line.</p>
<p>Also, <code class="docutils literal notranslate"><span class="pre">inifile</span></code> is only displayed if there’s a configuration file, instead of an empty <code class="docutils literal notranslate"><span class="pre">inifile:</span></code> string.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4911">issue #4911</a>: Doctests can be skipped now dynamically using <code class="docutils literal notranslate"><span class="pre">pytest.skip()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4920">issue #4920</a>: Internal refactorings have been made in order to make the implementation of the
<a class="reference external" href="https://github.com/pytest-dev/pytest-subtests">pytest-subtests</a> plugin
possible, which adds unittest sub-test support and a new <code class="docutils literal notranslate"><span class="pre">subtests</span></code> fixture as discussed in
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1367">issue #1367</a>.</p>
<p>For details on the internal refactorings, please see the details on the related PR.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4931">issue #4931</a>: pytester’s <code class="docutils literal notranslate"><span class="pre">LineMatcher</span></code> asserts that the passed lines are a sequence.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4936">issue #4936</a>: Handle <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">plug</span></code> after <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:plug</span></code>.</p>
<p>This can be used to override a blocked plugin (e.g. in “addopts”) from the
command line etc.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4951">issue #4951</a>: Output capturing is handled correctly when only capturing via fixtures (capsys, capfs) with <code class="docutils literal notranslate"><span class="pre">pdb.set_trace()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4956">issue #4956</a>: <code class="docutils literal notranslate"><span class="pre">pytester</span></code> sets <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> and <code class="docutils literal notranslate"><span class="pre">$USERPROFILE</span></code> to the temporary directory during test runs.</p>
<p>This ensures to not load configuration files from the real user’s home directory.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4980">issue #4980</a>: Namespace packages are handled better with <code class="docutils literal notranslate"><span class="pre">monkeypatch.syspath_prepend</span></code> and <code class="docutils literal notranslate"><span class="pre">testdir.syspathinsert</span></code> (via <code class="docutils literal notranslate"><span class="pre">pkg_resources.fixup_namespace_packages</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4993">issue #4993</a>: The stepwise plugin reports status information now.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5008">issue #5008</a>: If a <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> file contains <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> and also the no longer supported <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> section, pytest will use <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> ignoring <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code>. Previously it would unconditionally error out.</p>
<p>This makes it simpler for plugins to support old pytest versions.</p>
</li>
</ul>
</div>
<div class="section" id="id246">
<h5>Bug Fixes<a class="headerlink" href="#id246" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1895">issue #1895</a>: Fix bug where fixtures requested dynamically via <code class="docutils literal notranslate"><span class="pre">request.getfixturevalue()</span></code> might be teardown
before the requesting fixture.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4851">issue #4851</a>: pytester unsets <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> now to not use outer options with <code class="docutils literal notranslate"><span class="pre">testdir.runpytest()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4903">issue #4903</a>: Use the correct modified time for years after 2038 in rewritten <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4928">issue #4928</a>: Fix line offsets with <code class="docutils literal notranslate"><span class="pre">ScopeMismatch</span></code> errors.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4957">issue #4957</a>: <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:plugin</span></code> is handled correctly for default (internal) plugins now, e.g. with <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:capture</span></code>.</p>
<p>Previously they were loaded (imported) always, making e.g. the <code class="docutils literal notranslate"><span class="pre">capfd</span></code> fixture available.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4968">issue #4968</a>: The pdb <code class="docutils literal notranslate"><span class="pre">quit</span></code> command is handled properly when used after the <code class="docutils literal notranslate"><span class="pre">debug</span></code> command with <a class="reference external" href="https://pypi.org/project/pdbpp/">pdbpp</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4975">issue #4975</a>: Fix the interpretation of <code class="docutils literal notranslate"><span class="pre">-qq</span></code> option where it was being considered as <code class="docutils literal notranslate"><span class="pre">-v</span></code> instead.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4978">issue #4978</a>: <code class="docutils literal notranslate"><span class="pre">outcomes.Exit</span></code> is not swallowed in <code class="docutils literal notranslate"><span class="pre">assertrepr_compare</span></code> anymore.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4988">issue #4988</a>: Close logging’s file handler explicitly when the session finishes.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5003">issue #5003</a>: Fix line offset with mark collection error (off by one).</p></li>
</ul>
</div>
<div class="section" id="id247">
<h5>Improved Documentation<a class="headerlink" href="#id247" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4974">issue #4974</a>: Update docs for <code class="docutils literal notranslate"><span class="pre">pytest_cmdline_parse</span></code> hook to note availability liminations</p></li>
</ul>
</div>
<div class="section" id="id248">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id248" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4718">issue #4718</a>: <code class="docutils literal notranslate"><span class="pre">pluggy&gt;=0.9</span></code> is now required.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4815">issue #4815</a>: <code class="docutils literal notranslate"><span class="pre">funcsigs&gt;=1.0</span></code> is now required for Python 2.7.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4829">issue #4829</a>: Some left-over internal code related to <code class="docutils literal notranslate"><span class="pre">yield</span></code> tests has been removed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4890">issue #4890</a>: Remove internally unused <code class="docutils literal notranslate"><span class="pre">anypython</span></code> fixture from the pytester plugin.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4912">issue #4912</a>: Remove deprecated Sphinx directive, <code class="docutils literal notranslate"><span class="pre">add_description_unit()</span></code>,
pin sphinx-removed-in to &gt;= 0.2.0 to support Sphinx 2.0.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4913">issue #4913</a>: Fix pytest tests invocation with custom <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4965">issue #4965</a>: New <code class="docutils literal notranslate"><span class="pre">pytest_report_to_serializable</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest_report_from_serializable</span></code> <strong>experimental</strong> hooks.</p>
<p>These hooks will be used by <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest-subtests</span></code>, and the replacement for
resultlog to serialize and customize reports.</p>
<p>They are experimental, meaning that their details might change or even be removed
completely in future patch releases without warning.</p>
<p>Feedback is welcome from plugin authors and users alike.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4987">issue #4987</a>: <code class="docutils literal notranslate"><span class="pre">Collector.repr_failure</span></code> respects the <code class="docutils literal notranslate"><span class="pre">--tb</span></code> option, but only defaults to <code class="docutils literal notranslate"><span class="pre">short</span></code> now (with <code class="docutils literal notranslate"><span class="pre">auto</span></code>).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-3-1-2019-03-11">
<h4>pytest 4.3.1 (2019-03-11)<a class="headerlink" href="#pytest-4-3-1-2019-03-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id249">
<h5>Bug Fixes<a class="headerlink" href="#id249" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4810">issue #4810</a>: Logging messages inside <code class="docutils literal notranslate"><span class="pre">pytest_runtest_logreport()</span></code> are now properly captured and displayed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4861">issue #4861</a>: Improve validation of contents written to captured output so it behaves the same as when capture is disabled.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4898">issue #4898</a>: Fix <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">FixtureRequest</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">'confg'</span> <span class="pre">attribute</span></code> bug in <code class="docutils literal notranslate"><span class="pre">testdir.copy_example</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id250">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id250" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4768">issue #4768</a>: Avoid pkg_resources import at the top-level.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-3-0-2019-02-16">
<h4>pytest 4.3.0 (2019-02-16)<a class="headerlink" href="#pytest-4-3-0-2019-02-16" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id251">
<h5>Deprecations<a class="headerlink" href="#id251" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4724">issue #4724</a>: <code class="docutils literal notranslate"><span class="pre">pytest.warns()</span></code> now emits a warning when it receives unknown keyword arguments.</p>
<p>This will be changed into an error in the future.</p>
</li>
</ul>
</div>
<div class="section" id="id252">
<h5>Features<a class="headerlink" href="#id252" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2753">issue #2753</a>: Usage errors from argparse are mapped to pytest’s <code class="docutils literal notranslate"><span class="pre">UsageError</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3711">issue #3711</a>: Add the <code class="docutils literal notranslate"><span class="pre">--ignore-glob</span></code> parameter to exclude test-modules with Unix shell-style wildcards.
Add the <a class="reference internal" href="contents.html#globalvar-collect_ignore_glob"><code class="xref std std-globalvar docutils literal notranslate"><span class="pre">collect_ignore_glob</span></code></a> for <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> to exclude test-modules with Unix shell-style wildcards.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4698">issue #4698</a>: The warning about Python 2.7 and 3.4 not being supported in pytest 5.0 has been removed.</p>
<p>In the end it was considered to be more
of a nuisance than actual utility and users of those Python versions shouldn’t have problems as <code class="docutils literal notranslate"><span class="pre">pip</span></code> will not
install pytest 5.0 on those interpreters.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4707">issue #4707</a>: With the help of new <code class="docutils literal notranslate"><span class="pre">set_log_path()</span></code> method there is a way to set <code class="docutils literal notranslate"><span class="pre">log_file</span></code> paths from hooks.</p></li>
</ul>
</div>
<div class="section" id="id253">
<h5>Bug Fixes<a class="headerlink" href="#id253" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4651">issue #4651</a>: <code class="docutils literal notranslate"><span class="pre">--help</span></code> and <code class="docutils literal notranslate"><span class="pre">--version</span></code> are handled with <code class="docutils literal notranslate"><span class="pre">UsageError</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4782">issue #4782</a>: Fix <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> with collection of broken symlinks with packages.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-2-1-2019-02-12">
<h4>pytest 4.2.1 (2019-02-12)<a class="headerlink" href="#pytest-4-2-1-2019-02-12" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id254">
<h5>Bug Fixes<a class="headerlink" href="#id254" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2895">issue #2895</a>: The <code class="docutils literal notranslate"><span class="pre">pytest_report_collectionfinish</span></code> hook now is also called with <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3899">issue #3899</a>: Do not raise <code class="docutils literal notranslate"><span class="pre">UsageError</span></code> when an imported package has a <code class="docutils literal notranslate"><span class="pre">pytest_plugins.py</span></code> child module.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4347">issue #4347</a>: Fix output capturing when using pdb++ with recursive debugging.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4592">issue #4592</a>: Fix handling of <code class="docutils literal notranslate"><span class="pre">collect_ignore</span></code> via parent <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4700">issue #4700</a>: Fix regression where <code class="docutils literal notranslate"><span class="pre">setUpClass</span></code> would always be called in subclasses even if all tests
were skipped by a <code class="docutils literal notranslate"><span class="pre">unittest.skip()</span></code> decorator applied in the subclass.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4739">issue #4739</a>: Fix <code class="docutils literal notranslate"><span class="pre">parametrize(...</span> <span class="pre">ids=&lt;function&gt;)</span></code> when the function returns non-strings.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4745">issue #4745</a>: Fix/improve collection of args when passing in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> and a test file.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4770">issue #4770</a>: <code class="docutils literal notranslate"><span class="pre">more_itertools</span></code> is now constrained to &lt;6.0.0 when required for Python 2.7 compatibility.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/526">issue #526</a>: Fix “ValueError: Plugin already registered” exceptions when running in build directories that symlink to actual source.</p></li>
</ul>
</div>
<div class="section" id="id255">
<h5>Improved Documentation<a class="headerlink" href="#id255" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3899">issue #3899</a>: Add note to <code class="docutils literal notranslate"><span class="pre">plugins.rst</span></code> that <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> should not be used as a name for a user module containing plugins.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4324">issue #4324</a>: Document how to use <code class="docutils literal notranslate"><span class="pre">raises</span></code> and <code class="docutils literal notranslate"><span class="pre">does_not_raise</span></code> to write parametrized tests with conditional raises.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4709">issue #4709</a>: Document how to customize test failure messages when using
<code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id256">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id256" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4741">issue #4741</a>: Some verbosity related attributes of the TerminalReporter plugin are now
read only properties.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-2-0-2019-01-30">
<h4>pytest 4.2.0 (2019-01-30)<a class="headerlink" href="#pytest-4-2-0-2019-01-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id257">
<h5>Features<a class="headerlink" href="#id257" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3094">issue #3094</a>: <a class="reference internal" href="contents.html#document-how-to/xunit_setup"><span class="doc">Classic xunit-style</span></a> functions and methods
now obey the scope of <em>autouse</em> fixtures.</p>
<p>This fixes a number of surprising issues like <code class="docutils literal notranslate"><span class="pre">setup_method</span></code> being called before session-scoped
autouse fixtures (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/517">issue #517</a> for an example).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4627">issue #4627</a>: Display a message at the end of the test session when running under Python 2.7 and 3.4 that pytest 5.0 will no longer
support those Python versions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4660">issue #4660</a>: The number of <em>selected</em> tests now are also displayed when the <code class="docutils literal notranslate"><span class="pre">-k</span></code> or <code class="docutils literal notranslate"><span class="pre">-m</span></code> flags are used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4688">issue #4688</a>: <code class="docutils literal notranslate"><span class="pre">pytest_report_teststatus</span></code> hook now can also receive a <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4691">issue #4691</a>: <code class="docutils literal notranslate"><span class="pre">pytest_terminal_summary</span></code> hook now can also receive a <code class="docutils literal notranslate"><span class="pre">config</span></code> parameter.</p></li>
</ul>
</div>
<div class="section" id="id258">
<h5>Bug Fixes<a class="headerlink" href="#id258" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3547">issue #3547</a>: <code class="docutils literal notranslate"><span class="pre">--junitxml</span></code> can emit XML compatible with Jenkins xUnit.
<code class="docutils literal notranslate"><span class="pre">junit_family</span></code> INI option accepts <code class="docutils literal notranslate"><span class="pre">legacy|xunit1</span></code>, which produces old style output, and <code class="docutils literal notranslate"><span class="pre">xunit2</span></code> that conforms more strictly to <a class="reference external" href="https://github.com/jenkinsci/xunit-plugin/blob/xunit-2.3.2/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd">https://github.com/jenkinsci/xunit-plugin/blob/xunit-2.3.2/src/main/resources/org/jenkinsci/plugins/xunit/types/model/xsd/junit-10.xsd</a></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4280">issue #4280</a>: Improve quitting from pdb, especially with <code class="docutils literal notranslate"><span class="pre">--trace</span></code>.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">q[quit]</span></code> after <code class="docutils literal notranslate"><span class="pre">pdb.set_trace()</span></code> will quit pytest also.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4402">issue #4402</a>: Warning summary now groups warnings by message instead of by test id.</p>
<p>This makes the output more compact and better conveys the general idea of how much code is
actually generating warnings, instead of how many tests call that code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4536">issue #4536</a>: <code class="docutils literal notranslate"><span class="pre">monkeypatch.delattr</span></code> handles class descriptors like <code class="docutils literal notranslate"><span class="pre">staticmethod</span></code>/<code class="docutils literal notranslate"><span class="pre">classmethod</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4649">issue #4649</a>: Restore marks being considered keywords for keyword expressions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4653">issue #4653</a>: <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixture and other related ones provides resolved path (a.k.a real path)</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4667">issue #4667</a>: <code class="docutils literal notranslate"><span class="pre">pytest_terminal_summary</span></code> uses result from <code class="docutils literal notranslate"><span class="pre">pytest_report_teststatus</span></code> hook, rather than hardcoded strings.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4669">issue #4669</a>: Correctly handle <code class="docutils literal notranslate"><span class="pre">unittest.SkipTest</span></code> exception containing non-ascii characters on Python 2.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4680">issue #4680</a>: Ensure the <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> and the <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixtures are the same folder.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4681">issue #4681</a>: Ensure <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> is always a real path.</p></li>
</ul>
</div>
<div class="section" id="id259">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id259" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4643">issue #4643</a>: Use <code class="docutils literal notranslate"><span class="pre">a.item()</span></code> instead of the deprecated <code class="docutils literal notranslate"><span class="pre">np.asscalar(a)</span></code> in <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">np.asscalar</span></code> has been <a class="reference external" href="https://numpy.org/doc/stable/release/1.16.0-notes.html" title="(in NumPy v1.23)"><span class="xref std std-doc">deprecated</span></a> in <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">1.16.</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4657">issue #4657</a>: Copy saferepr from pylib</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4668">issue #4668</a>: The verbose word for expected failures in the teststatus report changes from <code class="docutils literal notranslate"><span class="pre">xfail</span></code> to <code class="docutils literal notranslate"><span class="pre">XFAIL</span></code> to be consistent with other test outcomes.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-1-1-2019-01-12">
<h4>pytest 4.1.1 (2019-01-12)<a class="headerlink" href="#pytest-4-1-1-2019-01-12" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id260">
<h5>Bug Fixes<a class="headerlink" href="#id260" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2256">issue #2256</a>: Show full repr with <code class="docutils literal notranslate"><span class="pre">assert</span> <span class="pre">a==b</span></code> and <code class="docutils literal notranslate"><span class="pre">-vv</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3456">issue #3456</a>: Extend Doctest-modules to ignore mock objects.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4617">issue #4617</a>: Fixed <code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code> bug when context manager is reused (e.g. multiple parametrization).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4631">issue #4631</a>: Don’t rewrite assertion when <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> is broken</p></li>
</ul>
</div>
<div class="section" id="id261">
<h5>Improved Documentation<a class="headerlink" href="#id261" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3375">issue #3375</a>: Document that using <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> may crash other tools or cause hard to track down problems because it uses a different parser than <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> or <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> files.</p></li>
</ul>
</div>
<div class="section" id="id262">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id262" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4602">issue #4602</a>: Uninstall <code class="docutils literal notranslate"><span class="pre">hypothesis</span></code> in regen tox env.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-1-0-2019-01-05">
<h4>pytest 4.1.0 (2019-01-05)<a class="headerlink" href="#pytest-4-1-0-2019-01-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id263">
<h5>Removals<a class="headerlink" href="#id263" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2169">issue #2169</a>: <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>: in previous versions, errors raised by id functions were suppressed and changed into warnings. Now the exceptions are propagated, along with a pytest message informing the node, parameter value and index where the exception occurred.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3078">issue #3078</a>: Remove legacy internal warnings system: <code class="docutils literal notranslate"><span class="pre">config.warn</span></code>, <code class="docutils literal notranslate"><span class="pre">Node.warn</span></code>. The <code class="docutils literal notranslate"><span class="pre">pytest_logwarning</span></code> now issues a warning when implemented.</p>
<p>See our <a class="reference internal" href="contents.html#config-warn-and-node-warn-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3079">issue #3079</a>: Removed support for yield tests - they are fundamentally broken because they don’t support fixtures properly since collection and test execution were separated.</p>
<p>See our <a class="reference internal" href="contents.html#yield-tests-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3082">issue #3082</a>: Removed support for applying marks directly to values in <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>. Use <code class="docutils literal notranslate"><span class="pre">pytest.param</span></code> instead.</p>
<p>See our <a class="reference internal" href="contents.html#marks-in-pytest-parametrize-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3083">issue #3083</a>: Removed <code class="docutils literal notranslate"><span class="pre">Metafunc.addcall</span></code>. This was the predecessor mechanism to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>.</p>
<p>See our <a class="reference internal" href="contents.html#metafunc-addcall-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3085">issue #3085</a>: Removed support for passing strings to <code class="docutils literal notranslate"><span class="pre">pytest.main</span></code>. Now, always pass a list of strings instead.</p>
<p>See our <a class="reference internal" href="contents.html#passing-command-line-string-to-pytest-main-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3086">issue #3086</a>: <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> section in <strong>setup.cfg</strong> files is no longer supported, use <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> instead. <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files
are meant for use with <code class="docutils literal notranslate"><span class="pre">distutils</span></code>, and a section named <code class="docutils literal notranslate"><span class="pre">pytest</span></code> has notoriously been a source of conflicts and bugs.</p>
<p>Note that for <strong>pytest.ini</strong> and <strong>tox.ini</strong> files the section remains <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3616">issue #3616</a>: Removed the deprecated compat properties for <code class="docutils literal notranslate"><span class="pre">node.Class/Function/Module</span></code> - use <code class="docutils literal notranslate"><span class="pre">pytest.Class/Function/Module</span></code> now.</p>
<p>See our <a class="reference internal" href="contents.html#internal-classes-accessed-through-node-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4421">issue #4421</a>: Removed the implementation of the <code class="docutils literal notranslate"><span class="pre">pytest_namespace</span></code> hook.</p>
<p>See our <a class="reference internal" href="contents.html#pytest-namespace-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4489">issue #4489</a>: Removed <code class="docutils literal notranslate"><span class="pre">request.cached_setup</span></code>. This was the predecessor mechanism to modern fixtures.</p>
<p>See our <a class="reference internal" href="contents.html#cached-setup-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4535">issue #4535</a>: Removed the deprecated <code class="docutils literal notranslate"><span class="pre">PyCollector.makeitem</span></code> method. This method was made public by mistake a long time ago.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4543">issue #4543</a>: Removed support to define fixtures using the <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code> prefix. Use the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> decorator instead.</p>
<p>See our <a class="reference internal" href="contents.html#pytest-funcarg-prefix-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4545">issue #4545</a>: Calling fixtures directly is now always an error instead of a warning.</p>
<p>See our <a class="reference internal" href="contents.html#calling-fixtures-directly-deprecated"><span class="std std-ref">docs</span></a> on information on how to update your code.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4546">issue #4546</a>: Remove <code class="docutils literal notranslate"><span class="pre">Node.get_marker(name)</span></code> the return value was not usable for more than a existence check.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">Node.get_closest_marker(name)</span></code> as a replacement.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4547">issue #4547</a>: The deprecated <code class="docutils literal notranslate"><span class="pre">record_xml_property</span></code> fixture has been removed, use the more generic <code class="docutils literal notranslate"><span class="pre">record_property</span></code> instead.</p>
<p>See our <a class="reference internal" href="contents.html#record-xml-property-deprecated"><span class="std std-ref">docs</span></a> for more information.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4548">issue #4548</a>: An error is now raised if the <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> variable is defined in a non-top-level <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file (i.e., not residing in the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>).</p>
<p>See our <a class="reference internal" href="contents.html#pytest-plugins-in-non-top-level-conftest-files-deprecated"><span class="std std-ref">docs</span></a> for more information.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/891">issue #891</a>: Remove <code class="docutils literal notranslate"><span class="pre">testfunction.markername</span></code> attributes - use <code class="docutils literal notranslate"><span class="pre">Node.iter_markers(name=None)</span></code> to iterate them.</p></li>
</ul>
</div>
<div class="section" id="id264">
<h5>Deprecations<a class="headerlink" href="#id264" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3050">issue #3050</a>: Deprecated the <code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> global.</p>
<p>See <a class="reference internal" href="contents.html#pytest-config-global-deprecated"><span class="std std-ref">pytest.config global</span></a> for rationale.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3974">issue #3974</a>: Passing the <code class="docutils literal notranslate"><span class="pre">message</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> now issues a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>.</p>
<p>It is a common mistake to think this parameter will match the exception message, while in fact
it only serves to provide a custom message in case the <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> check fails. To avoid this
mistake and because it is believed to be little used, pytest is deprecating it without providing
an alternative for the moment.</p>
<p>If you have concerns about this, please comment on <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3974">issue #3974</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4435">issue #4435</a>: Deprecated <code class="docutils literal notranslate"><span class="pre">raises(...,</span> <span class="pre">'code(as_a_string)')</span></code> and <code class="docutils literal notranslate"><span class="pre">warns(...,</span> <span class="pre">'code(as_a_string)')</span></code>.</p>
<p>See <a class="reference internal" href="contents.html#raises-warns-exec"><span class="std std-ref">raises / warns with a string as the second argument</span></a> for rationale and examples.</p>
</li>
</ul>
</div>
<div class="section" id="id265">
<h5>Features<a class="headerlink" href="#id265" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3191">issue #3191</a>: A warning is now issued when assertions are made for <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This is a common source of confusion among new users, which write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">mocked_object</span><span class="o">.</span><span class="n">assert_called_with</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When they should write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mocked_object</span><span class="o">.</span><span class="n">assert_called_with</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Because the <code class="docutils literal notranslate"><span class="pre">assert_called_with</span></code> method of mock objects already executes an assertion.</p>
<p>This warning will not be issued when <code class="docutils literal notranslate"><span class="pre">None</span></code> is explicitly checked. An assertion like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">variable</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>
</div>
<p>will not issue the warning.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3632">issue #3632</a>: Richer equality comparison introspection on <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> for objects created using <a class="reference external" href="https://www.attrs.org/en/stable/">attrs</a> or <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#module-dataclasses" title="(in Python v3.10)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dataclasses</span></code></a> (Python 3.7+, <a class="reference external" href="https://pypi.org/project/dataclasses/">backported to 3.6</a>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4278">issue #4278</a>: <code class="docutils literal notranslate"><span class="pre">CACHEDIR.TAG</span></code> files are now created inside cache directories.</p>
<p>Those files are part of the <a class="reference external" href="https://bford.info/cachedir/spec.html">Cache Directory Tagging Standard</a>, and can
be used by backup or synchronization programs to identify pytest’s cache directory as such.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4292">issue #4292</a>: <code class="docutils literal notranslate"><span class="pre">pytest.outcomes.Exit</span></code> is derived from <code class="docutils literal notranslate"><span class="pre">SystemExit</span></code> instead of <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code>. This allows us to better handle <code class="docutils literal notranslate"><span class="pre">pdb</span></code> exiting.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4371">issue #4371</a>: Updated the <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code> option to display test descriptions when ran using <code class="docutils literal notranslate"><span class="pre">--verbose</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4386">issue #4386</a>: Restructured <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> object construction and ensure incomplete instances have a <code class="docutils literal notranslate"><span class="pre">repr</span></code>/<code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4416">issue #4416</a>: pdb: added support for keyword arguments with <code class="docutils literal notranslate"><span class="pre">pdb.set_trace</span></code>.</p>
<p>It handles <code class="docutils literal notranslate"><span class="pre">header</span></code> similar to Python 3.7 does it, and forwards any
other keyword arguments to the <code class="docutils literal notranslate"><span class="pre">Pdb</span></code> constructor.</p>
<p>This allows for <code class="docutils literal notranslate"><span class="pre">__import__(&quot;pdb&quot;).set_trace(skip=[&quot;foo.*&quot;])</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4483">issue #4483</a>: Added ini parameter <code class="docutils literal notranslate"><span class="pre">junit_duration_report</span></code> to optionally report test call durations, excluding setup and teardown times.</p>
<p>The JUnit XML specification and the default pytest behavior is to include setup and teardown times in the test duration
report. You can include just the call durations instead (excluding setup and teardown) by adding this to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">junit_duration_report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">call</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4532">issue #4532</a>: <code class="docutils literal notranslate"><span class="pre">-ra</span></code> now will show errors and failures last, instead of as the first items in the summary.</p>
<p>This makes it easier to obtain a list of errors and failures to run tests selectively.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4599">issue #4599</a>: <code class="docutils literal notranslate"><span class="pre">pytest.importorskip</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">reason</span></code> parameter, which will be shown when the
requested module cannot be imported.</p></li>
</ul>
</div>
<div class="section" id="id266">
<h5>Bug Fixes<a class="headerlink" href="#id266" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3532">issue #3532</a>: <code class="docutils literal notranslate"><span class="pre">-p</span></code> now accepts its argument without a space between the value, for example <code class="docutils literal notranslate"><span class="pre">-pmyplugin</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4327">issue #4327</a>: <code class="docutils literal notranslate"><span class="pre">approx</span></code> again works with more generic containers, more precisely instances of <code class="docutils literal notranslate"><span class="pre">Iterable</span></code> and <code class="docutils literal notranslate"><span class="pre">Sized</span></code> instead of more restrictive <code class="docutils literal notranslate"><span class="pre">Sequence</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4397">issue #4397</a>: Ensure that node ids are printable.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4435">issue #4435</a>: Fixed <code class="docutils literal notranslate"><span class="pre">raises(...,</span> <span class="pre">'code(string)')</span></code> frame filename.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4458">issue #4458</a>: Display actual test ids in <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id267">
<h5>Improved Documentation<a class="headerlink" href="#id267" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4557">issue #4557</a>: Markers example documentation page updated to support latest pytest version.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4558">issue #4558</a>: Update cache documentation example to correctly show cache hit and miss.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4580">issue #4580</a>: Improved detailed summary report documentation.</p></li>
</ul>
</div>
<div class="section" id="id268">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id268" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4447">issue #4447</a>: Changed the deprecation type of <code class="docutils literal notranslate"><span class="pre">--result-log</span></code> to <code class="docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code>.</p>
<p>It was decided to remove this feature at the next major revision.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-0-2-2018-12-13">
<h4>pytest 4.0.2 (2018-12-13)<a class="headerlink" href="#pytest-4-0-2-2018-12-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id269">
<h5>Bug Fixes<a class="headerlink" href="#id269" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4265">issue #4265</a>: Validate arguments from the <code class="docutils literal notranslate"><span class="pre">PYTEST_ADDOPTS</span></code> environment variable and the <code class="docutils literal notranslate"><span class="pre">addopts</span></code> ini option separately.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4435">issue #4435</a>: Fix <code class="docutils literal notranslate"><span class="pre">raises(...,</span> <span class="pre">'code(string)')</span></code> frame filename.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4500">issue #4500</a>: When a fixture yields and a log call is made after the test runs, and, if the test is interrupted, capture attributes are <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4538">issue #4538</a>: Raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> for <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">raises(...,</span> <span class="pre">match=&lt;non-None</span> <span class="pre">falsey</span> <span class="pre">value&gt;)</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id270">
<h5>Improved Documentation<a class="headerlink" href="#id270" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1495">issue #1495</a>: Document common doctest fixture directory tree structure pitfalls</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-0-1-2018-11-23">
<h4>pytest 4.0.1 (2018-11-23)<a class="headerlink" href="#pytest-4-0-1-2018-11-23" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id271">
<h5>Bug Fixes<a class="headerlink" href="#id271" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3952">issue #3952</a>: Display warnings before “short test summary info” again, but still later warnings in the end.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4386">issue #4386</a>: Handle uninitialized exceptioninfo in repr/str.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4393">issue #4393</a>: Do not create <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>/<code class="docutils literal notranslate"><span class="pre">README.md</span></code> files in existing cache directories.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4400">issue #4400</a>: Rearrange warning handling for the yield test errors so the opt-out in 4.0.x correctly works.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4405">issue #4405</a>: Fix collection of testpaths with <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4412">issue #4412</a>: Fix assertion rewriting involving <code class="docutils literal notranslate"><span class="pre">Starred</span></code> + side-effects.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4425">issue #4425</a>: Ensure we resolve the absolute path when the given <code class="docutils literal notranslate"><span class="pre">--basetemp</span></code> is a relative path.</p></li>
</ul>
</div>
<div class="section" id="id272">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id272" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4315">issue #4315</a>: Use <code class="docutils literal notranslate"><span class="pre">pkg_resources.parse_version</span></code> instead of <code class="docutils literal notranslate"><span class="pre">LooseVersion</span></code> in minversion check.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4440">issue #4440</a>: Adjust the stack level of some internal pytest warnings.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-4-0-0-2018-11-13">
<h4>pytest 4.0.0 (2018-11-13)<a class="headerlink" href="#pytest-4-0-0-2018-11-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id273">
<h5>Removals<a class="headerlink" href="#id273" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3737">issue #3737</a>: <strong>RemovedInPytest4Warnings are now errors by default.</strong></p>
<p>Following our plan to remove deprecated features with as little disruption as
possible, all warnings of type <code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warnings</span></code> now generate errors
instead of warning messages.</p>
<p><strong>The affected features will be effectively removed in pytest 4.1</strong>, so please consult the
<a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> section in the docs for directions on how to update existing code.</p>
<p>In the pytest <code class="docutils literal notranslate"><span class="pre">4.0.X</span></code> series, it is possible to change the errors back into warnings as a stop
gap measure by adding this to your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> file:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">filterwarnings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="na">ignore::pytest.RemovedInPytest4Warning</span><span class="w"></span>
</pre></div>
</div>
<p>But this will stop working when pytest <code class="docutils literal notranslate"><span class="pre">4.1</span></code> is released.</p>
<p><strong>If you have concerns</strong> about the removal of a specific feature, please add a
comment to <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4348">issue #4348</a>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4358">issue #4358</a>: Remove the <code class="docutils literal notranslate"><span class="pre">::()</span></code> notation to denote a test class instance in node ids.</p>
<p>Previously, node ids that contain test instances would use <code class="docutils literal notranslate"><span class="pre">::()</span></code> to denote the instance like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_foo</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">Test</span><span class="p">::()::</span><span class="n">test_bar</span>
</pre></div>
</div>
<p>The extra <code class="docutils literal notranslate"><span class="pre">::()</span></code> was puzzling to most users and has been removed, so that the test id becomes now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">test_foo</span><span class="o">.</span><span class="n">py</span><span class="p">::</span><span class="n">Test</span><span class="p">::</span><span class="n">test_bar</span>
</pre></div>
</div>
<p>This change could not accompany a deprecation period as is usual when user-facing functionality changes because
it was not really possible to detect when the functionality was being used explicitly.</p>
<p>The extra <code class="docutils literal notranslate"><span class="pre">::()</span></code> might have been removed in some places internally already,
which then led to confusion in places where it was expected, e.g. with
<code class="docutils literal notranslate"><span class="pre">--deselect</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4127">issue #4127</a>).</p>
<p>Test class instances are also not listed with <code class="docutils literal notranslate"><span class="pre">--collect-only</span></code> anymore.</p>
</li>
</ul>
</div>
<div class="section" id="id274">
<h5>Features<a class="headerlink" href="#id274" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4270">issue #4270</a>: The <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> option uses <code class="docutils literal notranslate"><span class="pre">$TOX_ENV_DIR</span></code> as prefix (if set in the environment).</p>
<p>This uses a different cache per tox environment by default.</p>
</li>
</ul>
</div>
<div class="section" id="id275">
<h5>Bug Fixes<a class="headerlink" href="#id275" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3554">issue #3554</a>: Fix <code class="docutils literal notranslate"><span class="pre">CallInfo.__repr__</span></code> for when the call is not finished yet.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-10-1-2018-11-11">
<h4>pytest 3.10.1 (2018-11-11)<a class="headerlink" href="#pytest-3-10-1-2018-11-11" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id276">
<h5>Bug Fixes<a class="headerlink" href="#id276" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4287">issue #4287</a>: Fix nested usage of debugging plugin (pdb), e.g. with pytester’s <code class="docutils literal notranslate"><span class="pre">testdir.runpytest</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4304">issue #4304</a>: Block the <code class="docutils literal notranslate"><span class="pre">stepwise</span></code> plugin if <code class="docutils literal notranslate"><span class="pre">cacheprovider</span></code> is also blocked, as one depends on the other.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4306">issue #4306</a>: Parse <code class="docutils literal notranslate"><span class="pre">minversion</span></code> as an actual version and not as dot-separated strings.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4310">issue #4310</a>: Fix duplicate collection due to multiple args matching the same packages.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4321">issue #4321</a>: Fix <code class="docutils literal notranslate"><span class="pre">item.nodeid</span></code> with resolved symlinks.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4325">issue #4325</a>: Fix collection of direct symlinked files, where the target does not match <code class="docutils literal notranslate"><span class="pre">python_files</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4329">issue #4329</a>: Fix TypeError in report_collect with _collect_report_last_write.</p></li>
</ul>
</div>
<div class="section" id="id277">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id277" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4305">issue #4305</a>: Replace byte/unicode helpers in test_capture with python level syntax.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-10-0-2018-11-03">
<h4>pytest 3.10.0 (2018-11-03)<a class="headerlink" href="#pytest-3-10-0-2018-11-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id278">
<h5>Features<a class="headerlink" href="#id278" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2619">issue #2619</a>: Resume capturing output after <code class="docutils literal notranslate"><span class="pre">continue</span></code> with <code class="docutils literal notranslate"><span class="pre">__import__(&quot;pdb&quot;).set_trace()</span></code>.</p>
<p>This also adds a new <code class="docutils literal notranslate"><span class="pre">pytest_leave_pdb</span></code> hook, and passes in <code class="docutils literal notranslate"><span class="pre">pdb</span></code> to the
existing <code class="docutils literal notranslate"><span class="pre">pytest_enter_pdb</span></code> hook.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4147">issue #4147</a>: Add <code class="docutils literal notranslate"><span class="pre">--sw</span></code>, <code class="docutils literal notranslate"><span class="pre">--stepwise</span></code> as an alternative to <code class="docutils literal notranslate"><span class="pre">--lf</span> <span class="pre">-x</span></code> for stopping at the first failure, but starting the next test invocation from that test.  See <a class="reference internal" href="contents.html#cache-stepwise"><span class="std std-ref">the documentation</span></a> for more info.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4188">issue #4188</a>: Make <code class="docutils literal notranslate"><span class="pre">--color</span></code> emit colorful dots when not running in verbose mode. Earlier, it would only colorize the test-by-test output if <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> was also passed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4225">issue #4225</a>: Improve performance with collection reporting in non-quiet mode with terminals.</p>
<p>The “collecting …” message is only printed/updated every 0.5s.</p>
</li>
</ul>
</div>
<div class="section" id="id279">
<h5>Bug Fixes<a class="headerlink" href="#id279" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2701">issue #2701</a>: Fix false <code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warning:</span> <span class="pre">usage</span> <span class="pre">of</span> <span class="pre">Session...</span> <span class="pre">is</span> <span class="pre">deprecated,</span> <span class="pre">please</span> <span class="pre">use</span> <span class="pre">pytest</span></code> warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4046">issue #4046</a>: Fix problems with running tests in package <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4260">issue #4260</a>: Swallow warnings during anonymous compilation of source.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4262">issue #4262</a>: Fix access denied error when deleting stale directories created by <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> / <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/611">issue #611</a>: Naming a fixture <code class="docutils literal notranslate"><span class="pre">request</span></code> will now raise a warning: the <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture is internal and
should not be overwritten as it will lead to internal errors.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4266">issue #4266</a>: Handle (ignore) exceptions raised during collection, e.g. with Django’s LazySettings proxy class.</p></li>
</ul>
</div>
<div class="section" id="id280">
<h5>Improved Documentation<a class="headerlink" href="#id280" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4255">issue #4255</a>: Added missing documentation about the fact that module names passed to filter warnings are not regex-escaped.</p></li>
</ul>
</div>
<div class="section" id="id281">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id281" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4272">issue #4272</a>: Display cachedir also in non-verbose mode if non-default.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4277">issue #4277</a>: pdb: improve message about output capturing with <code class="docutils literal notranslate"><span class="pre">set_trace</span></code>.</p>
<p>Do not display “IO-capturing turned off/on” when <code class="docutils literal notranslate"><span class="pre">-s</span></code> is used to avoid
confusion.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4279">issue #4279</a>: Improve message and stack level of warnings issued by <code class="docutils literal notranslate"><span class="pre">monkeypatch.setenv</span></code> when the value of the environment variable is not a <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-3-2018-10-27">
<h4>pytest 3.9.3 (2018-10-27)<a class="headerlink" href="#pytest-3-9-3-2018-10-27" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id282">
<h5>Bug Fixes<a class="headerlink" href="#id282" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4174">issue #4174</a>: Fix “ValueError: Plugin already registered” with conftest plugins via symlink.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4181">issue #4181</a>: Handle race condition between creation and deletion of temporary folders.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4221">issue #4221</a>: Fix bug where the warning summary at the end of the test session was not showing the test where the warning was originated.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4243">issue #4243</a>: Fix regression when <code class="docutils literal notranslate"><span class="pre">stacklevel</span></code> for warnings was passed as positional argument on python2.</p></li>
</ul>
</div>
<div class="section" id="id283">
<h5>Improved Documentation<a class="headerlink" href="#id283" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3851">issue #3851</a>: Add reference to <code class="docutils literal notranslate"><span class="pre">empty_parameter_set_mark</span></code> ini option in documentation of <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code></p></li>
</ul>
</div>
<div class="section" id="id284">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id284" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4028">issue #4028</a>: Revert patching of <code class="docutils literal notranslate"><span class="pre">sys.breakpointhook</span></code> since it appears to do nothing.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4233">issue #4233</a>: Apply an import sorter (<code class="docutils literal notranslate"><span class="pre">reorder-python-imports</span></code>) to the codebase.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4248">issue #4248</a>: Remove use of unnecessary compat shim, six.binary_type</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-2-2018-10-22">
<h4>pytest 3.9.2 (2018-10-22)<a class="headerlink" href="#pytest-3-9-2-2018-10-22" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id285">
<h5>Bug Fixes<a class="headerlink" href="#id285" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2909">issue #2909</a>: Improve error message when a recursive dependency between fixtures is detected.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3340">issue #3340</a>: Fix logging messages not shown in hooks <code class="docutils literal notranslate"><span class="pre">pytest_sessionstart()</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest_sessionfinish()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3533">issue #3533</a>: Fix unescaped XML raw objects in JUnit report for skipped tests</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3691">issue #3691</a>: Python 2: safely format warning message about passing unicode strings to <code class="docutils literal notranslate"><span class="pre">warnings.warn</span></code>, which may cause
surprising <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code> exception when monkey patching <code class="docutils literal notranslate"><span class="pre">warnings.warn</span></code> itself.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4026">issue #4026</a>: Improve error message when it is not possible to determine a function’s signature.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4177">issue #4177</a>: Pin <code class="docutils literal notranslate"><span class="pre">setuptools&gt;=40.0</span></code> to support <code class="docutils literal notranslate"><span class="pre">py_modules</span></code> in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4179">issue #4179</a>: Restore the tmpdir behaviour of symlinking the current test run.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4192">issue #4192</a>: Fix filename reported by <code class="docutils literal notranslate"><span class="pre">warnings.warn</span></code> when using <code class="docutils literal notranslate"><span class="pre">recwarn</span></code> under python2.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-1-2018-10-16">
<h4>pytest 3.9.1 (2018-10-16)<a class="headerlink" href="#pytest-3-9-1-2018-10-16" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id286">
<h5>Features<a class="headerlink" href="#id286" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4159">issue #4159</a>: For test-suites containing test classes, the information about the subclassed
module is now output only if a higher verbosity level is specified (at least
“-vv”).</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-9-0-2018-10-15-not-published-due-to-a-release-automation-bug">
<h4>pytest 3.9.0 (2018-10-15 - not published due to a release automation bug)<a class="headerlink" href="#pytest-3-9-0-2018-10-15-not-published-due-to-a-release-automation-bug" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id287">
<h5>Deprecations<a class="headerlink" href="#id287" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3616">issue #3616</a>: The following accesses have been documented as deprecated for years, but are now actually emitting deprecation warnings.</p>
<ul>
<li><p>Access of <code class="docutils literal notranslate"><span class="pre">Module</span></code>, <code class="docutils literal notranslate"><span class="pre">Function</span></code>, <code class="docutils literal notranslate"><span class="pre">Class</span></code>, <code class="docutils literal notranslate"><span class="pre">Instance</span></code>, <code class="docutils literal notranslate"><span class="pre">File</span></code> and <code class="docutils literal notranslate"><span class="pre">Item</span></code> through <code class="docutils literal notranslate"><span class="pre">Node</span></code> instances. Now
users will this warning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span> <span class="n">of</span> <span class="n">Function</span><span class="o">.</span><span class="n">Module</span> <span class="ow">is</span> <span class="n">deprecated</span><span class="p">,</span> <span class="n">please</span> <span class="n">use</span> <span class="n">pytest</span><span class="o">.</span><span class="n">Module</span> <span class="n">instead</span>
</pre></div>
</div>
<p>Users should just <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pytest</span></code> and access those objects using the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">request.cached_setup</span></code>, this was the precursor of the setup/teardown mechanism available to fixtures. You can
consult <a class="reference internal" href="contents.html#document-funcarg_compare"><span class="doc">funcarg comparison section in the docs</span></a>.</p></li>
<li><p>Using objects named <code class="docutils literal notranslate"><span class="pre">&quot;Class&quot;</span></code> as a way to customize the type of nodes that are collected in <code class="docutils literal notranslate"><span class="pre">Collector</span></code>
subclasses has been deprecated. Users instead should use <code class="docutils literal notranslate"><span class="pre">pytest_collect_make_item</span></code> to customize node types during
collection.</p>
<p>This issue should affect only advanced plugins who create new collection types, so if you see this warning
message please contact the authors so they can change the code.</p>
</li>
<li><p>The warning that produces the message below has changed to <code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warning</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">getfuncargvalue</span> <span class="ow">is</span> <span class="n">deprecated</span><span class="p">,</span> <span class="n">use</span> <span class="n">getfixturevalue</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3988">issue #3988</a>: Add a Deprecation warning for pytest.ensuretemp as it was deprecated since a while.</p></li>
</ul>
</div>
<div class="section" id="id288">
<h5>Features<a class="headerlink" href="#id288" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2293">issue #2293</a>: Improve usage errors messages by hiding internal details which can be distracting and noisy.</p>
<p>This has the side effect that some error conditions that previously raised generic errors (such as
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> for unregistered marks) are now raising <code class="docutils literal notranslate"><span class="pre">Failed</span></code> exceptions.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3332">issue #3332</a>: Improve the error displayed when a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file could not be imported.</p>
<p>In order to implement this, a new <code class="docutils literal notranslate"><span class="pre">chain</span></code> parameter was added to <code class="docutils literal notranslate"><span class="pre">ExceptionInfo.getrepr</span></code>
to show or hide chained tracebacks in Python 3 (defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3849">issue #3849</a>: Add <code class="docutils literal notranslate"><span class="pre">empty_parameter_set_mark=fail_at_collect</span></code> ini option for raising an exception when parametrize collects an empty set.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3964">issue #3964</a>: Log messages generated in the collection phase are shown when
live-logging is enabled and/or when they are logged to a file.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3985">issue #3985</a>: Introduce <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> as a fixture providing a Path object. Also introduce <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> as
a session-scoped fixture for creating arbitrary temporary directories from any other fixture or test.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4013">issue #4013</a>: Deprecation warnings are now shown even if you customize the warnings filters yourself. In the previous version
any customization would override pytest’s filters and deprecation warnings would fall back to being hidden by default.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4073">issue #4073</a>: Allow specification of timeout for <code class="docutils literal notranslate"><span class="pre">Testdir.runpytest_subprocess()</span></code> and <code class="docutils literal notranslate"><span class="pre">Testdir.run()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4098">issue #4098</a>: Add returncode argument to pytest.exit() to exit pytest with a specific return code.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4102">issue #4102</a>: Reimplement <code class="docutils literal notranslate"><span class="pre">pytest.deprecated_call</span></code> using <code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code> so it supports the <code class="docutils literal notranslate"><span class="pre">match='...'</span></code> keyword argument.</p>
<p>This has the side effect that <code class="docutils literal notranslate"><span class="pre">pytest.deprecated_call</span></code> now raises <code class="docutils literal notranslate"><span class="pre">pytest.fail.Exception</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4149">issue #4149</a>: Require setuptools&gt;=30.3 and move most of the metadata to <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id289">
<h5>Bug Fixes<a class="headerlink" href="#id289" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2535">issue #2535</a>: Improve error message when test functions of <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses use a parametrized fixture.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3057">issue #3057</a>: <code class="docutils literal notranslate"><span class="pre">request.fixturenames</span></code> now correctly returns the name of fixtures created by <code class="docutils literal notranslate"><span class="pre">request.getfixturevalue()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3946">issue #3946</a>: Warning filters passed as command line options using <code class="docutils literal notranslate"><span class="pre">-W</span></code> now take precedence over filters defined in <code class="docutils literal notranslate"><span class="pre">ini</span></code>
configuration files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4066">issue #4066</a>: Fix source reindenting by using <code class="docutils literal notranslate"><span class="pre">textwrap.dedent</span></code> directly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4102">issue #4102</a>: <code class="docutils literal notranslate"><span class="pre">pytest.warn</span></code> will capture previously-warned warnings in Python 2. Previously they were never raised.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4108">issue #4108</a>: Resolve symbolic links for args.</p>
<p>This fixes running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">tests/test_foo.py::test_bar</span></code>, where <code class="docutils literal notranslate"><span class="pre">tests</span></code>
is a symlink to <code class="docutils literal notranslate"><span class="pre">project/app/tests</span></code>:
previously <code class="docutils literal notranslate"><span class="pre">project/app/conftest.py</span></code> would be ignored for fixtures then.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4132">issue #4132</a>: Fix duplicate printing of internal errors when using <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4135">issue #4135</a>: pathlib based tmpdir cleanup now correctly handles symlinks in the folder.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4152">issue #4152</a>: Display the filename when encountering <code class="docutils literal notranslate"><span class="pre">SyntaxWarning</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id290">
<h5>Improved Documentation<a class="headerlink" href="#id290" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3713">issue #3713</a>: Update usefixtures documentation to clarify that it can’t be used with fixture functions.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4058">issue #4058</a>: Update fixture documentation to specify that a fixture can be invoked twice in the scope it’s defined for.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4064">issue #4064</a>: According to unittest.rst, setUpModule and tearDownModule were not implemented, but it turns out they are. So updated the documentation for unittest.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4151">issue #4151</a>: Add tempir testing example to CONTRIBUTING.rst guide</p></li>
</ul>
</div>
<div class="section" id="id291">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id291" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2293">issue #2293</a>: The internal <code class="docutils literal notranslate"><span class="pre">MarkerError</span></code> exception has been removed.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3988">issue #3988</a>: Port the implementation of tmpdir to pathlib.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4063">issue #4063</a>: Exclude 0.00 second entries from <code class="docutils literal notranslate"><span class="pre">--duration</span></code> output unless <code class="docutils literal notranslate"><span class="pre">-vv</span></code> is passed on the command-line.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4093">issue #4093</a>: Fixed formatting of string literals in internal tests.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-2-2018-10-02">
<h4>pytest 3.8.2 (2018-10-02)<a class="headerlink" href="#pytest-3-8-2-2018-10-02" title="Permalink to this headline">¶</a></h4>
<div class="section" id="deprecations-and-removals">
<h5>Deprecations and Removals<a class="headerlink" href="#deprecations-and-removals" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4036">issue #4036</a>: The <code class="docutils literal notranslate"><span class="pre">item</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">pytest_warning_captured</span></code> hook is now documented as deprecated. We realized only after
the <code class="docutils literal notranslate"><span class="pre">3.8</span></code> release that this parameter is incompatible with <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code>.</p>
<p>Our policy is to not deprecate features during bug-fix releases, but in this case we believe it makes sense as we are
only documenting it as deprecated, without issuing warnings which might potentially break test suites. This will get
the word out that hook implementers should not use this parameter at all.</p>
<p>In a future release <code class="docutils literal notranslate"><span class="pre">item</span></code> will always be <code class="docutils literal notranslate"><span class="pre">None</span></code> and will emit a proper warning when a hook implementation
makes use of it.</p>
</li>
</ul>
</div>
<div class="section" id="id292">
<h5>Bug Fixes<a class="headerlink" href="#id292" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3539">issue #3539</a>: Fix reload on assertion rewritten modules.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4034">issue #4034</a>: The <code class="docutils literal notranslate"><span class="pre">.user_properties</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">TestReport</span></code> objects is a list
of (name, value) tuples, but could sometimes be instantiated as a tuple
of tuples.  It is now always a list.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4039">issue #4039</a>: No longer issue warnings about using <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> in non-top-level directories when using <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code>: the
current <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code> mechanism is not reliable and might give false negatives.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4040">issue #4040</a>: Exclude empty reports for passed tests when <code class="docutils literal notranslate"><span class="pre">-rP</span></code> option is used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4051">issue #4051</a>: Improve error message when an invalid Python expression is passed to the <code class="docutils literal notranslate"><span class="pre">-m</span></code> option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/4056">issue #4056</a>: <code class="docutils literal notranslate"><span class="pre">MonkeyPatch.setenv</span></code> and <code class="docutils literal notranslate"><span class="pre">MonkeyPatch.delenv</span></code> issue a warning if the environment variable name is not <code class="docutils literal notranslate"><span class="pre">str</span></code> on Python 2.</p>
<p>In Python 2, adding <code class="docutils literal notranslate"><span class="pre">unicode</span></code> keys to <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> causes problems with <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> (and possible other modules),
making this a subtle bug specially susceptible when used with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">unicode_literals</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="id293">
<h5>Improved Documentation<a class="headerlink" href="#id293" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3928">issue #3928</a>: Add possible values for fixture scope to docs.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-1-2018-09-22">
<h4>pytest 3.8.1 (2018-09-22)<a class="headerlink" href="#pytest-3-8-1-2018-09-22" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id294">
<h5>Bug Fixes<a class="headerlink" href="#id294" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3286">issue #3286</a>: <code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> directory is now automatically ignored by Git. Users who would like to contribute a solution for other SCMs please consult/comment on this issue.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3749">issue #3749</a>: Fix the following error during collection of tests inside packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">TypeError</span><span class="p">:</span> <span class="nb">object</span> <span class="n">of</span> <span class="nb">type</span> <span class="s1">&#39;Package&#39;</span> <span class="n">has</span> <span class="n">no</span> <span class="nb">len</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3941">issue #3941</a>: Fix bug where indirect parametrization would consider the scope of all fixtures used by the test function to determine the parametrization scope, and not only the scope of the fixtures being parametrized.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3973">issue #3973</a>: Fix crash of the assertion rewriter if a test changed the current working directory without restoring it afterwards.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3998">issue #3998</a>: Fix issue that prevented some caplog properties (for example <code class="docutils literal notranslate"><span class="pre">record_tuples</span></code>) from being available when entering the debugger with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3999">issue #3999</a>: Fix <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> in python2.x when a class returns a non-ascii binary <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> in an assertion which also contains non-ascii text.</p></li>
</ul>
</div>
<div class="section" id="id295">
<h5>Improved Documentation<a class="headerlink" href="#id295" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3996">issue #3996</a>: New <a class="reference internal" href="contents.html#document-deprecations"><span class="doc">Deprecations and Removals</span></a> page shows all currently
deprecated features, the rationale to do so, and alternatives to update your code. It also list features removed
from pytest in past major releases to help those with ancient pytest versions to upgrade.</p></li>
</ul>
</div>
<div class="section" id="id296">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id296" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3955">issue #3955</a>: Improve pre-commit detection for changelog filenames</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3975">issue #3975</a>: Remove legacy code around im_func as that was python2 only</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-8-0-2018-09-05">
<h4>pytest 3.8.0 (2018-09-05)<a class="headerlink" href="#pytest-3-8-0-2018-09-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id297">
<h5>Deprecations and Removals<a class="headerlink" href="#id297" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2452">issue #2452</a>: <code class="docutils literal notranslate"><span class="pre">Config.warn</span></code> and <code class="docutils literal notranslate"><span class="pre">Node.warn</span></code> have been
deprecated, see <a class="reference internal" href="contents.html#config-warn-and-node-warn-deprecated"><span class="std std-ref">Config.warn and Node.warn</span></a> for rationale and
examples.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3936">issue #3936</a>: <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.filterwarnings</span></code> second parameter is no longer regex-escaped,
making it possible to actually use regular expressions to check the warning message.</p>
<p><strong>Note</strong>: regex-escaping the match string was an implementation oversight that might break test suites which depend
on the old behavior.</p>
</li>
</ul>
</div>
<div class="section" id="id298">
<h5>Features<a class="headerlink" href="#id298" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2452">issue #2452</a>: Internal pytest warnings are now issued using the standard <code class="docutils literal notranslate"><span class="pre">warnings</span></code> module, making it possible to use
the standard warnings filters to manage those warnings. This introduces <code class="docutils literal notranslate"><span class="pre">PytestWarning</span></code>,
<code class="docutils literal notranslate"><span class="pre">PytestDeprecationWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warning</span></code> warning types as part of the public API.</p>
<p>Consult <a class="reference internal" href="contents.html#internal-warnings"><span class="std std-ref">the documentation</span></a> for more info.</p>
</li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2908">issue #2908</a>: <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> and <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> are now shown by default if no other warning filter is
configured. This makes pytest more compliant with
<span class="target" id="index-7"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0506#recommended-filter-settings-for-test-runners"><strong>PEP 506#recommended-filter-settings-for-test-runners</strong></a>. See
<a class="reference internal" href="contents.html#deprecation-warnings"><span class="std std-ref">the docs</span></a> for
more info.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3251">issue #3251</a>: Warnings are now captured and displayed during test collection.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3784">issue #3784</a>: <code class="docutils literal notranslate"><span class="pre">PYTEST_DISABLE_PLUGIN_AUTOLOAD</span></code> environment variable disables plugin auto-loading when set.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3829">issue #3829</a>: Added the <code class="docutils literal notranslate"><span class="pre">count</span></code> option to <code class="docutils literal notranslate"><span class="pre">console_output_style</span></code> to enable displaying the progress as a count instead of a percentage.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3837">issue #3837</a>: Added support for ‘xfailed’ and ‘xpassed’ outcomes to the <code class="docutils literal notranslate"><span class="pre">pytester.RunResult.assert_outcomes</span></code> signature.</p></li>
</ul>
</div>
<div class="section" id="id299">
<h5>Bug Fixes<a class="headerlink" href="#id299" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3911">issue #3911</a>: Terminal writer now takes into account unicode character width when writing out progress.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3913">issue #3913</a>: Pytest now returns with correct exit code (EXIT_USAGEERROR, 4) when called with unknown arguments.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3918">issue #3918</a>: Improve performance of assertion rewriting.</p></li>
</ul>
</div>
<div class="section" id="id300">
<h5>Improved Documentation<a class="headerlink" href="#id300" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3566">issue #3566</a>: Added a blurb in usage.rst for the usage of -r flag which is used to show an extra test summary info.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3907">issue #3907</a>: Corrected type of the exceptions collection passed to <code class="docutils literal notranslate"><span class="pre">xfail</span></code>: <code class="docutils literal notranslate"><span class="pre">raises</span></code> argument accepts a <code class="docutils literal notranslate"><span class="pre">tuple</span></code> instead of <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id301">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id301" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3853">issue #3853</a>: Removed <code class="docutils literal notranslate"><span class="pre">&quot;run</span> <span class="pre">all</span> <span class="pre">(no</span> <span class="pre">recorded</span> <span class="pre">failures)&quot;</span></code> message printed with <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> and <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> when there are no failed tests.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-4-2018-08-29">
<h4>pytest 3.7.4 (2018-08-29)<a class="headerlink" href="#pytest-3-7-4-2018-08-29" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id302">
<h5>Bug Fixes<a class="headerlink" href="#id302" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3506">issue #3506</a>: Fix possible infinite recursion when writing <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3853">issue #3853</a>: Cache plugin now obeys the <code class="docutils literal notranslate"><span class="pre">-q</span></code> flag when <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> and <code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> flags are used.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3883">issue #3883</a>: Fix bad console output when using <code class="docutils literal notranslate"><span class="pre">console_output_style=classic</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3888">issue #3888</a>: Fix macOS specific code using <code class="docutils literal notranslate"><span class="pre">capturemanager</span></code> plugin in doctests.</p></li>
</ul>
</div>
<div class="section" id="id303">
<h5>Improved Documentation<a class="headerlink" href="#id303" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3902">issue #3902</a>: Fix pytest.org links</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-3-2018-08-26">
<h4>pytest 3.7.3 (2018-08-26)<a class="headerlink" href="#pytest-3-7-3-2018-08-26" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id304">
<h5>Bug Fixes<a class="headerlink" href="#id304" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3033">issue #3033</a>: Fixtures during teardown can again use <code class="docutils literal notranslate"><span class="pre">capsys</span></code> and <code class="docutils literal notranslate"><span class="pre">capfd</span></code> to inspect output captured during tests.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3773">issue #3773</a>: Fix collection of tests from <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files if they match the <code class="docutils literal notranslate"><span class="pre">python_files</span></code> configuration option.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3796">issue #3796</a>: Fix issue where teardown of fixtures of consecutive sub-packages were executed once, at the end of the outer
package.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3816">issue #3816</a>: Fix bug where <code class="docutils literal notranslate"><span class="pre">--show-capture=no</span></code> option would still show logs printed during fixture teardown.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3819">issue #3819</a>: Fix <code class="docutils literal notranslate"><span class="pre">stdout/stderr</span></code> not getting captured when real-time cli logging is active.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3843">issue #3843</a>: Fix collection error when specifying test functions directly in the command line using <code class="docutils literal notranslate"><span class="pre">test.py::test</span></code> syntax together with <code class="docutils literal notranslate"><span class="pre">--doctest-modules</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3848">issue #3848</a>: Fix bugs where unicode arguments could not be passed to <code class="docutils literal notranslate"><span class="pre">testdir.runpytest</span></code> on Python 2.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3854">issue #3854</a>: Fix double collection of tests within packages when the filename starts with a capital letter.</p></li>
</ul>
</div>
<div class="section" id="id305">
<h5>Improved Documentation<a class="headerlink" href="#id305" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3824">issue #3824</a>: Added example for multiple glob pattern matches in <code class="docutils literal notranslate"><span class="pre">python_files</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3833">issue #3833</a>: Added missing docs for <code class="docutils literal notranslate"><span class="pre">pytester.Testdir</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3870">issue #3870</a>: Correct documentation for setuptools integration.</p></li>
</ul>
</div>
<div class="section" id="id306">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id306" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3826">issue #3826</a>: Replace broken type annotations with type comments.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3845">issue #3845</a>: Remove a reference to issue <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/568">issue #568</a> from the documentation, which has since been
fixed.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-2-2018-08-16">
<h4>pytest 3.7.2 (2018-08-16)<a class="headerlink" href="#pytest-3-7-2-2018-08-16" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id307">
<h5>Bug Fixes<a class="headerlink" href="#id307" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3671">issue #3671</a>: Fix <code class="docutils literal notranslate"><span class="pre">filterwarnings</span></code> not being registered as a builtin mark.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3768">issue #3768</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3789">issue #3789</a>: Fix test collection from packages mixed with normal directories.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3771">issue #3771</a>: Fix infinite recursion during collection if a <code class="docutils literal notranslate"><span class="pre">pytest_ignore_collect</span></code> hook returns <code class="docutils literal notranslate"><span class="pre">False</span></code> instead of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3774">issue #3774</a>: Fix bug where decorated fixtures would lose functionality (for example <code class="docutils literal notranslate"><span class="pre">&#64;mock.patch</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3775">issue #3775</a>: Fix bug where importing modules or other objects with prefix <code class="docutils literal notranslate"><span class="pre">pytest_</span></code> prefix would raise a <code class="docutils literal notranslate"><span class="pre">PluginValidationError</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3788">issue #3788</a>: Fix <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> during teardown of <code class="docutils literal notranslate"><span class="pre">TestCase</span></code> subclasses which raise an exception during <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3804">issue #3804</a>: Fix traceback reporting for exceptions with <code class="docutils literal notranslate"><span class="pre">__cause__</span></code> cycles.</p></li>
</ul>
</div>
<div class="section" id="id308">
<h5>Improved Documentation<a class="headerlink" href="#id308" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3746">issue #3746</a>: Add documentation for <code class="docutils literal notranslate"><span class="pre">metafunc.config</span></code> that had been mistakenly hidden.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-1-2018-08-02">
<h4>pytest 3.7.1 (2018-08-02)<a class="headerlink" href="#pytest-3-7-1-2018-08-02" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id309">
<h5>Bug Fixes<a class="headerlink" href="#id309" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3473">issue #3473</a>: Raise immediately if <code class="docutils literal notranslate"><span class="pre">approx()</span></code> is given an expected value of a type it doesn’t understand (e.g. strings, nested dicts, etc.).</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3712">issue #3712</a>: Correctly represent the dimensions of a numpy array when calling <code class="docutils literal notranslate"><span class="pre">repr()</span></code> on <code class="docutils literal notranslate"><span class="pre">approx()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3742">issue #3742</a>: Fix incompatibility with third party plugins during collection, which produced the error <code class="docutils literal notranslate"><span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'_collectfile'</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3745">issue #3745</a>: Display the absolute path if <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> is not relative to the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> instead of failing.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3747">issue #3747</a>: Fix compatibility problem with plugins and the warning code issued by fixture functions when they are called directly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3748">issue #3748</a>: Fix infinite recursion in <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> with arrays in <code class="docutils literal notranslate"><span class="pre">numpy&lt;1.13</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3757">issue #3757</a>: Pin pathlib2 to <code class="docutils literal notranslate"><span class="pre">&gt;=2.2.0</span></code> as we require <code class="docutils literal notranslate"><span class="pre">__fspath__</span></code> support.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3763">issue #3763</a>: Fix <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when the assertion message is <code class="docutils literal notranslate"><span class="pre">bytes</span></code> in python 3.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-7-0-2018-07-30">
<h4>pytest 3.7.0 (2018-07-30)<a class="headerlink" href="#pytest-3-7-0-2018-07-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id310">
<h5>Deprecations and Removals<a class="headerlink" href="#id310" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2639">issue #2639</a>: <code class="docutils literal notranslate"><span class="pre">pytest_namespace</span></code> has been <a class="reference internal" href="contents.html#pytest-namespace-deprecated"><span class="std std-ref">deprecated</span></a>.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3661">issue #3661</a>: Calling a fixture function directly, as opposed to request them in a test function, now issues a <code class="docutils literal notranslate"><span class="pre">RemovedInPytest4Warning</span></code>. See <a class="reference internal" href="contents.html#calling-fixtures-directly-deprecated"><span class="std std-ref">the documentation for rationale and examples</span></a>.</p></li>
</ul>
</div>
<div class="section" id="id311">
<h5>Features<a class="headerlink" href="#id311" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2283">issue #2283</a>: New <code class="docutils literal notranslate"><span class="pre">package</span></code> fixture scope: fixtures are finalized when the last test of a <em>package</em> finishes. This feature is considered <strong>experimental</strong>, so use it sparingly.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3576">issue #3576</a>: <code class="docutils literal notranslate"><span class="pre">Node.add_marker</span></code> now supports an <code class="docutils literal notranslate"><span class="pre">append=True/False</span></code> parameter to determine whether the mark comes last (default) or first.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3579">issue #3579</a>: Fixture <code class="docutils literal notranslate"><span class="pre">caplog</span></code> now has a <code class="docutils literal notranslate"><span class="pre">messages</span></code> property, providing convenient access to the format-interpolated log messages without the extra data provided by the formatter/handler.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3610">issue #3610</a>: New <code class="docutils literal notranslate"><span class="pre">--trace</span></code> option to enter the debugger at the start of a test.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3623">issue #3623</a>: Introduce <code class="docutils literal notranslate"><span class="pre">pytester.copy_example</span></code> as helper to do acceptance tests against examples from the project.</p></li>
</ul>
</div>
<div class="section" id="id312">
<h5>Bug Fixes<a class="headerlink" href="#id312" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2220">issue #2220</a>: Fix a bug where fixtures overridden by direct parameters (for example parametrization) were being instantiated even if they were not being used by a test.</p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3695">issue #3695</a>: Fix <code class="docutils literal notranslate"><span class="pre">ApproxNumpy</span></code> initialisation argument mixup, <code class="docutils literal notranslate"><span class="pre">abs</span></code> and <code class="docutils literal notranslate"><span class="pre">rel</span></code> tolerances were flipped causing strange comparison results.
Add tests to check <code class="docutils literal notranslate"><span class="pre">abs</span></code> and <code class="docutils literal notranslate"><span class="pre">rel</span></code> tolerances for <code class="docutils literal notranslate"><span class="pre">np.array</span></code> and test for expecting <code class="docutils literal notranslate"><span class="pre">nan</span></code> with <code class="docutils literal notranslate"><span class="pre">np.array()</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/980">issue #980</a>: Fix truncated locals output in verbose mode.</p></li>
</ul>
</div>
<div class="section" id="id313">
<h5>Improved Documentation<a class="headerlink" href="#id313" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3295">issue #3295</a>: Correct the usage documentation of <code class="docutils literal notranslate"><span class="pre">--last-failed-no-failures</span></code> by adding the missing <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> argument in the presented examples, because they are misleading and lead to think that the missing argument is not needed.</p></li>
</ul>
</div>
<div class="section" id="id314">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id314" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3519">issue #3519</a>: Now a <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file is created in <code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> to make it clear why the directory exists.</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-4-2018-07-28">
<h4>pytest 3.6.4 (2018-07-28)<a class="headerlink" href="#pytest-3-6-4-2018-07-28" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id315">
<h5>Bug Fixes<a class="headerlink" href="#id315" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Invoke pytest using <code class="docutils literal notranslate"><span class="pre">-mpytest</span></code> so <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> does not get polluted by packages installed in <code class="docutils literal notranslate"><span class="pre">site-packages</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/742">issue #742</a>)</p></li>
</ul>
</div>
<div class="section" id="id316">
<h5>Improved Documentation<a class="headerlink" href="#id316" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">smtp_connection</span></code> instead of <code class="docutils literal notranslate"><span class="pre">smtp</span></code> in fixtures documentation to avoid possible confusion. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3592">issue #3592</a>)</p></li>
</ul>
</div>
<div class="section" id="id317">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id317" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Remove obsolete <code class="docutils literal notranslate"><span class="pre">__future__</span></code> imports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2319">issue #2319</a>)</p></li>
<li><p>Add CITATION to provide information on how to formally cite pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3402">issue #3402</a>)</p></li>
<li><p>Replace broken type annotations with type comments. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3635">issue #3635</a>)</p></li>
<li><p>Pin <code class="docutils literal notranslate"><span class="pre">pluggy</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;0.8</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3727">issue #3727</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-3-2018-07-04">
<h4>pytest 3.6.3 (2018-07-04)<a class="headerlink" href="#pytest-3-6-3-2018-07-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id318">
<h5>Bug Fixes<a class="headerlink" href="#id318" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">ImportWarning</span></code> triggered by explicit relative imports in
assertion-rewritten package modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3061">issue #3061</a>)</p></li>
<li><p>Fix error in <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> when dealing with 0-dimension numpy
arrays. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3593">issue #3593</a>)</p></li>
<li><p>No longer raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when using the <code class="docutils literal notranslate"><span class="pre">get_marker</span></code> API. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3605">issue #3605</a>)</p></li>
<li><p>Fix problem where log messages with non-ascii characters would not
appear in the output log file.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3630">issue #3630</a>)</p></li>
<li><p>No longer raise <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> when legacy marks can’t be stored in
functions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3631">issue #3631</a>)</p></li>
</ul>
</div>
<div class="section" id="id319">
<h5>Improved Documentation<a class="headerlink" href="#id319" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>The description above the example for <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.skipif</span></code> now better
matches the code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3611">issue #3611</a>)</p></li>
</ul>
</div>
<div class="section" id="id320">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id320" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Internal refactoring: removed unused <code class="docutils literal notranslate"><span class="pre">CallSpec2tox</span> <span class="pre">._globalid_args</span></code>
attribute and <code class="docutils literal notranslate"><span class="pre">metafunc</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">CallSpec2.copy()</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3598">issue #3598</a>)</p></li>
<li><p>Silence usage of <code class="docutils literal notranslate"><span class="pre">reduce</span></code> warning in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3609">issue #3609</a>)</p></li>
<li><p>Fix usage of <code class="docutils literal notranslate"><span class="pre">attr.ib</span></code> deprecated <code class="docutils literal notranslate"><span class="pre">convert</span></code> parameter. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3653">issue #3653</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-2-2018-06-20">
<h4>pytest 3.6.2 (2018-06-20)<a class="headerlink" href="#pytest-3-6-2-2018-06-20" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id321">
<h5>Bug Fixes<a class="headerlink" href="#id321" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix regression in <code class="docutils literal notranslate"><span class="pre">Node.add_marker</span></code> by extracting the mark object of a
<code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3555">issue #3555</a>)</p></li>
<li><p>Warnings without <code class="docutils literal notranslate"><span class="pre">location</span></code> were reported as <code class="docutils literal notranslate"><span class="pre">None</span></code>. This is corrected to
now report <code class="docutils literal notranslate"><span class="pre">&lt;undetermined</span> <span class="pre">location&gt;</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3563">issue #3563</a>)</p></li>
<li><p>Continue to call finalizers in the stack when a finalizer in a former scope
raises an exception. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3569">issue #3569</a>)</p></li>
<li><p>Fix encoding error with <code class="docutils literal notranslate"><span class="pre">print</span></code> statements in doctests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3583">issue #3583</a>)</p></li>
</ul>
</div>
<div class="section" id="id322">
<h5>Improved Documentation<a class="headerlink" href="#id322" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add documentation for the <code class="docutils literal notranslate"><span class="pre">--strict</span></code> flag. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3549">issue #3549</a>)</p></li>
</ul>
</div>
<div class="section" id="id323">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id323" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Update old quotation style to parens in fixture.rst documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3525">issue #3525</a>)</p></li>
<li><p>Improve display of hint about <code class="docutils literal notranslate"><span class="pre">--fulltrace</span></code> with <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3545">issue #3545</a>)</p></li>
<li><p>pytest’s testsuite is no longer runnable through <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code> –
instead invoke <code class="docutils literal notranslate"><span class="pre">pytest</span></code> or <code class="docutils literal notranslate"><span class="pre">tox</span></code> directly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3552">issue #3552</a>)</p></li>
<li><p>Fix typo in documentation (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3567">issue #3567</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-1-2018-06-05">
<h4>pytest 3.6.1 (2018-06-05)<a class="headerlink" href="#pytest-3-6-1-2018-06-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id324">
<h5>Bug Fixes<a class="headerlink" href="#id324" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fixed a bug where stdout and stderr were logged twice by junitxml when a test
was marked xfail. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3491">issue #3491</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code> mark applied to unittest tests by correctly instantiating
<code class="docutils literal notranslate"><span class="pre">FixtureInfo</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3498">issue #3498</a>)</p></li>
<li><p>Fix assertion rewriter compatibility with libraries that monkey patch
<code class="docutils literal notranslate"><span class="pre">file</span></code> objects. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3503">issue #3503</a>)</p></li>
</ul>
</div>
<div class="section" id="id325">
<h5>Improved Documentation<a class="headerlink" href="#id325" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Added a section on how to use fixtures as factories to the fixture
documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3461">issue #3461</a>)</p></li>
</ul>
</div>
<div class="section" id="id326">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id326" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Enable caching for pip/pre-commit in order to reduce build time on
travis/appveyor. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3502">issue #3502</a>)</p></li>
<li><p>Switch pytest to the src/ layout as we already suggested it for good practice
- now we implement it as well. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3513">issue #3513</a>)</p></li>
<li><p>Fix if in tests to support 3.7.0b5, where a docstring handling in AST got
reverted. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3530">issue #3530</a>)</p></li>
<li><p>Remove some python2.5 compatibility code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3529">issue #3529</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-6-0-2018-05-23">
<h4>pytest 3.6.0 (2018-05-23)<a class="headerlink" href="#pytest-3-6-0-2018-05-23" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id327">
<h5>Features<a class="headerlink" href="#id327" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Revamp the internals of the <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> implementation with correct per
node handling which fixes a number of long standing bugs caused by the old
design. This introduces new <code class="docutils literal notranslate"><span class="pre">Node.iter_markers(name)</span></code> and
<code class="docutils literal notranslate"><span class="pre">Node.get_closest_marker(name)</span></code> APIs. Users are <strong>strongly encouraged</strong> to
read the <a class="reference internal" href="contents.html#marker-revamp"><span class="std std-ref">reasons for the revamp in the docs</span></a>,
or jump over to details about <a class="reference internal" href="contents.html#update-marker-code"><span class="std std-ref">updating existing code to use the new APIs</span></a>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3317">issue #3317</a>)</p></li>
<li><p>Now when <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> is applied more than once to the same function a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised. This buggy behavior would cause surprising problems
and if was working for a test suite it was mostly by accident. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2334">issue #2334</a>)</p></li>
<li><p>Support for Python 3.7’s builtin <code class="docutils literal notranslate"><span class="pre">breakpoint()</span></code> method, see
<a class="reference internal" href="contents.html#breakpoint-builtin"><span class="std std-ref">Using the builtin breakpoint function</span></a> for
details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3180">issue #3180</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">context()</span></code> function which acts as a context
manager which undoes all patching done within the <code class="docutils literal notranslate"><span class="pre">with</span></code> block. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3290">issue #3290</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> option now causes KeyboardInterrupt to enter the debugger,
instead of stopping the test session. On python 2.7, hitting CTRL+C again
exits the debugger. On python 3.2 and higher, use CTRL+D. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3299">issue #3299</a>)</p></li>
<li><p>pytest no longer changes the log level of the root logger when the
<code class="docutils literal notranslate"><span class="pre">log-level</span></code> parameter has greater numeric value than that of the level of
the root logger, which makes it play better with custom logging configuration
in user code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3307">issue #3307</a>)</p></li>
</ul>
</div>
<div class="section" id="id328">
<h5>Bug Fixes<a class="headerlink" href="#id328" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>A rare race-condition which might result in corrupted <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files on
Windows has been hopefully solved. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3008">issue #3008</a>)</p></li>
<li><p>Also use iter_marker for discovering the marks applying for marker
expressions from the cli to avoid the bad data from the legacy mark storage.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3441">issue #3441</a>)</p></li>
<li><p>When showing diffs of failed assertions where the contents contain only
whitespace, escape them using <code class="docutils literal notranslate"><span class="pre">repr()</span></code> first to make it easy to spot the
differences. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3443">issue #3443</a>)</p></li>
</ul>
</div>
<div class="section" id="id329">
<h5>Improved Documentation<a class="headerlink" href="#id329" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Change documentation copyright year to a range which auto-updates itself each
time it is published. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3303">issue #3303</a>)</p></li>
</ul>
</div>
<div class="section" id="id330">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id330" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> now depends on the <a class="reference external" href="https://github.com/untitaker/python-atomicwrites">python-atomicwrites</a> library. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3008">issue #3008</a>)</p></li>
<li><p>Update all pypi.python.org URLs to pypi.org. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3431">issue #3431</a>)</p></li>
<li><p>Detect <code class="docutils literal notranslate"><span class="pre">pytest_</span></code> prefixed hooks using the internal plugin manager since
<code class="docutils literal notranslate"><span class="pre">pluggy</span></code> is deprecating the <code class="docutils literal notranslate"><span class="pre">implprefix</span></code> argument to <code class="docutils literal notranslate"><span class="pre">PluginManager</span></code>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3487">issue #3487</a>)</p></li>
<li><p>Import <code class="docutils literal notranslate"><span class="pre">Mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">Sequence</span></code> from <code class="docutils literal notranslate"><span class="pre">_pytest.compat</span></code> instead of
directly from <code class="docutils literal notranslate"><span class="pre">collections</span></code> in <code class="docutils literal notranslate"><span class="pre">python_api.py::approx</span></code>. Add <code class="docutils literal notranslate"><span class="pre">Mapping</span></code>
to <code class="docutils literal notranslate"><span class="pre">_pytest.compat</span></code>, import it from <code class="docutils literal notranslate"><span class="pre">collections</span></code> on python 2, but from
<code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> on Python 3 to avoid a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> on Python
3.7 or newer. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3497">issue #3497</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-5-1-2018-04-23">
<h4>pytest 3.5.1 (2018-04-23)<a class="headerlink" href="#pytest-3-5-1-2018-04-23" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id331">
<h5>Bug Fixes<a class="headerlink" href="#id331" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Reset <code class="docutils literal notranslate"><span class="pre">sys.last_type</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.last_value</span></code> and <code class="docutils literal notranslate"><span class="pre">sys.last_traceback</span></code> before
each test executes. Those attributes are added by pytest during the test run
to aid debugging, but were never reset so they would create a leaking
reference to the last failing test’s frame which in turn could never be
reclaimed by the garbage collector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2798">issue #2798</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when receiving an unknown keyword
argument. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3348">issue #3348</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> now works with exception classes that look like iterables.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3372">issue #3372</a>)</p></li>
</ul>
</div>
<div class="section" id="id332">
<h5>Improved Documentation<a class="headerlink" href="#id332" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix typo in <code class="docutils literal notranslate"><span class="pre">caplog</span></code> fixture documentation, which incorrectly identified
certain attributes as methods. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3406">issue #3406</a>)</p></li>
</ul>
</div>
<div class="section" id="id333">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id333" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Added a more indicative error message when parametrizing a function whose
argument takes a default value. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3221">issue #3221</a>)</p></li>
<li><p>Remove internal <code class="docutils literal notranslate"><span class="pre">_pytest.terminal.flatten</span></code> function in favor of
<code class="docutils literal notranslate"><span class="pre">more_itertools.collapse</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3330">issue #3330</a>)</p></li>
<li><p>Import some modules from <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> instead of <code class="docutils literal notranslate"><span class="pre">collections</span></code> as
the former modules trigger <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> in Python 3.7. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3339">issue #3339</a>)</p></li>
<li><p>record_property is no longer experimental, removing the warnings was
forgotten. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3360">issue #3360</a>)</p></li>
<li><p>Mention in documentation and CLI help that fixtures with leading <code class="docutils literal notranslate"><span class="pre">_</span></code> are
printed by <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--fixtures</span></code> only if the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option is added. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3398">issue #3398</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-5-0-2018-03-21">
<h4>pytest 3.5.0 (2018-03-21)<a class="headerlink" href="#pytest-3-5-0-2018-03-21" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id334">
<h5>Deprecations and Removals<a class="headerlink" href="#id334" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">record_xml_property</span></code> fixture is now deprecated in favor of the more
generic <code class="docutils literal notranslate"><span class="pre">record_property</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2770">issue #2770</a>)</p></li>
<li><p>Defining <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> is now deprecated in non-top-level conftest.py
files, because they “leak” to the entire directory tree.
<a class="reference internal" href="contents.html#pytest-plugins-in-non-top-level-conftest-files-deprecated"><span class="std std-ref">See the docs</span></a>
for the rationale behind this decision (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3084">issue #3084</a>)</p></li>
</ul>
</div>
<div class="section" id="id335">
<h5>Features<a class="headerlink" href="#id335" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">--show-capture</span></code> command-line option that allows to specify how to
display captured output when tests fail: <code class="docutils literal notranslate"><span class="pre">no</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">stderr</span></code>,
<code class="docutils literal notranslate"><span class="pre">log</span></code> or <code class="docutils literal notranslate"><span class="pre">all</span></code> (the default). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1478">issue #1478</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--rootdir</span></code> command-line option to override the rules for discovering
the root directory. See <a class="reference internal" href="contents.html#document-reference/customize"><span class="doc">customize</span></a> in the documentation for
details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1642">issue #1642</a>)</p></li>
<li><p>Fixtures are now instantiated based on their scopes, with higher-scoped
fixtures (such as <code class="docutils literal notranslate"><span class="pre">session</span></code>) being instantiated first than lower-scoped
fixtures (such as <code class="docutils literal notranslate"><span class="pre">function</span></code>). The relative order of fixtures of the same
scope is kept unchanged, based in their declaration order and their
dependencies. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2405">issue #2405</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">record_xml_property</span></code> renamed to <code class="docutils literal notranslate"><span class="pre">record_property</span></code> and is now compatible
with xdist, markers and any reporter. <code class="docutils literal notranslate"><span class="pre">record_xml_property</span></code> name is now
deprecated. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2770">issue #2770</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--nf</span></code>, <code class="docutils literal notranslate"><span class="pre">--new-first</span></code> options: run new tests first followed by the
rest of the tests, in both cases tests are also sorted by the file modified
time, with more recent files coming first. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3034">issue #3034</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--last-failed-no-failures</span></code> command-line option that allows to specify
the behavior of the cache plugin’s <code class="docutils literal notranslate"><span class="pre">`--last-failed</span></code> feature when no tests
failed in the last run (or no cache was found): <code class="docutils literal notranslate"><span class="pre">none</span></code> or <code class="docutils literal notranslate"><span class="pre">all</span></code> (the
default). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3139">issue #3139</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--doctest-continue-on-failure</span></code> command-line option to enable doctests
to show multiple failures for each snippet, instead of stopping at the first
failure. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3149">issue #3149</a>)</p></li>
<li><p>Captured log messages are added to the <code class="docutils literal notranslate"><span class="pre">&lt;system-out&gt;</span></code> tag in the generated
junit xml file if the <code class="docutils literal notranslate"><span class="pre">junit_logging</span></code> ini option is set to <code class="docutils literal notranslate"><span class="pre">system-out</span></code>.
If the value of this ini option is <code class="docutils literal notranslate"><span class="pre">system-err</span></code>, the logs are written to
<code class="docutils literal notranslate"><span class="pre">&lt;system-err&gt;</span></code>. The default value for <code class="docutils literal notranslate"><span class="pre">junit_logging</span></code> is <code class="docutils literal notranslate"><span class="pre">no</span></code>, meaning
captured logs are not written to the output file. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3156">issue #3156</a>)</p></li>
<li><p>Allow the logging plugin to handle <code class="docutils literal notranslate"><span class="pre">pytest_runtest_logstart</span></code> and
<code class="docutils literal notranslate"><span class="pre">pytest_runtest_logfinish</span></code> hooks when live logs are enabled. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3189">issue #3189</a>)</p></li>
<li><p>Passing <code class="docutils literal notranslate"><span class="pre">--log-cli-level</span></code> in the command-line now automatically activates
live logging. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3190">issue #3190</a>)</p></li>
<li><p>Add command line option <code class="docutils literal notranslate"><span class="pre">--deselect</span></code> to allow deselection of individual
tests at collection time. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3198">issue #3198</a>)</p></li>
<li><p>Captured logs are printed before entering pdb. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3204">issue #3204</a>)</p></li>
<li><p>Deselected item count is now shown before tests are run, e.g. <code class="docutils literal notranslate"><span class="pre">collected</span> <span class="pre">X</span>
<span class="pre">items</span> <span class="pre">/</span> <span class="pre">Y</span> <span class="pre">deselected</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3213">issue #3213</a>)</p></li>
<li><p>The builtin module <code class="docutils literal notranslate"><span class="pre">platform</span></code> is now available for use in expressions in
<code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3236">issue #3236</a>)</p></li>
<li><p>The <em>short test summary info</em> section now is displayed after tracebacks and
warnings in the terminal. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3255">issue #3255</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> flag to set verbosity level explicitly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3296">issue #3296</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> now accepts comparing a numpy array with a scalar. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3312">issue #3312</a>)</p></li>
</ul>
</div>
<div class="section" id="id336">
<h5>Bug Fixes<a class="headerlink" href="#id336" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Suppress <code class="docutils literal notranslate"><span class="pre">IOError</span></code> when closing the temporary file used for capturing
streams in Python 2.7. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2370">issue #2370</a>)</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">clear()</span></code> method on <code class="docutils literal notranslate"><span class="pre">caplog</span></code> fixture which cleared <code class="docutils literal notranslate"><span class="pre">records</span></code>, but
not the <code class="docutils literal notranslate"><span class="pre">text</span></code> property. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3297">issue #3297</a>)</p></li>
<li><p>During test collection, when stdin is not allowed to be read, the
<code class="docutils literal notranslate"><span class="pre">DontReadFromStdin</span></code> object still allow itself to be iterable and resolved
to an iterator without crashing. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3314">issue #3314</a>)</p></li>
</ul>
</div>
<div class="section" id="id337">
<h5>Improved Documentation<a class="headerlink" href="#id337" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Added a <a class="reference internal" href="contents.html#document-reference/reference"><span class="doc">reference</span></a> page
to the docs. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1713">issue #1713</a>)</p></li>
</ul>
</div>
<div class="section" id="id338">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id338" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Change minimum requirement of <code class="docutils literal notranslate"><span class="pre">attrs</span></code> to <code class="docutils literal notranslate"><span class="pre">17.4.0</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3228">issue #3228</a>)</p></li>
<li><p>Renamed example directories so all tests pass when ran from the base
directory. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3245">issue #3245</a>)</p></li>
<li><p>Internal <code class="docutils literal notranslate"><span class="pre">mark.py</span></code> module has been turned into a package. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3250">issue #3250</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> now depends on the <a class="reference external" href="https://github.com/erikrose/more-itertools">more-itertools</a> package. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3265">issue #3265</a>)</p></li>
<li><p>Added warning when <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> section is used in a <code class="docutils literal notranslate"><span class="pre">.cfg</span></code> file passed
with <code class="docutils literal notranslate"><span class="pre">-c</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3268">issue #3268</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nodeids</span></code> can now be passed explicitly to <code class="docutils literal notranslate"><span class="pre">FSCollector</span></code> and <code class="docutils literal notranslate"><span class="pre">Node</span></code>
constructors. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3291">issue #3291</a>)</p></li>
<li><p>Internal refactoring of <code class="docutils literal notranslate"><span class="pre">FormattedExcinfo</span></code> to use <code class="docutils literal notranslate"><span class="pre">attrs</span></code> facilities and
remove old support code for legacy Python versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3292">issue #3292</a>)</p></li>
<li><p>Refactoring to unify how verbosity is handled internally. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3296">issue #3296</a>)</p></li>
<li><p>Internal refactoring to better integrate with argparse. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3304">issue #3304</a>)</p></li>
<li><p>Fix a python example when calling a fixture in doc/en/usage.rst (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3308">issue #3308</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-2-2018-03-04">
<h4>pytest 3.4.2 (2018-03-04)<a class="headerlink" href="#pytest-3-4-2-2018-03-04" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id339">
<h5>Bug Fixes<a class="headerlink" href="#id339" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Removed progress information when capture option is <code class="docutils literal notranslate"><span class="pre">no</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3203">issue #3203</a>)</p></li>
<li><p>Refactor check of bindir from <code class="docutils literal notranslate"><span class="pre">exists</span></code> to <code class="docutils literal notranslate"><span class="pre">isdir</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3241">issue #3241</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> issue when using <code class="docutils literal notranslate"><span class="pre">approx</span></code> with a <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> value.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3247">issue #3247</a>)</p></li>
<li><p>Fix reference cycle generated when using the <code class="docutils literal notranslate"><span class="pre">request</span></code> fixture. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3249">issue #3249</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code> sections in <code class="docutils literal notranslate"><span class="pre">*.cfg</span></code> files passed by the <code class="docutils literal notranslate"><span class="pre">-c</span></code> option are
now properly recognized. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3260">issue #3260</a>)</p></li>
</ul>
</div>
<div class="section" id="id340">
<h5>Improved Documentation<a class="headerlink" href="#id340" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add logging plugin to plugins list. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3209">issue #3209</a>)</p></li>
</ul>
</div>
<div class="section" id="id341">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id341" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix minor typo in fixture.rst (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3259">issue #3259</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-1-2018-02-20">
<h4>pytest 3.4.1 (2018-02-20)<a class="headerlink" href="#pytest-3-4-1-2018-02-20" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id342">
<h5>Bug Fixes<a class="headerlink" href="#id342" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Move import of <code class="docutils literal notranslate"><span class="pre">doctest.UnexpectedException</span></code> to top-level to avoid possible
errors when using <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1810">issue #1810</a>)</p></li>
<li><p>Added printing of captured stdout/stderr before entering pdb, and improved a
test which was giving false negatives about output capturing. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3052">issue #3052</a>)</p></li>
<li><p>Fix ordering of tests using parametrized fixtures which can lead to fixtures
being created more than necessary. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3161">issue #3161</a>)</p></li>
<li><p>Fix bug where logging happening at hooks outside of “test run” hooks would
cause an internal error. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3184">issue #3184</a>)</p></li>
<li><p>Detect arguments injected by <code class="docutils literal notranslate"><span class="pre">unittest.mock.patch</span></code> decorator correctly when
pypi <code class="docutils literal notranslate"><span class="pre">mock.patch</span></code> is installed and imported. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3206">issue #3206</a>)</p></li>
<li><p>Errors shown when a <code class="docutils literal notranslate"><span class="pre">pytest.raises()</span></code> with <code class="docutils literal notranslate"><span class="pre">match=</span></code> fails are now cleaner
on what happened: When no exception was raised, the “matching ‘…’” part got
removed as it falsely implies that an exception was raised but it didn’t
match. When a wrong exception was raised, it’s now thrown (like
<code class="docutils literal notranslate"><span class="pre">pytest.raised()</span></code> without <code class="docutils literal notranslate"><span class="pre">match=</span></code> would) instead of complaining about
the unmatched text. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3222">issue #3222</a>)</p></li>
<li><p>Fixed output capture handling in doctests on macOS. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/985">issue #985</a>)</p></li>
</ul>
</div>
<div class="section" id="id343">
<h5>Improved Documentation<a class="headerlink" href="#id343" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add Sphinx parameter docs for <code class="docutils literal notranslate"><span class="pre">match</span></code> and <code class="docutils literal notranslate"><span class="pre">message</span></code> args to
<code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3202">issue #3202</a>)</p></li>
</ul>
</div>
<div class="section" id="id344">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id344" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>pytest has changed the publication procedure and is now being published to
PyPI directly from Travis. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3060">issue #3060</a>)</p></li>
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">ParameterSet._for_parameterize()</span></code> to <code class="docutils literal notranslate"><span class="pre">_for_parametrize()</span></code> in
order to comply with the naming convention. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3166">issue #3166</a>)</p></li>
<li><p>Skip failing pdb/doctest test on mac. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/985">issue #985</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-4-0-2018-01-30">
<h4>pytest 3.4.0 (2018-01-30)<a class="headerlink" href="#pytest-3-4-0-2018-01-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id345">
<h5>Deprecations and Removals<a class="headerlink" href="#id345" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>All pytest classes now subclass <code class="docutils literal notranslate"><span class="pre">object</span></code> for better Python 2/3 compatibility.
This should not affect user code except in very rare edge cases. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2147">issue #2147</a>)</p></li>
</ul>
</div>
<div class="section" id="id346">
<h5>Features<a class="headerlink" href="#id346" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Introduce <code class="docutils literal notranslate"><span class="pre">empty_parameter_set_mark</span></code> ini option to select which mark to
apply when <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> is given an empty set of parameters.
Valid options are <code class="docutils literal notranslate"><span class="pre">skip</span></code> (default) and <code class="docutils literal notranslate"><span class="pre">xfail</span></code>. Note that it is planned
to change the default to <code class="docutils literal notranslate"><span class="pre">xfail</span></code> in future releases as this is considered
less error prone. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2527">issue #2527</a>)</p></li>
<li><p><strong>Incompatible change</strong>: after community feedback the <a class="reference internal" href="contents.html#document-how-to/logging"><span class="doc">logging</span></a> functionality has
undergone some changes. Please consult the <a class="reference internal" href="contents.html#log-changes-3-4"><span class="std std-ref">logging documentation</span></a>
for details. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3013">issue #3013</a>)</p></li>
<li><p>Console output falls back to “classic” mode when capturing is disabled (<code class="docutils literal notranslate"><span class="pre">-s</span></code>),
otherwise the output gets garbled to the point of being useless. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3038">issue #3038</a>)</p></li>
<li><p>New <a class="reference internal" href="contents.html#std-hook-pytest_runtest_logfinish"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_logfinish</span></code></a>
hook which is called when a test item has finished executing, analogous to
<a class="reference internal" href="contents.html#std-hook-pytest_runtest_logstart"><code class="xref std std-hook docutils literal notranslate"><span class="pre">pytest_runtest_logstart</span></code></a>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3101">issue #3101</a>)</p></li>
<li><p>Improve performance when collecting tests using many fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3107">issue #3107</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">caplog.get_records(when)</span></code> method which provides access to the captured
records for the <code class="docutils literal notranslate"><span class="pre">&quot;setup&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;call&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;teardown&quot;</span></code>
testing stages. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3117">issue #3117</a>)</p></li>
<li><p>New fixture <code class="docutils literal notranslate"><span class="pre">record_xml_attribute</span></code> that allows modifying and inserting
attributes on the <code class="docutils literal notranslate"><span class="pre">&lt;testcase&gt;</span></code> xml node in JUnit reports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3130">issue #3130</a>)</p></li>
<li><p>The default cache directory has been renamed from <code class="docutils literal notranslate"><span class="pre">.cache</span></code> to
<code class="docutils literal notranslate"><span class="pre">.pytest_cache</span></code> after community feedback that the name <code class="docutils literal notranslate"><span class="pre">.cache</span></code> did not
make it clear that it was used by pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3138">issue #3138</a>)</p></li>
<li><p>Colorize the levelname column in the live-log output. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3142">issue #3142</a>)</p></li>
</ul>
</div>
<div class="section" id="id347">
<h5>Bug Fixes<a class="headerlink" href="#id347" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix hanging pexpect test on MacOS by using flush() instead of wait().
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2022">issue #2022</a>)</p></li>
<li><p>Fix restoring Python state after in-process pytest runs with the
<code class="docutils literal notranslate"><span class="pre">pytester</span></code> plugin; this may break tests using multiple inprocess
pytest runs if later ones depend on earlier ones leaking global interpreter
changes. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3016">issue #3016</a>)</p></li>
<li><p>Fix skipping plugin reporting hook when test aborted before plugin setup
hook. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3074">issue #3074</a>)</p></li>
<li><p>Fix progress percentage reported when tests fail during teardown. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3088">issue #3088</a>)</p></li>
<li><p><strong>Incompatible change</strong>: <code class="docutils literal notranslate"><span class="pre">-o/--override</span></code> option no longer eats all the
remaining options, which can lead to surprising behavior: for example,
<code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-o</span> <span class="pre">foo=1</span> <span class="pre">/path/to/test.py</span></code> would fail because <code class="docutils literal notranslate"><span class="pre">/path/to/test.py</span></code>
would be considered as part of the <code class="docutils literal notranslate"><span class="pre">-o</span></code> command-line argument. One
consequence of this is that now multiple configuration overrides need
multiple <code class="docutils literal notranslate"><span class="pre">-o</span></code> flags: <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">-o</span> <span class="pre">foo=1</span> <span class="pre">-o</span> <span class="pre">bar=2</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3103">issue #3103</a>)</p></li>
</ul>
</div>
<div class="section" id="id348">
<h5>Improved Documentation<a class="headerlink" href="#id348" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Document hooks (defined with <code class="docutils literal notranslate"><span class="pre">historic=True</span></code>) which cannot be used with
<code class="docutils literal notranslate"><span class="pre">hookwrapper=True</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2423">issue #2423</a>)</p></li>
<li><p>Clarify that warning capturing doesn’t change the warning filter by default.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2457">issue #2457</a>)</p></li>
<li><p>Clarify a possible confusion when using pytest_fixture_setup with fixture
functions that return None. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2698">issue #2698</a>)</p></li>
<li><p>Fix the wording of a sentence on doctest flags used in pytest. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3076">issue #3076</a>)</p></li>
<li><p>Prefer <code class="docutils literal notranslate"><span class="pre">https://*.readthedocs.io</span></code> over <code class="docutils literal notranslate"><span class="pre">http://*.rtfd.org</span></code> for links in
the documentation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3092">issue #3092</a>)</p></li>
<li><p>Improve readability (wording, grammar) of Getting Started guide (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3131">issue #3131</a>)</p></li>
<li><p>Added note that calling pytest.main multiple times from the same process is
not recommended because of import caching. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3143">issue #3143</a>)</p></li>
</ul>
</div>
<div class="section" id="id349">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id349" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Show a simple and easy error when keyword expressions trigger a syntax error
(for example, <code class="docutils literal notranslate"><span class="pre">&quot;-k</span> <span class="pre">foo</span> <span class="pre">and</span> <span class="pre">import&quot;</span></code> will show an error that you can not use
the <code class="docutils literal notranslate"><span class="pre">import</span></code> keyword in expressions). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2953">issue #2953</a>)</p></li>
<li><p>Change parametrized automatic test id generation to use the <code class="docutils literal notranslate"><span class="pre">__name__</span></code>
attribute of functions instead of the fallback argument name plus counter.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2976">issue #2976</a>)</p></li>
<li><p>Replace py.std with stdlib imports. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3067">issue #3067</a>)</p></li>
<li><p>Corrected ‘you’ to ‘your’ in logging docs. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3129">issue #3129</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-2-2017-12-25">
<h4>pytest 3.3.2 (2017-12-25)<a class="headerlink" href="#pytest-3-3-2-2017-12-25" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id350">
<h5>Bug Fixes<a class="headerlink" href="#id350" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>pytester: ignore files used to obtain current user metadata in the fd leak
detector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2784">issue #2784</a>)</p></li>
<li><p>Fix <strong>memory leak</strong> where objects returned by fixtures were never destructed
by the garbage collector. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2981">issue #2981</a>)</p></li>
<li><p>Fix conversion of pyargs to filename to not convert symlinks on Python 2. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2985">issue #2985</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYTEST_DONT_REWRITE</span></code> is now checked for plugins too rather than only for
test modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2995">issue #2995</a>)</p></li>
</ul>
</div>
<div class="section" id="id351">
<h5>Improved Documentation<a class="headerlink" href="#id351" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add clarifying note about behavior of multiple parametrized arguments (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3001">issue #3001</a>)</p></li>
</ul>
</div>
<div class="section" id="id352">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id352" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Code cleanup. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3015">issue #3015</a>,
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3021">issue #3021</a>)</p></li>
<li><p>Clean up code by replacing imports and references of <code class="docutils literal notranslate"><span class="pre">_ast</span></code> to <code class="docutils literal notranslate"><span class="pre">ast</span></code>.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3018">issue #3018</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-1-2017-12-05">
<h4>pytest 3.3.1 (2017-12-05)<a class="headerlink" href="#pytest-3-3-1-2017-12-05" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id353">
<h5>Bug Fixes<a class="headerlink" href="#id353" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix issue about <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">no:&lt;plugin&gt;</span></code> having no effect. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2920">issue #2920</a>)</p></li>
<li><p>Fix regression with warnings that contained non-strings in their arguments in
Python 2. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2956">issue #2956</a>)</p></li>
<li><p>Always escape null bytes when setting <code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2957">issue #2957</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> when using the <code class="docutils literal notranslate"><span class="pre">testmon</span></code> plugin when no tests
were actually collected. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2971">issue #2971</a>)</p></li>
<li><p>Bring back <code class="docutils literal notranslate"><span class="pre">TerminalReporter.writer</span></code> as an alias to
<code class="docutils literal notranslate"><span class="pre">TerminalReporter._tw</span></code>. This alias was removed by accident in the <code class="docutils literal notranslate"><span class="pre">3.3.0</span></code>
release. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2984">issue #2984</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pytest-capturelog</span></code> plugin is now also blacklisted, avoiding errors when
running pytest with it still installed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/3004">issue #3004</a>)</p></li>
</ul>
</div>
<div class="section" id="id354">
<h5>Improved Documentation<a class="headerlink" href="#id354" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix broken link to plugin <code class="docutils literal notranslate"><span class="pre">pytest-localserver</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2963">issue #2963</a>)</p></li>
</ul>
</div>
<div class="section" id="id355">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id355" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Update github “bugs” link in <code class="docutils literal notranslate"><span class="pre">CONTRIBUTING.rst</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2949">issue #2949</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-3-0-2017-11-23">
<h4>pytest 3.3.0 (2017-11-23)<a class="headerlink" href="#pytest-3-3-0-2017-11-23" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id356">
<h5>Deprecations and Removals<a class="headerlink" href="#id356" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>pytest no longer supports Python <strong>2.6</strong> and <strong>3.3</strong>. Those Python versions
are EOL for some time now and incur maintenance and compatibility costs on
the pytest core team, and following up with the rest of the community we
decided that they will no longer be supported starting on this version. Users
which still require those versions should pin pytest to <code class="docutils literal notranslate"><span class="pre">&lt;3.3</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2812">issue #2812</a>)</p></li>
<li><p>Remove internal <code class="docutils literal notranslate"><span class="pre">_preloadplugins()</span></code> function. This removal is part of the
<code class="docutils literal notranslate"><span class="pre">pytest_namespace()</span></code> hook deprecation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2636">issue #2636</a>)</p></li>
<li><p>Internally change <code class="docutils literal notranslate"><span class="pre">CallSpec2</span></code> to have a list of marks instead of a broken
mapping of keywords. This removes the keywords attribute of the internal
<code class="docutils literal notranslate"><span class="pre">CallSpec2</span></code> class. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2672">issue #2672</a>)</p></li>
<li><p>Remove ParameterSet.deprecated_arg_dict - its not a public api and the lack
of the underscore was a naming error. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2675">issue #2675</a>)</p></li>
<li><p>Remove the internal multi-typed attribute <code class="docutils literal notranslate"><span class="pre">Node._evalskip</span></code> and replace it
with the boolean <code class="docutils literal notranslate"><span class="pre">Node._skipped_by_mark</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2767">issue #2767</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">params</span></code> list passed to <code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code> is now for
all effects considered immutable and frozen at the moment of the <code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code>
call. Previously the list could be changed before the first invocation of the fixture
allowing for a form of dynamic parametrization (for example, updated from command-line options),
but this was an unwanted implementation detail which complicated the internals and prevented
some internal cleanup. See issue <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2959">issue #2959</a>
for details and a recommended workaround.</p></li>
</ul>
</div>
<div class="section" id="id357">
<h5>Features<a class="headerlink" href="#id357" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_fixture_post_finalizer</span></code> hook can now receive a <code class="docutils literal notranslate"><span class="pre">request</span></code>
argument. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2124">issue #2124</a>)</p></li>
<li><p>Replace the old introspection code in compat.py that determines the available
arguments of fixtures with inspect.signature on Python 3 and
funcsigs.signature on Python 2. This should respect <code class="docutils literal notranslate"><span class="pre">__signature__</span></code>
declarations on functions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2267">issue #2267</a>)</p></li>
<li><p>Report tests with global <code class="docutils literal notranslate"><span class="pre">pytestmark</span></code> variable only once. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2549">issue #2549</a>)</p></li>
<li><p>Now pytest displays the total progress percentage while running tests. The
previous output style can be set by configuring the <code class="docutils literal notranslate"><span class="pre">console_output_style</span></code>
setting to <code class="docutils literal notranslate"><span class="pre">classic</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2657">issue #2657</a>)</p></li>
<li><p>Match <code class="docutils literal notranslate"><span class="pre">warns</span></code> signature to <code class="docutils literal notranslate"><span class="pre">raises</span></code> by adding <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2708">issue #2708</a>)</p></li>
<li><p>pytest now captures and displays output from the standard <code class="docutils literal notranslate"><span class="pre">logging</span></code> module.
The user can control the logging level to be captured by specifying options
in <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>, the command line and also during individual tests using
markers. Also, a <code class="docutils literal notranslate"><span class="pre">caplog</span></code> fixture is available that enables users to test
the captured log during specific tests (similar to <code class="docutils literal notranslate"><span class="pre">capsys</span></code> for example).
For more information, please see the <a class="reference internal" href="contents.html#document-how-to/logging"><span class="doc">logging docs</span></a>. This feature was
introduced by merging the popular <a class="reference external" href="https://pypi.org/project/pytest-catchlog/">pytest-catchlog</a> plugin, thanks to <a class="reference external" href="https://github.com/thisch">&#64;thisch</a>.
Be advised that during the merging the
backward compatibility interface with the defunct <code class="docutils literal notranslate"><span class="pre">pytest-capturelog</span></code> has
been dropped. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2794">issue #2794</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">allow_module_level</span></code> kwarg to <code class="docutils literal notranslate"><span class="pre">pytest.skip()</span></code>, enabling to skip the
whole module. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2808">issue #2808</a>)</p></li>
<li><p>Allow setting <code class="docutils literal notranslate"><span class="pre">file_or_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">-c</span></code>, and <code class="docutils literal notranslate"><span class="pre">-o</span></code> in PYTEST_ADDOPTS. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2824">issue #2824</a>)</p></li>
<li><p>Return stdout/stderr capture results as a <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code>, so <code class="docutils literal notranslate"><span class="pre">out</span></code> and
<code class="docutils literal notranslate"><span class="pre">err</span></code> can be accessed by attribute. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2879">issue #2879</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">capfdbinary</span></code>, a version of <code class="docutils literal notranslate"><span class="pre">capfd</span></code> which returns bytes from
<code class="docutils literal notranslate"><span class="pre">readouterr()</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2923">issue #2923</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">capsysbinary</span></code> a version of <code class="docutils literal notranslate"><span class="pre">capsys</span></code> which returns bytes from
<code class="docutils literal notranslate"><span class="pre">readouterr()</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2934">issue #2934</a>)</p></li>
<li><p>Implement feature to skip <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> files when run with
<code class="docutils literal notranslate"><span class="pre">--doctest-modules</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/502">issue #502</a>)</p></li>
</ul>
</div>
<div class="section" id="id358">
<h5>Bug Fixes<a class="headerlink" href="#id358" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Resume output capturing after <code class="docutils literal notranslate"><span class="pre">capsys/capfd.disabled()</span></code> context manager.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1993">issue #1993</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_fixture_setup</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest_fixture_post_finalizer</span></code> hooks are now
called for all <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2124">issue #2124</a>)</p></li>
<li><p>If an exception happens while loading a plugin, pytest no longer hides the
original traceback. In Python 2 it will show the original traceback with a new
message that explains in which plugin. In Python 3 it will show 2 canonized
exceptions, the original exception while loading the plugin in addition to an
exception that pytest throws about loading a plugin. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2491">issue #2491</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">capsys</span></code> and <code class="docutils literal notranslate"><span class="pre">capfd</span></code> can now be used by other fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2709">issue #2709</a>)</p></li>
<li><p>Internal <code class="docutils literal notranslate"><span class="pre">pytester</span></code> plugin properly encodes <code class="docutils literal notranslate"><span class="pre">bytes</span></code> arguments to
<code class="docutils literal notranslate"><span class="pre">utf-8</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2738">issue #2738</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testdir</span></code> now uses use the same method used by <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> to create its
temporary directory. This changes the final structure of the <code class="docutils literal notranslate"><span class="pre">testdir</span></code>
directory slightly, but should not affect usage in normal scenarios and
avoids a number of potential problems. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2751">issue #2751</a>)</p></li>
<li><p>pytest no longer complains about warnings with unicode messages being
non-ascii compatible even for ascii-compatible messages. As a result of this,
warnings with unicode messages are converted first to an ascii representation
for safety. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2809">issue #2809</a>)</p></li>
<li><p>Change return value of pytest command when <code class="docutils literal notranslate"><span class="pre">--maxfail</span></code> is reached from
<code class="docutils literal notranslate"><span class="pre">2</span></code> (interrupted) to <code class="docutils literal notranslate"><span class="pre">1</span></code> (failed). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2845">issue #2845</a>)</p></li>
<li><p>Fix issue in assertion rewriting which could lead it to rewrite modules which
should not be rewritten. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2939">issue #2939</a>)</p></li>
<li><p>Handle marks without description in <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2942">issue #2942</a>)</p></li>
</ul>
</div>
<div class="section" id="id359">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id359" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>pytest now depends on <a class="reference external" href="https://pypi.org/project/attrs/">attrs</a> for internal
structures to ease code maintainability. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2641">issue #2641</a>)</p></li>
<li><p>Refactored internal Python 2/3 compatibility code to use <code class="docutils literal notranslate"><span class="pre">six</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2642">issue #2642</a>)</p></li>
<li><p>Stop vendoring <code class="docutils literal notranslate"><span class="pre">pluggy</span></code> - we’re missing out on its latest changes for not
much benefit (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2719">issue #2719</a>)</p></li>
<li><p>Internal refactor: simplify ascii string escaping by using the
backslashreplace error handler in newer Python 3 versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2734">issue #2734</a>)</p></li>
<li><p>Remove unnecessary mark evaluator in unittest plugin (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2767">issue #2767</a>)</p></li>
<li><p>Calls to <code class="docutils literal notranslate"><span class="pre">Metafunc.addcall</span></code> now emit a deprecation warning. This function
is scheduled to be removed in <code class="docutils literal notranslate"><span class="pre">pytest-4.0</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2876">issue #2876</a>)</p></li>
<li><p>Internal move of the parameterset extraction to a more maintainable place.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2877">issue #2877</a>)</p></li>
<li><p>Internal refactoring to simplify scope node lookup. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2910">issue #2910</a>)</p></li>
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to prevent pip from installing pytest in unsupported
Python versions. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2922">issue #2922</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-5-2017-11-15">
<h4>pytest 3.2.5 (2017-11-15)<a class="headerlink" href="#pytest-3-2-5-2017-11-15" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id360">
<h5>Bug Fixes<a class="headerlink" href="#id360" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">py&lt;1.5</span></code> restriction from <code class="docutils literal notranslate"><span class="pre">pytest</span></code> as this can cause version
conflicts in some installations. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2926">issue #2926</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-4-2017-11-13">
<h4>pytest 3.2.4 (2017-11-13)<a class="headerlink" href="#pytest-3-2-4-2017-11-13" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id361">
<h5>Bug Fixes<a class="headerlink" href="#id361" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix the bug where running with <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code> will result in items with
empty <code class="docutils literal notranslate"><span class="pre">parent.nodeid</span></code> if run from a different root directory. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2775">issue #2775</a>)</p></li>
<li><p>Fix issue with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.parametrize</span></code> if argnames was specified as keyword arguments.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2819">issue #2819</a>)</p></li>
<li><p>Strip whitespace from marker names when reading them from INI config. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2856">issue #2856</a>)</p></li>
<li><p>Show full context of doctest source in the pytest output, if the line number of
failed example in the docstring is &lt; 9. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2882">issue #2882</a>)</p></li>
<li><p>Match fixture paths against actual path segments in order to avoid matching folders which share a prefix.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2836">issue #2836</a>)</p></li>
</ul>
</div>
<div class="section" id="id362">
<h5>Improved Documentation<a class="headerlink" href="#id362" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Introduce a dedicated section about conftest.py. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1505">issue #1505</a>)</p></li>
<li><p>Explicitly mention <code class="docutils literal notranslate"><span class="pre">xpass</span></code> in the documentation of <code class="docutils literal notranslate"><span class="pre">xfail</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1997">issue #1997</a>)</p></li>
<li><p>Append example for pytest.param in the example/parametrize document. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2658">issue #2658</a>)</p></li>
<li><p>Clarify language of proposal for fixtures parameters (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2893">issue #2893</a>)</p></li>
<li><p>List python 3.6 in the documented supported versions in the getting started
document. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2903">issue #2903</a>)</p></li>
<li><p>Clarify the documentation of available fixture scopes. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/538">issue #538</a>)</p></li>
<li><p>Add documentation about the <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code> invocation adding the
current directory to sys.path. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/911">issue #911</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-3-2017-10-03">
<h4>pytest 3.2.3 (2017-10-03)<a class="headerlink" href="#pytest-3-2-3-2017-10-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id363">
<h5>Bug Fixes<a class="headerlink" href="#id363" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix crash in tab completion when no prefix is given. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2748">issue #2748</a>)</p></li>
<li><p>The equality checking function (<code class="docutils literal notranslate"><span class="pre">__eq__</span></code>) of <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code> returns
<code class="docutils literal notranslate"><span class="pre">False</span></code> if one object is not an instance of <code class="docutils literal notranslate"><span class="pre">MarkDecorator</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2758">issue #2758</a>)</p></li>
<li><p>When running <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">--fixtures-per-test</span></code>: don’t crash if an item has no
_fixtureinfo attribute (e.g. doctests) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2788">issue #2788</a>)</p></li>
</ul>
</div>
<div class="section" id="id364">
<h5>Improved Documentation<a class="headerlink" href="#id364" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>In help text of <code class="docutils literal notranslate"><span class="pre">-k</span></code> option, add example of using <code class="docutils literal notranslate"><span class="pre">not</span></code> to not select
certain tests whose names match the provided expression. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1442">issue #1442</a>)</p></li>
<li><p>Add note in <code class="docutils literal notranslate"><span class="pre">parametrize.rst</span></code> about calling <code class="docutils literal notranslate"><span class="pre">metafunc.parametrize</span></code>
multiple times. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1548">issue #1548</a>)</p></li>
</ul>
</div>
<div class="section" id="id365">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id365" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">xfail_strict=True</span></code> in pytest’s own test suite to catch expected
failures as soon as they start to pass. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2722">issue #2722</a>)</p></li>
<li><p>Fix typo in example of passing a callable to markers (in example/markers.rst)
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2765">issue #2765</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-2-2017-09-06">
<h4>pytest 3.2.2 (2017-09-06)<a class="headerlink" href="#pytest-3-2-2-2017-09-06" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id366">
<h5>Bug Fixes<a class="headerlink" href="#id366" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Calling the deprecated <code class="docutils literal notranslate"><span class="pre">request.getfuncargvalue()</span></code> now shows the source of
the call. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2681">issue #2681</a>)</p></li>
<li><p>Allow tests declared as <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code> to use fixtures. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2699">issue #2699</a>)</p></li>
<li><p>Fixed edge-case during collection: attributes which raised <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code>
when accessed would abort the entire collection. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2707">issue #2707</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">ReprFuncArgs</span></code> with mixed unicode and UTF-8 args. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2731">issue #2731</a>)</p></li>
</ul>
</div>
<div class="section" id="id367">
<h5>Improved Documentation<a class="headerlink" href="#id367" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>In examples on working with custom markers, add examples demonstrating the
usage of <code class="docutils literal notranslate"><span class="pre">pytest.mark.MARKER_NAME.with_args</span></code> in comparison with
<code class="docutils literal notranslate"><span class="pre">pytest.mark.MARKER_NAME.__call__</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2604">issue #2604</a>)</p></li>
<li><p>In one of the simple examples, use <code class="docutils literal notranslate"><span class="pre">pytest_collection_modifyitems()</span></code> to skip
tests based on a command-line option, allowing its sharing while preventing a
user error when accessing <code class="docutils literal notranslate"><span class="pre">pytest.config</span></code> before the argument parsing.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2653">issue #2653</a>)</p></li>
</ul>
</div>
<div class="section" id="id368">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id368" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fixed minor error in ‘Good Practices/Manual Integration’ code snippet.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2691">issue #2691</a>)</p></li>
<li><p>Fixed typo in goodpractices.rst. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2721">issue #2721</a>)</p></li>
<li><p>Improve user guidance regarding <code class="docutils literal notranslate"><span class="pre">--resultlog</span></code> deprecation. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2739">issue #2739</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-1-2017-08-08">
<h4>pytest 3.2.1 (2017-08-08)<a class="headerlink" href="#pytest-3-2-1-2017-08-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id369">
<h5>Bug Fixes<a class="headerlink" href="#id369" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fixed small terminal glitch when collecting a single test item. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2579">issue #2579</a>)</p></li>
<li><p>Correctly consider <code class="docutils literal notranslate"><span class="pre">/</span></code> as the file separator to automatically mark plugin
files for rewrite on Windows. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2591">issue #2591</a>)</p></li>
<li><p>Properly escape test names when setting <code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> environment
variable. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2644">issue #2644</a>)</p></li>
<li><p>Fix error on Windows and Python 3.6+ when <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> has been replaced
with a stream-like object which does not implement the full <code class="docutils literal notranslate"><span class="pre">io</span></code> module
buffer protocol. In particular this affects <code class="docutils literal notranslate"><span class="pre">pytest-xdist</span></code> users on the
aforementioned platform. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2666">issue #2666</a>)</p></li>
</ul>
</div>
<div class="section" id="id370">
<h5>Improved Documentation<a class="headerlink" href="#id370" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Explicitly document which pytest features work with <code class="docutils literal notranslate"><span class="pre">unittest</span></code>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2626">issue #2626</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-2-0-2017-07-30">
<h4>pytest 3.2.0 (2017-07-30)<a class="headerlink" href="#pytest-3-2-0-2017-07-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id371">
<h5>Deprecations and Removals<a class="headerlink" href="#id371" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> no longer supports <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>
operators to avoid surprising/inconsistent behavior. See the <a class="reference internal" href="contents.html#pytest.approx" title="pytest.approx"><code class="xref py py-func docutils literal notranslate"><span class="pre">approx()</span></code></a> docs for more
information. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2003">issue #2003</a>)</p></li>
<li><p>All old-style specific behavior in current classes in the pytest’s API is
considered deprecated at this point and will be removed in a future release.
This affects Python 2 users only and in rare situations. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2147">issue #2147</a>)</p></li>
<li><p>A deprecation warning is now raised when using marks for parameters
in <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code>. Use <code class="docutils literal notranslate"><span class="pre">pytest.param</span></code> to apply marks to
parameters instead. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2427">issue #2427</a>)</p></li>
</ul>
</div>
<div class="section" id="id372">
<h5>Features<a class="headerlink" href="#id372" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Add support for numpy arrays (and dicts) to approx. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1994">issue #1994</a>)</p></li>
<li><p>Now test function objects have a <code class="docutils literal notranslate"><span class="pre">pytestmark</span></code> attribute containing a list
of marks applied directly to the test function, as opposed to marks inherited
from parent classes or modules. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2516">issue #2516</a>)</p></li>
<li><p>Collection ignores local virtualenvs by default; <code class="docutils literal notranslate"><span class="pre">--collect-in-virtualenv</span></code>
overrides this behavior. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2518">issue #2518</a>)</p></li>
<li><p>Allow class methods decorated as <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code> to be candidates for
collection as a test function. (Only for Python 2.7 and above. Python 2.6
will still ignore static methods.) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2528">issue #2528</a>)</p></li>
<li><p>Introduce <code class="docutils literal notranslate"><span class="pre">mark.with_args</span></code> in order to allow passing functions/classes as
sole argument to marks. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2540">issue #2540</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">cache_dir</span></code> ini option: sets the directory where the contents of the
cache plugin are stored. Directory may be relative or absolute path: if relative path, then
directory is created relative to <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>, otherwise it is used as is.
Additionally path may contain environment variables which are expanded during
runtime. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2543">issue #2543</a>)</p></li>
<li><p>Introduce the <code class="docutils literal notranslate"><span class="pre">PYTEST_CURRENT_TEST</span></code> environment variable that is set with
the <code class="docutils literal notranslate"><span class="pre">nodeid</span></code> and stage (<code class="docutils literal notranslate"><span class="pre">setup</span></code>, <code class="docutils literal notranslate"><span class="pre">call</span></code> and <code class="docutils literal notranslate"><span class="pre">teardown</span></code>) of the test
being currently executed. See the <a class="reference internal" href="contents.html#pytest-current-test-env"><span class="std std-ref">documentation</span></a>
for more info. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2583">issue #2583</a>)</p></li>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.filterwarnings</span></code> mark which allows overwriting the
warnings filter on a per test, class or module level. See the <a class="reference internal" href="contents.html#filterwarnings"><span class="std std-ref">docs</span></a>
for more information. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2598">issue #2598</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> now remembers forever when a test has failed and only
forgets it if it passes again. This makes it easy to fix a test suite by
selectively running files and fixing tests incrementally. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2621">issue #2621</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pytest_report_collectionfinish</span></code> hook which allows plugins to add
messages to the terminal reporting after collection has been finished
successfully. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2622">issue #2622</a>)</p></li>
<li><p>Added support for <span class="target" id="index-8"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0415"><strong>PEP 415</strong></a>'s
<code class="docutils literal notranslate"><span class="pre">Exception.__suppress_context__</span></code>. Now if a <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">exception</span> <span class="pre">from</span> <span class="pre">None</span></code> is
caught by pytest, pytest will no longer chain the context in the test report.
The behavior now matches Python’s traceback behavior. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2631">issue #2631</a>)</p></li>
<li><p>Exceptions raised by <code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.skip</span></code> and <code class="docutils literal notranslate"><span class="pre">pytest.xfail</span></code>
now subclass BaseException, making them harder to be caught unintentionally
by normal code. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/580">issue #580</a>)</p></li>
</ul>
</div>
<div class="section" id="id373">
<h5>Bug Fixes<a class="headerlink" href="#id373" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">stdin</span></code> to a closed <code class="docutils literal notranslate"><span class="pre">PIPE</span></code> in <code class="docutils literal notranslate"><span class="pre">pytester.py.Testdir.popen()</span></code> for
avoid unwanted interactive <code class="docutils literal notranslate"><span class="pre">pdb</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2023">issue #2023</a>)</p></li>
<li><p>Add missing <code class="docutils literal notranslate"><span class="pre">encoding</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">sys.std*</span></code> streams when using
<code class="docutils literal notranslate"><span class="pre">capsys</span></code> capture mode. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2375">issue #2375</a>)</p></li>
<li><p>Fix terminal color changing to black on Windows if <code class="docutils literal notranslate"><span class="pre">colorama</span></code> is imported
in a <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> file. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2510">issue #2510</a>)</p></li>
<li><p>Fix line number when reporting summary of skipped tests. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2548">issue #2548</a>)</p></li>
<li><p>capture: ensure that EncodedFile.name is a string. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2555">issue #2555</a>)</p></li>
<li><p>The options <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> and <code class="docutils literal notranslate"><span class="pre">--fixtures-per-test</span></code> will now keep
indentation within docstrings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2574">issue #2574</a>)</p></li>
<li><p>doctests line numbers are now reported correctly, fixing <a class="reference external" href="https://github.com/Frozenball/pytest-sugar/issues/122">pytest-sugar#122</a>. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2610">issue #2610</a>)</p></li>
<li><p>Fix non-determinism in order of fixture collection. Adds new dependency
(ordereddict) for Python 2.6. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/920">issue #920</a>)</p></li>
</ul>
</div>
<div class="section" id="id374">
<h5>Improved Documentation<a class="headerlink" href="#id374" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Clarify <code class="docutils literal notranslate"><span class="pre">pytest_configure</span></code> hook call order. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2539">issue #2539</a>)</p></li>
<li><p>Extend documentation for testing plugin code with the <code class="docutils literal notranslate"><span class="pre">pytester</span></code> plugin.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/971">issue #971</a>)</p></li>
</ul>
</div>
<div class="section" id="id375">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id375" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Update help message for <code class="docutils literal notranslate"><span class="pre">--strict</span></code> to make it clear it only deals with
unregistered markers, not warnings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2444">issue #2444</a>)</p></li>
<li><p>Internal code move: move code for pytest.approx/pytest.raises to own files in
order to cut down the size of python.py (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2489">issue #2489</a>)</p></li>
<li><p>Renamed the utility function <code class="docutils literal notranslate"><span class="pre">_pytest.compat._escape_strings</span></code> to
<code class="docutils literal notranslate"><span class="pre">_ascii_escaped</span></code> to better communicate the function’s purpose. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2533">issue #2533</a>)</p></li>
<li><p>Improve error message for CollectError with skip/skipif. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2546">issue #2546</a>)</p></li>
<li><p>Emit warning about <code class="docutils literal notranslate"><span class="pre">yield</span></code> tests being deprecated only once per generator.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2562">issue #2562</a>)</p></li>
<li><p>Ensure final collected line doesn’t include artifacts of previous write.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2571">issue #2571</a>)</p></li>
<li><p>Fixed all flake8 errors and warnings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2581">issue #2581</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">fix-lint</span></code> tox environment to run automatic pep8 fixes on the code.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2582">issue #2582</a>)</p></li>
<li><p>Turn warnings into errors in pytest’s own test suite in order to catch
regressions due to deprecations more promptly. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2588">issue #2588</a>)</p></li>
<li><p>Show multiple issue links in CHANGELOG entries. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2620">issue #2620</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-3-2017-07-03">
<h4>pytest 3.1.3 (2017-07-03)<a class="headerlink" href="#pytest-3-1-3-2017-07-03" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id376">
<h5>Bug Fixes<a class="headerlink" href="#id376" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix decode error in Python 2 for doctests in docstrings. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2434">issue #2434</a>)</p></li>
<li><p>Exceptions raised during teardown by finalizers are now suppressed until all
finalizers are called, with the initial exception reraised. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2440">issue #2440</a>)</p></li>
<li><p>Fix incorrect “collected items” report when specifying tests on the command-
line. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2464">issue #2464</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deprecated_call</span></code> in context-manager form now captures deprecation warnings
even if the same warning has already been raised. Also, <code class="docutils literal notranslate"><span class="pre">deprecated_call</span></code>
will always produce the same error message (previously it would produce
different messages in context-manager vs. function-call mode). (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2469">issue #2469</a>)</p></li>
<li><p>Fix issue where paths collected by pytest could have triple leading <code class="docutils literal notranslate"><span class="pre">/</span></code>
characters. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2475">issue #2475</a>)</p></li>
<li><p>Fix internal error when trying to detect the start of a recursive traceback.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2486">issue #2486</a>)</p></li>
</ul>
</div>
<div class="section" id="id377">
<h5>Improved Documentation<a class="headerlink" href="#id377" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Explicitly state for which hooks the calls stop after the first non-None
result. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2493">issue #2493</a>)</p></li>
</ul>
</div>
<div class="section" id="id378">
<h5>Trivial/Internal Changes<a class="headerlink" href="#id378" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Create invoke tasks for updating the vendored packages. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2474">issue #2474</a>)</p></li>
<li><p>Update copyright dates in LICENSE, README.rst and in the documentation.
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2499">issue #2499</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-2-2017-06-08">
<h4>pytest 3.1.2 (2017-06-08)<a class="headerlink" href="#pytest-3-1-2-2017-06-08" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id379">
<h5>Bug Fixes<a class="headerlink" href="#id379" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Required options added via <code class="docutils literal notranslate"><span class="pre">pytest_addoption</span></code> will no longer prevent using
–help without passing them. (#1999)</p></li>
<li><p>Respect <code class="docutils literal notranslate"><span class="pre">python_files</span></code> in assertion rewriting. (#2121)</p></li>
<li><p>Fix recursion error detection when frames in the traceback contain objects
that can’t be compared (like <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays). (#2459)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UnicodeWarning</span></code> is issued from the internal pytest warnings plugin only
when the message contains non-ascii unicode (Python 2 only). (#2463)</p></li>
<li><p>Added a workaround for Python 3.6 <code class="docutils literal notranslate"><span class="pre">WindowsConsoleIO</span></code> breaking due to Pytests’s
<code class="docutils literal notranslate"><span class="pre">FDCapture</span></code>. Other code using console handles might still be affected by the
very same issue and might require further workarounds/fixes, i.e. <code class="docutils literal notranslate"><span class="pre">colorama</span></code>.
(#2467)</p></li>
</ul>
</div>
<div class="section" id="id380">
<h5>Improved Documentation<a class="headerlink" href="#id380" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix internal API links to <code class="docutils literal notranslate"><span class="pre">pluggy</span></code> objects. (#2331)</p></li>
<li><p>Make it clear that <code class="docutils literal notranslate"><span class="pre">pytest.xfail</span></code> stops test execution at the calling point
and improve overall flow of the <code class="docutils literal notranslate"><span class="pre">skipping</span></code> docs. (#810)</p></li>
</ul>
</div>
</div>
<div class="section" id="pytest-3-1-1-2017-05-30">
<h4>pytest 3.1.1 (2017-05-30)<a class="headerlink" href="#pytest-3-1-1-2017-05-30" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id381">
<h5>Bug Fixes<a class="headerlink" href="#id381" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>pytest warning capture no longer overrides existing warning filters. The
previous behaviour would override all filters and caused regressions in test
suites which configure warning filters to match their needs. Note that as a
side-effect of this is that <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> and
<code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> are no longer shown by default. (#2430)</p></li>
<li><p>Fix issue with non-ascii contents in doctest text files. (#2434)</p></li>
<li><p>Fix encoding errors for unicode warnings in Python 2. (#2436)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.deprecated_call</span></code> now captures <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> in
context manager form. (#2441)</p></li>
</ul>
</div>
<div class="section" id="id382">
<h5>Improved Documentation<a class="headerlink" href="#id382" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Addition of towncrier for changelog management. (#2390)</p></li>
</ul>
</div>
</div>
<div class="section" id="id383">
<h4>3.1.0 (2017-05-22)<a class="headerlink" href="#id383" title="Permalink to this headline">¶</a></h4>
<div class="section" id="new-features">
<h5>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pytest-warnings</span></code> plugin has been integrated into the core and now <code class="docutils literal notranslate"><span class="pre">pytest</span></code> automatically
captures and displays warnings at the end of the test session.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature may disrupt test suites which apply and treat warnings themselves, and can be
disabled in your <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[pytest]</span><span class="w"></span>
<span class="na">addopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">-p no:warnings</span><span class="w"></span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="contents.html#document-how-to/capture-warnings"><span class="doc">warnings documentation page</span></a> for more
information.</p>
</div>
<p>Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">junit_suite_name</span></code> ini option to specify root <code class="docutils literal notranslate"><span class="pre">&lt;testsuite&gt;</span></code> name for JUnit XML reports (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/533">issue #533</a>).</p></li>
<li><p>Added an ini option <code class="docutils literal notranslate"><span class="pre">doctest_encoding</span></code> to specify which encoding to use for doctest files.
Thanks <a class="reference external" href="https://github.com/wheerd">&#64;wheerd</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/2101">pull request #2101</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.warns</span></code> now checks for subclass relationship rather than
class equality. Thanks <a class="reference external" href="https://github.com/lesteve">&#64;lesteve</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/2166">pull request #2166</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> now asserts that the error message matches a text or regex
with the <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword argument. Thanks <a class="reference external" href="https://github.com/Kriechi">&#64;Kriechi</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.param</span></code> can be used to declare test parameter sets with marks and test ids.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="changes">
<h5>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>remove all internal uses of pytest_namespace hooks,
this is to prepare the removal of preloadconfig in pytest 4.0
Thanks to <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
<li><p>pytest now warns when a callable ids raises in a parametrized test. Thanks <a class="reference external" href="https://github.com/fogo">&#64;fogo</a> for the PR.</p></li>
<li><p>It is now possible to skip test classes from being collected by setting a
<code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">False</span></code> in the class body (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2007">issue #2007</a>). Thanks
to <a class="reference external" href="https://github.com/syre">&#64;syre</a> for the report and <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</p></li>
<li><p>Change junitxml.py to produce reports that comply with Junitxml schema.
If the same test fails with failure in call and then errors in teardown
we split testcase element into two, one containing the error and the other
the failure. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2228">issue #2228</a>) Thanks to <a class="reference external" href="https://github.com/kkoukiou">&#64;kkoukiou</a> for the PR.</p></li>
<li><p>Testcase reports with a <code class="docutils literal notranslate"><span class="pre">url</span></code> attribute will now properly write this to junitxml.
Thanks <a class="reference external" href="https://github.com/fushi">&#64;fushi</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1874">pull request #1874</a>).</p></li>
<li><p>Remove common items from dict comparison output when verbosity=1. Also update
the truncation message to make it clearer that pytest truncates all
assertion messages if verbosity &lt; 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1512">issue #1512</a>).
Thanks <a class="reference external" href="https://github.com/mattduck">&#64;mattduck</a> for the PR</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--pdbcls</span></code> no longer implies <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>. This makes it possible to use
<code class="docutils literal notranslate"><span class="pre">addopts=--pdbcls=module.SomeClass</span></code> on <code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code>. Thanks <a class="reference external" href="https://github.com/davidszotten">&#64;davidszotten</a> for
the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1952">pull request #1952</a>).</p></li>
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2013">issue #2013</a>: turn RecordedWarning into <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code>,
to give it a comprehensible repr while preventing unwarranted modification.</p></li>
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2208">issue #2208</a>: ensure an iteration limit for _pytest.compat.get_real_func.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and PR.</p></li>
<li><p>Hooks are now verified after collection is complete, rather than right after loading installed plugins. This
makes it easy to write hooks for plugins which will be loaded during collection, for example using the
<code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> special variable (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1821">issue #1821</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Modify <code class="docutils literal notranslate"><span class="pre">pytest_make_parametrize_id()</span></code> hook to accept <code class="docutils literal notranslate"><span class="pre">argname</span></code> as an
additional parameter.
Thanks <a class="reference external" href="https://github.com/unsignedint">&#64;unsignedint</a> for the PR.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">venv</span></code> to the default <code class="docutils literal notranslate"><span class="pre">norecursedirs</span></code> setting.
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PluginManager.import_plugin</span></code> now accepts unicode plugin names in Python 2.
Thanks <a class="reference external" href="https://github.com/reutsharabani">&#64;reutsharabani</a> for the PR.</p></li>
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2308">issue #2308</a>: When using both <code class="docutils literal notranslate"><span class="pre">--lf</span></code> and <code class="docutils literal notranslate"><span class="pre">--ff</span></code>, only the last failed tests are run.
Thanks <a class="reference external" href="https://github.com/ojii">&#64;ojii</a> for the PR.</p></li>
<li><p>Replace minor/patch level version numbers in the documentation with placeholders.
This significantly reduces change-noise as different contributors regenerate
the documentation on different platforms.
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2391">issue #2391</a>: consider pytest_plugins on all plugin modules
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="id384">
<h5>Bug Fixes<a class="headerlink" href="#id384" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> on <code class="docutils literal notranslate"><span class="pre">sys.stdout.buffer</span></code> / <code class="docutils literal notranslate"><span class="pre">sys.stderr.buffer</span></code>
while using <code class="docutils literal notranslate"><span class="pre">capsys</span></code> fixture in python 3. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1407">issue #1407</a>).
Thanks to <a class="reference external" href="https://github.com/asottile">&#64;asottile</a>.</p></li>
<li><p>Change capture.py’s <code class="docutils literal notranslate"><span class="pre">DontReadFromInput</span></code> class to throw <code class="docutils literal notranslate"><span class="pre">io.UnsupportedOperation</span></code> errors rather
than ValueErrors in the <code class="docutils literal notranslate"><span class="pre">fileno</span></code> method (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2276">issue #2276</a>).
Thanks <a class="reference external" href="https://github.com/metasyn">&#64;metasyn</a> and <a class="reference external" href="https://github.com/vlad-dragos">&#64;vlad-dragos</a> for the PR.</p></li>
<li><p>Fix exception formatting while importing modules when the exception message
contains non-ascii characters (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2336">issue #2336</a>).
Thanks <a class="reference external" href="https://github.com/fabioz">&#64;fabioz</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Added documentation related to issue (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1937">issue #1937</a>)
Thanks <a class="reference external" href="https://github.com/skylarjhdownes">&#64;skylarjhdownes</a> for the PR.</p></li>
<li><p>Allow collecting files with any file extension as Python modules (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2369">issue #2369</a>).
Thanks <a class="reference external" href="https://github.com/Kodiologist">&#64;Kodiologist</a> for the PR.</p></li>
<li><p>Show the correct error message when collect “parametrize” func with wrong args (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2383">issue #2383</a>).
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report and <a class="reference external" href="https://github.com/robin0371">&#64;robin0371</a> for the PR.</p></li>
</ul>
</div>
</div>
<div class="section" id="id385">
<h4>3.0.7 (2017-03-14)<a class="headerlink" href="#id385" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Fix issue in assertion rewriting breaking due to modules silently discarding
other modules when importing fails
Notably, importing the <code class="docutils literal notranslate"><span class="pre">anydbm</span></code> module is fixed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2248">issue #2248</a>).
Thanks <a class="reference external" href="https://github.com/pfhayes">&#64;pfhayes</a> for the PR.</p></li>
<li><p>junitxml: Fix problematic case where system-out tag occurred twice per testcase
element in the XML report. Thanks <a class="reference external" href="https://github.com/kkoukiou">&#64;kkoukiou</a> for the PR.</p></li>
<li><p>Fix regression, pytest now skips unittest correctly if run with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2137">issue #2137</a>). Thanks to <a class="reference external" href="https://github.com/gst">&#64;gst</a> for the report and <a class="reference external" href="https://github.com/mbyt">&#64;mbyt</a> for the PR.</p></li>
<li><p>Ignore exceptions raised from descriptors (e.g. properties) during Python test collection (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2234">issue #2234</a>).
Thanks to <a class="reference external" href="https://github.com/bluetech">&#64;bluetech</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--override-ini</span></code> now correctly overrides some fundamental options like <code class="docutils literal notranslate"><span class="pre">python_files</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2238">issue #2238</a>).
Thanks <a class="reference external" href="https://github.com/sirex">&#64;sirex</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopIteration</span></code> usages in the code by simple <code class="docutils literal notranslate"><span class="pre">returns</span></code> to finish generators, in accordance to <span class="target" id="index-9"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0479"><strong>PEP 479</strong></a> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2160">issue #2160</a>).
Thanks to <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix internal errors when an unprintable <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> is raised inside a test.
Thanks <a class="reference external" href="https://github.com/omerhadari">&#64;omerhadari</a> for the PR.</p></li>
<li><p>Skipping plugin now also works with test items generated by custom collectors (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2231">issue #2231</a>).
Thanks to <a class="reference external" href="https://github.com/vidartf">&#64;vidartf</a>.</p></li>
<li><p>Fix trailing whitespace in console output if no .ini file presented (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2281">issue #2281</a>). Thanks <a class="reference external" href="https://github.com/fbjorn">&#64;fbjorn</a> for the PR.</p></li>
<li><p>Conditionless <code class="docutils literal notranslate"><span class="pre">xfail</span></code> markers no longer rely on the underlying test item
being an instance of <code class="docutils literal notranslate"><span class="pre">PyobjMixin</span></code>, and can therefore apply to tests not
collected by the built-in python test collector. Thanks <a class="reference external" href="https://github.com/barneygale">&#64;barneygale</a> for the
PR.</p></li>
</ul>
</div>
<div class="section" id="id386">
<h4>3.0.6 (2017-01-22)<a class="headerlink" href="#id386" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>pytest no longer generates <code class="docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code> from its own operations, which was introduced by mistake in version <code class="docutils literal notranslate"><span class="pre">3.0.5</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2118">issue #2118</a>).
Thanks to <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
<li><p>pytest no longer recognizes coroutine functions as yield tests (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2129">issue #2129</a>).
Thanks to <a class="reference external" href="https://github.com/malinoff">&#64;malinoff</a> for the PR.</p></li>
<li><p>Plugins loaded by the <code class="docutils literal notranslate"><span class="pre">PYTEST_PLUGINS</span></code> environment variable are now automatically
considered for assertion rewriting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2185">issue #2185</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Improve error message when pytest.warns fails (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2150">issue #2150</a>). The type(s) of the
expected warnings and the list of caught warnings is added to the
error message. Thanks <a class="reference external" href="https://github.com/lesteve">&#64;lesteve</a> for the PR.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">pytester</span></code> internal plugin to work correctly with latest versions of
<code class="docutils literal notranslate"><span class="pre">zope.interface</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1989">issue #1989</a>). Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Assert statements of the <code class="docutils literal notranslate"><span class="pre">pytester</span></code> plugin again benefit from assertion rewriting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1920">issue #1920</a>).
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Specifying tests with colons like <code class="docutils literal notranslate"><span class="pre">test_foo.py::test_bar</span></code> for tests in
subdirectories with ini configuration files now uses the correct ini file
(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2148">issue #2148</a>).  Thanks <a class="reference external" href="https://github.com/pelme">&#64;pelme</a>.</p></li>
<li><p>Fail <code class="docutils literal notranslate"><span class="pre">testdir.runpytest().assert_outcomes()</span></code> explicitly if the pytest
terminal output it relies on is missing. Thanks to <a class="reference external" href="https://github.com/eli-b">&#64;eli-b</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="id387">
<h4>3.0.5 (2016-12-05)<a class="headerlink" href="#id387" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Add warning when not passing <code class="docutils literal notranslate"><span class="pre">option=value</span></code> correctly to <code class="docutils literal notranslate"><span class="pre">-o/--override-ini</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2105">issue #2105</a>).
Also improved the help documentation. Thanks to <a class="reference external" href="https://github.com/mbukatov">&#64;mbukatov</a> for the report and
<a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</p></li>
<li><p>Now <code class="docutils literal notranslate"><span class="pre">--confcutdir</span></code> and <code class="docutils literal notranslate"><span class="pre">--junit-xml</span></code> are properly validated if they are directories
and filenames, respectively (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2089">issue #2089</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2078">issue #2078</a>). Thanks to <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</p></li>
<li><p>Add hint to error message hinting possible missing <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/478">issue #478</a>). Thanks <a class="reference external" href="https://github.com/DuncanBetts">&#64;DuncanBetts</a>.</p></li>
<li><p>More accurately describe when fixture finalization occurs in documentation (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/687">issue #687</a>). Thanks <a class="reference external" href="https://github.com/DuncanBetts">&#64;DuncanBetts</a>.</p></li>
<li><p>Provide <code class="docutils literal notranslate"><span class="pre">:ref:</span></code> targets for <code class="docutils literal notranslate"><span class="pre">recwarn.rst</span></code> so we can use intersphinx referencing.
Thanks to <a class="reference external" href="https://github.com/dupuy">&#64;dupuy</a> for the report and <a class="reference external" href="https://github.com/lwm">&#64;lwm</a> for the PR.</p></li>
<li><p>In Python 2, use a simple <code class="docutils literal notranslate"><span class="pre">+-</span></code> ASCII string in the string representation of <code class="docutils literal notranslate"><span class="pre">pytest.approx</span></code> (for example <code class="docutils literal notranslate"><span class="pre">&quot;4</span> <span class="pre">+-</span> <span class="pre">4.0e-06&quot;</span></code>)
because it is brittle to handle that in different contexts and representations internally in pytest
which can result in bugs such as <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2111">issue #2111</a>. In Python 3, the representation still uses <code class="docutils literal notranslate"><span class="pre">±</span></code> (for example <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">±</span> <span class="pre">4.0e-06</span></code>).
Thanks <a class="reference external" href="https://github.com/kerrick-lyft">&#64;kerrick-lyft</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">item.Function</span></code>, <code class="docutils literal notranslate"><span class="pre">item.Module</span></code>, etc., is now issuing deprecation warnings, prefer
<code class="docutils literal notranslate"><span class="pre">pytest.Function</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest.Module</span></code>, etc., instead (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2034">issue #2034</a>).
Thanks <a class="reference external" href="https://github.com/nmundar">&#64;nmundar</a> for the PR.</p></li>
<li><p>Fix error message using <code class="docutils literal notranslate"><span class="pre">approx</span></code> with complex numbers (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2082">issue #2082</a>).
Thanks <a class="reference external" href="https://github.com/adler-j">&#64;adler-j</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fixed false-positives warnings from assertion rewrite hook for modules imported more than
once by the <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> mechanism.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Remove an internal cache which could cause hooks from <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files in
sub-directories to be called in other directories incorrectly (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2016">issue #2016</a>).
Thanks <a class="reference external" href="https://github.com/d-b-w">&#64;d-b-w</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Remove internal code meant to support earlier Python 3 versions that produced the side effect
of leaving <code class="docutils literal notranslate"><span class="pre">None</span></code> in <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> when expressions were evaluated by pytest (for example passing a condition
as a string to <code class="docutils literal notranslate"><span class="pre">pytest.mark.skipif</span></code>)(<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2103">issue #2103</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Cope gracefully with a .pyc file with no matching .py file (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2038">issue #2038</a>). Thanks
<a class="reference external" href="https://github.com/nedbat">&#64;nedbat</a>.</p></li>
</ul>
</div>
<div class="section" id="id388">
<h4>3.0.4 (2016-11-09)<a class="headerlink" href="#id388" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Import errors when collecting test modules now display the full traceback (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1976">issue #1976</a>).
Thanks <a class="reference external" href="https://github.com/cwitty">&#64;cwitty</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix confusing command-line help message for custom options with two or more <code class="docutils literal notranslate"><span class="pre">metavar</span></code> properties (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2004">issue #2004</a>).
Thanks <a class="reference external" href="https://github.com/okulynyak">&#64;okulynyak</a> and <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>When loading plugins, import errors which contain non-ascii messages are now properly handled in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1998">issue #1998</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fixed cyclic reference when <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> is used in context-manager form (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1965">issue #1965</a>). Also as a
result of this fix, <code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code> is left empty in both context-manager and function call usages.
Previously, <code class="docutils literal notranslate"><span class="pre">sys.exc_info</span></code> would contain the exception caught by the context manager,
even when the expected exception occurred.
Thanks <a class="reference external" href="https://github.com/MSeifert04">&#64;MSeifert04</a> for the report and the PR.</p></li>
<li><p>Fixed false-positives warnings from assertion rewrite hook for modules that were rewritten but
were later marked explicitly by <code class="docutils literal notranslate"><span class="pre">pytest.register_assert_rewrite</span></code>
or implicitly as a plugin (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/2005">issue #2005</a>).
Thanks <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Report teardown output on test failure (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/442">issue #442</a>).
Thanks <a class="reference external" href="https://github.com/matclab">&#64;matclab</a> for the PR.</p></li>
<li><p>Fix teardown error message in generated xUnit XML.
Thanks <a class="reference external" href="https://github.com/gdyuldin">&#64;gdyuldin</a> for the PR.</p></li>
<li><p>Properly handle exceptions in <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> tasks (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1984">issue #1984</a>).
Thanks <a class="reference external" href="https://github.com/adborden">&#64;adborden</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Clean up unittest TestCase objects after tests are complete (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1649">issue #1649</a>).
Thanks <a class="reference external" href="https://github.com/d_b_w">&#64;d_b_w</a> for the report and PR.</p></li>
</ul>
</div>
<div class="section" id="id389">
<h4>3.0.3 (2016-09-28)<a class="headerlink" href="#id389" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">ids</span></code> argument to <code class="docutils literal notranslate"><span class="pre">parametrize</span></code> again accepts <code class="docutils literal notranslate"><span class="pre">unicode</span></code> strings
in Python 2 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1905">issue #1905</a>).
Thanks <a class="reference external" href="https://github.com/philpep">&#64;philpep</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Assertions are now being rewritten for plugins in development mode
(<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code>) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1934">issue #1934</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix pkg_resources import error in Jython projects (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1853">issue #1853</a>).
Thanks <a class="reference external" href="https://github.com/raquel-ucl">&#64;raquel-ucl</a> for the PR.</p></li>
<li><p>Got rid of <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">'Module'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'_obj'</span></code> exception
in Python 3 (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1944">issue #1944</a>).
Thanks <a class="reference external" href="https://github.com/axil">&#64;axil</a> for the PR.</p></li>
<li><p>Explain a bad scope value passed to <code class="docutils literal notranslate"><span class="pre">&#64;fixture</span></code> declarations or
a <code class="docutils literal notranslate"><span class="pre">MetaFunc.parametrize()</span></code> call.</p></li>
<li><p>This version includes <code class="docutils literal notranslate"><span class="pre">pluggy-0.4.0</span></code>, which correctly handles
<code class="docutils literal notranslate"><span class="pre">VersionConflict</span></code> errors in plugins (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/704">issue #704</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="id390">
<h4>3.0.2 (2016-09-01)<a class="headerlink" href="#id390" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Improve error message when passing non-string ids to <code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1857">issue #1857</a>).
Thanks <a class="reference external" href="https://github.com/okken">&#64;okken</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">buffer</span></code> attribute to stdin stub class <code class="docutils literal notranslate"><span class="pre">pytest.capture.DontReadFromInput</span></code>
Thanks <a class="reference external" href="https://github.com/joguSD">&#64;joguSD</a> for the PR.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code> when string comparison with unicode has failed. (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1864">issue #1864</a>)
Thanks <a class="reference external" href="https://github.com/AiOO">&#64;AiOO</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> is now handled correctly if defined as a string (as opposed as
a sequence of strings) when modules are considered for assertion rewriting.
Due to this bug, much more modules were being rewritten than necessary
if a test suite uses <code class="docutils literal notranslate"><span class="pre">pytest_plugins</span></code> to load internal plugins (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1888">issue #1888</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1891">pull request #1891</a>).</p></li>
<li><p>Do not call tearDown and cleanups when running tests from
<code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses with <code class="docutils literal notranslate"><span class="pre">--pdb</span></code>
enabled. This allows proper post mortem debugging for all applications
which have significant logic in their tearDown machinery (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1890">issue #1890</a>). Thanks
<a class="reference external" href="https://github.com/mbyt">&#64;mbyt</a> for the PR.</p></li>
<li><p>Fix use of deprecated <code class="docutils literal notranslate"><span class="pre">getfuncargvalue</span></code> method in the internal doctest plugin.
Thanks <a class="reference external" href="https://github.com/ViviCoder">&#64;ViviCoder</a> for the report (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1898">issue #1898</a>).</p></li>
</ul>
</div>
<div class="section" id="id391">
<h4>3.0.1 (2016-08-23)<a class="headerlink" href="#id391" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Fix regression when <code class="docutils literal notranslate"><span class="pre">importorskip</span></code> is used at module level (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1822">issue #1822</a>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> and <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix parametrization scope when session fixtures are used in conjunction
with normal parameters in the same call (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1832">issue #1832</a>).
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the report, <a class="reference external" href="https://github.com/Kingdread">&#64;Kingdread</a> and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix internal error when parametrizing tests or fixtures using an empty <code class="docutils literal notranslate"><span class="pre">ids</span></code> argument (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1849">issue #1849</a>).
Thanks <a class="reference external" href="https://github.com/OPpuolitaival">&#64;OPpuolitaival</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix loader error when running <code class="docutils literal notranslate"><span class="pre">pytest</span></code> embedded in a zipfile.
Thanks <a class="reference external" href="https://github.com/mbachry">&#64;mbachry</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="release-3-0-0">
<span id="id392"></span><h4>3.0.0 (2016-08-18)<a class="headerlink" href="#release-3-0-0" title="Permalink to this headline">¶</a></h4>
<p><strong>Incompatible changes</strong></p>
<p>A number of incompatible changes were made in this release, with the intent of removing features deprecated for a long
time or change existing behaviors in order to make them less surprising/more useful.</p>
<ul>
<li><p>Reinterpretation mode has now been removed.  Only plain and rewrite
mode are available, consequently the <code class="docutils literal notranslate"><span class="pre">--assert=reinterp</span></code> option is
no longer available.  This also means files imported from plugins or
<code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> will not benefit from improved assertions by
default, you should use <code class="docutils literal notranslate"><span class="pre">pytest.register_assert_rewrite()</span></code> to
explicitly turn on assertion rewriting for those files.  Thanks
<a class="reference external" href="https://github.com/flub">&#64;flub</a> for the PR.</p></li>
<li><p>The following deprecated commandline options were removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--genscript</span></code>: no longer supported;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-assert</span></code>: use <code class="docutils literal notranslate"><span class="pre">--assert=plain</span></code> instead;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--nomagic</span></code>: use <code class="docutils literal notranslate"><span class="pre">--assert=plain</span></code> instead;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--report</span></code>: use <code class="docutils literal notranslate"><span class="pre">-r</span></code> instead;</p></li>
</ul>
<p>Thanks to <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1664">pull request #1664</a>).</p>
</li>
<li><p>ImportErrors in plugins now are a fatal error instead of issuing a
pytest warning (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1479">issue #1479</a>). Thanks to <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p></li>
<li><p>Removed support code for Python 3 versions &lt; 3.3 (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1627">pull request #1627</a>).</p></li>
<li><p>Removed all <code class="docutils literal notranslate"><span class="pre">py.test-X*</span></code> entry points. The versioned, suffixed entry points
were never documented and a leftover from a pre-virtualenv era. These entry
points also created broken entry points in wheels, so removing them also
removes a source of confusion for users (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1632">issue #1632</a>).
Thanks <a class="reference external" href="https://github.com/obestwalter">&#64;obestwalter</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.skip()</span></code> now raises an error when used to decorate a test function,
as opposed to its original intent (to imperatively skip a test inside a test function). Previously
this usage would cause the entire module to be skipped (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/607">issue #607</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1519">pull request #1519</a>).</p></li>
<li><p>Exit tests if a collection error occurs. A poll indicated most users will hit CTRL-C
anyway as soon as they see collection errors, so pytest might as well make that the default behavior (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1421">issue #1421</a>).
A <code class="docutils literal notranslate"><span class="pre">--continue-on-collection-errors</span></code> option has been added to restore the previous behaviour.
Thanks <a class="reference external" href="https://github.com/olegpidsadnyi">&#64;olegpidsadnyi</a> and <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1628">pull request #1628</a>).</p></li>
<li><p>Renamed the pytest <code class="docutils literal notranslate"><span class="pre">pdb</span></code> module (plugin) into <code class="docutils literal notranslate"><span class="pre">debugging</span></code> to avoid clashes with the builtin <code class="docutils literal notranslate"><span class="pre">pdb</span></code> module.</p></li>
<li><p>Raise a helpful failure message when requesting a parametrized fixture at runtime,
e.g. with <code class="docutils literal notranslate"><span class="pre">request.getfixturevalue</span></code>. Previously these parameters were simply
never defined, so a fixture decorated like <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture(params=[0,</span> <span class="pre">1,</span> <span class="pre">2])</span></code>
only ran once (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/460">pull request #460</a>).
Thanks to <a class="reference external" href="https://github.com/nikratio">&#64;nikratio</a> for the bug report, <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_pytest.monkeypatch.monkeypatch</span></code> class has been renamed to <code class="docutils literal notranslate"><span class="pre">_pytest.monkeypatch.MonkeyPatch</span></code>
so it doesn’t conflict with the <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> fixture.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--exitfirst</span> <span class="pre">/</span> <span class="pre">-x</span></code> can now be overridden by a following <code class="docutils literal notranslate"><span class="pre">--maxfail=N</span></code>
and is just a synonym for <code class="docutils literal notranslate"><span class="pre">--maxfail=1</span></code>.</p></li>
</ul>
<p><strong>New Features</strong></p>
<ul>
<li><p>Support nose-style <code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute on methods of classes,
including unittest-style Classes. If set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the test will not be
collected.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">doctest_namespace</span></code> fixture for injecting names into the
namespace in which doctests run.
Thanks <a class="reference external" href="https://github.com/milliams">&#64;milliams</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1428">pull request #1428</a>).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">--doctest-report</span></code> option available to change the output format of diffs
when running (failing) doctests (implements <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1749">issue #1749</a>).
Thanks <a class="reference external" href="https://github.com/hartym">&#64;hartym</a> for the PR.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">name</span></code> argument to <code class="docutils literal notranslate"><span class="pre">pytest.fixture</span></code> decorator which allows a custom name
for a fixture (to solve the funcarg-shadowing-fixture problem).
Thanks <a class="reference external" href="https://github.com/novas0x2a">&#64;novas0x2a</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1444">pull request #1444</a>).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">approx()</span></code> function for easily comparing floating-point numbers in
tests.
Thanks <a class="reference external" href="https://github.com/kalekundert">&#64;kalekundert</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1441">pull request #1441</a>).</p></li>
<li><p>Ability to add global properties in the final xunit output file by accessing
the internal <code class="docutils literal notranslate"><span class="pre">junitxml</span></code> plugin (experimental).
Thanks <a class="reference external" href="https://github.com/tareqalayan">&#64;tareqalayan</a> for the complete PR <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1454">pull request #1454</a>).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ExceptionInfo.match()</span></code> method to match a regular expression on the
string representation of an exception (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/372">issue #372</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1502">pull request #1502</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__tracebackhide__</span></code> can now also be set to a callable which then can decide
whether to filter the traceback based on the <code class="docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> object passed
to it. Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1526">pull request #1526</a>).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pytest_make_parametrize_id(config,</span> <span class="pre">val)</span></code> hook which can be used by plugins to provide
friendly strings for custom types.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">capsys</span></code> and <code class="docutils literal notranslate"><span class="pre">capfd</span></code> now have a <code class="docutils literal notranslate"><span class="pre">disabled()</span></code> context-manager method, which
can be used to temporarily disable capture within a test.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>New cli flag <code class="docutils literal notranslate"><span class="pre">--fixtures-per-test</span></code>: shows which fixtures are being used
for each selected test item. Features doc strings of fixtures by default.
Can also show where fixtures are defined if combined with <code class="docutils literal notranslate"><span class="pre">-v</span></code>.
Thanks <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p></li>
<li><p>Introduce <code class="docutils literal notranslate"><span class="pre">pytest</span></code> command as recommended entry point. Note that <code class="docutils literal notranslate"><span class="pre">py.test</span></code>
still works and is not scheduled for removal. Closes proposal
<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1629">issue #1629</a>. Thanks <a class="reference external" href="https://github.com/obestwalter">&#64;obestwalter</a> and <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> for the complete PR
(<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1633">pull request #1633</a>).</p></li>
<li><p>New cli flags:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--setup-plan</span></code>: performs normal collection and reports
the potential setup and teardown and does not execute any fixtures and tests;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--setup-only</span></code>: performs normal collection, executes setup and teardown of
fixtures and reports them;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--setup-show</span></code>: performs normal test execution and additionally shows
setup and teardown of fixtures;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--keep-duplicates</span></code>: py.test now ignores duplicated paths given in the command
line. To retain the previous behavior where the same test could be run multiple
times by specifying it in the command-line multiple times, pass the <code class="docutils literal notranslate"><span class="pre">--keep-duplicates</span></code>
argument (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1609">issue #1609</a>);</p></li>
</ul>
<p>Thanks <a class="reference external" href="https://github.com/d6e">&#64;d6e</a>, <a class="reference external" href="https://github.com/kvas-it">&#64;kvas-it</a>, <a class="reference external" href="https://github.com/sallner">&#64;sallner</a>, <a class="reference external" href="https://github.com/ioggstream">&#64;ioggstream</a> and <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the PRs.</p>
</li>
<li><p>New CLI flag <code class="docutils literal notranslate"><span class="pre">--override-ini</span></code>/<code class="docutils literal notranslate"><span class="pre">-o</span></code>: overrides values from the ini file.
For example: <code class="docutils literal notranslate"><span class="pre">&quot;-o</span> <span class="pre">xfail_strict=True&quot;</span></code>’.
Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> and <a class="reference external" href="https://github.com/fengxx">&#64;fengxx</a> for the PR.</p></li>
<li><p>New hooks:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_fixture_setup(fixturedef,</span> <span class="pre">request)</span></code>: executes fixture setup;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_fixture_post_finalizer(fixturedef)</span></code>: called after the fixture’s
finalizer and has access to the fixture’s result cache.</p></li>
</ul>
<p>Thanks <a class="reference external" href="https://github.com/d6e">&#64;d6e</a>, <a class="reference external" href="https://github.com/sallner">&#64;sallner</a>.</p>
</li>
<li><p>Issue warnings for asserts whose test is a tuple literal. Such asserts will
never fail because tuples are always truthy and are usually a mistake
(see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1562">issue #1562</a>). Thanks <a class="reference external" href="https://github.com/kvas-it">&#64;kvas-it</a>, for the PR.</p></li>
<li><p>Allow passing a custom debugger class (e.g. <code class="docutils literal notranslate"><span class="pre">--pdbcls=IPython.core.debugger:Pdb</span></code>).
Thanks to <a class="reference external" href="https://github.com/anntzer">&#64;anntzer</a> for the PR.</p></li>
</ul>
<p><strong>Changes</strong></p>
<ul class="simple">
<li><p>Plugins now benefit from assertion rewriting.  Thanks
<a class="reference external" href="https://github.com/sober7">&#64;sober7</a>, <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> and <a class="reference external" href="https://github.com/flub">&#64;flub</a> for the PR.</p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">report.outcome</span></code> for <code class="docutils literal notranslate"><span class="pre">xpassed</span></code> tests to <code class="docutils literal notranslate"><span class="pre">&quot;passed&quot;</span></code> in non-strict
mode and <code class="docutils literal notranslate"><span class="pre">&quot;failed&quot;</span></code> in strict mode. Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR
(<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1795">pull request #1795</a>) and <a class="reference external" href="https://github.com/gprasad84">&#64;gprasad84</a> for report (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1546">issue #1546</a>).</p></li>
<li><p>Tests marked with <code class="docutils literal notranslate"><span class="pre">xfail(strict=False)</span></code> (the default) now appear in
JUnitXML reports as passing tests instead of skipped.
Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1795">pull request #1795</a>).</p></li>
<li><p>Highlight path of the file location in the error report to make it easier to copy/paste.
Thanks <a class="reference external" href="https://github.com/suzaku">&#64;suzaku</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1778">pull request #1778</a>).</p></li>
<li><p>Fixtures marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> can now use <code class="docutils literal notranslate"><span class="pre">yield</span></code> statements exactly like
those marked with the <code class="docutils literal notranslate"><span class="pre">&#64;pytest.yield_fixture</span></code> decorator. This change renders
<code class="docutils literal notranslate"><span class="pre">&#64;pytest.yield_fixture</span></code> deprecated and makes <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> with <code class="docutils literal notranslate"><span class="pre">yield</span></code> statements
the preferred way to write teardown code (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1461">pull request #1461</a>).
Thanks <a class="reference external" href="https://github.com/csaftoiu">&#64;csaftoiu</a> for bringing this to attention and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Explicitly passed parametrize ids do not get escaped to ascii (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1351">issue #1351</a>).
Thanks <a class="reference external" href="https://github.com/ceridwen">&#64;ceridwen</a> for the PR.</p></li>
<li><p>Fixtures are now sorted in the error message displayed when an unknown
fixture is declared in a test function.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_terminal_summary</span></code> hook now receives the <code class="docutils literal notranslate"><span class="pre">exitstatus</span></code>
of the test session as argument. Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1809">pull request #1809</a>).</p></li>
<li><p>Parametrize ids can accept <code class="docutils literal notranslate"><span class="pre">None</span></code> as specific test id, in which case the
automatically generated id for that argument will be used.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1468">pull request #1468</a>).</p></li>
<li><p>The parameter to xunit-style setup/teardown methods (<code class="docutils literal notranslate"><span class="pre">setup_method</span></code>,
<code class="docutils literal notranslate"><span class="pre">setup_module</span></code>, etc.) is now optional and may be omitted.
Thanks <a class="reference external" href="https://github.com/okken">&#64;okken</a> for bringing this to attention and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Improved automatic id generation selection in case of duplicate ids in
parametrize.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1474">pull request #1474</a>).</p></li>
<li><p>Now pytest warnings summary is shown up by default. Added a new flag
<code class="docutils literal notranslate"><span class="pre">--disable-pytest-warnings</span></code> to explicitly disable the warnings summary (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1668">issue #1668</a>).</p></li>
<li><p>Make ImportError during collection more explicit by reminding
the user to check the name of the test module/package(s) (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1426">issue #1426</a>).
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1520">pull request #1520</a>).</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">build/</span></code> and <code class="docutils literal notranslate"><span class="pre">dist/</span></code> to the default <code class="docutils literal notranslate"><span class="pre">--norecursedirs</span></code> list. Thanks
<a class="reference external" href="https://github.com/mikofski">&#64;mikofski</a> for the report and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1544">issue #1544</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> in the context manager form accepts a custom
<code class="docutils literal notranslate"><span class="pre">message</span></code> to raise when no exception occurred.
Thanks <a class="reference external" href="https://github.com/palaviv">&#64;palaviv</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1616">pull request #1616</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files now benefit from assertion rewriting; previously it
was only available for test modules. Thanks <a class="reference external" href="https://github.com/flub">&#64;flub</a>, <a class="reference external" href="https://github.com/sober7">&#64;sober7</a> and
<a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1619">issue #1619</a>).</p></li>
<li><p>Text documents without any doctests no longer appear as “skipped”.
Thanks <a class="reference external" href="https://github.com/graingert">&#64;graingert</a> for reporting and providing a full PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1580">pull request #1580</a>).</p></li>
<li><p>Ensure that a module within a namespace package can be found when it
is specified on the command line together with the <code class="docutils literal notranslate"><span class="pre">--pyargs</span></code>
option.  Thanks to <a class="reference external" href="https://github.com/taschini">&#64;taschini</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1597">pull request #1597</a>).</p></li>
<li><p>Always include full assertion explanation during assertion rewriting. The previous behaviour was hiding
sub-expressions that happened to be <code class="docutils literal notranslate"><span class="pre">False</span></code>, assuming this was redundant information.
Thanks <a class="reference external" href="https://github.com/bagerard">&#64;bagerard</a> for reporting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1503">issue #1503</a>). Thanks to <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OptionGroup.addoption()</span></code> now checks if option names were already
added before, to make it easier to track down issues like <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1618">issue #1618</a>.
Before, you only got exceptions later from <code class="docutils literal notranslate"><span class="pre">argparse</span></code> library,
giving no clue about the actual reason for double-added options.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yield</span></code>-based tests are considered deprecated and will be removed in pytest-4.0.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> sections in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code> files should now be named <code class="docutils literal notranslate"><span class="pre">[tool:pytest]</span></code>
to avoid conflicts with other distutils commands (see <a class="reference external" href="https://github.com/pytest-dev/pytest/pull/567">pull request #567</a>). <code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> sections in
<code class="docutils literal notranslate"><span class="pre">pytest.ini</span></code> or <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> files are supported and unchanged.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code> prefix to declare fixtures is considered deprecated and will be
removed in pytest-4.0 (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1684">pull request #1684</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Passing a command-line string to <code class="docutils literal notranslate"><span class="pre">pytest.main()</span></code> is considered deprecated and scheduled
for removal in pytest-4.0. It is recommended to pass a list of arguments instead (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1723">pull request #1723</a>).</p></li>
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">getfuncargvalue</span></code> to <code class="docutils literal notranslate"><span class="pre">getfixturevalue</span></code>. <code class="docutils literal notranslate"><span class="pre">getfuncargvalue</span></code> is
still present but is now considered deprecated. Thanks to <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a>
for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1626">pull request #1626</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optparse</span></code> type usage now triggers DeprecationWarnings (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1740">issue #1740</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">optparse</span></code> backward compatibility supports float/complex types (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/457">issue #457</a>).</p></li>
<li><p>Refined logic for determining the <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>, considering only valid
paths which fixes a number of issues: <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1594">issue #1594</a>, <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1435">issue #1435</a> and <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1471">issue #1471</a>.
Updated the documentation according to current behavior. Thanks to
<a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a>, <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and <a class="reference external" href="https://github.com/matthiasha">&#64;matthiasha</a> for the PR.</p></li>
<li><p>Always include full assertion explanation. The previous behaviour was hiding
sub-expressions that happened to be False, assuming this was redundant information.
Thanks <a class="reference external" href="https://github.com/bagerard">&#64;bagerard</a> for reporting (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1503">issue #1503</a>). Thanks to <a class="reference external" href="https://github.com/davehunt">&#64;davehunt</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for PR.</p></li>
<li><p>Better message in case of not using parametrized variable (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1539">issue #1539</a>).
Thanks to <a class="reference external" href="https://github.com/tramwaj29">&#64;tramwaj29</a> for the PR.</p></li>
<li><p>Updated docstrings with a more uniform style.</p></li>
<li><p>Add stderr write for <code class="docutils literal notranslate"><span class="pre">pytest.exit(msg)</span></code> during startup. Previously the message was never shown.
Thanks <a class="reference external" href="https://github.com/BeyondEvil">&#64;BeyondEvil</a> for reporting <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1210">issue #1210</a>. Thanks to &#64;jgsonesen and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p>No longer display the incorrect test deselection reason (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1372">issue #1372</a>).
Thanks <a class="reference external" href="https://github.com/ronnypfannschmidt">&#64;ronnypfannschmidt</a> for the PR.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">--resultlog</span></code> command line option has been deprecated: it is little used
and there are more modern and better alternatives (see <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/830">issue #830</a>).
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Improve error message with fixture lookup errors: add an ‘E’ to the first
line and ‘&gt;’ to the rest. Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/717">issue #717</a>. Thanks <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for reporting and
a PR, <a class="reference external" href="https://github.com/eolo999">&#64;eolo999</a> for the initial PR and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for his guidance during
EuroPython2016 sprint.</p></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>Parametrize now correctly handles duplicated test ids.</p></li>
<li><p>Fix internal error issue when the <code class="docutils literal notranslate"><span class="pre">method</span></code> argument is missing for
<code class="docutils literal notranslate"><span class="pre">teardown_method()</span></code> (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1605">issue #1605</a>).</p></li>
<li><p>Fix exception visualization in case the current working directory (CWD) gets
deleted during testing (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1235">issue #1235</a>). Thanks <a class="reference external" href="https://github.com/bukzor">&#64;bukzor</a> for reporting. PR by
<a class="reference external" href="https://github.com/marscher">&#64;marscher</a>.</p></li>
<li><p>Improve test output for logical expression with brackets (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/925">issue #925</a>).
Thanks <a class="reference external" href="https://github.com/DRMacIver">&#64;DRMacIver</a> for reporting and <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> for the PR.</p></li>
<li><p>Create correct diff for strings ending with newlines (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1553">issue #1553</a>).
Thanks <a class="reference external" href="https://github.com/Vogtinator">&#64;Vogtinator</a> for reporting and <a class="reference external" href="https://github.com/RedBeardCode">&#64;RedBeardCode</a> and
<a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConftestImportFailure</span></code> now shows the traceback making it easier to
identify bugs in <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1516">pull request #1516</a>). Thanks <a class="reference external" href="https://github.com/txomon">&#64;txomon</a> for
the PR.</p></li>
<li><p>Text documents without any doctests no longer appear as “skipped”.
Thanks <a class="reference external" href="https://github.com/graingert">&#64;graingert</a> for reporting and providing a full PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1580">pull request #1580</a>).</p></li>
<li><p>Fixed collection of classes with custom <code class="docutils literal notranslate"><span class="pre">__new__</span></code> method.
Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1579">issue #1579</a>. Thanks to <a class="reference external" href="https://github.com/Stranger6667">&#64;Stranger6667</a> for the PR.</p></li>
<li><p>Fixed scope overriding inside metafunc.parametrize (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/634">issue #634</a>).
Thanks to <a class="reference external" href="https://github.com/Stranger6667">&#64;Stranger6667</a> for the PR.</p></li>
<li><p>Fixed the total tests tally in junit xml output (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1798">pull request #1798</a>).
Thanks to <a class="reference external" href="https://github.com/cboelsen">&#64;cboelsen</a> for the PR.</p></li>
<li><p>Fixed off-by-one error with lines from <code class="docutils literal notranslate"><span class="pre">request.node.warn</span></code>.
Thanks to <a class="reference external" href="https://github.com/blueyed">&#64;blueyed</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="id393">
<h4>2.9.2 (2016-05-31)<a class="headerlink" href="#id393" title="Permalink to this headline">¶</a></h4>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>fix <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/510">issue #510</a>: skip tests where one parameterize dimension was empty
thanks Alex Stapleton for the Report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR</p></li>
<li><p>Fix Xfail does not work with condition keyword argument.
Thanks <a class="reference external" href="https://github.com/astraw38">&#64;astraw38</a> for reporting the issue (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1496">issue #1496</a>) and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a>
for PR the (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1524">pull request #1524</a>).</p></li>
<li><p>Fix win32 path issue when putting custom config file with absolute path
in <code class="docutils literal notranslate"><span class="pre">pytest.main(&quot;-c</span> <span class="pre">your_absolute_path&quot;)</span></code>.</p></li>
<li><p>Fix maximum recursion depth detection when raised error class is not aware
of unicode/encoded bytes.
Thanks <a class="reference external" href="https://github.com/prusse-martin">&#64;prusse-martin</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1506">pull request #1506</a>).</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code> mark when used in strict mode.
Thanks <a class="reference external" href="https://github.com/pquentin">&#64;pquentin</a> for the PR and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for
showing how to fix the bug.</p></li>
<li><p>Minor improvements and fixes to the documentation.
Thanks <a class="reference external" href="https://github.com/omarkohl">&#64;omarkohl</a> for the PR.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">--fixtures</span></code> to show all fixture definitions as opposed to just
one per fixture name.
Thanks to <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p></li>
</ul>
</div>
<div class="section" id="id394">
<h4>2.9.1 (2016-03-17)<a class="headerlink" href="#id394" title="Permalink to this headline">¶</a></h4>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>Improve error message when a plugin fails to load.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1178">issue #1178</a>):
<code class="docutils literal notranslate"><span class="pre">pytest.fail</span></code> with non-ascii characters raises an internal pytest error.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/469">issue #469</a>): junit parses report.nodeid incorrectly, when params IDs
contain <code class="docutils literal notranslate"><span class="pre">::</span></code>. Thanks <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1431">pull request #1431</a>).</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/578">issue #578</a>): SyntaxErrors
containing non-ascii lines at the point of failure generated an internal
py.test error.
Thanks <a class="reference external" href="https://github.com/asottile">&#64;asottile</a> for the report and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1437">issue #1437</a>): When passing in a bytestring regex pattern to parameterize
attempt to decode it as utf-8 ignoring errors.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/649">issue #649</a>): parametrized test nodes cannot be specified to run on the command line.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/138">issue #138</a>): better reporting for python 3.3+ chained exceptions</p></li>
</ul>
</div>
<div class="section" id="id395">
<h4>2.9.0 (2016-02-29)<a class="headerlink" href="#id395" title="Permalink to this headline">¶</a></h4>
<p><strong>New Features</strong></p>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">pytest.mark.skip</span></code> mark, which unconditionally skips marked tests.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1040">pull request #1040</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--doctest-glob</span></code> may now be passed multiple times in the command-line.
Thanks <a class="reference external" href="https://github.com/jab">&#64;jab</a> and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">-rp</span></code> and <code class="docutils literal notranslate"><span class="pre">-rP</span></code> reporting options give the summary and full output
of passing tests, respectively. Thanks to <a class="reference external" href="https://github.com/codewarrior0">&#64;codewarrior0</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail</span></code> now has a <code class="docutils literal notranslate"><span class="pre">strict</span></code> option, which makes <code class="docutils literal notranslate"><span class="pre">XPASS</span></code>
tests to fail the test suite (defaulting to <code class="docutils literal notranslate"><span class="pre">False</span></code>). There’s also a
<code class="docutils literal notranslate"><span class="pre">xfail_strict</span></code> ini option that can be used to configure it project-wise.
Thanks <a class="reference external" href="https://github.com/rabbbit">&#64;rabbbit</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1355">pull request #1355</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Parser.addini</span></code> now supports options of type <code class="docutils literal notranslate"><span class="pre">bool</span></code>.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ALLOW_BYTES</span></code> doctest option. This strips <code class="docutils literal notranslate"><span class="pre">b</span></code> prefixes from byte strings
in doctest output (similar to <code class="docutils literal notranslate"><span class="pre">ALLOW_UNICODE</span></code>).
Thanks <a class="reference external" href="https://github.com/jaraco">&#64;jaraco</a> for the request and <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1287">pull request #1287</a>).</p></li>
<li><p>Give a hint on <code class="docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code> to use the <code class="docutils literal notranslate"><span class="pre">--fulltrace</span></code> option to show the errors.
Fixes <a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1366">issue #1366</a>.
Thanks to <a class="reference external" href="https://github.com/hpk42">&#64;hpk42</a> for the report and <a class="reference external" href="https://github.com/RonnyPfannschmidt">&#64;RonnyPfannschmidt</a> for the PR.</p></li>
<li><p>Catch <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> exceptions when getting exception source location.
Fixes a pytest internal error for dynamically generated code (fixtures and tests)
where source lines are fake by intention.</p></li>
</ul>
<p><strong>Changes</strong></p>
<ul>
<li><p><strong>Important</strong>: <a class="reference external" href="https://pylib.readthedocs.io/en/stable/code.html">py.code</a> has been
merged into the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> repository as <code class="docutils literal notranslate"><span class="pre">pytest._code</span></code>. This decision
was made because <code class="docutils literal notranslate"><span class="pre">py.code</span></code> had very few uses outside <code class="docutils literal notranslate"><span class="pre">pytest</span></code> and the
fact that it was in a different repository made it difficult to fix bugs on
its code in a timely manner. The team hopes with this to be able to better
refactor out and improve that code.
This change shouldn’t affect users, but it is useful to let users aware
if they encounter any strange behavior.</p>
<p>Keep in mind that the code for <code class="docutils literal notranslate"><span class="pre">pytest._code</span></code> is <strong>private</strong> and
<strong>experimental</strong>, so you definitely should not import it explicitly!</p>
<p>Please note that the original <code class="docutils literal notranslate"><span class="pre">py.code</span></code> is still available in
<a class="reference external" href="https://pylib.readthedocs.io">pylib</a>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytest_enter_pdb</span></code> now optionally receives the pytest config object.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR.</p></li>
<li><p>Removed code and documentation for Python 2.5 or lower versions,
including removal of the obsolete <code class="docutils literal notranslate"><span class="pre">_pytest.assertion.oldinterpret</span></code> module.
Thanks <a class="reference external" href="https://github.com/nicoddemus">&#64;nicoddemus</a> for the PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/pull/1226">pull request #1226</a>).</p></li>
<li><p>Comparisons now always show up in full when <code class="docutils literal notranslate"><span class="pre">CI</span></code> or <code class="docutils literal notranslate"><span class="pre">BUILD_NUMBER</span></code> is
found in the environment, even when <code class="docutils literal notranslate"><span class="pre">-vv</span></code> isn’t used.
Thanks <a class="reference external" href="https://github.com/The-Compiler">&#64;The-Compiler</a> for the PR.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--lf</span></code> and <code class="docutils literal notranslate"><span class="pre">--ff</span></code> now support long names: <code class="docutils literal notranslate"><span class="pre">--last-failed</span></code> and
<code class="docutils literal notranslate"><span class="pre">--failed-first</span></code> respectively.
Thanks <a class="reference external" href="https://github.com/MichaelAquilina">&#64;MichaelAquilina</a> for the PR.</p></li>
<li><p>Added expected exceptions to <code class="docutils literal notranslate"><span class="pre">pytest.raises</span></code> fail message.</p></li>
<li><p>Collection only displays progress (“collecting X items”) when in a terminal.
This avoids cluttering the output when using <code class="docutils literal notranslate"><span class="pre">--color=yes</span></code> to obtain
colors in CI integrations systems (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1397">issue #1397</a>).</p></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-s</span></code> and <code class="docutils literal notranslate"><span class="pre">-c</span></code> options should now work under <code class="docutils literal notranslate"><span class="pre">xdist</span></code>;
<code class="docutils literal notranslate"><span class="pre">Config.fromdictargs</span></code> now represents its input much more faithfully.
Thanks to <a class="reference external" href="https://github.com/bukzor">&#64;bukzor</a> for the complete PR (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/680">issue #680</a>).</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1290">issue #1290</a>): support Python 3.5’s <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator in assertion rewriting.
Thanks <a class="reference external" href="https://github.com/Shinkenjoe">&#64;Shinkenjoe</a> for report with test case and <a class="reference external" href="https://github.com/tomviner">&#64;tomviner</a> for the PR.</p></li>
<li><p>Fix formatting utf-8 explanation messages (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1379">issue #1379</a>).
Thanks <a class="reference external" href="https://github.com/biern">&#64;biern</a> for the PR.</p></li>
<li><p>Fix <a class="reference internal" href="contents.html#how-to-modifying-python-tb-printing"><span class="std std-ref">traceback style docs</span></a> to describe all of the available options
(auto/long/short/line/native/no), with <code class="docutils literal notranslate"><span class="pre">auto</span></code> being the default since v2.6.
Thanks <a class="reference external" href="https://github.com/hackebrot">&#64;hackebrot</a> for the PR.</p></li>
<li><p>Fix (<a class="reference external" href="https://github.com/pytest-dev/pytest/issues/1422">issue #1422</a>): junit record_xml_property doesn’t allow multiple records
with same name.</p></li>
</ul>
</div>
<div class="section" id="id396">
<h4>2.8.7 (2016-01-24)<a class="headerlink" href="#id396" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1338: use predictable object resolution for monkeypatch</p></li>
</ul>
</div>
<div class="section" id="id397">
<h4>2.8.6 (2016-01-21)<a class="headerlink" href="#id397" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1259: allow for double nodeids in junitxml,
this was a regression failing plugins combinations
like pytest-pep8 + pytest-flakes</p></li>
<li><p>Workaround for exception that occurs in pyreadline when using
<code class="docutils literal notranslate"><span class="pre">--pdb</span></code> with standard I/O capture enabled.
Thanks Erik M. Bray for the PR.</p></li>
<li><p>fix #900: Better error message in case the target of a <code class="docutils literal notranslate"><span class="pre">monkeypatch</span></code> call
raises an <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>.</p></li>
<li><p>fix #1292: monkeypatch calls (setattr, setenv, etc.) are now O(1).
Thanks David R. MacIver for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1223: captured stdout and stderr are now properly displayed before
entering pdb when <code class="docutils literal notranslate"><span class="pre">--pdb</span></code> is used instead of being thrown away.
Thanks Cal Leeming for the PR.</p></li>
<li><p>fix #1305: pytest warnings emitted during <code class="docutils literal notranslate"><span class="pre">pytest_terminal_summary</span></code> are now
properly displayed.
Thanks Ionel Maries Cristian for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #628: fixed internal UnicodeDecodeError when doctests contain unicode.
Thanks Jason R. Coombs for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1334: Add captured stdout to jUnit XML report on setup error.
Thanks Georgy Dyuldin for the PR.</p></li>
</ul>
</div>
<div class="section" id="id398">
<h4>2.8.5 (2015-12-11)<a class="headerlink" href="#id398" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1243: fixed issue where class attributes injected during collection could break pytest.
PR by Alexei Kozlenok, thanks Ronny Pfannschmidt and Bruno Oliveira for the review and help.</p></li>
<li><p>fix #1074: precompute junitxml chunks instead of storing the whole tree in objects
Thanks Bruno Oliveira for the report and Ronny Pfannschmidt for the PR</p></li>
<li><p>fix #1238: fix <code class="docutils literal notranslate"><span class="pre">pytest.deprecated_call()</span></code> receiving multiple arguments
(Regression introduced in 2.8.4). Thanks Alex Gaynor for the report and
Bruno Oliveira for the PR.</p></li>
</ul>
</div>
<div class="section" id="id399">
<h4>2.8.4 (2015-12-06)<a class="headerlink" href="#id399" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1190: <code class="docutils literal notranslate"><span class="pre">deprecated_call()</span></code> now works when the deprecated
function has been already called by another test in the same
module. Thanks Mikhail Chernykh for the report and Bruno Oliveira for the
PR.</p></li>
<li><p>fix #1198: <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> option now works on Python 3. Thanks
Mehdy Khoshnoody for the PR.</p></li>
<li><p>fix #1219: <code class="docutils literal notranslate"><span class="pre">--pastebin</span></code> now works correctly when captured output contains
non-ascii characters. Thanks Bruno Oliveira for the PR.</p></li>
<li><p>fix #1204: another error when collecting with a nasty __getattr__().
Thanks Florian Bruhin for the PR.</p></li>
<li><p>fix the summary printed when no tests did run.
Thanks Florian Bruhin for the PR.</p></li>
<li><p>fix #1185 - ensure MANIFEST.in exactly matches what should go to a sdist</p></li>
<li><p>a number of documentation modernizations wrt good practices.
Thanks Bruno Oliveira for the PR.</p></li>
</ul>
</div>
<div class="section" id="id400">
<h4>2.8.3 (2015-11-18)<a class="headerlink" href="#id400" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1169: add __name__ attribute to testcases in TestCaseFunction to
support the &#64;unittest.skip decorator on functions and methods.
Thanks Lee Kamentsky for the PR.</p></li>
<li><p>fix #1035: collecting tests if test module level obj has __getattr__().
Thanks Suor for the report and Bruno Oliveira / Tom Viner for the PR.</p></li>
<li><p>fix #331: don’t collect tests if their failure cannot be reported correctly
e.g. they are a callable instance of a class.</p></li>
<li><p>fix #1133: fixed internal error when filtering tracebacks where one entry
belongs to a file which is no longer available.
Thanks Bruno Oliveira for the PR.</p></li>
<li><p>enhancement made to highlight in red the name of the failing tests so
they stand out in the output.
Thanks Gabriel Reis for the PR.</p></li>
<li><p>add more talks to the documentation</p></li>
<li><p>extend documentation on the –ignore cli option</p></li>
<li><p>use pytest-runner for setuptools integration</p></li>
<li><p>minor fixes for interaction with OS X El Capitan
system integrity protection (thanks Florian)</p></li>
</ul>
</div>
<div class="section" id="id401">
<h4>2.8.2 (2015-10-07)<a class="headerlink" href="#id401" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1085: proper handling of encoding errors when passing encoded byte
strings to pytest.parametrize in Python 2.
Thanks Themanwithoutaplan for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1087: handling SystemError when passing empty byte strings to
pytest.parametrize in Python 3.
Thanks Paul Kehrer for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix #995: fixed internal error when filtering tracebacks where one entry
was generated by an exec() statement.
Thanks Daniel Hahler, Ashley C Straw, Philippe Gauthier and Pavel Savchenko
for contributing and Bruno Oliveira for the PR.</p></li>
<li><p>fix #1100 and #1057: errors when using autouse fixtures and doctest modules.
Thanks Sergey B Kirpichev and Vital Kudzelka for contributing and Bruno
Oliveira for the PR.</p></li>
</ul>
</div>
<div class="section" id="id402">
<h4>2.8.1 (2015-09-29)<a class="headerlink" href="#id402" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix #1034: Add missing nodeid on pytest_logwarning call in
addhook.  Thanks Simon Gomizelj for the PR.</p></li>
<li><p>‘deprecated_call’ is now only satisfied with a DeprecationWarning or
PendingDeprecationWarning. Before 2.8.0, it accepted any warning, and 2.8.0
made it accept only DeprecationWarning (but not PendingDeprecationWarning).
Thanks Alex Gaynor for the issue and Eric Hunsberger for the PR.</p></li>
<li><p>fix issue #1073: avoid calling __getattr__ on potential plugin objects.
This fixes an incompatibility with pytest-django.  Thanks Andreas Pelme,
Bruno Oliveira and Ronny Pfannschmidt for contributing and Holger Krekel
for the fix.</p></li>
<li><p>Fix issue #704: handle versionconflict during plugin loading more
gracefully.  Thanks Bruno Oliveira for the PR.</p></li>
<li><p>Fix issue #1064: “”–junitxml” regression when used with the
“pytest-xdist” plugin, with test reports being assigned to the wrong tests.
Thanks Daniel Grunwald for the report and Bruno Oliveira for the PR.</p></li>
<li><p>(experimental) adapt more SEMVER style versioning and change meaning of
master branch in git repo: “master” branch now keeps the bug fixes, changes
aimed for micro releases.  “features” branch will only be released
with minor or major pytest releases.</p></li>
<li><p>Fix issue #766 by removing documentation references to distutils.
Thanks Russel Winder.</p></li>
<li><p>Fix issue #1030: now byte-strings are escaped to produce item node ids
to make them always serializable.
Thanks Andy Freeland for the report and Bruno Oliveira for the PR.</p></li>
<li><p>Python 2: if unicode parametrized values are convertible to ascii, their
ascii representation is used for the node id.</p></li>
<li><p>Fix issue #411: Add __eq__ method to assertion comparison example.
Thanks Ben Webb.</p></li>
<li><p>Fix issue #653: deprecated_call can be used as context manager.</p></li>
<li><p>fix issue 877: properly handle assertion explanations with non-ascii repr
Thanks Mathieu Agopian for the report and Ronny Pfannschmidt for the PR.</p></li>
<li><p>fix issue 1029: transform errors when writing cache values into pytest-warnings</p></li>
</ul>
</div>
<div class="section" id="id403">
<h4>2.8.0 (2015-09-18)<a class="headerlink" href="#id403" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>new <code class="docutils literal notranslate"><span class="pre">--lf</span></code> and <code class="docutils literal notranslate"><span class="pre">-ff</span></code> options to run only the last failing tests or
“failing tests first” from the last run.  This functionality is provided
through porting the formerly external pytest-cache plugin into pytest core.
BACKWARD INCOMPAT: if you used pytest-cache’s functionality to persist
data between test runs be aware that we don’t serialize sets anymore.
Thanks Ronny Pfannschmidt for most of the merging work.</p></li>
<li><p>“-r” option now accepts “a” to include all possible reports, similar
to passing “fEsxXw” explicitly (issue960).
Thanks Abhijeet Kasurde for the PR.</p></li>
<li><p>avoid python3.5 deprecation warnings by introducing version
specific inspection helpers, thanks Michael Droettboom.</p></li>
<li><p>fix issue562: &#64;nose.tools.istest now fully respected.</p></li>
<li><p>fix issue934: when string comparison fails and a diff is too large to display
without passing -vv, still show a few lines of the diff.
Thanks Florian Bruhin for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue736: Fix a bug where fixture params would be discarded when combined
with parametrization markers.
Thanks to Markus Unterwaditzer for the PR.</p></li>
<li><p>fix issue710: introduce ALLOW_UNICODE doctest option: when enabled, the
<code class="docutils literal notranslate"><span class="pre">u</span></code> prefix is stripped from unicode strings in expected doctest output. This
allows doctests which use unicode to run in Python 2 and 3 unchanged.
Thanks Jason R. Coombs for the report and Bruno Oliveira for the PR.</p></li>
<li><p>parametrize now also generates meaningful test IDs for enum, regex and class
objects (as opposed to class instances).
Thanks to Florian Bruhin for the PR.</p></li>
<li><p>Add ‘warns’ to assert that warnings are thrown (like ‘raises’).
Thanks to Eric Hunsberger for the PR.</p></li>
<li><p>Fix issue683: Do not apply an already applied mark.  Thanks ojake for the PR.</p></li>
<li><p>Deal with capturing failures better so fewer exceptions get lost to
/dev/null.  Thanks David Szotten for the PR.</p></li>
<li><p>fix issue730: deprecate and warn about the –genscript option.
Thanks Ronny Pfannschmidt for the report and Christian Pommranz for the PR.</p></li>
<li><p>fix issue751: multiple parametrize with ids bug if it parametrizes class with
two or more test methods. Thanks Sergey Chipiga for reporting and Jan
Bednarik for PR.</p></li>
<li><p>fix issue82: avoid loading conftest files from setup.cfg/pytest.ini/tox.ini
files and upwards by default (–confcutdir can still be set to override this).
Thanks Bruno Oliveira for the PR.</p></li>
<li><p>fix issue768: docstrings found in python modules were not setting up session
fixtures. Thanks Jason R. Coombs for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>added <code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code>, a session-scoped fixture that can be used to create
directories under the base temporary directory. Previously this object was
installed as a <code class="docutils literal notranslate"><span class="pre">_tmpdirhandler</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">config</span></code> object, but now it
is part of the official API and using <code class="docutils literal notranslate"><span class="pre">config._tmpdirhandler</span></code> is
deprecated.
Thanks Bruno Oliveira for the PR.</p></li>
<li><p>fix issue808: pytest’s internal assertion rewrite hook now implements the
optional <span class="target" id="index-10"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0302"><strong>PEP 302</strong></a> get_data API so tests can access data files next to them.
Thanks xmo-odoo for request and example and Bruno Oliveira for
the PR.</p></li>
<li><p>rootdir and inifile are now displayed during usage errors to help
users diagnose problems such as unexpected ini files which add
unknown options being picked up by pytest. Thanks to Pavel Savchenko for
bringing the problem to attention in #821 and Bruno Oliveira for the PR.</p></li>
<li><p>Summary bar now is colored yellow for warning
situations such as: all tests either were skipped or xpass/xfailed,
or no tests were run at all (this is a partial fix for issue500).</p></li>
<li><p>fix issue812: pytest now exits with status code 5 in situations where no
tests were run at all, such as the directory given in the command line does
not contain any tests or as result of a command line option filters
all out all tests (-k for example).
Thanks Eric Siegerman (issue812) and Bruno Oliveira for the PR.</p></li>
<li><p>Summary bar now is colored yellow for warning
situations such as: all tests either were skipped or xpass/xfailed,
or no tests were run at all (related to issue500).
Thanks Eric Siegerman.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">testpaths</span></code> ini option: list of directories to search for tests
when executing pytest from the root directory. This can be used
to speed up test collection when a project has well specified directories
for tests, being usually more practical than configuring norecursedirs for
all directories that do not contain tests.
Thanks to Adrian for idea (#694) and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue713: JUnit XML reports for doctest failures.
Thanks Punyashloka Biswal.</p></li>
<li><p>fix issue970: internal pytest warnings now appear as “pytest-warnings” in
the terminal instead of “warnings”, so it is clear for users that those
warnings are from pytest and not from the builtin “warnings” module.
Thanks Bruno Oliveira.</p></li>
<li><p>Include setup and teardown in junitxml test durations.
Thanks Janne Vanhala.</p></li>
<li><p>fix issue735: assertion failures on debug versions of Python 3.4+</p></li>
<li><p>new option <code class="docutils literal notranslate"><span class="pre">--import-mode</span></code> to allow to change test module importing
behaviour to append to sys.path instead of prepending.  This better allows
to run test modules against installed versions of a package even if the
package under test has the same import root.  In this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">testing</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
<span class="n">testing</span><span class="o">/</span><span class="n">test_pkg_under_test</span><span class="o">.</span><span class="n">py</span>
<span class="n">pkg_under_test</span><span class="o">/</span>
</pre></div>
</div>
<p>the tests will run against the installed version
of pkg_under_test when <code class="docutils literal notranslate"><span class="pre">--import-mode=append</span></code> is used whereas
by default they would always pick up the local version.  Thanks Holger Krekel.</p>
</li>
<li><p>pytester: add method <code class="docutils literal notranslate"><span class="pre">TmpTestdir.delete_loaded_modules()</span></code>, and call it
from <code class="docutils literal notranslate"><span class="pre">inline_run()</span></code> to allow temporary modules to be reloaded.
Thanks Eduardo Schettino.</p></li>
<li><p>internally refactor pluginmanager API and code so that there
is a clear distinction between a pytest-agnostic rather simple
pluginmanager and the PytestPluginManager which adds a lot of
behaviour, among it handling of the local conftest files.
In terms of documented methods this is a backward compatible
change but it might still break 3rd party plugins which relied on
details like especially the pluginmanager.add_shutdown() API.
Thanks Holger Krekel.</p></li>
<li><p>pluginmanagement: introduce <code class="docutils literal notranslate"><span class="pre">pytest.hookimpl</span></code> and
<code class="docutils literal notranslate"><span class="pre">pytest.hookspec</span></code> decorators for setting impl/spec
specific parameters.  This substitutes the previous
now deprecated use of <code class="docutils literal notranslate"><span class="pre">pytest.mark</span></code> which is meant to
contain markers for test functions only.</p></li>
<li><p>write/refine docs for “writing plugins” which now have their
own page and are separate from the “using/installing plugins`` page.</p></li>
<li><p>fix issue732: properly unregister plugins from any hook calling
sites allowing to have temporary plugins during test execution.</p></li>
<li><p>deprecate and warn about <code class="docutils literal notranslate"><span class="pre">__multicall__</span></code> argument in hook
implementations.  Use the <code class="docutils literal notranslate"><span class="pre">hookwrapper</span></code> mechanism instead already
introduced with pytest-2.7.</p></li>
<li><p>speed up pytest’s own test suite considerably by using inprocess
tests by default (testrun can be modified with –runpytest=subprocess
to create subprocesses in many places instead).  The main
APIs to run pytest in a test is “runpytest()” or “runpytest_subprocess”
and “runpytest_inprocess” if you need a particular way of running
the test.  In all cases you get back a RunResult but the inprocess
one will also have a “reprec” attribute with the recorded events/reports.</p></li>
<li><p>fix monkeypatch.setattr(“x.y”, raising=False) to actually not raise
if “y” is not a pre-existing attribute. Thanks Florian Bruhin.</p></li>
<li><p>fix issue741: make running output from testdir.run copy/pasteable
Thanks Bruno Oliveira.</p></li>
<li><p>add a new <code class="docutils literal notranslate"><span class="pre">--noconftest</span></code> argument which ignores all <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code> files.</p></li>
<li><p>add <code class="docutils literal notranslate"><span class="pre">file</span></code> and <code class="docutils literal notranslate"><span class="pre">line</span></code> attributes to JUnit-XML output.</p></li>
<li><p>fix issue890: changed extension of all documentation files from <code class="docutils literal notranslate"><span class="pre">txt</span></code> to
<code class="docutils literal notranslate"><span class="pre">rst</span></code>. Thanks to Abhijeet for the PR.</p></li>
<li><p>fix issue714: add ability to apply indirect=True parameter on particular argnames.
Thanks Elizaveta239.</p></li>
<li><p>fix issue890: changed extension of all documentation files from <code class="docutils literal notranslate"><span class="pre">txt</span></code> to
<code class="docutils literal notranslate"><span class="pre">rst</span></code>. Thanks to Abhijeet for the PR.</p></li>
<li><p>fix issue957: “# doctest: SKIP” option will now register doctests as SKIPPED
rather than PASSED.
Thanks Thomas Grainger for the report and Bruno Oliveira for the PR.</p></li>
<li><p>issue951: add new record_xml_property fixture, that supports logging
additional information on xml output. Thanks David Diaz for the PR.</p></li>
<li><p>issue949: paths after normal options (for example <code class="docutils literal notranslate"><span class="pre">-s</span></code>, <code class="docutils literal notranslate"><span class="pre">-v</span></code>, etc) are now
properly used to discover <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> and <code class="docutils literal notranslate"><span class="pre">ini</span></code> files.
Thanks Peter Lauri for the report and Bruno Oliveira for the PR.</p></li>
</ul>
</div>
<div class="section" id="id404">
<h4>2.7.3 (2015-09-15)<a class="headerlink" href="#id404" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Allow ‘dev’, ‘rc’, or other non-integer version strings in <code class="docutils literal notranslate"><span class="pre">importorskip</span></code>.
Thanks to Eric Hunsberger for the PR.</p></li>
<li><p>fix issue856: consider –color parameter in all outputs (for example
–fixtures). Thanks Barney Gale for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue855: passing str objects as <code class="docutils literal notranslate"><span class="pre">plugins</span></code> argument to pytest.main
is now interpreted as a module name to be imported and registered as a
plugin, instead of silently having no effect.
Thanks xmo-odoo for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue744: fix for ast.Call changes in Python 3.5+.  Thanks
Guido van Rossum, Matthias Bussonnier, Stefan Zimmermann and
Thomas Kluyver.</p></li>
<li><p>fix issue842: applying markers in classes no longer propagate this markers
to superclasses which also have markers.
Thanks xmo-odoo for the report and Bruno Oliveira for the PR.</p></li>
<li><p>preserve warning functions after call to pytest.deprecated_call. Thanks
Pieter Mulder for PR.</p></li>
<li><p>fix issue854: autouse yield_fixtures defined as class members of
unittest.TestCase subclasses now work as expected.
Thannks xmo-odoo for the report and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue833: –fixtures now shows all fixtures of collected test files, instead of just the
fixtures declared on the first one.
Thanks Florian Bruhin for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue863: skipped tests now report the correct reason when a skip/xfail
condition is met when using multiple markers.
Thanks Raphael Pierzina for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>optimized tmpdir fixture initialization, which should make test sessions
faster (specially when using pytest-xdist). The only visible effect
is that now pytest uses a subdirectory in the $TEMP directory for all
directories created by this fixture (defaults to $TEMP/pytest-$USER).
Thanks Bruno Oliveira for the PR.</p></li>
</ul>
</div>
<div class="section" id="id405">
<h4>2.7.2 (2015-06-23)<a class="headerlink" href="#id405" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue767: pytest.raises value attribute does not contain the exception
instance on Python 2.6. Thanks Eric Siegerman for providing the test
case and Bruno Oliveira for PR.</p></li>
<li><p>Automatically create directory for junitxml and results log.
Thanks Aron Curzon.</p></li>
<li><p>fix issue713: JUnit XML reports for doctest failures.
Thanks Punyashloka Biswal.</p></li>
<li><p>fix issue735: assertion failures on debug versions of Python 3.4+
Thanks Benjamin Peterson.</p></li>
<li><p>fix issue114: skipif marker reports to internal skipping plugin;
Thanks Floris Bruynooghe for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue748: unittest.SkipTest reports to internal pytest unittest plugin.
Thanks Thomas De Schampheleire for reporting and Bruno Oliveira for the PR.</p></li>
<li><p>fix issue718: failed to create representation of sets containing unsortable
elements in python 2. Thanks Edison Gustavo Muenz.</p></li>
<li><p>fix issue756, fix issue752 (and similar issues): depend on py-1.4.29
which has a refined algorithm for traceback generation.</p></li>
</ul>
</div>
<div class="section" id="id406">
<h4>2.7.1 (2015-05-19)<a class="headerlink" href="#id406" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue731: do not get confused by the braces which may be present
and unbalanced in an object’s repr while collapsing False
explanations.  Thanks Carl Meyer for the report and test case.</p></li>
<li><p>fix issue553: properly handling inspect.getsourcelines failures in
FixtureLookupError which would lead to an internal error,
obfuscating the original problem. Thanks talljosh for initial
diagnose/patch and Bruno Oliveira for final patch.</p></li>
<li><p>fix issue660: properly report scope-mismatch-access errors
independently from ordering of fixture arguments.  Also
avoid the pytest internal traceback which does not provide
information to the user. Thanks Holger Krekel.</p></li>
<li><p>streamlined and documented release process.  Also all versions
(in setup.py and documentation generation) are now read
from _pytest/__init__.py. Thanks Holger Krekel.</p></li>
<li><p>fixed docs to remove the notion that yield-fixtures are experimental.
They are here to stay :)  Thanks Bruno Oliveira.</p></li>
<li><p>Support building wheels by using environment markers for the
requirements.  Thanks Ionel Maries Cristian.</p></li>
<li><p>fixed regression to 2.6.4 which surfaced e.g. in lost stdout capture printing
when tests raised SystemExit. Thanks Holger Krekel.</p></li>
<li><p>reintroduced _pytest fixture of the pytester plugin which is used
at least by pytest-xdist.</p></li>
</ul>
</div>
<div class="section" id="id407">
<h4>2.7.0 (2015-03-26)<a class="headerlink" href="#id407" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue435: make reload() work when assert rewriting is active.
Thanks Daniel Hahler.</p></li>
<li><p>fix issue616: conftest.py files and their contained fixtures are now
properly considered for visibility, independently from the exact
current working directory and test arguments that are used.
Many thanks to Eric Siegerman and his PR235 which contains
systematic tests for conftest visibility and now passes.
This change also introduces the concept of a <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> which
is printed as a new pytest header and documented in the pytest
customize web page.</p></li>
<li><p>change reporting of “diverted” tests, i.e. tests that are collected
in one file but actually come from another (e.g. when tests in a test class
come from a base class in a different file).  We now show the nodeid
and indicate via a postfix the other file.</p></li>
<li><p>add ability to set command line options by environment variable PYTEST_ADDOPTS.</p></li>
<li><p>added documentation on the new pytest-dev teams on bitbucket and
github.  See <a class="reference external" href="https://pytest.org/en/stable/contributing.html">https://pytest.org/en/stable/contributing.html</a> .
Thanks to Anatoly for pushing and initial work on this.</p></li>
<li><p>fix issue650: new option <code class="docutils literal notranslate"><span class="pre">--docttest-ignore-import-errors</span></code> which
will turn import errors in doctests into skips.  Thanks Charles Cloud
for the complete PR.</p></li>
<li><p>fix issue655: work around different ways that cause python2/3
to leak sys.exc_info into fixtures/tests causing failures in 3rd party code</p></li>
<li><p>fix issue615: assertion rewriting did not correctly escape % signs
when formatting boolean operations, which tripped over mixing
booleans with modulo operators.  Thanks to Tom Viner for the report,
triaging and fix.</p></li>
<li><p>implement issue351: add ability to specify parametrize ids as a callable
to generate custom test ids.  Thanks Brianna Laugher for the idea and
implementation.</p></li>
<li><p>introduce and document new hookwrapper mechanism useful for plugins
which want to wrap the execution of certain hooks for their purposes.
This supersedes the undocumented <code class="docutils literal notranslate"><span class="pre">__multicall__</span></code> protocol which
pytest itself and some external plugins use.  Note that pytest-2.8
is scheduled to drop supporting the old <code class="docutils literal notranslate"><span class="pre">__multicall__</span></code>
and only support the hookwrapper protocol.</p></li>
<li><p>majorly speed up invocation of plugin hooks</p></li>
<li><p>use hookwrapper mechanism in builtin pytest plugins.</p></li>
<li><p>add a doctest ini option for doctest flags, thanks Holger Peters.</p></li>
<li><p>add note to docs that if you want to mark a parameter and the
parameter is a callable, you also need to pass in a reason to disambiguate
it from the “decorator” case.  Thanks Tom Viner.</p></li>
<li><p>“python_classes” and “python_functions” options now support glob-patterns
for test discovery, as discussed in issue600. Thanks Ldiary Translations.</p></li>
<li><p>allow to override parametrized fixtures with non-parametrized ones and vice versa (bubenkoff).</p></li>
<li><p>fix issue463: raise specific error for ‘parameterize’ misspelling (pfctdayelise).</p></li>
<li><p>On failure, the <code class="docutils literal notranslate"><span class="pre">sys.last_value</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.last_type</span></code> and
<code class="docutils literal notranslate"><span class="pre">sys.last_traceback</span></code> are set, so that a user can inspect the error
via postmortem debugging (almarklein).</p></li>
</ul>
</div>
<div class="section" id="id408">
<h4>2.6.4 (2014-10-24)<a class="headerlink" href="#id408" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Improve assertion failure reporting on iterables, by using ndiff and
pprint.</p></li>
<li><p>removed outdated japanese docs from source tree.</p></li>
<li><p>docs for “pytest_addhooks” hook.  Thanks Bruno Oliveira.</p></li>
<li><p>updated plugin index docs.  Thanks Bruno Oliveira.</p></li>
<li><p>fix issue557: with “-k” we only allow the old style “-” for negation
at the beginning of strings and even that is deprecated.  Use “not” instead.
This should allow to pick parametrized tests where “-” appeared in the parameter.</p></li>
<li><p>fix issue604: Escape % character in the assertion message.</p></li>
<li><p>fix issue620: add explanation in the –genscript target about what
the binary blob means. Thanks Dinu Gherman.</p></li>
<li><p>fix issue614: fixed pastebin support.</p></li>
<li><p>fix issue620: add explanation in the –genscript target about what
the binary blob means. Thanks Dinu Gherman.</p></li>
<li><p>fix issue614: fixed pastebin support.</p></li>
</ul>
</div>
<div class="section" id="id409">
<h4>2.6.3 (2014-09-24)<a class="headerlink" href="#id409" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue575: xunit-xml was reporting collection errors as failures
instead of errors, thanks Oleg Sinyavskiy.</p></li>
<li><p>fix issue582: fix setuptools example, thanks Laszlo Papp and Ronny
Pfannschmidt.</p></li>
<li><p>Fix infinite recursion bug when pickling capture.EncodedFile, thanks
Uwe Schmitt.</p></li>
<li><p>fix issue589: fix bad interaction with numpy and others when showing
exceptions.  Check for precise “maximum recursion depth exceed” exception
instead of presuming any RuntimeError is that one (implemented in py
dep).  Thanks Charles Cloud for analysing the issue.</p></li>
<li><p>fix conftest related fixture visibility issue: when running with a
CWD outside of a test package pytest would get fixture discovery wrong.
Thanks to Wolfgang Schnerring for figuring out a reproducible example.</p></li>
<li><p>Introduce pytest_enter_pdb hook (needed e.g. by pytest_timeout to cancel the
timeout when interactively entering pdb).  Thanks Wolfgang Schnerring.</p></li>
<li><p>check xfail/skip also with non-python function test items. Thanks
Floris Bruynooghe.</p></li>
</ul>
</div>
<div class="section" id="id410">
<h4>2.6.2 (2014-09-05)<a class="headerlink" href="#id410" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Added function pytest.freeze_includes(), which makes it easy to embed
pytest into executables using tools like cx_freeze.
See docs for examples and rationale. Thanks Bruno Oliveira.</p></li>
<li><p>Improve assertion rewriting cache invalidation precision.</p></li>
<li><p>fixed issue561: adapt autouse fixture example for python3.</p></li>
<li><p>fixed issue453: assertion rewriting issue with __repr__ containing
“n{“, “n}” and “n~”.</p></li>
<li><p>fix issue560: correctly display code if an “else:” or “finally:” is
followed by statements on the same line.</p></li>
<li><p>Fix example in monkeypatch documentation, thanks t-8ch.</p></li>
<li><p>fix issue572: correct tmpdir doc example for python3.</p></li>
<li><p>Do not mark as universal wheel because Python 2.6 is different from
other builds due to the extra argparse dependency.  Fixes issue566.
Thanks sontek.</p></li>
<li><p>Implement issue549: user-provided assertion messages now no longer
replace the py.test introspection message but are shown in addition
to them.</p></li>
</ul>
</div>
<div class="section" id="id411">
<h4>2.6.1 (2014-08-07)<a class="headerlink" href="#id411" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>No longer show line numbers in the –verbose output, the output is now
purely the nodeid.  The line number is still shown in failure reports.
Thanks Floris Bruynooghe.</p></li>
<li><p>fix issue437 where assertion rewriting could cause pytest-xdist worker nodes
to collect different tests. Thanks Bruno Oliveira.</p></li>
<li><p>fix issue555: add “errors” attribute to capture-streams to satisfy
some distutils and possibly other code accessing sys.stdout.errors.</p></li>
<li><p>fix issue547 capsys/capfd also work when output capturing (“-s”) is disabled.</p></li>
<li><p>address issue170: allow pytest.mark.xfail(…) to specify expected exceptions via
an optional “raises=EXC” argument where EXC can be a single exception
or a tuple of exception classes.  Thanks David Mohr for the complete
PR.</p></li>
<li><p>fix integration of pytest with unittest.mock.patch decorator when
it uses the “new” argument.  Thanks Nicolas Delaby for test and PR.</p></li>
<li><p>fix issue with detecting conftest files if the arguments contain
“::” node id specifications (copy pasted from “-v” output)</p></li>
<li><p>fix issue544 by only removing “&#64;NUM” at the end of “::” separated parts
and if the part has a “.py” extension</p></li>
<li><p>don’t use py.std import helper, rather import things directly.
Thanks Bruno Oliveira.</p></li>
</ul>
</div>
<div class="section" id="id412">
<h4>2.6<a class="headerlink" href="#id412" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Cache exceptions from fixtures according to their scope (issue 467).</p></li>
<li><p>fix issue537: Avoid importing old assertion reinterpretation code by default.</p></li>
<li><p>fix issue364: shorten and enhance tracebacks representation by default.
The new “–tb=auto” option (default) will only display long tracebacks
for the first and last entry.  You can get the old behaviour of printing
all entries as long entries with “–tb=long”.  Also short entries by
default are now printed very similarly to “–tb=native” ones.</p></li>
<li><p>fix issue514: teach assertion reinterpretation about private class attributes</p></li>
<li><p>change -v output to include full node IDs of tests.  Users can copy
a node ID from a test run, including line number, and use it as a
positional argument in order to run only a single test.</p></li>
<li><p>fix issue 475: fail early and comprehensible if calling
pytest.raises with wrong exception type.</p></li>
<li><p>fix issue516: tell in getting-started about current dependencies.</p></li>
<li><p>cleanup setup.py a bit and specify supported versions. Thanks Jurko
Gospodnetic for the PR.</p></li>
<li><p>change XPASS colour to yellow rather then red when tests are run
with -v.</p></li>
<li><p>fix issue473: work around mock putting an unbound method into a class
dict when double-patching.</p></li>
<li><p>fix issue498: if a fixture finalizer fails, make sure that
the fixture is still invalidated.</p></li>
<li><p>fix issue453: the result of the pytest_assertrepr_compare hook now gets
it’s newlines escaped so that format_exception does not blow up.</p></li>
<li><p>internal new warning system: pytest will now produce warnings when
it detects oddities in your test collection or execution.
Warnings are ultimately sent to a new pytest_logwarning hook which is
currently only implemented by the terminal plugin which displays
warnings in the summary line and shows more details when -rw (report on
warnings) is specified.</p></li>
<li><p>change skips into warnings for test classes with an __init__ and
callables in test modules which look like a test but are not functions.</p></li>
<li><p>fix issue436: improved finding of initial conftest files from command
line arguments by using the result of parse_known_args rather than
the previous flaky heuristics.  Thanks Marc Abramowitz for tests
and initial fixing approaches in this area.</p></li>
<li><p>fix issue #479: properly handle nose/unittest(2) SkipTest exceptions
during collection/loading of test modules.  Thanks to Marc Schlaich
for the complete PR.</p></li>
<li><p>fix issue490: include pytest_load_initial_conftests in documentation
and improve docstring.</p></li>
<li><p>fix issue472: clarify that <code class="docutils literal notranslate"><span class="pre">pytest.config.getvalue()</span></code> cannot work
if it’s triggered ahead of command line parsing.</p></li>
<li><p>merge PR123: improved integration with mock.patch decorator on tests.</p></li>
<li><p>fix issue412: messing with stdout/stderr FD-level streams is now
captured without crashes.</p></li>
<li><p>fix issue483: trial/py33 works now properly.  Thanks Daniel Grana for PR.</p></li>
<li><p>improve example for pytest integration with “python setup.py test”
which now has a generic “-a” or “–pytest-args” option where you
can pass additional options as a quoted string.  Thanks Trevor Bekolay.</p></li>
<li><p>simplified internal capturing mechanism and made it more robust
against tests or setups changing FD1/FD2, also better integrated
now with pytest.pdb() in single tests.</p></li>
<li><p>improvements to pytest’s own test-suite leakage detection, courtesy of PRs
from Marc Abramowitz</p></li>
<li><p>fix issue492: avoid leak in test_writeorg.  Thanks Marc Abramowitz.</p></li>
<li><p>fix issue493: don’t run tests in doc directory with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code>
(use tox -e doctesting for that)</p></li>
<li><p>fix issue486: better reporting and handling of early conftest loading failures</p></li>
<li><p>some cleanup and simplification of internal conftest handling.</p></li>
<li><p>work a bit harder to break reference cycles when catching exceptions.
Thanks Jurko Gospodnetic.</p></li>
<li><p>fix issue443: fix skip examples to use proper comparison.  Thanks Alex
Groenholm.</p></li>
<li><p>support nose-style <code class="docutils literal notranslate"><span class="pre">__test__</span></code> attribute on modules, classes and
functions, including unittest-style Classes.  If set to False, the
test will not be collected.</p></li>
<li><p>fix issue512: show “&lt;notset&gt;” for arguments which might not be set
in monkeypatch plugin.  Improves output in documentation.</p></li>
</ul>
</div>
<div class="section" id="id413">
<h4>2.5.2 (2014-01-29)<a class="headerlink" href="#id413" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue409 – better interoperate with cx_freeze by not
trying to import from collections.abc which causes problems
for py27/cx_freeze.  Thanks Wolfgang L. for reporting and tracking it down.</p></li>
<li><p>fixed docs and code to use “pytest” instead of “py.test” almost everywhere.
Thanks Jurko Gospodnetic for the complete PR.</p></li>
<li><p>fix issue425: mention at end of “py.test -h” that –markers
and –fixtures work according to specified test path (or current dir)</p></li>
<li><p>fix issue413: exceptions with unicode attributes are now printed
correctly also on python2 and with pytest-xdist runs. (the fix
requires py-1.4.20)</p></li>
<li><p>copy, cleanup and integrate py.io capture
from pylib 1.4.20.dev2 (rev 13d9af95547e)</p></li>
<li><p>address issue416: clarify docs as to conftest.py loading semantics</p></li>
<li><p>fix issue429: comparing byte strings with non-ascii chars in assert
expressions now work better.  Thanks Floris Bruynooghe.</p></li>
<li><p>make capfd/capsys.capture private, its unused and shouldn’t be exposed</p></li>
</ul>
</div>
<div class="section" id="id414">
<h4>2.5.1 (2013-12-17)<a class="headerlink" href="#id414" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>merge new documentation styling PR from Tobias Bieniek.</p></li>
<li><p>fix issue403: allow parametrize of multiple same-name functions within
a collection node.  Thanks Andreas Kloeckner and Alex Gaynor for reporting
and analysis.</p></li>
<li><p>Allow parameterized fixtures to specify the ID of the parameters by
adding an ids argument to pytest.fixture() and pytest.yield_fixture().
Thanks Floris Bruynooghe.</p></li>
<li><p>fix issue404 by always using the binary xml escape in the junitxml
plugin.  Thanks Ronny Pfannschmidt.</p></li>
<li><p>fix issue407: fix addoption docstring to point to argparse instead of
optparse. Thanks Daniel D. Wright.</p></li>
</ul>
</div>
<div class="section" id="id415">
<h4>2.5.0 (2013-12-12)<a class="headerlink" href="#id415" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>dropped python2.5 from automated release testing of pytest itself
which means it’s probably going to break soon (but still works
with this release we believe).</p></li>
<li><p>simplified and fixed implementation for calling finalizers when
parametrized fixtures or function arguments are involved.  finalization
is now performed lazily at setup time instead of in the “teardown phase”.
While this might sound odd at first, it helps to ensure that we are
correctly handling setup/teardown even in complex code.  User-level code
should not be affected unless it’s implementing the pytest_runtest_teardown
hook and expecting certain fixture instances are torn down within (very
unlikely and would have been unreliable anyway).</p></li>
<li><p>PR90: add –color=yes|no|auto option to force terminal coloring
mode (“auto” is default).  Thanks Marc Abramowitz.</p></li>
<li><p>fix issue319 - correctly show unicode in assertion errors.  Many
thanks to Floris Bruynooghe for the complete PR.  Also means
we depend on py&gt;=1.4.19 now.</p></li>
<li><p>fix issue396 - correctly sort and finalize class-scoped parametrized
tests independently from number of methods on the class.</p></li>
<li><p>refix issue323 in a better way – parametrization should now never
cause Runtime Recursion errors because the underlying algorithm
for re-ordering tests per-scope/per-fixture is not recursive
anymore (it was tail-call recursive before which could lead
to problems for more than &gt;966 non-function scoped parameters).</p></li>
<li><p>fix issue290 - there is preliminary support now for parametrizing
with repeated same values (sometimes useful to test if calling
a second time works as with the first time).</p></li>
<li><p>close issue240 - document precisely how pytest module importing
works, discuss the two common test directory layouts, and how it
interacts with <span class="target" id="index-11"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0420"><strong>PEP 420</strong></a>-namespace packages.</p></li>
<li><p>fix issue246 fix finalizer order to be LIFO on independent fixtures
depending on a parametrized higher-than-function scoped fixture.
(was quite some effort so please bear with the complexity of this sentence :)
Thanks Ralph Schmitt for the precise failure example.</p></li>
<li><p>fix issue244 by implementing special index for parameters to only use
indices for paramentrized test ids</p></li>
<li><p>fix issue287 by running all finalizers but saving the exception
from the first failing finalizer and re-raising it so teardown will
still have failed.  We reraise the first failing exception because
it might be the cause for other finalizers to fail.</p></li>
<li><p>fix ordering when mock.patch or other standard decorator-wrappings
are used with test methods.  This fixues issue346 and should
help with random “xdist” collection failures.  Thanks to
Ronny Pfannschmidt and Donald Stufft for helping to isolate it.</p></li>
<li><p>fix issue357 - special case “-k” expressions to allow for
filtering with simple strings that are not valid python expressions.
Examples: “-k 1.3” matches all tests parametrized with 1.3.
“-k None” filters all tests that have “None” in their name
and conversely “-k ‘not None’”.
Previously these examples would raise syntax errors.</p></li>
<li><p>fix issue384 by removing the trial support code
since the unittest compat enhancements allow
trial to handle it on its own</p></li>
<li><p>don’t hide an ImportError when importing a plugin produces one.
fixes issue375.</p></li>
<li><p>fix issue275 - allow usefixtures and autouse fixtures
for running doctest text files.</p></li>
<li><p>fix issue380 by making –resultlog only rely on longrepr instead
of the “reprcrash” attribute which only exists sometimes.</p></li>
<li><p>address issue122: allow &#64;pytest.fixture(params=iterator) by exploding
into a list early on.</p></li>
<li><p>fix pexpect-3.0 compatibility for pytest’s own tests.
(fixes issue386)</p></li>
<li><p>allow nested parametrize-value markers, thanks James Lan for the PR.</p></li>
<li><p>fix unicode handling with new monkeypatch.setattr(import_path, value)
API.  Thanks Rob Dennis.  Fixes issue371.</p></li>
<li><p>fix unicode handling with junitxml, fixes issue368.</p></li>
<li><p>In assertion rewriting mode on Python 2, fix the detection of coding
cookies. See issue #330.</p></li>
<li><p>make “–runxfail” turn imperative pytest.xfail calls into no ops
(it already did neutralize pytest.mark.xfail markers)</p></li>
<li><p>refine pytest / pkg_resources interactions: The AssertionRewritingHook
<span class="target" id="index-12"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0302"><strong>PEP 302</strong></a> compliant loader now registers itself with setuptools/pkg_resources
properly so that the pkg_resources.resource_stream method works properly.
Fixes issue366.  Thanks for the investigations and full PR to Jason R. Coombs.</p></li>
<li><p>pytestconfig fixture is now session-scoped as it is the same object during the
whole test run.  Fixes issue370.</p></li>
<li><p>avoid one surprising case of marker malfunction/confusion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">some</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span><span class="p">:</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
</pre></div>
</div>
<p>would not work correctly because pytest assumes &#64;pytest.mark.some
gets a function to be decorated already.  We now at least detect if this
arg is a lambda and thus the example will work.  Thanks Alex Gaynor
for bringing it up.</p>
</li>
<li><p>xfail a test on pypy that checks wrong encoding/ascii (pypy does
not error out). fixes issue385.</p></li>
<li><p>internally make varnames() deal with classes’s __init__,
although it’s not needed by pytest itself atm.  Also
fix caching.  Fixes issue376.</p></li>
<li><p>fix issue221 - handle importing of namespace-package with no
__init__.py properly.</p></li>
<li><p>refactor internal FixtureRequest handling to avoid monkeypatching.
One of the positive user-facing effects is that the “request” object
can now be used in closures.</p></li>
<li><p>fixed version comparison in pytest.importskip(modname, minverstring)</p></li>
<li><p>fix issue377 by clarifying in the nose-compat docs that pytest
does not duplicate the unittest-API into the “plain” namespace.</p></li>
<li><p>fix verbose reporting for &#64;mock’d test functions</p></li>
</ul>
</div>
<div class="section" id="id416">
<h4>2.4.2 (2013-10-04)<a class="headerlink" href="#id416" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>on Windows require colorama and a newer py lib so that py.io.TerminalWriter()
now uses colorama instead of its own ctypes hacks. (fixes issue365)
thanks Paul Moore for bringing it up.</p></li>
<li><p>fix “-k” matching of tests where “repr” and “attr” and other names would
cause wrong matches because of an internal implementation quirk
(don’t ask) which is now properly implemented. fixes issue345.</p></li>
<li><p>avoid tmpdir fixture to create too long filenames especially
when parametrization is used (issue354)</p></li>
<li><p>fix pytest-pep8 and pytest-flakes / pytest interactions
(collection names in mark plugin was assuming an item always
has a function which is not true for those plugins etc.)
Thanks Andi Zeidler.</p></li>
<li><p>introduce node.get_marker/node.add_marker API for plugins
like pytest-pep8 and pytest-flakes to avoid the messy
details of the node.keywords  pseudo-dicts.  Adapted
docs.</p></li>
<li><p>remove attempt to “dup” stdout at startup as it’s icky.
the normal capturing should catch enough possibilities
of tests messing up standard FDs.</p></li>
<li><p>add pluginmanager.do_configure(config) as a link to
config.do_configure() for plugin-compatibility</p></li>
</ul>
</div>
<div class="section" id="id417">
<h4>2.4.1 (2013-10-02)<a class="headerlink" href="#id417" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>When using parser.addoption() unicode arguments to the
“type” keyword should also be converted to the respective types.
thanks Floris Bruynooghe, &#64;dnozay. (fixes issue360 and issue362)</p></li>
<li><p>fix dotted filename completion when using argcomplete
thanks Anthon van der Neuth. (fixes issue361)</p></li>
<li><p>fix regression when a 1-tuple (“arg”,) is used for specifying
parametrization (the values of the parametrization were passed
nested in a tuple).  Thanks Donald Stufft.</p></li>
<li><p>merge doc typo fixes, thanks Andy Dirnberger</p></li>
</ul>
</div>
<div class="section" id="id418">
<h4>2.4<a class="headerlink" href="#id418" title="Permalink to this headline">¶</a></h4>
<p>known incompatibilities:</p>
<ul class="simple">
<li><p>if calling –genscript from python2.7 or above, you only get a
standalone script which works on python2.7 or above.  Use Python2.6
to also get a python2.5 compatible version.</p></li>
<li><p>all xunit-style teardown methods (nose-style, pytest-style,
unittest-style) will not be called if the corresponding setup method failed,
see issue322 below.</p></li>
<li><p>the pytest_plugin_unregister hook wasn’t ever properly called
and there is no known implementation of the hook - so it got removed.</p></li>
<li><p>pytest.fixture-decorated functions cannot be generators (i.e. use
yield) anymore.  This change might be reversed in 2.4.1 if it causes
unforeseen real-life issues.  However, you can always write and return
an inner function/generator and change the fixture consumer to iterate
over the returned generator.  This change was done in lieu of the new
<code class="docutils literal notranslate"><span class="pre">pytest.yield_fixture</span></code> decorator, see below.</p></li>
</ul>
<p>new features:</p>
<ul>
<li><p>experimentally introduce a new <code class="docutils literal notranslate"><span class="pre">pytest.yield_fixture</span></code> decorator
which accepts exactly the same parameters as pytest.fixture but
mandates a <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement instead of a <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">statement</span></code> from
fixture functions.  This allows direct integration with “with-style”
context managers in fixture functions and generally avoids registering
of finalization callbacks in favour of treating the “after-yield” as
teardown code.  Thanks Andreas Pelme, Vladimir Keleshev, Floris
Bruynooghe, Ronny Pfannschmidt and many others for discussions.</p></li>
<li><p>allow boolean expression directly with skipif/xfail
if a “reason” is also specified.  Rework skipping documentation
to recommend “condition as booleans” because it prevents surprises
when importing markers between modules.  Specifying conditions
as strings will remain fully supported.</p></li>
<li><p>reporting: color the last line red or green depending if
failures/errors occurred or everything passed.  thanks Christian
Theunert.</p></li>
<li><p>make “import pdb ; pdb.set_trace()” work natively wrt capturing (no
“-s” needed anymore), making <code class="docutils literal notranslate"><span class="pre">pytest.set_trace()</span></code> a mere shortcut.</p></li>
<li><p>fix issue181: –pdb now also works on collect errors (and
on internal errors) .  This was implemented by a slight internal
refactoring and the introduction of a new hook
<code class="docutils literal notranslate"><span class="pre">pytest_exception_interact</span></code> hook (see next item).</p></li>
<li><p>fix issue341: introduce new experimental hook for IDEs/terminals to
intercept debugging: <code class="docutils literal notranslate"><span class="pre">pytest_exception_interact(node,</span> <span class="pre">call,</span> <span class="pre">report)</span></code>.</p></li>
<li><p>new monkeypatch.setattr() variant to provide a shorter
invocation for patching out classes/functions from modules:</p>
<blockquote>
<div><p>monkeypatch.setattr(“requests.get”, myfunc)</p>
</div></blockquote>
<p>will replace the “get” function of the “requests” module with <code class="docutils literal notranslate"><span class="pre">myfunc</span></code>.</p>
</li>
<li><p>fix issue322: tearDownClass is not run if setUpClass failed. Thanks
Mathieu Agopian for the initial fix.  Also make all of pytest/nose
finalizer mimic the same generic behaviour: if a setupX exists and
fails, don’t run teardownX.  This internally introduces a new method
“node.addfinalizer()” helper which can only be called during the setup
phase of a node.</p></li>
<li><p>simplify pytest.mark.parametrize() signature: allow to pass a
CSV-separated string to specify argnames.  For example:
<code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize(&quot;input,expected&quot;,</span>&#160; <span class="pre">[(1,2),</span> <span class="pre">(2,3)])</span></code>
works as well as the previous:
<code class="docutils literal notranslate"><span class="pre">pytest.mark.parametrize((&quot;input&quot;,</span> <span class="pre">&quot;expected&quot;),</span> <span class="pre">...)</span></code>.</p></li>
<li><p>add support for setUpModule/tearDownModule detection, thanks Brian Okken.</p></li>
<li><p>integrate tab-completion on options through use of “argcomplete”.
Thanks Anthon van der Neut for the PR.</p></li>
<li><p>change option names to be hyphen-separated long options but keep the
old spelling backward compatible.  py.test -h will only show the
hyphenated version, for example “–collect-only” but “–collectonly”
will remain valid as well (for backward-compat reasons).  Many thanks to
Anthon van der Neut for the implementation and to Hynek Schlawack for
pushing us.</p></li>
<li><p>fix issue 308 - allow to mark/xfail/skip individual parameter sets
when parametrizing.  Thanks Brianna Laugher.</p></li>
<li><p>call new experimental pytest_load_initial_conftests hook to allow
3rd party plugins to do something before a conftest is loaded.</p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>fix issue358 - capturing options are now parsed more properly
by using a new parser.parse_known_args method.</p></li>
<li><p>pytest now uses argparse instead of optparse (thanks Anthon) which
means that “argparse” is added as a dependency if installing into python2.6
environments or below.</p></li>
<li><p>fix issue333: fix a case of bad unittest/pytest hook interaction.</p></li>
<li><p>PR27: correctly handle nose.SkipTest during collection.  Thanks
Antonio Cuni, Ronny Pfannschmidt.</p></li>
<li><p>fix issue355: junitxml puts name=”pytest” attribute to testsuite tag.</p></li>
<li><p>fix issue336: autouse fixture in plugins should work again.</p></li>
<li><p>fix issue279: improve object comparisons on assertion failure
for standard datatypes and recognise collections.abc.  Thanks to
Brianna Laugher and Mathieu Agopian.</p></li>
<li><p>fix issue317: assertion rewriter support for the is_package method</p></li>
<li><p>fix issue335: document py.code.ExceptionInfo() object returned
from pytest.raises(), thanks Mathieu Agopian.</p></li>
<li><p>remove implicit distribute_setup support from setup.py.</p></li>
<li><p>fix issue305: ignore any problems when writing pyc files.</p></li>
<li><p>SO-17664702: call fixture finalizers even if the fixture function
partially failed (finalizers would not always be called before)</p></li>
<li><p>fix issue320 - fix class scope for fixtures when mixed with
module-level functions.  Thanks Anatloy Bubenkoff.</p></li>
<li><p>you can specify “-q” or “-qq” to get different levels of “quieter”
reporting (thanks Katarzyna Jachim)</p></li>
<li><p>fix issue300 - Fix order of conftest loading when starting py.test
in a subdirectory.</p></li>
<li><p>fix issue323 - sorting of many module-scoped arg parametrizations</p></li>
<li><p>make sessionfinish hooks execute with the same cwd-context as at
session start (helps fix plugin behaviour which write output files
with relative path such as pytest-cov)</p></li>
<li><p>fix issue316 - properly reference collection hooks in docs</p></li>
<li><p>fix issue 306 - cleanup of -k/-m options to only match markers/test
names/keywords respectively.  Thanks Wouter van Ackooy.</p></li>
<li><p>improved doctest counting for doctests in python modules –
files without any doctest items will not show up anymore
and doctest examples are counted as separate test items.
thanks Danilo Bellini.</p></li>
<li><p>fix issue245 by depending on the released py-1.4.14
which fixes py.io.dupfile to work with files with no
mode. Thanks Jason R. Coombs.</p></li>
<li><p>fix junitxml generation when test output contains control characters,
addressing issue267, thanks Jaap Broekhuizen</p></li>
<li><p>fix issue338: honor –tb style for setup/teardown errors as well.  Thanks Maho.</p></li>
<li><p>fix issue307 - use yaml.safe_load in example, thanks Mark Eichin.</p></li>
<li><p>better parametrize error messages, thanks Brianna Laugher</p></li>
<li><p>pytest_terminal_summary(terminalreporter) hooks can now use
“.section(title)” and “.line(msg)” methods to print extra
information at the end of a test run.</p></li>
</ul>
</div>
<div class="section" id="id419">
<h4>2.3.5 (2013-04-30)<a class="headerlink" href="#id419" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue169: respect –tb=style with setup/teardown errors as well.</p></li>
<li><p>never consider a fixture function for test function collection</p></li>
<li><p>allow re-running of test items / helps to fix pytest-reruntests plugin
and also help to keep less fixture/resource references alive</p></li>
<li><p>put captured stdout/stderr into junitxml output even for passing tests
(thanks Adam Goucher)</p></li>
<li><p>Issue 265 - integrate nose setup/teardown with setupstate
so it doesn’t try to teardown if it did not setup</p></li>
<li><p>issue 271 - don’t write junitxml on worker nodes</p></li>
<li><p>Issue 274 - don’t try to show full doctest example
when doctest does not know the example location</p></li>
<li><p>issue 280 - disable assertion rewriting on buggy CPython 2.6.0</p></li>
<li><p>inject “getfixture()” helper to retrieve fixtures from doctests,
thanks Andreas Zeidler</p></li>
<li><p>issue 259 - when assertion rewriting, be consistent with the default
source encoding of ASCII on Python 2</p></li>
<li><p>issue 251 - report a skip instead of ignoring classes with init</p></li>
<li><p>issue250 unicode/str mixes in parametrization names and values now works</p></li>
<li><p>issue257, assertion-triggered compilation of source ending in a
comment line doesn’t blow up in python2.5 (fixed through py&gt;=1.4.13.dev6)</p></li>
<li><p>fix –genscript option to generate standalone scripts that also
work with python3.3 (importer ordering)</p></li>
<li><p>issue171 - in assertion rewriting, show the repr of some
global variables</p></li>
<li><p>fix option help for “-k”</p></li>
<li><p>move long description of distribution into README.rst</p></li>
<li><p>improve docstring for metafunc.parametrize()</p></li>
<li><p>fix bug where using capsys with pytest.set_trace() in a test
function would break when looking at capsys.readouterr()</p></li>
<li><p>allow to specify prefixes starting with “_” when
customizing python_functions test discovery. (thanks Graham Horler)</p></li>
<li><p>improve PYTEST_DEBUG tracing output by putting
extra data on a new lines with additional indent</p></li>
<li><p>ensure OutcomeExceptions like skip/fail have initialized exception attributes</p></li>
<li><p>issue 260 - don’t use nose special setup on plain unittest cases</p></li>
<li><p>fix issue134 - print the collect errors that prevent running specified test items</p></li>
<li><p>fix issue266 - accept unicode in MarkEvaluator expressions</p></li>
</ul>
</div>
<div class="section" id="id420">
<h4>2.3.4 (2012-11-20)<a class="headerlink" href="#id420" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>yielded test functions will now have autouse-fixtures active but
cannot accept fixtures as funcargs - it’s anyway recommended to
rather use the post-2.0 parametrize features instead of yield, see:
<a class="reference external" href="http://pytest.org/en/stable/example/how-to/parametrize.html">http://pytest.org/en/stable/example/how-to/parametrize.html</a></p></li>
<li><p>fix autouse-issue where autouse-fixtures would not be discovered
if defined in an a/conftest.py file and tests in a/tests/test_some.py</p></li>
<li><p>fix issue226 - LIFO ordering for fixture teardowns</p></li>
<li><p>fix issue224 - invocations with &gt;256 char arguments now work</p></li>
<li><p>fix issue91 - add/discuss package/directory level setups in example</p></li>
<li><p>allow to dynamically define markers via
item.keywords[…]=assignment integrating with “-m” option</p></li>
<li><p>make “-k” accept an expressions the same as with “-m” so that one
can write: -k “name1 or name2” etc.  This is a slight incompatibility
if you used special syntax like “TestClass.test_method” which you now
need to write as -k “TestClass and test_method” to match a certain
method in a certain test class.</p></li>
</ul>
</div>
<div class="section" id="id421">
<h4>2.3.3 (2012-11-06)<a class="headerlink" href="#id421" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue214 - parse modules that contain special objects like e. g.
flask’s request object which blows up on getattr access if no request
is active. thanks Thomas Waldmann.</p></li>
<li><p>fix issue213 - allow to parametrize with values like numpy arrays that
do not support an __eq__ operator</p></li>
<li><p>fix issue215 - split test_python.org into multiple files</p></li>
<li><p>fix issue148 - &#64;unittest.skip on classes is now recognized and avoids
calling setUpClass/tearDownClass, thanks Pavel Repin</p></li>
<li><p>fix issue209 - reintroduce python2.4 support by depending on newer
pylib which re-introduced statement-finding for pre-AST interpreters</p></li>
<li><p>nose support: only call setup if it’s a callable, thanks Andrew
Taumoefolau</p></li>
<li><p>fix issue219 - add py2.4-3.3 classifiers to TROVE list</p></li>
<li><p>in tracebacks <em>,*</em> arg values are now shown next to normal arguments
(thanks Manuel Jacob)</p></li>
<li><p>fix issue217 - support mock.patch with pytest’s fixtures - note that
you need either mock-1.0.1 or the python3.3 builtin unittest.mock.</p></li>
<li><p>fix issue127 - improve documentation for pytest_addoption() and
add a <code class="docutils literal notranslate"><span class="pre">config.getoption(name)</span></code> helper function for consistency.</p></li>
</ul>
</div>
<div class="section" id="id422">
<h4>2.3.2 (2012-10-25)<a class="headerlink" href="#id422" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue208 and fix issue29 use new py version to avoid long pauses
when printing tracebacks in long modules</p></li>
<li><p>fix issue205 - conftests in subdirs customizing
pytest_pycollect_makemodule and pytest_pycollect_makeitem
now work properly</p></li>
<li><p>fix teardown-ordering for parametrized setups</p></li>
<li><p>fix issue127 - better documentation for pytest_addoption
and related objects.</p></li>
<li><p>fix unittest behaviour: TestCase.runtest only called if there are
test methods defined</p></li>
<li><p>improve trial support: don’t collect its empty
unittest.TestCase.runTest() method</p></li>
<li><p>“python setup.py test” now works with pytest itself</p></li>
<li><p>fix/improve internal/packaging related bits:</p>
<ul>
<li><p>exception message check of test_nose.py now passes on python33 as well</p></li>
<li><p>issue206 - fix test_assertrewrite.py to work when a global
PYTHONDONTWRITEBYTECODE=1 is present</p></li>
<li><p>add tox.ini to pytest distribution so that ignore-dirs and others config
bits are properly distributed for maintainers who run pytest-own tests</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id423">
<h4>2.3.1 (2012-10-20)<a class="headerlink" href="#id423" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue202 - fix regression: using “self” from fixture functions now
works as expected (it’s the same “self” instance that a test method
which uses the fixture sees)</p></li>
<li><p>skip pexpect using tests (test_pdb.py mostly) on freebsd* systems
due to pexpect not supporting it properly (hanging)</p></li>
<li><p>link to web pages from –markers output which provides help for
pytest.mark.* usage.</p></li>
</ul>
</div>
<div class="section" id="id424">
<h4>2.3.0 (2012-10-19)<a class="headerlink" href="#id424" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue202 - better automatic names for parametrized test functions</p></li>
<li><p>fix issue139 - introduce &#64;pytest.fixture which allows direct scoping
and parametrization of funcarg factories.</p></li>
<li><p>fix issue198 - conftest fixtures were not found on windows32 in some
circumstances with nested directory structures due to path manipulation issues</p></li>
<li><p>fix issue193 skip test functions with were parametrized with empty
parameter sets</p></li>
<li><p>fix python3.3 compat, mostly reporting bits that previously depended
on dict ordering</p></li>
<li><p>introduce re-ordering of tests by resource and parametrization setup
which takes precedence to the usual file-ordering</p></li>
<li><p>fix issue185 monkeypatching time.time does not cause pytest to fail</p></li>
<li><p>fix issue172 duplicate call of pytest.fixture decoratored setup_module
functions</p></li>
<li><p>fix junitxml=path construction so that if tests change the
current working directory and the path is a relative path
it is constructed correctly from the original current working dir.</p></li>
<li><p>fix “python setup.py test” example to cause a proper “errno” return</p></li>
<li><p>fix issue165 - fix broken doc links and mention stackoverflow for FAQ</p></li>
<li><p>catch unicode-issues when writing failure representations
to terminal to prevent the whole session from crashing</p></li>
<li><p>fix xfail/skip confusion: a skip-mark or an imperative pytest.skip
will now take precedence before xfail-markers because we
can’t determine xfail/xpass status in case of a skip. see also:
<a class="reference external" href="http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get">http://stackoverflow.com/questions/11105828/in-py-test-when-i-explicitly-skip-a-test-that-is-marked-as-xfail-how-can-i-get</a></p></li>
<li><p>always report installed 3rd party plugins in the header of a test run</p></li>
<li><p>fix issue160: a failing setup of an xfail-marked tests should
be reported as xfail (not xpass)</p></li>
<li><p>fix issue128: show captured output when capsys/capfd are used</p></li>
<li><p>fix issue179: properly show the dependency chain of factories</p></li>
<li><p>pluginmanager.register(…) now raises ValueError if the
plugin has been already registered or the name is taken</p></li>
<li><p>fix issue159: improve <a class="reference external" href="https://docs.pytest.org/en/6.0.1/faq.html">https://docs.pytest.org/en/6.0.1/faq.html</a>
especially with respect to the “magic” history, also mention
pytest-django, trial and unittest integration.</p></li>
<li><p>make request.keywords and node.keywords writable.  All descendant
collection nodes will see keyword values.  Keywords are dictionaries
containing markers and other info.</p></li>
<li><p>fix issue 178: xml binary escapes are now wrapped in py.xml.raw</p></li>
<li><p>fix issue 176: correctly catch the builtin AssertionError
even when we replaced AssertionError with a subclass on the
python level</p></li>
<li><p>factory discovery no longer fails with magic global callables
that provide no sane __code__ object (mock.call for example)</p></li>
<li><p>fix issue 182: testdir.inprocess_run now considers passed plugins</p></li>
<li><dl class="simple">
<dt>fix issue 188: ensure sys.exc_info is clear on python2</dt><dd><p>before calling into a test</p>
</dd>
</dl>
</li>
<li><p>fix issue 191: add unittest TestCase runTest method support</p></li>
<li><p>fix issue 156: monkeypatch correctly handles class level descriptors</p></li>
<li><p>reporting refinements:</p>
<ul>
<li><p>pytest_report_header now receives a “startdir” so that
you can use startdir.bestrelpath(yourpath) to show
nice relative path</p></li>
<li><p>allow plugins to implement both pytest_report_header and
pytest_sessionstart (sessionstart is invoked first).</p></li>
<li><p>don’t show deselected reason line if there is none</p></li>
<li><p>py.test -vv will show all of assert comparisons instead of truncating</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id425">
<h4>2.2.4 (2012-05-22)<a class="headerlink" href="#id425" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix error message for rewritten assertions involving the % operator</p></li>
<li><p>fix issue 126: correctly match all invalid xml characters for junitxml
binary escape</p></li>
<li><p>fix issue with unittest: now &#64;unittest.expectedFailure markers should
be processed correctly (you can also use &#64;pytest.mark markers)</p></li>
<li><p>document integration with the extended distribute/setuptools test commands</p></li>
<li><p>fix issue 140: properly get the real functions
of bound classmethods for setup/teardown_class</p></li>
<li><p>fix issue #141: switch from the deceased paste.pocoo.org to bpaste.net</p></li>
<li><p>fix issue #143: call unconfigure/sessionfinish always when
configure/sessionstart where called</p></li>
<li><p>fix issue #144: better mangle test ids to junitxml classnames</p></li>
<li><p>upgrade distribute_setup.py to 0.6.27</p></li>
</ul>
</div>
<div class="section" id="id426">
<h4>2.2.3 (2012-02-05)<a class="headerlink" href="#id426" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix uploaded package to only include necessary files</p></li>
</ul>
</div>
<div class="section" id="id427">
<h4>2.2.2 (2012-02-05)<a class="headerlink" href="#id427" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue101: wrong args to unittest.TestCase test function now
produce better output</p></li>
<li><p>fix issue102: report more useful errors and hints for when a
test directory was renamed and some pyc/__pycache__ remain</p></li>
<li><p>fix issue106: allow parametrize to be applied multiple times
e.g. from module, class and at function level.</p></li>
<li><p>fix issue107: actually perform session scope finalization</p></li>
<li><p>don’t check in parametrize if indirect parameters are funcarg names</p></li>
<li><p>add chdir method to monkeypatch funcarg</p></li>
<li><p>fix crash resulting from calling monkeypatch undo a second time</p></li>
<li><p>fix issue115: make –collectonly robust against early failure
(missing files/directories)</p></li>
<li><p>“-qq –collectonly” now shows only files and the number of tests in them</p></li>
<li><p>“-q –collectonly” now shows test ids</p></li>
<li><p>allow adding of attributes to test reports such that it also works
with distributed testing (no upgrade of pytest-xdist needed)</p></li>
</ul>
</div>
<div class="section" id="id428">
<h4>2.2.1 (2011-12-16)<a class="headerlink" href="#id428" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue99 (in pytest and py) internallerrors with resultlog now
produce better output - fixed by normalizing pytest_internalerror
input arguments.</p></li>
<li><p>fix issue97 / traceback issues (in pytest and py) improve traceback output
in conjunction with jinja2 and cython which hack tracebacks</p></li>
<li><p>fix issue93 (in pytest and pytest-xdist) avoid “delayed teardowns”:
the final test in a test node will now run its teardown directly
instead of waiting for the end of the session. Thanks Dave Hunt for
the good reporting and feedback.  The pytest_runtest_protocol as well
as the pytest_runtest_teardown hooks now have “nextitem” available
which will be None indicating the end of the test run.</p></li>
<li><p>fix collection crash due to unknown-source collected items, thanks
to Ralf Schmitt (fixed by depending on a more recent pylib)</p></li>
</ul>
</div>
<div class="section" id="id429">
<h4>2.2.0 (2011-11-18)<a class="headerlink" href="#id429" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue90: introduce eager tearing down of test items so that
teardown function are called earlier.</p></li>
<li><p>add an all-powerful metafunc.parametrize function which allows to
parametrize test function arguments in multiple steps and therefore
from independent plugins and places.</p></li>
<li><p>add a &#64;pytest.mark.parametrize helper which allows to easily
call a test function with different argument values</p></li>
<li><p>Add examples to the “parametrize” example page, including a quick port
of Test scenarios and the new parametrize function and decorator.</p></li>
<li><p>introduce registration for “pytest.mark.*” helpers via ini-files
or through plugin hooks.  Also introduce a “–strict” option which
will treat unregistered markers as errors
allowing to avoid typos and maintain a well described set of markers
for your test suite.  See examples at <a class="reference external" href="http://pytest.org/en/stable/how-to/mark.html">http://pytest.org/en/stable/how-to/mark.html</a>
and its links.</p></li>
<li><p>issue50: introduce “-m marker” option to select tests based on markers
(this is a stricter and more predictable version of ‘-k’ in that “-m”
only matches complete markers and has more obvious rules for and/or
semantics.</p></li>
<li><p>new feature to help optimizing the speed of your tests:
–durations=N option for displaying N slowest test calls
and setup/teardown methods.</p></li>
<li><p>fix issue87: –pastebin now works with python3</p></li>
<li><p>fix issue89: –pdb with unexpected exceptions in doctest work more sensibly</p></li>
<li><p>fix and cleanup pytest’s own test suite to not leak FDs</p></li>
<li><p>fix issue83: link to generated funcarg list</p></li>
<li><p>fix issue74: pyarg module names are now checked against imp.find_module false positives</p></li>
<li><p>fix compatibility with twisted/trial-11.1.0 use cases</p></li>
<li><p>simplify Node.listchain</p></li>
<li><p>simplify junitxml output code by relying on py.xml</p></li>
<li><p>add support for skip properties on unittest classes and functions</p></li>
</ul>
</div>
<div class="section" id="id430">
<h4>2.1.3 (2011-10-18)<a class="headerlink" href="#id430" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue79: assertion rewriting failed on some comparisons in boolops</p></li>
<li><p>correctly handle zero length arguments (a la pytest ‘’)</p></li>
<li><p>fix issue67 / junitxml now contains correct test durations, thanks ronny</p></li>
<li><p>fix issue75 / skipping test failure on jython</p></li>
<li><p>fix issue77 / Allow assertrepr_compare hook to apply to a subset of tests</p></li>
</ul>
</div>
<div class="section" id="id431">
<h4>2.1.2 (2011-09-24)<a class="headerlink" href="#id431" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix assertion rewriting on files with windows newlines on some Python versions</p></li>
<li><p>refine test discovery by package/module name (–pyargs), thanks Florian Mayer</p></li>
<li><p>fix issue69 / assertion rewriting fixed on some boolean operations</p></li>
<li><p>fix issue68 / packages now work with assertion rewriting</p></li>
<li><p>fix issue66: use different assertion rewriting caches when the -O option is passed</p></li>
<li><p>don’t try assertion rewriting on Jython, use reinterp</p></li>
</ul>
</div>
<div class="section" id="id432">
<h4>2.1.1<a class="headerlink" href="#id432" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue64 / pytest.set_trace now works within pytest_generate_tests hooks</p></li>
<li><p>fix issue60 / fix error conditions involving the creation of __pycache__</p></li>
<li><p>fix issue63 / assertion rewriting on inserts involving strings containing ‘%’</p></li>
<li><p>fix assertion rewriting on calls with a ** arg</p></li>
<li><p>don’t cache rewritten modules if bytecode generation is disabled</p></li>
<li><p>fix assertion rewriting in read-only directories</p></li>
<li><p>fix issue59: provide system-out/err tags for junitxml output</p></li>
<li><p>fix issue61: assertion rewriting on boolean operations with 3 or more operands</p></li>
<li><p>you can now build a man page with “cd doc ; make man”</p></li>
</ul>
</div>
<div class="section" id="id433">
<h4>2.1.0 (2011-07-09)<a class="headerlink" href="#id433" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue53 call nosestyle setup functions with correct ordering</p></li>
<li><p>fix issue58 and issue59: new assertion code fixes</p></li>
<li><p>merge Benjamin’s assertionrewrite branch: now assertions
for test modules on python 2.6 and above are done by rewriting
the AST and saving the pyc file before the test module is imported.
see doc/assert.txt for more info.</p></li>
<li><p>fix issue43: improve doctests with better traceback reporting on
unexpected exceptions</p></li>
<li><p>fix issue47: timing output in junitxml for test cases is now correct</p></li>
<li><p>fix issue48: typo in MarkInfo repr leading to exception</p></li>
<li><p>fix issue49: avoid confusing error when initizaliation partially fails</p></li>
<li><p>fix issue44: env/username expansion for junitxml file path</p></li>
<li><p>show releaselevel information in test runs for pypy</p></li>
<li><p>reworked doc pages for better navigation and PDF generation</p></li>
<li><p>report KeyboardInterrupt even if interrupted during session startup</p></li>
<li><p>fix issue 35 - provide PDF doc version and download link from index page</p></li>
</ul>
</div>
<div class="section" id="id434">
<h4>2.0.3 (2011-05-11)<a class="headerlink" href="#id434" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue38: nicer tracebacks on calls to hooks, particularly early
configure/sessionstart ones</p></li>
<li><p>fix missing skip reason/meta information in junitxml files, reported
via <a class="reference external" href="http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html">http://lists.idyll.org/pipermail/testing-in-python/2011-March/003928.html</a></p></li>
<li><p>fix issue34: avoid collection failure with “test” prefixed classes
deriving from object.</p></li>
<li><p>don’t require zlib (and other libs) for genscript plugin without
–genscript actually being used.</p></li>
<li><p>speed up skips (by not doing a full traceback representation
internally)</p></li>
<li><p>fix issue37: avoid invalid characters in junitxml’s output</p></li>
</ul>
</div>
<div class="section" id="id435">
<h4>2.0.2 (2011-03-09)<a class="headerlink" href="#id435" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>tackle issue32 - speed up test runs of very quick test functions
by reducing the relative overhead</p></li>
<li><p>fix issue30 - extended xfail/skipif handling and improved reporting.
If you have a syntax error in your skip/xfail
expressions you now get nice error reports.</p>
<p>Also you can now access module globals from xfail/skipif
expressions so that this for example works now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">mymodule</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">skipif</span><span class="p">(</span><span class="s2">&quot;mymodule.__version__[0] == &quot;</span><span class="mi">1</span><span class="s2">&quot;)</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>This will not run the test function if the module’s version string
does not start with a “1”.  Note that specifying a string instead
of a boolean expressions allows py.test to report meaningful information
when summarizing a test run as to what conditions lead to skipping
(or xfail-ing) tests.</p>
</li>
<li><p>fix issue28 - setup_method and pytest_generate_tests work together
The setup_method fixture method now gets called also for
test function invocations generated from the pytest_generate_tests
hook.</p></li>
<li><p>fix issue27 - collectonly and keyword-selection (-k) now work together
Also, if you do “py.test –collectonly -q” you now get a flat list
of test ids that you can use to paste to the py.test commandline
in order to execute a particular test.</p></li>
<li><p>fix issue25 avoid reported problems with –pdb and python3.2/encodings output</p></li>
<li><p>fix issue23 - tmpdir argument now works on Python3.2 and WindowsXP
Starting with Python3.2 os.symlink may be supported. By requiring
a newer py lib version the py.path.local() implementation acknowledges
this.</p></li>
<li><p>fixed typos in the docs (thanks Victor Garcia, Brianna Laugher) and particular
thanks to Laura Creighton who also reviewed parts of the documentation.</p></li>
<li><p>fix slightly wrong output of verbose progress reporting for classes
(thanks Amaury)</p></li>
<li><p>more precise (avoiding of) deprecation warnings for node.Class|Function accesses</p></li>
<li><p>avoid std unittest assertion helper code in tracebacks (thanks Ronny)</p></li>
</ul>
</div>
<div class="section" id="id436">
<h4>2.0.1 (2011-02-07)<a class="headerlink" href="#id436" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>refine and unify initial capturing so that it works nicely
even if the logging module is used on an early-loaded conftest.py
file or plugin.</p></li>
<li><p>allow to omit “()” in test ids to allow for uniform test ids
as produced by Alfredo’s nice pytest.vim plugin.</p></li>
<li><p>fix issue12 - show plugin versions with “–version” and
“–traceconfig” and also document how to add extra information
to reporting test header</p></li>
<li><p>fix issue17 (import-* reporting issue on python3) by
requiring py&gt;1.4.0 (1.4.1 is going to include it)</p></li>
<li><p>fix issue10 (numpy arrays truth checking) by refining
assertion interpretation in py lib</p></li>
<li><p>fix issue15: make nose compatibility tests compatible
with python3 (now that nose-1.0 supports python3)</p></li>
<li><p>remove somewhat surprising “same-conftest” detection because
it ignores conftest.py when they appear in several subdirs.</p></li>
<li><p>improve assertions (“not in”), thanks Floris Bruynooghe</p></li>
<li><p>improve behaviour/warnings when running on top of “python -OO”
(assertions and docstrings are turned off, leading to potential
false positives)</p></li>
<li><p>introduce a pytest_cmdline_processargs(args) hook
to allow dynamic computation of command line arguments.
This fixes a regression because py.test prior to 2.0
allowed to set command line options from conftest.py
files which so far pytest-2.0 only allowed from ini-files now.</p></li>
<li><p>fix issue7: assert failures in doctest modules.
unexpected failures in doctests will not generally
show nicer, i.e. within the doctest failing context.</p></li>
<li><p>fix issue9: setup/teardown functions for an xfail-marked
test will report as xfail if they fail but report as normally
passing (not xpassing) if they succeed.  This only is true
for “direct” setup/teardown invocations because teardown_class/
teardown_module cannot closely relate to a single test.</p></li>
<li><p>fix issue14: no logging errors at process exit</p></li>
<li><p>refinements to “collecting” output on non-ttys</p></li>
<li><p>refine internal plugin registration and –traceconfig output</p></li>
<li><p>introduce a mechanism to prevent/unregister plugins from the
command line, see <a class="reference external" href="http://pytest.org/en/stable/how-to/plugins.html#cmdunregister">http://pytest.org/en/stable/how-to/plugins.html#cmdunregister</a></p></li>
<li><p>activate resultlog plugin by default</p></li>
<li><p>fix regression wrt yielded tests which due to the
collection-before-running semantics were not
setup as with pytest 1.3.4.  Note, however, that
the recommended and much cleaner way to do test
parametraization remains the “pytest_generate_tests”
mechanism, see the docs.</p></li>
</ul>
</div>
<div class="section" id="id437">
<h4>2.0.0 (2010-11-25)<a class="headerlink" href="#id437" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>pytest-2.0 is now its own package and depends on pylib-2.0</p></li>
<li><p>new ability: python -m pytest / python -m pytest.main ability</p></li>
<li><p>new python invocation: pytest.main(args, plugins) to load
some custom plugins early.</p></li>
<li><p>try harder to run unittest test suites in a more compatible manner
by deferring setup/teardown semantics to the unittest package.
also work harder to run twisted/trial and Django tests which
should now basically work by default.</p></li>
<li><p>introduce a new way to set config options via ini-style files,
by default setup.cfg and tox.ini files are searched.  The old
ways (certain environment variables, dynamic conftest.py reading
is removed).</p></li>
<li><p>add a new “-q” option which decreases verbosity and prints a more
nose/unittest-style “dot” output.</p></li>
<li><p>fix issue135 - marks now work with unittest test cases as well</p></li>
<li><p>fix issue126 - introduce py.test.set_trace() to trace execution via
PDB during the running of tests even if capturing is ongoing.</p></li>
<li><p>fix issue123 - new “python -m py.test” invocation for py.test
(requires Python 2.5 or above)</p></li>
<li><p>fix issue124 - make reporting more resilient against tests opening
files on filedescriptor 1 (stdout).</p></li>
<li><p>fix issue109 - sibling conftest.py files will not be loaded.
(and Directory collectors cannot be customized anymore from a Directory’s
conftest.py - this needs to happen at least one level up).</p></li>
<li><p>introduce (customizable) assertion failure representations and enhance
output on assertion failures for comparisons and other cases (Floris Bruynooghe)</p></li>
<li><p>nose-plugin: pass through type-signature failures in setup/teardown
functions instead of not calling them (Ed Singleton)</p></li>
<li><p>remove py.test.collect.Directory (follows from a major refactoring
and simplification of the collection process)</p></li>
<li><p>majorly reduce py.test core code, shift function/python testing to own plugin</p></li>
<li><p>fix issue88 (finding custom test nodes from command line arg)</p></li>
<li><p>refine ‘tmpdir’ creation, will now create basenames better associated
with test names (thanks Ronny)</p></li>
<li><p>“xpass” (unexpected pass) tests don’t cause exitcode!=0</p></li>
<li><p>fix issue131 / issue60 - importing doctests in __init__ files used as namespace packages</p></li>
<li><p>fix issue93 stdout/stderr is captured while importing conftest.py</p></li>
<li><p>fix bug: unittest collected functions now also can have “pytestmark”
applied at class/module level</p></li>
<li><p>add ability to use “class” level for cached_setup helper</p></li>
<li><p>fix strangeness: mark.* objects are now immutable, create new instances</p></li>
</ul>
</div>
<div class="section" id="id438">
<h4>1.3.4 (2010-09-14)<a class="headerlink" href="#id438" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue111: improve install documentation for windows</p></li>
<li><p>fix issue119: fix custom collectability of __init__.py as a module</p></li>
<li><p>fix issue116: –doctestmodules work with __init__.py files as well</p></li>
<li><p>fix issue115: unify internal exception passthrough/catching/GeneratorExit</p></li>
<li><p>fix issue118: new –tb=native for presenting cpython-standard exceptions</p></li>
</ul>
</div>
<div class="section" id="id439">
<h4>1.3.3 (2010-07-30)<a class="headerlink" href="#id439" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fix issue113: assertion representation problem with triple-quoted strings
(and possibly other cases)</p></li>
<li><p>make conftest loading detect that a conftest file with the same
content was already loaded, avoids surprises in nested directory structures
which can be produced e.g. by Hudson. It probably removes the need to use
–confcutdir in most cases.</p></li>
<li><p>fix terminal coloring for win32
(thanks Michael Foord for reporting)</p></li>
<li><p>fix weirdness: make terminal width detection work on stdout instead of stdin
(thanks Armin Ronacher for reporting)</p></li>
<li><p>remove trailing whitespace in all py/text distribution files</p></li>
</ul>
</div>
<div class="section" id="id440">
<h4>1.3.2 (2010-07-08)<a class="headerlink" href="#id440" title="Permalink to this headline">¶</a></h4>
<p><strong>New features</strong></p>
<ul>
<li><p>fix issue103:  introduce py.test.raises as context manager, examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">py</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="mi">1</span> <span class="o">/</span> <span class="n">x</span>

<span class="k">with</span> <span class="n">py</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">excinfo</span><span class="p">:</span>
    <span class="n">call_something</span><span class="p">()</span>

<span class="c1"># you may do extra checks on excinfo.value|type|traceback here</span>
</pre></div>
</div>
<p>(thanks Ronny Pfannschmidt)</p>
</li>
<li><p>Funcarg factories can now dynamically apply a marker to a
test invocation.  This is for example useful if a factory
provides parameters to a test which are expected-to-fail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_funcarg__arg</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">request</span><span class="o">.</span><span class="n">applymarker</span><span class="p">(</span><span class="n">py</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">xfail</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s2">&quot;flaky config&quot;</span><span class="p">))</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p>improved error reporting on collection and import errors. This makes
use of a more general mechanism, namely that for custom test item/collect
nodes <code class="docutils literal notranslate"><span class="pre">node.repr_failure(excinfo)</span></code> is now uniformly called so that you can
override it to return a string error representation of your choice
which is going to be reported as a (red) string.</p></li>
<li><p>introduce ‘–junitprefix=STR’ option to prepend a prefix
to all reports in the junitxml file.</p></li>
</ul>
<p><strong>Bug fixes</strong></p>
<ul class="simple">
<li><p>make tests and the <code class="docutils literal notranslate"><span class="pre">pytest_recwarn</span></code> plugin in particular fully compatible
to Python2.7 (if you use the <code class="docutils literal notranslate"><span class="pre">recwarn</span></code> funcarg warnings will be enabled so that
you can properly check for their existence in a cross-python manner).</p></li>
<li><p>refine –pdb: ignore xfailed tests, unify its TB-reporting and
don’t display failures again at the end.</p></li>
<li><p>fix assertion interpretation with the ** operator (thanks Benjamin Peterson)</p></li>
<li><p>fix issue105 assignment on the same line as a failing assertion (thanks Benjamin Peterson)</p></li>
<li><p>fix issue104 proper escaping for test names in junitxml plugin (thanks anonymous)</p></li>
<li><p>fix issue57 -f|–looponfail to work with xpassing tests (thanks Ronny)</p></li>
<li><p>fix issue92 collectonly reporter and –pastebin (thanks Benjamin Peterson)</p></li>
<li><p>fix py.code.compile(source) to generate unique filenames</p></li>
<li><p>fix assertion re-interp problems on PyPy, by deferring code
compilation to the (overridable) Frame.eval class. (thanks Amaury Forgeot)</p></li>
<li><p>fix py.path.local.pyimport() to work with directories</p></li>
<li><p>streamline py.path.local.mkdtemp implementation and usage</p></li>
<li><p>don’t print empty lines when showing junitxml-filename</p></li>
<li><p>add optional boolean ignore_errors parameter to py.path.local.remove</p></li>
<li><p>fix terminal writing on win32/python2.4</p></li>
<li><p>py.process.cmdexec() now tries harder to return properly encoded unicode objects
on all python versions</p></li>
<li><p>install plain py.test/py.which scripts also for Jython, this helps to
get canonical script paths in virtualenv situations</p></li>
<li><p>make path.bestrelpath(path) return “.”, note that when calling
X.bestrelpath the assumption is that X is a directory.</p></li>
<li><p>make initial conftest discovery ignore “–” prefixed arguments</p></li>
<li><p>fix resultlog plugin when used in a multicpu/multihost xdist situation
(thanks Jakub Gustak)</p></li>
<li><p>perform distributed testing related reporting in the xdist-plugin
rather than having dist-related code in the generic py.test
distribution</p></li>
<li><p>fix homedir detection on Windows</p></li>
<li><p>ship distribute_setup.py version 0.6.13</p></li>
</ul>
</div>
<div class="section" id="id441">
<h4>1.3.1 (2010-05-25)<a class="headerlink" href="#id441" title="Permalink to this headline">¶</a></h4>
<p><strong>New features</strong></p>
<ul>
<li><p>issue91: introduce new py.test.xfail(reason) helper
to imperatively mark a test as expected to fail. Can
be used from within setup and test functions. This is
useful especially for parametrized tests when certain
configurations are expected-to-fail.  In this case the
declarative approach with the &#64;py.test.mark.xfail cannot
be used as it would mark all configurations as xfail.</p></li>
<li><p>issue102: introduce new –maxfail=NUM option to stop
test runs after NUM failures.  This is a generalization
of the ‘-x’ or ‘–exitfirst’ option which is now equivalent
to ‘–maxfail=1’.  Both ‘-x’ and ‘–maxfail’ will
now also print a line near the end indicating the Interruption.</p></li>
<li><p>issue89: allow py.test.mark decorators to be used on classes
(class decorators were introduced with python2.6) and
also allow to have multiple markers applied at class/module level
by specifying a list.</p></li>
<li><p>improve and refine letter reporting in the progress bar:
.  pass
f  failed test
s  skipped tests (reminder: use for dependency/platform mismatch only)
x  xfailed test (test that was expected to fail)
X  xpassed test (test that was expected to fail but passed)</p>
<p>You can use any combination of ‘fsxX’ with the ‘-r’ extended
reporting option. The xfail/xpass results will show up as
skipped tests in the junitxml output - which also fixes
issue99.</p>
</li>
<li><p>make py.test.cmdline.main() return the exitstatus instead of raising
SystemExit and also allow it to be called multiple times.  This of
course requires that your application and tests are properly teared
down and don’t have global state.</p></li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul class="simple">
<li><p>improved traceback presentation:
- improved and unified reporting for “–tb=short” option
- Errors during test module imports are much shorter, (using –tb=short style)
- raises shows shorter more relevant tracebacks
- –fulltrace now more systematically makes traces longer / inhibits cutting</p></li>
<li><p>improve support for raises and other dynamically compiled code by
manipulating python’s linecache.cache instead of the previous
rather hacky way of creating custom code objects.  This makes
it seamlessly work on Jython and PyPy where it previously didn’t.</p></li>
<li><p>fix issue96: make capturing more resilient against Control-C
interruptions (involved somewhat substantial refactoring
to the underlying capturing functionality to avoid race
conditions).</p></li>
<li><p>fix chaining of conditional skipif/xfail decorators - so it works now
as expected to use multiple &#64;py.test.mark.skipif(condition) decorators,
including specific reporting which of the conditions lead to skipping.</p></li>
<li><p>fix issue95: late-import zlib so that it’s not required
for general py.test startup.</p></li>
<li><p>fix issue94: make reporting more robust against bogus source code
(and internally be more careful when presenting unexpected byte sequences)</p></li>
</ul>
</div>
<div class="section" id="id442">
<h4>1.3.0 (2010-05-05)<a class="headerlink" href="#id442" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>deprecate –report option in favour of a new shorter and easier to
remember -r option: it takes a string argument consisting of any
combination of ‘xfsX’ characters.  They relate to the single chars
you see during the dotted progress printing and will print an extra line
per test at the end of the test run.  This extra line indicates the exact
position or test ID that you directly paste to the py.test cmdline in order
to re-run a particular test.</p></li>
<li><p>allow external plugins to register new hooks via the new
pytest_addhooks(pluginmanager) hook.  The new release of
the pytest-xdist plugin for distributed and looponfailing
testing requires this feature.</p></li>
<li><p>add a new pytest_ignore_collect(path, config) hook to allow projects and
plugins to define exclusion behaviour for their directory structure -
for example you may define in a conftest.py this method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pytest_ignore_collect</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">link</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>to prevent even a collection try of any tests in symlinked dirs.</p>
</li>
<li><p>new pytest_pycollect_makemodule(path, parent) hook for
allowing customization of the Module collection object for a
matching test module.</p></li>
<li><p>extend and refine xfail mechanism:
<code class="docutils literal notranslate"><span class="pre">&#64;py.test.mark.xfail(run=False)</span></code> do not run the decorated test
<code class="docutils literal notranslate"><span class="pre">&#64;py.test.mark.xfail(reason=&quot;...&quot;)</span></code> prints the reason string in xfail summaries
specifying <code class="docutils literal notranslate"><span class="pre">--runxfail</span></code> on command line virtually ignores xfail markers</p></li>
<li><p>expose (previously internal) commonly useful methods:
py.io.get_terminal_with() -&gt; return terminal width
py.io.ansi_print(…) -&gt; print colored/bold text on linux/win32
py.io.saferepr(obj) -&gt; return limited representation string</p></li>
<li><p>expose test outcome related exceptions as py.test.skip.Exception,
py.test.raises.Exception etc., useful mostly for plugins
doing special outcome interpretation/tweaking</p></li>
<li><p>(issue85) fix junitxml plugin to handle tests with non-ascii output</p></li>
<li><p>fix/refine python3 compatibility (thanks Benjamin Peterson)</p></li>
<li><p>fixes for making the jython/win32 combination work, note however:
jython2.5.1/win32 does not provide a command line launcher, see
<a class="reference external" href="https://bugs.jython.org/issue1491">https://bugs.jython.org/issue1491</a> . See pylib install documentation
for how to work around.</p></li>
<li><p>fixes for handling of unicode exception values and unprintable objects</p></li>
<li><p>(issue87) fix unboundlocal error in assertionold code</p></li>
<li><p>(issue86) improve documentation for looponfailing</p></li>
<li><p>refine IO capturing: stdin-redirect pseudo-file now has a NOP close() method</p></li>
<li><p>ship distribute_setup.py version 0.6.10</p></li>
<li><p>added links to the new capturelog and coverage plugins</p></li>
</ul>
</div>
<div class="section" id="id443">
<h4>1.2.0 (2010-01-18)<a class="headerlink" href="#id443" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>refined usage and options for “py.cleanup”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">py</span><span class="o">.</span><span class="n">cleanup</span>     <span class="c1"># remove &quot;*.pyc&quot; and &quot;*$py.class&quot; (jython) files</span>
<span class="n">py</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="n">swp</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span><span class="n">cache</span> <span class="c1"># also remove files with these extensions</span>
<span class="n">py</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">-</span><span class="n">s</span>  <span class="c1"># remove &quot;build&quot; and &quot;dist&quot; directory next to setup.py files</span>
<span class="n">py</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">-</span><span class="n">d</span>  <span class="c1"># also remove empty directories</span>
<span class="n">py</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">-</span><span class="n">a</span>  <span class="c1"># synonym for &quot;-s -d -e &#39;pip-log.txt&#39;&quot;</span>
<span class="n">py</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">-</span><span class="n">n</span>  <span class="c1"># dry run, only show what would be removed</span>
</pre></div>
</div>
</li>
<li><p>add a new option “py.test –funcargs” which shows available funcargs
and their help strings (docstrings on their respective factory function)
for a given test path</p></li>
<li><p>display a short and concise traceback if a funcarg lookup fails</p></li>
<li><p>early-load “conftest.py” files in non-dot first-level sub directories.
allows to conveniently keep and access test-related options in a <code class="docutils literal notranslate"><span class="pre">test</span></code>
subdir and still add command line options.</p></li>
<li><p>fix issue67: new super-short traceback-printing option: “–tb=line” will print a single line for each failing (python) test indicating its filename, lineno and the failure value</p></li>
<li><p>fix issue78: always call python-level teardown functions even if the
according setup failed.  This includes refinements for calling setup_module/class functions
which will now only be called once instead of the previous behaviour where they’d be called
multiple times if they raise an exception (including a Skipped exception).  Any exception
will be re-corded and associated with all tests in the according module/class scope.</p></li>
<li><p>fix issue63: assume &lt;40 columns to be a bogus terminal width, default to 80</p></li>
<li><p>fix pdb debugging to be in the correct frame on raises-related errors</p></li>
<li><p>update apipkg.py to fix an issue where recursive imports might
unnecessarily break importing</p></li>
<li><p>fix plugin links</p></li>
</ul>
</div>
<div class="section" id="id444">
<h4>1.1.1 (2009-11-24)<a class="headerlink" href="#id444" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>moved dist/looponfailing from py.test core into a new
separately released pytest-xdist plugin.</p></li>
<li><p>new junitxml plugin: –junitxml=path will generate a junit style xml file
which is processable e.g. by the Hudson CI system.</p></li>
<li><p>new option: –genscript=path will generate a standalone py.test script
which will not need any libraries installed.  thanks to Ralf Schmitt.</p></li>
<li><p>new option: –ignore will prevent specified path from collection.
Can be specified multiple times.</p></li>
<li><p>new option: –confcutdir=dir will make py.test only consider conftest
files that are relative to the specified dir.</p></li>
<li><p>new funcarg: “pytestconfig” is the pytest config object for access
to command line args and can now be easily used in a test.</p></li>
<li><p>install <code class="docutils literal notranslate"><span class="pre">py.test</span></code> and <code class="docutils literal notranslate"><span class="pre">py.which</span></code> with a <code class="docutils literal notranslate"><span class="pre">-$VERSION</span></code> suffix to
disambiguate between Python3, python2.X, Jython and PyPy installed versions.</p></li>
<li><p>new “pytestconfig” funcarg allows access to test config object</p></li>
<li><p>new “pytest_report_header” hook can return additional lines
to be displayed at the header of a test run.</p></li>
<li><p>(experimental) allow “py.test path::name1::name2::…” for pointing
to a test within a test collection directly.  This might eventually
evolve as a full substitute to “-k” specifications.</p></li>
<li><p>streamlined plugin loading: order is now as documented in
customize.html: setuptools, ENV, commandline, conftest.
also setuptools entry point names are turned to canonical names (“pytest_*”)</p></li>
<li><p>automatically skip tests that need ‘capfd’ but have no os.dup</p></li>
<li><p>allow pytest_generate_tests to be defined in classes as well</p></li>
<li><p>deprecate usage of ‘disabled’ attribute in favour of pytestmark</p></li>
<li><p>deprecate definition of Directory, Module, Class and Function nodes
in conftest.py files.  Use pytest collect hooks instead.</p></li>
<li><p>collection/item node specific runtest/collect hooks are only called exactly
on matching conftest.py files, i.e. ones which are exactly below
the filesystem path of an item</p></li>
<li><p>change: the first pytest_collect_directory hook to return something
will now prevent further hooks to be called.</p></li>
<li><p>change: figleaf plugin now requires –figleaf to run.  Also
change its long command line options to be a bit shorter (see py.test -h).</p></li>
<li><p>change: pytest doctest plugin is now enabled by default and has a
new option –doctest-glob to set a pattern for file matches.</p></li>
<li><p>change: remove internal py._* helper vars, only keep py._pydir</p></li>
<li><p>robustify capturing to survive if custom pytest_runtest_setup
code failed and prevented the capturing setup code from running.</p></li>
<li><p>make py.test.* helpers provided by default plugins visible early -
works transparently both for pydoc and for interactive sessions
which will regularly see e.g. py.test.mark and py.test.importorskip.</p></li>
<li><p>simplify internal plugin manager machinery</p></li>
<li><p>simplify internal collection tree by introducing a RootCollector node</p></li>
<li><p>fix assert reinterpreation that sees a call containing “keyword=…”</p></li>
<li><p>fix issue66: invoke pytest_sessionstart and pytest_sessionfinish
hooks on worker nodes during dist-testing, report module/session teardown
hooks correctly.</p></li>
<li><p>fix issue65: properly handle dist-testing if no
execnet/py lib installed remotely.</p></li>
<li><p>skip some install-tests if no execnet is available</p></li>
<li><p>fix docs, fix internal bin/ script generation</p></li>
</ul>
</div>
<div class="section" id="id445">
<h4>1.1.0 (2009-11-05)<a class="headerlink" href="#id445" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>introduce automatic plugin registration via ‘pytest11’
entrypoints via setuptools’ pkg_resources.iter_entry_points</p></li>
<li><p>fix py.test dist-testing to work with execnet &gt;= 1.0.0b4</p></li>
<li><p>re-introduce py.test.cmdline.main() for better backward compatibility</p></li>
<li><p>svn paths: fix a bug with path.check(versioned=True) for svn paths,
allow ‘%’ in svn paths, make svnwc.update() default to interactive mode
like in 1.0.x and add svnwc.update(interactive=False) to inhibit interaction.</p></li>
<li><p>refine distributed tarball to contain test and no pyc files</p></li>
<li><p>try harder to have deprecation warnings for py.compat.* accesses
report a correct location</p></li>
</ul>
</div>
<div class="section" id="id446">
<h4>1.0.3<a class="headerlink" href="#id446" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>adjust and improve docs</p></li>
<li><p>remove py.rest tool and internal namespace - it was
never really advertised and can still be used with
the old release if needed.  If there is interest
it could be revived into its own tool i guess.</p></li>
<li><p>fix issue48 and issue59: raise an Error if the module
from an imported test file does not seem to come from
the filepath - avoids “same-name” confusion that has
been reported repeatedly</p></li>
<li><p>merged Ronny’s nose-compatibility hacks: now
nose-style setup_module() and setup() functions are
supported</p></li>
<li><p>introduce generalized py.test.mark function marking</p></li>
<li><p>reshuffle / refine command line grouping</p></li>
<li><p>deprecate parser.addgroup in favour of getgroup which creates option group</p></li>
<li><p>add –report command line option that allows to control showing of skipped/xfailed sections</p></li>
<li><p>generalized skipping: a new way to mark python functions with skipif or xfail
at function, class and modules level based on platform or sys-module attributes.</p></li>
<li><p>extend py.test.mark decorator to allow for positional args</p></li>
<li><p>introduce and test “py.cleanup -d” to remove empty directories</p></li>
<li><p>fix issue #59 - robustify unittest test collection</p></li>
<li><p>make bpython/help interaction work by adding an __all__ attribute
to ApiModule, cleanup initpkg</p></li>
<li><p>use MIT license for pylib, add some contributors</p></li>
<li><p>remove py.execnet code and substitute all usages with ‘execnet’ proper</p></li>
<li><p>fix issue50 - cached_setup now caches more to expectations
for test functions with multiple arguments.</p></li>
<li><p>merge Jarko’s fixes, issue #45 and #46</p></li>
<li><p>add the ability to specify a path for py.lookup to search in</p></li>
<li><p>fix a funcarg cached_setup bug probably only occurring
in distributed testing and “module” scope with teardown.</p></li>
<li><p>many fixes and changes for making the code base python3 compatible,
many thanks to Benjamin Peterson for helping with this.</p></li>
<li><p>consolidate builtins implementation to be compatible with &gt;=2.3,
add helpers to ease keeping 2 and 3k compatible code</p></li>
<li><p>deprecate py.compat.doctest|subprocess|textwrap|optparse</p></li>
<li><p>deprecate py.magic.autopath, remove py/magic directory</p></li>
<li><p>move pytest assertion handling to py/code and a pytest_assertion
plugin, add “–no-assert” option, deprecate py.magic namespaces
in favour of (less) py.code ones.</p></li>
<li><p>consolidate and cleanup py/code classes and files</p></li>
<li><p>cleanup py/misc, move tests to bin-for-dist</p></li>
<li><p>introduce delattr/delitem/delenv methods to py.test’s monkeypatch funcarg</p></li>
<li><p>consolidate py.log implementation, remove old approach.</p></li>
<li><p>introduce py.io.TextIO and py.io.BytesIO for distinguishing between
text/unicode and byte-streams (uses underlying standard lib io.*
if available)</p></li>
<li><p>make py.unittest_convert helper script available which converts “unittest.py”
style files into the simpler assert/direct-test-classes py.test/nosetests
style.  The script was written by Laura Creighton.</p></li>
<li><p>simplified internal localpath implementation</p></li>
</ul>
</div>
<div class="section" id="id447">
<h4>1.0.2 (2009-08-27)<a class="headerlink" href="#id447" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>fixing packaging issues, triggered by fedora redhat packaging,
also added doc, examples and contrib dirs to the tarball.</p></li>
<li><p>added a documentation link to the new django plugin.</p></li>
</ul>
</div>
<div class="section" id="id448">
<h4>1.0.1 (2009-08-19)<a class="headerlink" href="#id448" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>added a ‘pytest_nose’ plugin which handles nose.SkipTest,
nose-style function/method/generator setup/teardown and
tries to report functions correctly.</p></li>
<li><p>capturing of unicode writes or encoded strings to sys.stdout/err
work better, also terminalwriting was adapted and somewhat
unified between windows and linux.</p></li>
<li><p>improved documentation layout and content a lot</p></li>
<li><p>added a “–help-config” option to show conftest.py / ENV-var names for
all longopt cmdline options, and some special conftest.py variables.
renamed ‘conf_capture’ conftest setting to ‘option_capture’ accordingly.</p></li>
<li><p>fix issue #27: better reporting on non-collectable items given on commandline
(e.g. pyc files)</p></li>
<li><p>fix issue #33: added –version flag (thanks Benjamin Peterson)</p></li>
<li><p>fix issue #32: adding support for “incomplete” paths to wcpath.status()</p></li>
<li><p>“Test” prefixed classes are <em>not</em> collected by default anymore if they
have an __init__ method</p></li>
<li><p>monkeypatch setenv() now accepts a “prepend” parameter</p></li>
<li><p>improved reporting of collection error tracebacks</p></li>
<li><p>simplified multicall mechanism and plugin architecture,
renamed some internal methods and argnames</p></li>
</ul>
</div>
<div class="section" id="id449">
<h4>1.0.0 (2009-08-04)<a class="headerlink" href="#id449" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>more terse reporting try to show filesystem path relatively to current dir</p></li>
<li><p>improve xfail output a bit</p></li>
</ul>
</div>
<div class="section" id="b9-2009-07-31">
<h4>1.0.0b9 (2009-07-31)<a class="headerlink" href="#b9-2009-07-31" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>cleanly handle and report final teardown of test setup</p></li>
<li><p>fix svn-1.6 compat issue with py.path.svnwc().versioned()
(thanks Wouter Vanden Hove)</p></li>
<li><p>setup/teardown or collection problems now show as ERRORs
or with big “E“‘s in the progress lines.  they are reported
and counted separately.</p></li>
<li><p>dist-testing: properly handle test items that get locally
collected but cannot be collected on the remote side - often
due to platform/dependency reasons</p></li>
<li><p>simplified py.test.mark API - see keyword plugin documentation</p></li>
<li><p>integrate better with logging: capturing now by default captures
test functions and their immediate setup/teardown in a single stream</p></li>
<li><p>capsys and capfd funcargs now have a readouterr() and a close() method
(underlyingly py.io.StdCapture/FD objects are used which grew a
readouterr() method as well to return snapshots of captured out/err)</p></li>
<li><p>make assert-reinterpretation work better with comparisons not
returning bools (reported with numpy from thanks maciej fijalkowski)</p></li>
<li><p>reworked per-test output capturing into the pytest_iocapture.py plugin
and thus removed capturing code from config object</p></li>
<li><p>item.repr_failure(excinfo) instead of item.repr_failure(excinfo, outerr)</p></li>
</ul>
</div>
<div class="section" id="b8-2009-07-22">
<h4>1.0.0b8 (2009-07-22)<a class="headerlink" href="#b8-2009-07-22" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>pytest_unittest-plugin is now enabled by default</p></li>
<li><p>introduced pytest_keyboardinterrupt hook and
refined pytest_sessionfinish hooked, added tests.</p></li>
<li><p>workaround a buggy logging module interaction (“closing already closed
files”).  Thanks to Sridhar Ratnakumar for triggering.</p></li>
<li><p>if plugins use “py.test.importorskip” for importing
a dependency only a warning will be issued instead
of exiting the testing process.</p></li>
<li><p>many improvements to docs:
- refined funcargs doc , use the term “factory” instead of “provider”
- added a new talk/tutorial doc page
- better download page
- better plugin docstrings
- added new plugins page and automatic doc generation script</p></li>
<li><p>fixed teardown problem related to partially failing funcarg setups
(thanks MrTopf for reporting), “pytest_runtest_teardown” is now
always invoked even if the “pytest_runtest_setup” failed.</p></li>
<li><p>tweaked doctest output for docstrings in py modules,
thanks Radomir.</p></li>
</ul>
</div>
<div class="section" id="b7">
<h4>1.0.0b7<a class="headerlink" href="#b7" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>renamed py.test.xfail back to py.test.mark.xfail to avoid
two ways to decorate for xfail</p></li>
<li><p>re-added py.test.mark decorator for setting keywords on functions
(it was actually documented so removing it was not nice)</p></li>
<li><p>remove scope-argument from request.addfinalizer() because
request.cached_setup has the scope arg. TOOWTDI.</p></li>
<li><p>perform setup finalization before reporting failures</p></li>
<li><p>apply modified patches from Andreas Kloeckner to allow
test functions to have no func_code (#22) and to make
“-k” and function keywords work  (#20)</p></li>
<li><p>apply patch from Daniel Peolzleithner (issue #23)</p></li>
<li><p>resolve issue #18, multiprocessing.Manager() and
redirection clash</p></li>
<li><p>make __name__ == “__channelexec__” for remote_exec code</p></li>
</ul>
</div>
<div class="section" id="b3-2009-06-19">
<h4>1.0.0b3 (2009-06-19)<a class="headerlink" href="#b3-2009-06-19" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>plugin classes are removed: one now defines
hooks directly in conftest.py or global pytest_*.py
files.</p></li>
<li><p>added new pytest_namespace(config) hook that allows
to inject helpers directly to the py.test.* namespace.</p></li>
<li><p>documented and refined many hooks</p></li>
<li><p>added new style of generative tests via
pytest_generate_tests hook that integrates
well with function arguments.</p></li>
</ul>
</div>
<div class="section" id="b1">
<h4>1.0.0b1<a class="headerlink" href="#b1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>introduced new “funcarg” setup method,
see doc/test/funcarg.txt</p></li>
<li><p>introduced plugin architecture and many
new py.test plugins, see
doc/test/plugins.txt</p></li>
<li><p>teardown_method is now guaranteed to get
called after a test method has run.</p></li>
<li><p>new method: py.test.importorskip(mod,minversion)
will either import or call py.test.skip()</p></li>
<li><p>completely revised internal py.test architecture</p></li>
<li><p>new py.process.ForkedFunc object allowing to
fork execution of a function to a sub process
and getting a result back.</p></li>
</ul>
<p>XXX lots of things missing here XXX</p>
</div>
<div class="section" id="id450">
<h4>0.9.2<a class="headerlink" href="#id450" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>refined installation and metadata, created new setup.py,
now based on setuptools/ez_setup (thanks to Ralf Schmitt
for his support).</p></li>
<li><p>improved the way of making py.* scripts available in
windows environments, they are now added to the
Scripts directory as “.cmd” files.</p></li>
<li><p>py.path.svnwc.status() now is more complete and
uses xml output from the ‘svn’ command if available
(Guido Wesdorp)</p></li>
<li><p>fix for py.path.svn* to work with svn 1.5
(Chris Lamb)</p></li>
<li><p>fix path.relto(otherpath) method on windows to
use normcase for checking if a path is relative.</p></li>
<li><p>py.test’s traceback is better parseable from editors
(follows the filenames:LINENO: MSG convention)
(thanks to Osmo Salomaa)</p></li>
<li><p>fix to javascript-generation, “py.test –runbrowser”
should work more reliably now</p></li>
<li><p>removed previously accidentally added
py.test.broken and py.test.notimplemented helpers.</p></li>
<li><p>there now is a py.__version__ attribute</p></li>
</ul>
</div>
<div class="section" id="id451">
<h4>0.9.1<a class="headerlink" href="#id451" title="Permalink to this headline">¶</a></h4>
<p>This is a fairly complete list of v0.9.1, which can
serve as a reference for developers.</p>
<ul class="simple">
<li><p>allowing + signs in py.path.svn urls [39106]</p></li>
<li><p>fixed support for Failed exceptions without excinfo in py.test [39340]</p></li>
<li><p>added support for killing processes for Windows (as well as platforms that
support os.kill) in py.misc.killproc [39655]</p></li>
<li><p>added setup/teardown for generative tests to py.test [40702]</p></li>
<li><p>added detection of FAILED TO LOAD MODULE to py.test [40703, 40738, 40739]</p></li>
<li><p>fixed problem with calling .remove() on wcpaths of non-versioned files in
py.path [44248]</p></li>
<li><p>fixed some import and inheritance issues in py.test [41480, 44648, 44655]</p></li>
<li><p>fail to run greenlet tests when pypy is available, but without stackless
[45294]</p></li>
<li><p>small fixes in rsession tests [45295]</p></li>
<li><p>fixed issue with 2.5 type representations in py.test [45483, 45484]</p></li>
<li><p>made that internal reporting issues displaying is done atomically in py.test
[45518]</p></li>
<li><p>made that non-existing files are ignored by the py.lookup script [45519]</p></li>
<li><p>improved exception name creation in py.test [45535]</p></li>
<li><p>made that less threads are used in execnet [merge in 45539]</p></li>
<li><p>removed lock required for atomic reporting issue displaying in py.test
[45545]</p></li>
<li><p>removed globals from execnet [45541, 45547]</p></li>
<li><p>refactored cleanup mechanics, made that setDaemon is set to 1 to make atexit
get called in 2.5 (py.execnet) [45548]</p></li>
<li><p>fixed bug in joining threads in py.execnet’s servemain [45549]</p></li>
<li><p>refactored py.test.rsession tests to not rely on exact output format anymore
[45646]</p></li>
<li><p>using repr() on test outcome [45647]</p></li>
<li><p>added ‘Reason’ classes for py.test.skip() [45648, 45649]</p></li>
<li><p>killed some unnecessary sanity check in py.test.collect [45655]</p></li>
<li><p>avoid using os.tmpfile() in py.io.fdcapture because on Windows it’s only
usable by Administrators [45901]</p></li>
<li><p>added support for locking and non-recursive commits to py.path.svnwc [45994]</p></li>
<li><p>locking files in py.execnet to prevent CPython from segfaulting [46010]</p></li>
<li><p>added export() method to py.path.svnurl</p></li>
<li><p>fixed -d -x in py.test [47277]</p></li>
<li><p>fixed argument concatenation problem in py.path.svnwc [49423]</p></li>
<li><p>restore py.test behaviour that it exits with code 1 when there are failures
[49974]</p></li>
<li><p>don’t fail on html files that don’t have an accompanying .txt file [50606]</p></li>
<li><p>fixed ‘utestconvert.py &lt; input’ [50645]</p></li>
<li><p>small fix for code indentation in py.code.source [50755]</p></li>
<li><p>fix _docgen.py documentation building [51285]</p></li>
<li><p>improved checks for source representation of code blocks in py.test [51292]</p></li>
<li><p>added support for passing authentication to py.path.svn* objects [52000,
52001]</p></li>
<li><p>removed sorted() call for py.apigen tests in favour of [].sort() to support
Python 2.3 [52481]</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
            <p class="logo"><a href="#">
              <img class="logo" src="_static/pytest_logo_curves.svg" alt="Logo"/>
            </a></p>
  

<div id="searchbox" style="display: none" role="search">
  <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel"
        placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
  </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Contents</h3>

<ul>
  <li><a href="#">Home</a></li>

  <li><a href="#">Get started</a></li>
  <li><a href="#">How-to guides</a></li>
  <li><a href="#">Reference guides</a></li>
  <li><a href="#">Explanation</a></li>
  <li><a href="#">Complete table of contents</a></li>
  <li><a href="#">Library of examples</a></li>
</ul>

<h3>About the project</h3>

<ul>
  <li><a href="#">Changelog</a></li>
  <li><a href="#">Contributing</a></li>
  <li><a href="#">Backwards Compatibility</a></li>
  <li><a href="#">Sponsor</a></li>
  <li><a href="#">pytest for Enterprise</a></li>
  <li><a href="#">License</a></li>
  <li><a href="#">Contact Channels</a></li>
</ul>
  <hr>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-getting-started">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#install-pytest">Install <code class="docutils literal notranslate"><span class="pre">pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#create-your-first-test">Create your first test</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#run-multiple-tests">Run multiple tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#assert-that-a-certain-exception-is-raised">Assert that a certain exception is raised</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#group-multiple-tests-in-a-class">Group multiple tests in a class</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#request-a-unique-temporary-directory-for-functional-tests">Request a unique temporary directory for functional tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#continue-reading">Continue reading</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/usage">How to invoke pytest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#specifying-which-tests-to-run">Specifying which tests to run</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#getting-help-on-version-option-names-environment-variables">Getting help on version, option names, environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#profiling-test-execution-duration">Profiling test execution duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#managing-loading-of-plugins">Managing loading of plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#other-ways-of-calling-pytest">Other ways of calling pytest</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/assert">How to write and report assertions in tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#asserting-with-the-assert-statement">Asserting with the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#assertions-about-expected-exceptions">Assertions about expected exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#assertions-about-expected-warnings">Assertions about expected warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#making-use-of-context-sensitive-comparisons">Making use of context-sensitive comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#defining-your-own-explanation-for-failed-assertions">Defining your own explanation for failed assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#assertion-introspection-details">Assertion introspection details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/fixtures">How to use fixtures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#requesting-fixtures">“Requesting” fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#autouse-fixtures-fixtures-you-don-t-have-to-request">Autouse fixtures (fixtures you don’t have to request)</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#scope-sharing-fixtures-across-classes-modules-packages-or-session">Scope: sharing fixtures across classes, modules, packages or session</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#teardown-cleanup-aka-fixture-finalization">Teardown/Cleanup (AKA Fixture finalization)</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#safe-teardowns">Safe teardowns</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#running-multiple-assert-statements-safely">Running multiple <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements safely</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fixtures-can-introspect-the-requesting-test-context">Fixtures can introspect the requesting test context</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-markers-to-pass-data-to-fixtures">Using markers to pass data to fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#factories-as-fixtures">Factories as fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#parametrizing-fixtures">Parametrizing fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-marks-with-parametrized-fixtures">Using marks with parametrized fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#modularity-using-fixtures-from-a-fixture-function">Modularity: using fixtures from a fixture function</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#automatic-grouping-of-tests-by-fixture-instances">Automatic grouping of tests by fixture instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#use-fixtures-in-classes-and-modules-with-usefixtures">Use fixtures in classes and modules with <code class="docutils literal notranslate"><span class="pre">usefixtures</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#overriding-fixtures-on-various-levels">Overriding fixtures on various levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-fixtures-from-other-projects">Using fixtures from other projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/mark">How to mark test functions with attributes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#registering-marks">Registering marks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#raising-errors-on-unknown-marks">Raising errors on unknown marks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/parametrize">How to parametrize fixtures and test functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-mark-parametrize-parametrizing-test-functions"><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>: parametrizing test functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#basic-pytest-generate-tests-example">Basic <code class="docutils literal notranslate"><span class="pre">pytest_generate_tests</span></code> example</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#more-examples">More examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/tmp_path">How to use temporary directories and files in tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#the-tmp-path-fixture">The <code class="docutils literal notranslate"><span class="pre">tmp_path</span></code> fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#the-tmp-path-factory-fixture">The <code class="docutils literal notranslate"><span class="pre">tmp_path_factory</span></code> fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#the-tmpdir-and-tmpdir-factory-fixtures">The <code class="docutils literal notranslate"><span class="pre">tmpdir</span></code> and <code class="docutils literal notranslate"><span class="pre">tmpdir_factory</span></code> fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#the-default-base-temporary-directory">The default base temporary directory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/monkeypatch">How to monkeypatch/mock modules and environments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#monkeypatching-functions">Monkeypatching functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#monkeypatching-returned-objects-building-mock-classes">Monkeypatching returned objects: building mock classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#global-patch-example-preventing-requests-from-remote-operations">Global patch example: preventing “requests” from remote operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#monkeypatching-environment-variables">Monkeypatching environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#monkeypatching-dictionaries">Monkeypatching dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/doctest">How to run doctests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#encoding">Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-doctest-options">Using ‘doctest’ options</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#continue-on-failure">Continue on failure</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#output-format">Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-specific-features">pytest-specific features</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#alternatives">Alternatives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/cache">How to re-run failed tests and maintain state between test runs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#rerunning-only-failures-or-failures-first">Rerunning only failures or failures first</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#behavior-when-no-tests-failed-in-the-last-run">Behavior when no tests failed in the last run</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#the-new-config-cache-object">The new config.cache object</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#inspecting-cache-content">Inspecting Cache content</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#clearing-cache-content">Clearing Cache content</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#stepwise">Stepwise</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/logging">How to manage logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#caplog-fixture">caplog fixture</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#live-logs">Live Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#customizing-colors">Customizing Colors</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#release-notes">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#incompatible-changes-in-pytest-3-4">Incompatible changes in pytest 3.4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/capture-stdout-stderr">How to capture stdout/stderr output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#default-stdout-stderr-stdin-capturing-behaviour">Default stdout/stderr/stdin capturing behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#setting-capturing-methods-or-disabling-capturing">Setting capturing methods or disabling capturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-print-statements-for-debugging">Using print statements for debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#accessing-captured-output-from-a-test-function">Accessing captured output from a test function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/capture-warnings">How to capture warnings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#controlling-warnings">Controlling warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-mark-filterwarnings"><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.filterwarnings</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#disabling-warnings-summary">Disabling warnings summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#disabling-warning-capture-entirely">Disabling warning capture entirely</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#deprecationwarning-and-pendingdeprecationwarning">DeprecationWarning and PendingDeprecationWarning</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#ensuring-code-triggers-a-deprecation-warning">Ensuring code triggers a deprecation warning</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#warns">Asserting warnings with the warns function</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#recwarn">Recording warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#additional-use-cases-of-warnings-in-tests">Additional use cases of warnings in tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#custom-failure-messages">Custom failure messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#internal-pytest-warnings">Internal pytest warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#resource-warnings">Resource Warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/skipping">How to use skip and xfail to deal with tests that cannot succeed</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#skipping-test-functions">Skipping test functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#xfail-mark-test-functions-as-expected-to-fail">XFail: mark test functions as expected to fail</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#skip-xfail-with-parametrize">Skip/xfail with parametrize</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/plugins">How to install and use plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#requiring-loading-plugins-in-a-test-module-or-conftest-file">Requiring/Loading plugins in a test module or conftest file</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#finding-out-which-plugins-are-active">Finding out which plugins are active</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#deactivating-unregistering-a-plugin-by-name">Deactivating / unregistering a plugin by name</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/writing_plugins">Writing plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#plugin-discovery-order-at-tool-startup">Plugin discovery order at tool startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#conftest-py-local-per-directory-plugins">conftest.py: local per-directory plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#writing-your-own-plugin">Writing your own plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#making-your-plugin-installable-by-others">Making your plugin installable by others</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#assertion-rewriting">Assertion Rewriting</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#requiring-loading-plugins-in-a-test-module-or-conftest-file">Requiring/Loading plugins in a test module or conftest file</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#accessing-another-plugin-by-name">Accessing another plugin by name</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#registering-custom-markers">Registering custom markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#testing-plugins">Testing plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/writing_hook_functions">Writing hook functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#hook-function-validation-and-execution">hook function validation and execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#firstresult-stop-at-first-non-none-result">firstresult: stop at first non-None result</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#hookwrapper-executing-around-other-hooks">hookwrapper: executing around other hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#hook-function-ordering-call-example">Hook function ordering / call example</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#declaring-new-hooks">Declaring new hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-hooks-in-pytest-addoption">Using hooks in pytest_addoption</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#optionally-using-hooks-from-3rd-party-plugins">Optionally using hooks from 3rd party plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#storing-data-on-items-across-hook-functions">Storing data on items across hook functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/existingtestsuite">How to use pytest with an existing test suite</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#running-an-existing-test-suite-with-pytest">Running an existing test suite with pytest</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/unittest">How to use <code class="docutils literal notranslate"><span class="pre">unittest</span></code>-based tests with pytest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#benefits-out-of-the-box">Benefits out of the box</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-features-in-unittest-testcase-subclasses">pytest features in <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#mixing-pytest-fixtures-into-unittest-testcase-subclasses-using-marks">Mixing pytest fixtures into <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code> subclasses using marks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#using-autouse-fixtures-and-accessing-other-fixtures">Using autouse fixtures and accessing other fixtures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/nose">How to run tests written for nose</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#supported-nose-idioms">Supported nose Idioms</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#unsupported-idioms-known-issues">Unsupported idioms / known issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#migrating-from-nose-to-pytest">Migrating from nose to pytest</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/xunit_setup">How to implement xunit-style set-up</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#module-level-setup-teardown">Module level setup/teardown</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#class-level-setup-teardown">Class level setup/teardown</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#method-and-function-level-setup-teardown">Method and function level setup/teardown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-how-to/bash-completion">How to set up bash completion</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-reference/fixtures">Fixtures reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#built-in-fixtures">Built-in fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fixture-availability">Fixture availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fixture-instantiation-order">Fixture instantiation order</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-reference/plugin_list">Plugin List</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-reference/customize">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#command-line-options-and-configuration-file-settings">Command line options and configuration file settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#configuration-file-formats">Configuration file formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#initialization-determining-rootdir-and-configfile">Initialization: determining rootdir and configfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#builtin-configuration-file-options">Builtin configuration file options</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#syntax-highlighting-theme-customization">Syntax highlighting theme customization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-reference/reference">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#constants">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#marks">Marks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fixtures">Fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#hooks">Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#objects">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#global-variables">Global Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#exceptions">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#warnings">Warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#configuration-options">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#command-line-flags">Command-line Flags</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-explanation/anatomy">Anatomy of a test</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-explanation/fixtures">About fixtures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#what-fixtures-are">What fixtures are</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#improvements-over-xunit-style-setup-teardown-functions">Improvements over xUnit-style setup/teardown functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fixture-errors">Fixture errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#sharing-test-data">Sharing test data</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#a-note-about-fixture-cleanup">A note about fixture cleanup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-explanation/goodpractices">Good Integration Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#install-package-with-pip">Install package with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#conventions-for-python-test-discovery">Conventions for Python test discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#choosing-a-test-layout-import-rules">Choosing a test layout / import rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#tox">tox</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#do-not-run-via-setuptools">Do not run via setuptools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-explanation/flaky">Flaky tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#why-flaky-tests-are-a-problem">Why flaky tests are a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#potential-root-causes">Potential root causes</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-features">Pytest features</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#other-general-strategies">Other general strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#research">Research</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-explanation/pythonpath">pytest import mechanisms and <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>/<code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#import-modes">Import modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#prepend-and-append-import-modes-scenarios"><code class="docutils literal notranslate"><span class="pre">prepend</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code> import modes scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#invoking-pytest-versus-python-m-pytest">Invoking <code class="docutils literal notranslate"><span class="pre">pytest</span></code> versus <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span></code></a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-example/index">Examples and customization tricks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/reportingdemo">Demo of Python failure reports with pytest</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/simple">Basic patterns and examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/parametrize">Parametrizing tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/markers">Working with custom markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/special">A session-fixture which can look at all collected tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/pythoncollection">Changing standard (Python) test discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#document-example/nonpython">Working with non-python tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-backwards-compatibility">Backwards Compatibility Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#history">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#focus-primary-on-smooth-transition-stance-pre-6-0">Focus primary on smooth transition - stance (pre 6.0)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#python-version-support">Python version support</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-deprecations">Deprecations and Removals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#deprecated-features">Deprecated Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#removed-features">Removed Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-contributing">Contribution getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#feature-requests-and-feedback">Feature requests and feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#report-bugs">Report bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#fix-bugs">Fix bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#implement-features">Implement features</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#write-documentation">Write documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#submitting-plugins-to-pytest-dev">Submitting Plugins to pytest-dev</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#preparing-pull-requests">Preparing Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#joining-the-development-team">Joining the Development Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#backporting-bug-fixes-for-the-next-patch-release">Backporting bug fixes for the next patch release</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#handling-stale-issues-prs">Handling stale issues/PRs</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#closing-issues">Closing Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-development_guide">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-sponsor">Sponsor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#opencollective">OpenCollective</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-tidelift">pytest for enterprise</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-contact">Contact channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-history">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-historical-notes">Historical Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#marker-revamp-and-iteration">Marker revamp and iteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#cache-plugin-integrated-into-the-core">cache plugin integrated into the core</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#funcargs-and-pytest-funcarg">funcargs and <code class="docutils literal notranslate"><span class="pre">pytest_funcarg__</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-yield-fixture-decorator"><code class="docutils literal notranslate"><span class="pre">&#64;pytest.yield_fixture</span></code> decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-header-in-setup-cfg"><code class="docutils literal notranslate"><span class="pre">[pytest]</span></code> header in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#applying-marks-to-pytest-mark-parametrize-parameters">Applying marks to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-mark-parametrize-argument-names-as-a-tuple"><code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code> argument names as a tuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#setup-is-now-an-autouse-fixture">setup: is now an “autouse fixture”</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#conditions-as-strings-instead-of-booleans">Conditions as strings instead of booleans</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#pytest-set-trace"><code class="docutils literal notranslate"><span class="pre">pytest.set_trace()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#compat-properties">“compat” properties</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-talks">Talks and Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contents.html#books">Books</a></li>
<li class="toctree-l2"><a class="reference internal" href="contents.html#talks-and-blog-postings">Talks and blog postings</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-announce/index">Release announcements</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contents.html#document-changelog">Changelog</a></li>
</ul>


<hr><h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul><h3>Useful Links</h3>
<ul>
  <li><a href="https://pypi.org/project/pytest/">pytest @ PyPI</a></li>
  <li><a href="https://github.com/pytest-dev/pytest/">pytest @ GitHub</a></li>
  <li><a href="https://github.com/pytest-dev/pytest/issues">Issue Tracker</a></li>
  <li><a href="https://media.readthedocs.org/pdf/pytest/latest/pytest.pdf">PDF Documentation</a>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, holger krekel and pytest-dev team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
    <script>
      if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = true;
      }
    </script>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>